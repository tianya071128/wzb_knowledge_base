import{_ as t,D as r,c as o,l as a,I as l,aR as i,a as n,o as s,f6 as p,f7 as c,f8 as h,f9 as d,fa as m,fb as _,fc as g,fd as u,fe as f,ff as b,fg as P,fh as k,fi as q,fj as v,fk as y,fl as x,fm as z}from"./chunks/framework.DLAwTCsc.js";const J=JSON.parse('{"title":"性能(Performance)","description":"","frontmatter":{},"headers":[],"relativePath":"devtools/performance.md","filePath":"04_更多/02_开发者工具/24_性能.md","lastUpdated":1739447932000}'),C={name:"devtools/performance.md"},S=i('<h1 id="性能-performance" tabindex="-1">性能(Performance) <a class="header-anchor" href="#性能-performance" aria-label="Permalink to &quot;性能(Performance)&quot;">​</a></h1><h2 id="启动录制" tabindex="-1">启动录制 <a class="header-anchor" href="#启动录制" aria-label="Permalink to &quot;启动录制&quot;">​</a></h2><p>可以录制<strong>运行时</strong>或<strong>加载性能</strong>。</p><h3 id="录制运行时性能" tabindex="-1">录制运行时性能 <a class="header-anchor" href="#录制运行时性能" aria-label="Permalink to &quot;录制运行时性能&quot;">​</a></h3><p>分析网页运行时（而非加载）的性能时，</p><p><img src="'+p+'" alt="img" loading="lazy"></p><h3 id="录制加载性能" tabindex="-1">录制加载性能 <a class="header-anchor" href="#录制加载性能" aria-label="Permalink to &quot;录制加载性能&quot;">​</a></h3><p>分析网页加载（而非运行时）的性能，点击 开始分析并加载页面 图标按钮。首先，开发者工具会前往 about:blank，以清除所有剩余的屏幕截图和跟踪记录。然后，开发者工具会在页面重新加载时记录性能指标，然后在加载完成后几秒钟自动停止记录。</p><p><img src="'+c+'" alt="img" loading="lazy"></p><h2 id="设置" tabindex="-1">设置 <a class="header-anchor" href="#设置" aria-label="Permalink to &quot;设置&quot;">​</a></h2><p>可通过以下配置项启用相应功能：</p><ul><li><p>录制时截取屏幕截图：可在录制过程中截取每一帧的屏幕截图</p></li><li><p>录制时强制进行垃圾回收：强制进行垃圾回收。</p></li><li><p>停用 JavaScript 示例：停用主要轨道的 <code>JavaScript</code> 函数的详细调用堆栈</p></li><li><p>录制时限制网络带宽：录制时限制网络流量</p></li><li><p>录制时限制 CPU 占用率：限制 CPU 占用率。限制是相对于计算机功能而言的。例如，2 倍减速选项会使 CPU 的运行速度比平时慢 2 倍。开发者工具无法真正模拟移动设备的 CPU，因为移动设备的架构与桌面设备和笔记本电脑的架构截然不同。</p></li><li><p>启用高级绘制插桩：查看详细的绘制插桩</p></li><li><p>模拟硬件并发：使用不同数量的处理器核心来测试应用性能</p></li></ul><p><img src="'+h+'" alt="img" loading="lazy"></p><h2 id="分析性能记录" tabindex="-1">分析性能记录 <a class="header-anchor" href="#分析性能记录" aria-label="Permalink to &quot;分析性能记录&quot;">​</a></h2><p>当启用了录制后, 性能面板会提供大量数据，用于分析刚刚发生的情况的性能。</p><h3 id="搜索活动" tabindex="-1">搜索活动 <a class="header-anchor" href="#搜索活动" aria-label="Permalink to &quot;搜索活动&quot;">​</a></h3><p>在性能面板底部打开搜索框：<code>Ctrl+F</code></p><h3 id="时间轴概览" tabindex="-1">时间轴概览 <a class="header-anchor" href="#时间轴概览" aria-label="Permalink to &quot;时间轴概览&quot;">​</a></h3><p>在性能面板的操作栏下方以及记录的顶部，可以看到包含 CPU 和 NET 图表的时间轴概览部分。</p><p><img src="'+d+'" alt="img" loading="lazy"></p><h4 id="选择录制的一部分" tabindex="-1">选择录制的一部分 <a class="header-anchor" href="#选择录制的一部分" aria-label="Permalink to &quot;选择录制的一部分&quot;">​</a></h4><p>可通过以下方式选中部分：</p>',22),T=a("p",null,"点击并按住，然后在时间轴概览中向左或向右拖动：",-1),A=a("li",null,[a("p",null,"使用键盘快捷操作："),a("ol",null,[a("li",null,"聚焦于主轨道或其任何相邻轨道。"),a("li",null,"使用 W、A、S、D 键分别可以放大、向左、缩小和向右移动。")])],-1),I=a("h4",{id:"创建面包屑导航以及在缩放级别之间进行切换",tabindex:"-1"},[n("创建面包屑导航以及在缩放级别之间进行切换 "),a("a",{class:"header-anchor",href:"#创建面包屑导航以及在缩放级别之间进行切换","aria-label":'Permalink to "创建面包屑导航以及在缩放级别之间进行切换"'},"​")],-1),N=a("p",null,"通过时间轴概览，您可以连续创建多个嵌套面包屑导航，增加缩放级别，然后跳转到所选级别。",-1),U=i('<h3 id="主要-主线程活动" tabindex="-1">主要 - 主线程活动 <a class="header-anchor" href="#主要-主线程活动" aria-label="Permalink to &quot;主要 - 主线程活动&quot;">​</a></h3><p>通过 <code>Main</code> 查看发生在页面主线程上的活动。</p><ul><li><p>系统会使用红色三角形突出显示耗时较长的任务，并将时长超过 50 毫秒的部分用红色三角形表示：最初的 50 毫秒不是，后面超出 50 毫秒的会标注</p></li><li><p>主轨道可以显示箭头，将以下发起者及其导致的事件联系起来：</p><ul><li>样式或布局失效 -&gt; 重新计算样式或布局</li><li>请求动画帧 -&gt; 已触发动画帧</li><li>请求空闲回调 -&gt; 触发空闲回调</li><li>安装计时器 -&gt; 计时器已触发</li><li>创建 WebSocket -&gt; 发送... 和接收 WebSocket 握手或销毁 WebSocket</li></ul></li></ul><p><img src="'+m+'" alt="img" loading="lazy"></p><h4 id="查看绘制性能分析器" tabindex="-1">查看绘制性能分析器 <a class="header-anchor" href="#查看绘制性能分析器" aria-label="Permalink to &quot;查看绘制性能分析器&quot;">​</a></h4><p>查看有关绘制事件的高级信息：</p><ol><li>启用 高级绘制插桩 功能。</li><li>在主要轨道中选择一个 Paint 事件。</li></ol><h4 id="根-activity" tabindex="-1">根 activity <a class="header-anchor" href="#根-activity" aria-label="Permalink to &quot;根 activity&quot;">​</a></h4><p>在自下而上标签页、调用树标签页和事件日志标签页中提到的 <strong>根 activity</strong> 概念。</p><p>根 activity 是指会导致浏览器执行某些工作的 activity。例如，当您点击某个网页时，浏览器会触发一个 Event activity 作为根 activity。然后，该 Event 可能会导致处理程序执行。</p><p>在主要轨道的火焰图中，根活动位于图表顶部。在调用树标签页和事件日志标签页中，根 activity 是顶层项。</p><h4 id="自下而上标签页" tabindex="-1">自下而上标签页 <a class="header-anchor" href="#自下而上标签页" aria-label="Permalink to &quot;自下而上标签页&quot;">​</a></h4><p>自下而上标签页查看哪些根活动导致的工作量最大：</p><ul><li>自用时间：表示直接在该活动的所有发生实例中花费的汇总时间。</li><li>总时间：显示的是该活动或其任一子活动花费的总时长。</li><li>活动：<strong>注意：这里嵌套不是表示调用堆栈，更是调用堆栈反着来的，表示在哪里调用的这个函数</strong>。</li></ul><p><img src="'+_+'" alt="img" loading="lazy"></p><h4 id="调用树标签页" tabindex="-1">调用树标签页 <a class="header-anchor" href="#调用树标签页" aria-label="Permalink to &quot;调用树标签页&quot;">​</a></h4><p>调用树标签页查看直接占用最多时间的活动：</p><ul><li>自用时间：表示直接在相应活动中花费的时间。</li><li>总时间：表示该 activity 或其任何子级上花费的时间。</li><li>活动：列的顶层是根 activity。嵌套表示调用堆栈。</li></ul><p>点击图标 <img src="'+g+'" alt="image" style="display:inline-block;" loading="lazy">, 在表格右侧显示另一个表格(执行用时最长的堆栈)。</p><p><img src="'+u+'" alt="img" loading="lazy"></p><h4 id="事件日志标签页" tabindex="-1">事件日志标签页 <a class="header-anchor" href="#事件日志标签页" aria-label="Permalink to &quot;事件日志标签页&quot;">​</a></h4><p>调用树标签页按活动在记录期间发生的顺序查看活动：</p><ul><li>开始时间：表示该活动开始的点（相对于记录开始时间）。</li><li>自身耗时：表示直接在该活动中花费的时间。</li><li>总时间：表示直接在该活动或其任何子活动中花费的时间。</li><li>活动：活动名称</li></ul><p><img src="'+f+'" alt="img" loading="lazy"></p><h3 id="内存-查看内存指标" tabindex="-1">内存 - 查看内存指标 <a class="header-anchor" href="#内存-查看内存指标" aria-label="Permalink to &quot;内存 - 查看内存指标&quot;">​</a></h3><p><img src="'+b+'" alt="img" loading="lazy"></p><h3 id="时间-显示时间" tabindex="-1">时间 - 显示时间 <a class="header-anchor" href="#时间-显示时间" aria-label="Permalink to &quot;时间 - 显示时间&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">提示</p><p>如果没有录制到如下标记的话，就不会存在 时间轨道。此时可<a href="/wzb_knowledge_base/devtools/performance.html#录制加载性能">录制加载性能</a>。</p></div><p>在时间轨道中，查看如下重要标记：</p><ul><li><a href="https://developer.mozilla.org/docs/Glossary/First_paint" target="_blank" rel="noreferrer">首次绘制 (FP)</a></li><li><a href="https://web.dev/articles/fcp?hl=zh-cn" target="_blank" rel="noreferrer">First Contentful Paint (FCP)</a></li><li><a href="https://web.dev/articles/lcp?hl=zh-cn" target="_blank" rel="noreferrer">Largest Contentful Paint (LCP)</a></li><li><a href="https://developer.mozilla.org/docs/Web/API/Window/DOMContentLoaded_event" target="_blank" rel="noreferrer">DOMContentLoaded 事件 (DCL)</a></li><li><a href="https://developer.mozilla.org/docs/Web/API/Window/load_event" target="_blank" rel="noreferrer">加载事件 (L)</a></li><li>您的自定义 <a href="https://developer.mozilla.org/docs/Web/API/Performance/mark" target="_blank" rel="noreferrer"><code>performance.mark()</code></a> 调用。下面显示了 813.44 毫秒处的单个带有提示的标记，标记为<strong>开始运行 JavaScript</strong>。</li><li>您的自定义 <a href="https://developer.mozilla.org/docs/Web/API/Performance/measure" target="_blank" rel="noreferrer"><code>performance.measure()</code></a> 调用。下面展示了一个黄色 span，标记为<strong>慢速互动</strong>。</li></ul><p><img src="'+P+'" alt="img" loading="lazy"></p><h3 id="帧-查看-fps" tabindex="-1">帧 -- 查看 FPS <a class="header-anchor" href="#帧-查看-fps" aria-label="Permalink to &quot;帧 -- 查看 FPS&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">提示</p><p>如需查看屏幕截图，请启用 屏幕截图 后录制</p></div><p>帧轨道可以显示四种类型的帧：</p><ol><li><strong>空闲帧（白色）</strong>。无任何更改。</li><li><strong>框架（绿色）</strong>：按预期及时呈现。</li><li><strong>部分呈现的帧（黄色，较宽的虚线模式）</strong>。Chrome 已尽最大努力及时至少呈现一些外观更新。例如，如果渲染器进程的主线程（画布动画）的工作延迟，但合成器线程（滚动）及时。</li><li><strong>丢失的帧（红色，且有密集的实线图案）</strong>：Chrome 无法在合理的时间内呈现帧。</li></ol><p><img src="'+k+'" alt="img" loading="lazy"></p><h4 id="查看图层信息" tabindex="-1">查看图层信息 <a class="header-anchor" href="#查看图层信息" aria-label="Permalink to &quot;查看图层信息&quot;">​</a></h4><p>查看每一帧的图层信息：</p><p><img src="'+q+'" alt="img" loading="lazy"></p><h3 id="网络-查看网络请求瀑布流" tabindex="-1">网络 - 查看网络请求瀑布流 <a class="header-anchor" href="#网络-查看网络请求瀑布流" aria-label="Permalink to &quot;网络 - 查看网络请求瀑布流&quot;">​</a></h3><p><img src="'+v+'" alt="img" loading="lazy"></p><h3 id="互动-查看用户互动" tabindex="-1">互动 - 查看用户互动 <a class="header-anchor" href="#互动-查看用户互动" aria-label="Permalink to &quot;互动 - 查看用户互动&quot;">​</a></h3><p>查看用户互动，跟踪潜在的响应速度问题，如需查看互动，需要录制到用户互动的操作才会显示</p><p><img src="'+y+'" alt="img" loading="lazy"></p><p>对于时长超过 200 毫秒的互动，互动 轨道还会在 概要 标签页和悬停提示中显示 Interaction to Next Paint (INP) 警告</p><p><img src="'+x+'" alt="img" loading="lazy"></p><h3 id="gpu-查看-gpu-活动" tabindex="-1">GPU - 查看 GPU 活动 <a class="header-anchor" href="#gpu-查看-gpu-活动" aria-label="Permalink to &quot;GPU - 查看 GPU 活动&quot;">​</a></h3><p><img src="'+z+'" alt="img" loading="lazy"></p><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="https://web.dev/articles/vitals?hl=zh-cn" target="_blank" rel="noreferrer">性能指标</a></li></ul>',50);function V(W,w,D,F,E,L){const e=r("ShowVideo");return s(),o("div",null,[S,a("ul",null,[a("li",null,[T,l(e,{src:"/video/05.mp4"})]),A]),I,N,l(e,{src:"/video/06.mp4"}),U])}const $=t(C,[["render",V]]);export{J as __pageData,$ as default};
