import{d8 as t,d as D,c as M,cc as T,o as m,f as P,i as o,w as l,m as w,t as g,B as k,bs as Y,bT as C,by as F,bU as x,r as $,v as B,bK as I,b as V,ad as h,bu as z,bh as K,l as y,C as Q,bv as j,aN as U,Q as G,ac as H,bm as J,_ as O}from"./index-b80d5ef5.js";const se=e=>t.value.request.post(`${t.value.SYSTEMURL}/position/listPage`,e),W=e=>t.value.request.post(`${t.value.SYSTEMURL}/position/add`,e),X=e=>t.value.request.post(`${t.value.SYSTEMURL}/position/edit`,e),ae=e=>t.value.request.post(`${t.value.SYSTEMURL}/position/enable/${e}`),oe=e=>t.value.request.post(`${t.value.SYSTEMURL}/position/disable/${e}`),le=e=>t.value.request.post(`${t.value.SYSTEMURL}/position/delete/${e}`),ne=e=>t.value.request.post(`${t.value.SYSTEMURL}/position/listPositionMember?id=${e}`),ie=e=>t.value.request.post(`${t.value.SYSTEMURL}/position/selectPersonnel`,e),Z=D({__name:"PosDetails",props:{details:{}},setup(e){const v=e,p=M(()=>v.details.status===T?"success":"danger");return(d,r)=>{const n=C,_=F,f=x;return m(),P("div",null,[o(f,{class:"user_center-desciptions",border:!0,column:2},{default:l(()=>[o(n,{label:"职位名称"},{default:l(()=>[w(g(d.details.positionName||"-"),1)]),_:1}),o(n,{label:"状态"},{default:l(()=>[o(_,{type:p.value},{default:l(()=>[w(g(k(Y)(d.details.status,"status")||"-"),1)]),_:1},8,["type"])]),_:1}),o(n,{label:"说明",span:2},{default:l(()=>[w(g(d.details.remark||"-"),1)]),_:1})]),_:1})])}}}),ee=D({__name:"PosAddAndEdit",props:{drawerModel:{type:Boolean},rowData:{},comState:{}},emits:["update:drawerModel","refresh"],setup(e,{emit:v}){const p=$(),d=v,r=e,n=B(r,"drawerModel",d),_=()=>{var i;n.value=!1,(i=p.value)==null||i.resetFields()},f=I({status:[{required:!0,message:"请选择状态",trigger:"change"}],positionName:[{required:!0,message:"请输入职位名称",trigger:"blur"}]}),b={id:"",positionName:"",remark:"",status:T},s=$({...b}),S=M(()=>r.comState==="view"),c=i=>r.comState===i,L=M(()=>({view:"查看职位",edit:"编辑职位",add:"新增职位"})[r.comState]),N=async i=>{var a;await((a=p.value)==null?void 0:a.validate()),c("edit")?(await X(s.value),U.success("修改职位成功")):(await W(s.value),U.success("新增职位成功")),i==="submitContinue"&&(s.value={...b}),d("refresh")},R=async()=>{c("add")&&(s.value={...b}),!c("add")&&r.rowData&&(s.value={...r.rowData})};return(i,a)=>{const A=G,E=H,q=J;return m(),V(j,{modelValue:k(n),"onUpdate:modelValue":a[4]||(a[4]=u=>Q(n)?n.value=u:null),title:L.value,onClose:_,"show-load":R},h({default:l(()=>[S.value?y("",!0):(m(),V(q,{key:0,ref_key:"ruleFormRef",ref:p,rules:f,model:s.value,"label-width":"100px","label-position":"left"},{default:l(()=>[o(E,{label:"职位名称",prop:"positionName"},{default:l(()=>[o(A,{modelValue:s.value.positionName,"onUpdate:modelValue":a[0]||(a[0]=u=>s.value.positionName=u),placeholder:"请输入职位名称"},null,8,["modelValue"])]),_:1}),o(E,{label:"状态",prop:"status"},{default:l(()=>[o(K,{modelValue:s.value.status,"onUpdate:modelValue":a[1]||(a[1]=u=>s.value.status=u)},null,8,["modelValue"])]),_:1}),o(E,{label:"说明"},{default:l(()=>[o(A,{type:"textarea",modelValue:s.value.remark,"onUpdate:modelValue":a[2]||(a[2]=u=>s.value.remark=u),placeholder:"请输入说明"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])),S.value?(m(),V(Z,{key:1,details:s.value},null,8,["details"])):y("",!0)]),_:2},[S.value?void 0:{name:"footer",fn:l(()=>[o(z,{editMode:c("edit"),onClose:a[3]||(a[3]=u=>n.value=!1),"on-submit":N},null,8,["editMode"])]),key:"0"}]),1032,["modelValue","title"])}}});const ue=O(ee,[["__scopeId","data-v-bafb1052"]]);export{ue as P,oe as a,ae as b,ie as c,le as d,ne as e,se as p};
