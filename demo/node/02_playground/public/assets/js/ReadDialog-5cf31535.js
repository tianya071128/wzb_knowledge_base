/* empty css              *//* empty css              */import{I as O}from"./index-c23dfb72.js";/* empty css              */import"./index-30749bf5.js";import{d as u,o as s,f as _,a2 as D,_ as b,r as U,k as B,B as i,wR as W,t as $,l as w,bc as V,i as g,w as a,m as I,b as d,h as T,F as R,lK as z,gy as K,ch as A,xX as M,xY as X,bK as j,eK as Y,xZ as Z,cj as L,C as q,g as G,xd as H,xc as y,xU as J,xV as Q}from"./index-b80d5ef5.js";import{A as P}from"./AzPopup-b04fec03.js";import{B as S}from"./index-ae93b8ef.js";import{L as ee}from"./LoadingData-5a6f27a3.js";import{E as oe}from"./index-0e679d15.js";import{u as te}from"./useReadDialog-3882ddba.js";import"./use-route-c2b2b5be.js";import"./AzLink-d3d666fe.js";import"./use-id-d3187131.js";const se=u({__name:"ImgView",props:{file:{},style:{},onLoad:{},isEmbed:{type:Boolean}},setup(n){return(o,e)=>(s(),_("img",{class:"img_view",src:o.file.url,alt:o.file.name,style:D([{width:"100%"},o.style]),onLoad:e[0]||(e[0]=(...t)=>o.onLoad&&o.onLoad(...t))},null,44,["src","alt"]))}});const ie=b(se,[["__scopeId","data-v-89de7c1f"]]),ne=u({inheritAttrs:!1,__name:"ViewWrapper",props:{file:{},title:{default:"预览"},btnName:{default:"预览"},isBtn:{type:Boolean,default:!0},tip:{},isEmbed:{type:Boolean}},setup(n){const o=U(!1);return(e,t)=>{const l=S;return s(),_(R,null,[e.isEmbed?w("",!0):(s(),_("div",{key:0,class:"view_wrapper"},[B("img",{src:i(W)(e.file),alt:""},null,8,["src"]),e.file.name?(s(),_("span",{key:0,class:"file-name"},$(e.file.name),1)):w("",!0),B("span",null,$(e.tip),1),e.isBtn?(s(),_("div",{key:1,onTouchend:t[1]||(t[1]=V(()=>{},["stop"])),onTouchcancel:t[2]||(t[2]=V(()=>{},["stop"])),onTouchstart:t[3]||(t[3]=V(()=>{},["stop"]))},[g(l,{round:"",type:"primary",style:{width:"30vw"},onClick:t[0]||(t[0]=m=>o.value=!0)},{default:a(()=>[I($(e.btnName),1)]),_:1})],32)):w("",!0)])),e.isEmbed?w("",!0):(s(),d(P,{key:1,show:o.value,"onUpdate:show":t[4]||(t[4]=m=>o.value=m),overlay:!1,position:"right",title:e.title,style:D({width:"100vw",height:"calc(var(--vh) * 100)"}),router:""},{default:a(()=>[T(e.$slots,"default",{},void 0,!0)]),_:3},8,["show","title","style"])),e.isEmbed?(s(),_("div",{key:2,class:"view_wrapper-embed"},[T(e.$slots,"default",{},void 0,!0)])):w("",!0)],64)}}});const k=b(ne,[["__scopeId","data-v-ed2f804e"]]),le=u({__name:"OtherView",props:{file:{},isEmbed:{type:Boolean}},setup(n){return(o,e)=>(s(),d(k,{isEmbed:o.isEmbed,file:o.file,tip:"当前文件类型不支持在线预览","is-btn":!1},null,8,["isEmbed","file"]))}}),re=u({__name:"VideoView",props:{file:{},isEmbed:{type:Boolean}},setup(n){return(o,e)=>(s(),d(k,{file:o.file,title:"播放视频","btn-name":"播放",isEmbed:o.isEmbed},{default:a(()=>[B("video",{class:"video_view-video",src:o.file.url,controls:"",preload:"metadata"},null,8,["src"])]),_:1},8,["file","isEmbed"]))}});const ae=b(re,[["__scopeId","data-v-2e040e32"]]),de=u({__name:"AudioView",props:{file:{},isEmbed:{type:Boolean}},setup(n){return(o,e)=>(s(),_("audio",{onTouchstart:e[0]||(e[0]=V(()=>{},["stop"])),onTouchend:e[1]||(e[1]=V(()=>{},["stop"])),onTouchcancel:e[2]||(e[2]=V(()=>{},["stop"])),src:o.file.url,controls:"",preload:"metadata"},null,40,["src"]))}});const pe=b(de,[["__scopeId","data-v-c57823c6"]]);const _e={};function ue(n,o){const e=z;return s(),_("div",{class:"async_loading"},[g(e,{size:"24px",vertical:"",color:"#0094ff"},{default:a(()=>[I(" 资源加载中... ")]),_:1})])}const me=b(_e,[["render",ue],["__scopeId","data-v-66806460"]]),fe=u({__name:"ErrorComponent",setup(n){return(o,e)=>(s(),_("div",null,[B("span",{class:"error-tip"},"资源加载失败!请刷新页面重试")]))}});const ce=b(fe,[["__scopeId","data-v-5bba88c1"]]);function F(n){return K({loader:n,loadingComponent:me,delay:200,errorComponent:ce})}const ve=u({__name:"DocxView",props:{file:{},isEmbed:{type:Boolean}},setup(n){const o=F(()=>A(()=>import("./DocxViewWrapper-23ce86a0.js"),["./DocxViewWrapper-23ce86a0.js","./useDocxFileView-bba81b9f.js","./docx-preview-5c53b8db.js","./index-b80d5ef5.js","..\\css\\index-13cb634b.css","./LoadingData-5a6f27a3.js","./index-0e679d15.js","./use-id-d3187131.js","..\\css\\index-74a90b35.css","./index-ae93b8ef.js","./use-route-c2b2b5be.js","./AzLink-d3d666fe.js","..\\css\\AzLink-863063be.css","..\\css\\index-00d76fe6.css","..\\css\\LoadingData-12af314e.css","..\\css\\index-a5d1cd41.css","..\\css\\DocxViewWrapper-90befb57.css"],import.meta.url));return(e,t)=>(s(),d(k,{file:e.file,title:"预览DOCX",isEmbed:e.isEmbed},{default:a(()=>[g(i(o),{file:e.file},null,8,["file"])]),_:1},8,["file","isEmbed"]))}}),ye=u({__name:"ExcelView",props:{file:{},isEmbed:{type:Boolean}},setup(n){const o=F(()=>A(()=>import("./ExcelViewWrapper-60df6eb3.js"),["./ExcelViewWrapper-60df6eb3.js","./LoadingData-5a6f27a3.js","./index-0e679d15.js","./use-id-d3187131.js","./index-b80d5ef5.js","..\\css\\index-13cb634b.css","..\\css\\index-74a90b35.css","./index-ae93b8ef.js","./use-route-c2b2b5be.js","./AzLink-d3d666fe.js","..\\css\\AzLink-863063be.css","..\\css\\index-00d76fe6.css","..\\css\\LoadingData-12af314e.css","..\\css\\index-a5d1cd41.css","./index-06d8fe6c.js","..\\css\\index-71d5665b.css","..\\css\\ExcelViewWrapper-a72290e1.css"],import.meta.url));return(e,t)=>(s(),d(k,{file:e.file,title:"预览Excel",isEmbed:e.isEmbed},{default:a(()=>[g(i(o),{file:e.file},null,8,["file"])]),_:1},8,["file","isEmbed"]))}}),be=u({__name:"TxtView",props:{file:{},isEmbed:{type:Boolean}},setup(n){const o=n,{str:e,loadFile:t,loadingDataRef:l}=M(o);return(m,v)=>(s(),d(k,{file:m.file,title:"预览文件",isEmbed:m.isEmbed},{default:a(()=>[g(ee,{class:"txt_view",ref_key:"loadingDataRef",ref:l,load:i(t)},{default:a(()=>[I($(i(e)),1)]),_:1},8,["load"])]),_:1},8,["file","isEmbed"]))}});const we=b(be,[["__scopeId","data-v-2cfb7d4b"]]),ge=u({__name:"PdfView",props:{file:{},isEmbed:{type:Boolean}},emits:["scrollBottom"],setup(n,{emit:o}){const e=n,t=o,{previewUrl:l,iframeRef:m}=X(j({...Y(e),isMobile:!0}),t);return(v,h)=>{const f=oe;return s(),d(k,{file:v.file,isEmbed:v.isEmbed},{default:a(()=>[i(l)?(s(),_("iframe",{key:0,ref_key:"iframeRef",ref:m,src:`/pdfview/viewer.html?url=${i(l)}`,frameborder:"0"},null,8,["src"])):(s(),d(f,{key:1,image:"error",description:"文件异常, 无法预览"}))]),_:1},8,["file","isEmbed"])}}});const Ee=b(ge,[["__scopeId","data-v-25d46268"]]),Ve=u({__name:"FileViewWrapper",props:{modelValue:{type:Boolean},options:{},isEmbed:{type:Boolean}},emits:["update:modelValue","scrollBottom"],setup(n,{emit:o}){const e=n,t=o,{visible:l,startIndex:m,fileList:v,isDocxView:h}=Z(e,t),f=E=>{var r;return(r=v.value)==null?void 0:r.find(c=>c.url===E)},C=E=>{const r=f(E),c=H(r);return c===y.img?ie:c===y.video?ae:c===y.audio?pe:h.value?ve:c===y.excel?ye:c===y.txt?we:[y.pdf,y.ofd,y.doc,y.docx].includes(c)?Ee:le};return(E,r)=>{const c=O;return E.isEmbed?(s(!0),_(R,{key:1},G(i(v),p=>(s(),_("div",{key:p.url+p.response,style:{height:"100%"}},[i(l)?(s(),d(L(C(p.url)),{key:0,file:f(p.url),isEmbed:"",onScrollBottom:r[3]||(r[3]=x=>t("scrollBottom"))},null,40,["file"])):w("",!0)]))),128)):(s(),d(c,{key:0,show:i(l),"onUpdate:show":r[1]||(r[1]=p=>q(l)?l.value=p:null),teleport:"body",images:i(v).map(p=>p.url),"start-position":i(m),"close-on-popstate":!1,onClose:r[2]||(r[2]=p=>l.value=!1)},{image:a(({src:p,style:x,onLoad:N})=>[i(l)?(s(),d(L(C(p)),{key:0,file:f(p),style:D(x),onLoad:N,onScrollBottom:r[0]||(r[0]=ke=>t("scrollBottom"))},null,40,["file","style","onLoad"])):w("",!0)]),_:1},8,["show","images","start-position"]))}}}),Be=u({__name:"ReadDialog",props:{dialogInfo:{}},setup(n){const o=n,{visible:e,fileInfo:t,handleScrollBottom:l,handleCancel:m,isScrollBottom:v}=te(o);return(h,f)=>{const C=S;return s(),d(P,{show:i(e),overlay:"",style:{width:"100vw",height:"90vh"},closeable:!1,onClosed:f[1]||(f[1]=()=>i(Q)(h.dialogInfo.id))},{default:a(()=>[B("div",{class:"read_file"},[i(t)?(s(),d(Ve,{key:0,modelValue:!0,isEmbed:"",options:{list:[i(t)]},onScrollBottom:i(l)},null,8,["options","onScrollBottom"])):w("",!0)]),B("div",{class:"read_file-btn"},[g(C,{type:"default",style:{"margin-right":"16px"},onClick:i(m)},{default:a(()=>[I(" 取消 ")]),_:1},8,["onClick"]),g(C,{type:"primary",disabled:!i(v),onClick:f[0]||(f[0]=E=>i(J)({id:o.dialogInfo.id,reason:2}))},{default:a(()=>[I(" 确认 ")]),_:1},8,["disabled"])])]),_:1},8,["show"])}}});const Oe=b(Be,[["__scopeId","data-v-b21f0a87"]]);export{Oe as default};
