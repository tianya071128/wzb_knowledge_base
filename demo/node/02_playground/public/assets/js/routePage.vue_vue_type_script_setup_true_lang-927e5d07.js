import{_ as T}from"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import{A as w}from"./apiKey-ec70038f.js";import{d as C,c as N,v as A,r as v,o as r,b as f,w as n,i as u,f as I,F as x,g as D,m as q,t as B,k as g,l as V,B as J,C as P,bv as M,bT as R,bU as h,_ as z,bi as S}from"./index-b80d5ef5.js";const E=C({__name:"ApikeyCallLogDetail",props:{visible:{type:Boolean},id:{},config:{}},emits:["update:visible"],setup(k,{emit:i}){const o=k,c=i,d=N(()=>{var a;return(a=o.config.table)==null?void 0:a.tableCols.filter(_=>_.prop!=="operation")}),t=A(o,"visible",c),e=v(),p=async()=>{const a=await w.getById(o.id);e.value=a},m=N(()=>function(a){return a?JSON.stringify(JSON.parse(a),null,2):"-"});return(a,_)=>{const y=R,L=h;return r(),f(M,{modelValue:J(t),"onUpdate:modelValue":_[0]||(_[0]=s=>P(t)?t.value=s:null),title:"日志详情","show-load":p,size:"800"},{default:n(()=>[u(L,{class:"margin-top",column:2,border:""},{default:n(()=>[(r(!0),I(x,null,D(d.value,(s,b)=>(r(),f(y,{key:b,label:s.label},{default:n(()=>{var l;return[q(B((l=e.value)==null?void 0:l[s.prop]),1)]}),_:2},1032,["label"]))),128))]),_:1}),g("br"),u(L,{direction:"vertical",column:1},{default:n(()=>{var s,b;return[(s=e.value)!=null&&s.reqJson?(r(),f(y,{key:0,label:"请求数据"},{default:n(()=>{var l;return[g("pre",{class:"item-wrap",innerHTML:m.value(((l=e.value)==null?void 0:l.reqJson)??"")},null,8,["innerHTML"])]}),_:1})):V("",!0),(b=e.value)!=null&&b.resJson?(r(),f(y,{key:1,label:"返回结果"},{default:n(()=>{var l;return[g("pre",{class:"item-wrap",innerHTML:m.value(((l=e.value)==null?void 0:l.resJson)??"")},null,8,["innerHTML"])]}),_:1})):V("",!0)]}),_:1})]),_:1},8,["modelValue"])}}});const H=z(E,[["__scopeId","data-v-1abb56ad"]]),O=C({__name:"routePage",setup(k){const i=v(!1),o=v(),c=v(""),d={query:{list:[{type:"input",label:"API Key",prop:"appSecretName"},{type:"input",label:"服务名称",prop:"serviceName"},{type:"timerange",label:"调用时间",prop:["startTime","endTime"]}]},request:{api:w.listPage},table:{tableCols:[{prop:"serviceName",label:"服务名称"},{prop:"appSecretName",label:"API Key名称"},{prop:"requestIp",label:"调用方IP"},{prop:"createUserName",label:"调用人"},{prop:"requestTime",label:"调用时间"},{prop:"reqResultName",label:"调用结果"},{prop:"failReason",label:"失败原因"},{fixed:"right",width:100,prop:"operation",label:"操作",slots:{default({row:t}){const p=[{type:"primary",onClick:()=>{c.value=t.id,i.value=!0},text:"查看详情"}];return u(T,{num:3,rowId:t.id,list:p},null)}}}]},operation:{fullEl:o}};return(t,e)=>{const p=S("az-page");return r(),I(x,null,[g("div",{class:"layout_box",ref_key:"pendingRef",ref:o},[u(p,{ref:"azPageRef",config:d},null,512)],512),u(H,{visible:i.value,"onUpdate:visible":e[0]||(e[0]=m=>i.value=m),id:c.value,config:d},null,8,["visible","id"])],64)}}});export{O as _};
