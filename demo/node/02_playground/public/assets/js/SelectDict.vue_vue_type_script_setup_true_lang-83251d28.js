import{d as _,v as b,x as g,r,bx as h,s9 as m,o as d,b as p,w,f as y,F as x,g as k,B as D,C as L,bt as B,zV as S,cc as A,ao as C}from"./index-b80d5ef5.js";const E=_({__name:"SelectDict",props:{modelValue:{}},emits:["update:modelValue"],setup(f,{emit:v}){const l=f,u=b(l,"modelValue",v),c=g(),s=r(!1),i=r([]),o=r([]),V=async t=>{if(t=t==null?void 0:t.trim(),t){s.value=!0;try{const e=await m({limit:1,current:1,name:t,type:S,status:A});o.value=(e==null?void 0:e.records)??[]}finally{s.value=!1}}else o.value=[...i.value]};return h(async()=>{s.value=!0;try{const t=await c.getDictList();if(i.value=[...t??[]],o.value=[...t??[]],l.modelValue&&!i.value.some(e=>e.code===l.modelValue)){const e=await m({code:l.modelValue,limit:100,current:1}),n=((e==null?void 0:e.records)??[]).filter(a=>a.code===l.modelValue);o.value.push(...n),i.value.push(...n),Array.isArray(c.dictList)&&c.dictList.push(...n)}}finally{s.value=!1}}),(t,e)=>{const n=C;return d(),p(B,{modelValue:D(u),"onUpdate:modelValue":e[0]||(e[0]=a=>L(u)?u.value=a:null),filterable:"",remote:"","reserve-keyword":"",placeholder:"输入关键字可搜索","remote-show-suffix":"","remote-method":V,loading:s.value},{default:w(()=>[(d(!0),y(x,null,k(o.value,a=>(d(),p(n,{key:a.id,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])}}});export{E as _};
