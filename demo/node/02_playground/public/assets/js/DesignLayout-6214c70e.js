import{f2 as ml,Bb as _l,f8 as Ft,f9 as fl,fa as yl,e7 as vl,eM as it,ej as $t,Bc as bl,Bd as gl,Be as hl,oi as Vl,d as D,v as N,r as k,o as v,b as x,w as c,h as he,B as e,C as T,bn as Ne,er as ct,bK as Ot,cA as xl,es as mt,a8 as et,a as ze,y as Ve,du as Sl,o0 as Mt,bI as Dl,f as I,k as w,i as s,e as Ge,m as H,t as W,S as We,aS as Il,aq as Cl,nJ as wl,cH as Tl,aT as Te,av as tt,aU as Xe,_ as A,a_ as Ll,aN as Bt,P as kl,U as Ye,l as M,F as B,g as K,ao as Be,ap as qe,c as L,bx as Ae,I as At,n as X,z as Rt,bH as G,yX as ce,Bf as He,z0 as we,Bg as Ke,Z as Pt,Bh as me,Bi as ye,Bj as _e,Bk as jt,Bl as zt,ec as Et,n3 as Ul,Bm as Nt,Bn as Xt,ax as Fl,H as $l,Q as Re,ac as _t,bm as ft,c2 as Ol,bz as ve,j as Ml,bc as xe,a5 as Bl,J as Yt,oA as Al,p as Le,ba as yt,bA as Rl,bB as Pl,a2 as Qe,by as jl,lr as zl,eC as vt,q as ee,ds as bt,e9 as lt,hM as at,dF as je,Bo as qt,ot as El,L as Ht,E as Nl,ab as Xl,aa as Yl,Bp as ql,a9 as Hl,cR as Jl,cS as Gl,eA as Wl,q4 as Kl,bt as Ql,cj as Je,N as Zl,O as ea,c3 as ta,bJ as la,cn as aa,co as oa,cp as na,cq as sa}from"./index-b80d5ef5.js";import{S as gt,x as Me,P as ra,C as j,A as Jt,D as ot,U as Gt,b as Z}from"./enum-dc6240e9.js";import{c as da,b as ua,p as ia,l as pa,i as ca,d as ma,e as _a,f as fa,g as Wt,m as be,h as ya,C,j as va,s as ba,k as Kt,n as ut,o as Fe,L as Qt,q as De,r as Zt,t as ga,v as ha,w as Va,x as xa,y as It,z as se,A as Sa,B as Da,E as el,F as Ia,G as Ca,H as wa,I as Ta,J as La}from"./useThemeStyles-97832ef4.js";import{b as $e,c as Oe,s as Ct,r as ka,v as wt}from"./createDesigner-82222fc7.js";import{d as Ie}from"./dashboardDesigner-ce3c2e23.js";import{D as Ua}from"./DataSoureceWrapper-047a1c9d.js";import{F as Fa}from"./FormulaWrapper-92a83208.js";import{k as Ee}from"./keyBy-8fcfdd74.js";import{C as O,_ as $a,b as J,a as Oa,d as Ma}from"./TableChart.vue_vue_type_script_setup_true_lang-4c6079d0.js";import{A as le}from"./AzRadioGroup-8d978495.js";import{E as ht}from"./el-input-number-c15b1cc7.js";import{F as Ba}from"./FieldCondition-1c72aa9d.js";import{F as Aa}from"./FieldConditionView-ad1b057c.js";import{o as Ra}from"./omit-14b2042c.js";import{u as Pa}from"./useLinkedData-b8036587.js";import{s as ja}from"./skeleton-9235483f.js";import"./useTransformColor-38b5da33.js";import"./enum-baae9292.js";import"./SelectDataSourece-70a968c3.js";import"./Formula.vue_vue_type_style_index_0_lang-ef444f24.js";import"./index-8e050109.js";import"./_createAggregator-d66ed64c.js";/* empty css                        */import"./el-collapse-transition-4ed993c7.js";import"./SelectEntryAndOther-76a65b2d.js";import"./Base.vue_vue_type_script_setup_true_lang-03820366.js";import"./useFieldMaxWidth-d82f063e.js";import"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import"./index-318b68f4.js";import"./AzInputNumber-d6212644.js";import"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import"./useMultipleVal-904406c1.js";import"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import"./el-dropdown-item-455a6589.js";import"./CardShowFieldItem-fd24f218.js";import"./last-862de5a8.js";import"./_baseSlice-cf92e063.js";function za(u,i){return ml(i,function(n){return u[n]})}function tl(u){return u==null?[]:za(u,_l(u))}function Ea(u,i,n){var p=Ft(u),l=p||fl(u)||yl(u);if(i=vl(i),n==null){var a=u&&u.constructor;l?n=p?new a:[]:it(u)?n=$t(a)?bl(gl(u)):{}:n={}}return(l?hl:Vl)(u,function(d,t,r){return i(n,d,t,r)}),n}const Na=D({__name:"DesignBox",props:{visible:{type:Boolean}},emits:["update:visible","closed"],setup(u,{emit:i}){const n=u,p=i,l=N(n,"visible",p),a=k(!1),d=()=>{a.value=!0};return(t,r)=>{const o=Ne;return v(),x(o,{modelValue:e(l),"onUpdate:modelValue":r[0]||(r[0]=_=>T(l)?l.value=_:null),fullscreen:"","destroy-on-close":"","append-to-body":"",class:"design-box",onClosed:r[1]||(r[1]=_=>p("closed")),onOpened:d,"show-close":!1},{header:c(()=>[]),default:c(()=>[he(t.$slots,"default",{lazy:a.value})]),_:3},8,["modelValue"])}}});var de=(u=>(u.uploadData="chart:uploadData",u.uploadConfig="chart:uploadConfig",u.clearChart="chart:clearChart",u.click="chart:click",u.select="chart:select",u.save="chart:save",u))(de||{});const Xa={graphType:gt.default,customColors:[],showTitle:!0,showX:!0,showY:!0,showDataLabel:!0,showLegend:!0,legendType:"1",colorScheme:0,xDisplay:{showTitle:!1,title:"",textDir:Me.Horizontal,maxVal:null,minVal:null},yDisplay:{showTitle:!1,title:"",textDir:Me.Horizontal,maxVal:null,minVal:null,lineStyle:1},viewDataSource:!1},Ya={graphType:gt.default,customColors:[],showTitle:!0,showX:!0,showY:!0,showDataLabel:!0,showLegend:!0,legendType:"1",colorScheme:0,xDisplay:{showTitle:!1,title:"",textDir:Me.Horizontal,maxVal:null,minVal:null},yDisplay:{showTitle:!1,title:"",textDir:Me.Horizontal,maxVal:null,minVal:null,lineStyle:1},viewDataSource:!1},qa={graphType:ra.cake,customColors:[],showDataLabel:!0,showLegend:!0,showDataFilter:!1,legendType:"1",colorScheme:0,dataFilterCount:1,viewDataSource:!1},Ha={colorScheme:0,customColors:[],viewDataSource:!1},Ja={graphType:gt.default,customColors:[],showTitle:!0,showX:!0,showY:!0,showDataLabel:!0,showLegend:!0,legendType:"1",colorScheme:0,xDisplay:{showTitle:!1,title:"",textDir:Me.Horizontal,maxVal:null,minVal:null},yDisplay:{showTitle:!1,title:"",textDir:Me.Horizontal,maxVal:null,minVal:null,lineStyle:1},viewDataSource:!1},Ga={[j.columnChart]:{xMax:1,yMax:null,tMax:0,aMax:0,styleOptions:da,errorList:["维度","指标"],isInRequest:u=>{const{xData:i,yData:n}=u;return i.length===1&&n.length>=1}},[j.barChart]:{xMax:1,yMax:null,tMax:0,aMax:0,styleOptions:ua,errorList:["维度","指标"],isInRequest:u=>{const{xData:i,yData:n}=u;return i.length===1&&n.length>=1}},[j.pieChart]:{xMax:1,yMax:1,tMax:0,aMax:0,styleOptions:ia,errorList:["维度","指标"],isInRequest:u=>{const{xData:i,yData:n}=u;return i.length===1&&n.length===1}},[j.lineChart]:{xMax:1,yMax:null,tMax:0,aMax:0,styleOptions:pa,errorList:["维度","指标"],isInRequest:u=>{const{xData:i,yData:n}=u;return i.length===1&&n.length>=1}},[j.indicatorsChart]:{xMax:0,yMax:1,tMax:0,aMax:0,errorList:["指标"],styleOptions:ca,isInRequest:u=>{const{xData:i,yData:n}=u;return i.length>=0&&n.length>=1}},[j.biaxialChart]:{xMax:1,yMax:null,tMax:0,aMax:0,errorList:["维度","指标"],styleOptions:ma,isInRequest:u=>{const{xData:i,yData:n}=u;return i.length===1&&n.length>=1}},[j.areaChart]:{xMax:2,yMax:null,tMax:0,aMax:0,errorList:["维度","指标"],styleOptions:_a,isInRequest:u=>{const{xData:i,yData:n}=u;return i.length===1&&n.length>=1?!0:i.length===2&&n.length===1}},[j.dashboard]:{xMax:0,yMax:1,tMax:1,aMax:0,errorList:["指标","目标值"],styleOptions:Ya,isInRequest:u=>{const{yData:i,target:n}=u;return i.length>=1&&n.length>=1}},[j.radarChart]:{xMax:1,yMax:null,tMax:0,aMax:0,errorList:["维度","指标"],styleOptions:qa,isInRequest:u=>{const{xData:i,yData:n}=u;return i.length>=1&&n.length>=1}},[j.funnelChart]:{xMax:1,yMax:null,tMax:0,aMax:0,errorList:["维度","指标"],styleOptions:Ha,isInRequest:u=>{const{xData:i,yData:n}=u;return i.length===1&&n.length>=1}},[j.scatterChart]:{xMax:2,yMax:2,tMax:0,aMax:0,errorList:["维度","指标"],styleOptions:Ja,isInRequest:u=>{const{xData:i,yData:n}=u;return i.length<=2&&n.length===2}},[j.bubbleChart]:{xMax:2,yMax:2,tMax:0,aMax:0,errorList:["维度","指标"],styleOptions:Xa,isInRequest:u=>{const{xData:i,yData:n}=u;return i.length<=2&&n.length===2}},[j.pivotTable]:{xMax:null,yMax:null,tMax:0,aMax:null,errorList:["维度","指标"],styleOptions:fa,isInRequest:u=>{const{xData:i,yData:n,xArrangeData:p}=u;return(i.length>=1||p.length>=1)&&n.length>=1}},[j.detailedChart]:{xMax:null,yMax:0,tMax:0,aMax:0,errorList:["显示字段"],styleOptions:Wt,isInRequest:u=>{const{xData:i}=u;return i.length>=1}}},Wa=u=>{const i=ct(),n=Mt(t=>{a(t,void 0)},100),p=Ot({options:u,appId:u.appId,chartData:Ka(u),fieldList:[],chartLabel:{label:u.label,showLabel:u.showLabel},tableStyle:u.tableStyle,chartStyle:u.chartStyle,delayed:!1,eventMitt:xl(),on:l,emit:a,off:d,handleUpdateType:function(t){try{p.delayed=!1,p.chartData.dashboardType=t;const r=be(t);p.chartData.dashboardStyle=r.defaultStyleOptions,p.chartData.dataConfig=r.updateDataConfig(p.chartData),p.chartStyle=$e(),p.tableStyle=Oe(),setTimeout(()=>{p.delayed=!0},200)}catch{console.error("切换类型失败")}},initChart:function(){const t=p.chartData.dashboardType,r=be(t);p.chartData.dataConfig.xData=[],p.chartData.dataConfig.yData=[],p.chartData.dataConfig.target=[],p.chartData.dataConfig.conditions=[],p.chartData.dataConfig.xArrangeData=[],p.chartData.dataConfig.orderBys=[],p.chartData.columnJson=[],p.chartData.dashboardStyle=r.defaultStyleOptions,n(de.uploadData)},handleUpdateSourceId:function(t){t.length&&(p.chartData.sourceIds=[...t],p.chartData.type=0,p.initChart())},handleUpdateAggregationId:function(t){t.length&&(p.chartData.sourceIds=[...t],p.chartData.type=2,p.initChart())},getHelperByType:function(t){try{return be(t)}catch{}},getFormInfoBySourceIds:function(){return p.chartData.sourceIds.map(o=>{const _=p.chartData.type===2?"aggregateId":"sourceId";return mt(et(i.getFields({[_]:o})??[],{blockFilter(g){return g.type===ze.subform},excludeFilter(g,b){return!(b!=null&&b.isFormItem)&&!(b!=null&&b.isVirtual)}}))}).reduce(function(o,_){return o.concat(_)})}});Ve(()=>p.chartData.dashboardStyle,()=>{n(de.uploadConfig)},{deep:!0}),Ve(()=>p.chartData.dataConfig,()=>{n(de.uploadData)},{deep:!0});function l(t,r){p.eventMitt.on(t,r)}function a(t,r){p.eventMitt.emit(t,r)}function d(t,r){p.eventMitt.off(t,r)}return Sl(()=>{p.eventMitt.all.clear()}),p},Ka=u=>({...{type:u.type,frontType:u.frontType,flowIndexType:0,id:u.dashboardId,entryId:u.entryId,sourceIds:u.sourceIds,moduleId:u.moduleId,auth:Jt.ALL,columnJson:[],dataConfig:{target:[],xData:[],xArrangeData:[],yData:[],conditions:[],orderBys:[]},dashboardStyle:{...Ga[u.defaultType].styleOptions},dashboardType:u.defaultType}}),ll=Symbol("chartsDesignerKey");function U(){return Dl(ll,void 0)}const Qa=D({__name:"EditorName",setup(u){const{chartLabel:i}=U(),n=k(),p=k(!1),l=()=>{p.value=!0,Te(()=>{var t;(t=n.value)==null||t.focus()})},a=()=>{p.value=!1,Te(()=>{var t;(t=n.value)==null||t.focus()})},d=()=>{var t;(t=n.value)==null||t.blur()};return(t,r)=>{const o=tt,_=Xe;return v(),I("div",{class:"edit-box"},[w("div",null,[s(_,{effect:"dark",content:"重命名",placement:"top"},{default:c(()=>[Ge(s(o,{onClick:l,underline:!1,class:"label"},{default:c(()=>[H(W(e(i).label),1)]),_:1},512),[[We,!p.value]])]),_:1}),Ge(s(Cl,{modelValue:e(i).label,"onUpdate:modelValue":r[0]||(r[0]=g=>e(i).label=g),onKeyup:Il(d,["enter"]),ref_key:"renameInputRef",ref:n,onBlur:a,maxlength:"10",isBlurCache:"",placeholder:"请输入标题"},null,8,["modelValue","onKeyup"]),[[We,p.value]])]),s(_,{effect:"dark",content:`点击${e(i).showLabel?"隐藏":"显示"}标题`,placement:"top"},{default:c(()=>[s(o,{class:"hide-label",onClick:r[1]||(r[1]=g=>e(i).showLabel=!e(i).showLabel),underline:!1,icon:e(i).showLabel?e(wl):e(Tl)},null,8,["icon"])]),_:1},8,["content"])])}}});const Za=A(Qa,[["__scopeId","data-v-e0712868"]]),eo=D({__name:"Header",props:{moduleItem:{}},emits:["saveChart","close"],setup(u,{emit:i}){const n=u,p=i,l=U(),a=k(!1),d=async()=>{a.value=!0;try{const{chartData:t,chartLabel:r,tableStyle:o,chartStyle:_}=l,g=await Ie.save(t),b=n.moduleItem;if(b.options.sourceId=t.sourceIds.join(","),b.options.entryId=t.entryId,b.options.dashboardId=g,b.options.label=r.label,b.options.showLabel=r.showLabel,b.options.type=t.dashboardType,b.options.pcStyles=_,b.options.h5Styles=_,[j.pivotTable,j.detailedChart].includes(t.dashboardType)){const y=n.moduleItem.options;y.pcTableStyles=o,y.h5TableStyles=o}l.chartData.id=g,Bt.success("保存成功"),await Te(),p("saveChart")}finally{a.value=!1}};return(t,r)=>{const o=kl,_=Ye;return v(),I("div",{class:"chart-design__header"},[w("div",{class:"header-ArrowLeftBold"},[w("span",{class:"icon",onClick:r[0]||(r[0]=g=>p("close"))},[s(o,null,{default:c(()=>[s(e(Ll))]),_:1})]),w("span",{style:{"padding-left":"12px"}},[s(Za,{"module-item":t.moduleItem},null,8,["module-item"])])]),s(_,{type:"primary",loading:a.value,onClick:d},{default:c(()=>[H(" 保存 ")]),_:1},8,["loading"])])}}});const to=A(eo,[["__scopeId","data-v-b8fdf1ba"]]),lo=D({__name:"PanelCellItem",props:{title:{}},setup(u){return(i,n)=>(v(),I("div",{class:"panel-cell"},[w("div",{class:"panel-cell__header"},[he(i.$slots,"header",{},()=>[i.title?(v(),I("div",{key:0,class:"h--title"},W(i.title),1)):M("",!0),w("div",null,[he(i.$slots,"hRight",{},void 0,!0)])],!0)]),w("div",{class:"panel-cell__body"},[he(i.$slots,"default",{},void 0,!0)])]))}});const F=A(lo,[["__scopeId","data-v-4a492e49"]]),ao=D({__name:"DataAuth",setup(u){const i=k(Jt.ALL),n=ya;return(p,l)=>{const a=Be,d=qe;return v(),x(F,{title:"数据权限"},{default:c(()=>[s(d,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=t=>i.value=t),style:{width:"100%"}},{default:c(()=>[(v(!0),I(B,null,K(e(n),t=>(v(),x(a,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})}}}),oo=u=>[C.input,C.textarea,C.number,C.date,C.daterange,C.time,C.timerange,C.radio,C.multiple,C.job,C.cooperatePersonnel,C.cooperateEnterprise,C.address,C.autoNumber,C.formula,C.compute].includes(u.fieldType),no=u=>[C.input,C.textarea,C.number,C.date,C.daterange,C.time,C.timerange,C.radio,C.multiple,C.member,C.memberSingle,C.department,C.departmentSingle,C.role,C.job,C.cooperatePersonnel,C.cooperateEnterprise,C.address,C.autoNumber,C.formula].includes(u.fieldType),so=()=>{const{chartData:u}=U(),i=L(()=>u.type===2);return{isAggregate:i,validations:p=>i.value?p.fieldType===C.compute:no(p)}},Q=so,al=D({__name:"DataSource",props:{multiple:{type:Boolean,default:!1},readonlySource:{type:Boolean,default:!1},hideAggregation:{type:Boolean,default:!1}},setup(u){const{isAggregate:i}=Q(),n=k(),{chartData:p,appId:l,handleUpdateSourceId:a,handleUpdateAggregationId:d}=U();return Ae(()=>{Te(()=>{var t;p.sourceIds.length<1&&((t=n.value)==null||t.exClick())})}),(t,r)=>(v(),x(F,{title:"数据源"},{default:c(()=>[e(l)?(v(),x(Ua,At({key:0},t.$attrs,{ref_key:"DataSourceRef",ref:n,modelValue:e(i)?[]:e(p).sourceIds,"onUpdate:modelValue":r[0]||(r[0]=o=>e(a)(e(X)(o))),aggregationId:e(i)?e(p).sourceIds:[],"onUpdate:aggregationId":r[1]||(r[1]=o=>e(d)(e(X)(o))),isAggregate:t.hideAggregation,class:"w100",appId:e(l),multiple:t.multiple,readonly:t.readonlySource}),null,16,["modelValue","aggregationId","isAggregate","appId","multiple","readonly"])):M("",!0)]),_:1}))}}),ro=()=>{const u=U(),i=ct(),n=L(()=>{const p=u.chartData.type===2?"aggregateId":"sourceId",l=i.getFields({[p]:u.chartData.sourceIds[0]})??[];return mt(et(l,{blockFilter(a){return a.type===ze.subform},excludeFilter(a,d){return!(d!=null&&d.isFormItem)&&!(d!=null&&d.isVirtual)}}))});Rt(()=>{u.fieldList=G(n.value)})},ie=u=>{if(!va(u))return;let i=[];switch(u.fieldType){case C.date:i=[ce.Y,ce.Q,ce.M,ce.W,ce.D];break;case C.time:i=[ce.H,ce.mm,ce.ss];break;case C.address:i=[He.province,He.city,He.district];break}const n=[..._e[jt],..._e[zt]];return{label:"汇总方式",children:tl(Et(Ee(n,"value"),i)).map(l=>({label:l.label,onClick:()=>{u.summaryMethod=l.value},isActive:()=>u.summaryMethod===l.value,getTip:()=>ba()[l.value]??""}))}},ae=async(u,i)=>{if([C.radio,C.multiple].includes(u.fieldType)){const l=i().find(d=>d.fieldId===u.fieldId);let a=[];return l&&"options"in l&&"dataOptions"in l.options&&(a=(await Ul(l.options.dataOptions)).map(t=>({label:t.label,onClick:()=>{var r,o;u!=null&&u.dataItem||(u.dataItem=[]),(r=u.dataItem)!=null&&r.includes(t.value)?u.dataItem=u.dataItem.filter(_=>_!==t.value):(o=u.dataItem)==null||o.push(t.value)},isActive:()=>{var r;return((r=u.dataItem)==null?void 0:r.includes(t.value))??!1}}))),{label:"数据项",children:[{label:"全部",onClick:()=>{u.dataItem=[]},isActive:()=>"dataItem"in u?Array.isArray(u.dataItem)&&u.dataItem.length<=0:!0},...a]}}else return},ue=(u,i)=>({label:"高级计算",children:[..._e[Nt]].map(l=>({label:l.label,onClick:()=>{u.proportion=l.value;const a=io();switch(l.value){case ye.chainRate:case ye.growthRate:case ye.proportion:u.dataFormat={...a,format:ot.percentage,isPrecision:!0};break;default:u.dataFormat={...a};break}},isActive:()=>u.proportion===l.value,isDisable:()=>{const{xData:a}=i,d=[C.date,C.daterange,C.time,C.timerange],t=a.filter(r=>d.includes(r.fieldType));switch(l.value){case ye.chainRate:case ye.growthRate:case ye.growthValue:case ye.chainValue:return t.length!==1;default:return!1}},getDisableTooltip:()=>"维度中有且仅有1个日期时间字段时，才能设置同比/环比。"}))}),uo=(u,i)=>{const n=i.xData;return{label:`${u!=null&&u.hideField?"显示":"隐藏"}该字段`,onClick:()=>{u!=null&&u.hideField?u.hideField=!1:u.hideField=!0},isDisable:()=>n.filter(d=>d.tag!==u.tag).every(d=>d.hideField)}},re=u=>{if(!oo(u))return;let i=[];switch(u.fieldType){case C.number:case C.formula:i=[me.SUM,me.AVG,me.MIN,me.MAX,me.COUNT,me.DISTINCT];break;default:i=[me.COUNT,me.DISTINCT];break}const n=[..._e[Xt]];return{label:"汇总方式",children:tl(Et(Ee(n,"value"),i)).map(l=>({label:l.label,onClick:()=>{u.summaryMethod=l.value},isActive:()=>u.summaryMethod===l.value}))}},nt=u=>{const i=u.fieldType;let n="";switch(i){case C.address:n=He.province;break;case C.time:n=ce.H;break;case C.date:n=ce.Y;break}return Object.assign({tag:null,fieldId:"",fieldType:"",label:"",summaryMethod:n,orderBy:we.defaultOrder,isMissTime:Ke.off,formula:"",dataItem:[]},{...u,summaryMethod:n,tag:"a_"+Pt()})},ol=u=>{const i=nt(u),n=i.fieldType,p=[C.formula,C.number],l=u.summaryMethod?u.summaryMethod:p.includes(n)?me.SUM:me.COUNT;return{...i,position:"left",proportion:ye.none,summaryMethod:l,dataFormat:{format:ot.number,isPrecision:!1,isThousandth:!1,isNumberLevel:!1,isTextUnit:!1,textUnit:"",unit:Gt.none,toPrecision:2}}},io=()=>({format:ot.number,isPrecision:!1,isThousandth:!1,unit:Gt.none,toPrecision:2,isNumberLevel:!1,isTextUnit:!1,textUnit:""}),po=D({__name:"CalcFields",props:{visible:{type:Boolean},formulaData:{},status:{},filterTypes:{}},emits:["confirm","update:visible"],setup(u,{emit:i}){const n=u,p=i,l=N(n,"visible",p),a=L(()=>n.status==="add"),d=L(()=>a.value?"添加计算字段":"编辑计算字段"),{chartData:t,appId:r}=U(),o=k(),_=k({name:"",formula:""}),g=Ot({name:[{required:!0,message:"请输入计算字段的名称",trigger:"blur"},{min:2,max:15,message:"名称长度为2到15个字符",trigger:"blur"}],formula:[{required:!0,message:"请添加计算字段",trigger:"blur"}]}),b=()=>{var h,V;a.value||(_.value.formula=((h=n.formulaData)==null?void 0:h.formula)??"",_.value.name=((V=n.formulaData)==null?void 0:V.label)??"")},m=h=>{const V=Array.isArray(n.filterTypes)?n.filterTypes:[];return et(h??[],{blockFilter(S,P,$){return S.type===ze.subform},excludeFilter(S,P){return V.length>=1?!V.includes(S.type):!1}})},y=()=>{_.value.formula="",_.value.name=""},f=async()=>{var S;await((S=o.value)==null?void 0:S.validate());const h={fieldId:`_${C.formula}_${Pt()}`,formula:_.value.formula,label:_.value.name,fieldType:C.formula},V=nt({...h});p("confirm",V),l.value=!1};return(h,V)=>{const S=Re,P=_t,$=ft,z=Ye,R=Ne;return v(),I("div",null,[s(R,{modelValue:e(l),"onUpdate:modelValue":V[3]||(V[3]=te=>T(l)?l.value=te:null),"append-to-body":"",title:d.value,class:"calc-fields",width:"600px",onOpen:b,onClose:y},{footer:c(()=>[w("span",{class:"dialog-footer"},[s(z,{onClick:V[2]||(V[2]=te=>l.value=!1)},{default:c(()=>[H("取消")]),_:1}),s(z,{type:"primary",onClick:f},{default:c(()=>[H("确定")]),_:1})])]),default:c(()=>[s($,{ref_key:"ruleFormRef",ref:o,model:_.value,rules:g,"label-width":"120px","label-position":"top","status-icon":""},{default:c(()=>[s(P,{label:"名称",prop:"name"},{default:c(()=>[s(S,{modelValue:_.value.name,"onUpdate:modelValue":V[0]||(V[0]=te=>_.value.name=te),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(t).type!==2?(v(),x(P,{key:0,label:"计算公式",prop:"formula"},{default:c(()=>[w("span",{class:"fs-12 Gray_75"}," 从下方选择变量来源，并选择相应计算函数进行公式计算，支持输入数值计算 "),s(Fa,{group:[{id:e(t).sourceIds[0],sourceTransformEntry:!0,fieldOptions:{sourceId:e(t).sourceIds[0]}}],modelValue:_.value.formula,"onUpdate:modelValue":V[1]||(V[1]=te=>_.value.formula=te),filter:m,mode:e(Fl).server},null,8,["group","modelValue","mode"])]),_:1})):M("",!0),s($l)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),co=D({__name:"FieldLabel",props:{type:{},label:{}},setup(u){const i=u,n=L(()=>Ol(i.type));return(p,l)=>(v(),I("div",{class:"field-label"},[n.value?(v(),x(ve,{key:0,"icon-class":n.value,"class-name":"field-label-icon"},null,8,["icon-class"])):M("",!0),s(Ml,{class:"field-label-text",content:p.label},null,8,["content"])]))}});const mo=A(co,[["__scopeId","data-v-70b13978"]]),Vt=k(),Tt=u=>{Vt.value=u},Lt=()=>Vt.value,_o=()=>{Vt.value=void 0},fo=D({__name:"FormulaLabel",props:{label:{}},emits:["delete","setting"],setup(u,{emit:i}){const n=i,p=()=>{n("delete")},l=()=>{n("setting")};return(a,d)=>(v(),I("div",{class:"formula-label"},[s(ve,{class:"mr-5","icon-class":"Document"}),w("span",{class:"az-ellipsis label-cell"},W(a.label),1),w("div",{class:"mr-5 cur operate",onClick:xe(l,["stop"])},[s(ve,{"icon-class":"Setting"})],8,["onClick"]),w("div",{class:"cur operate",onClick:xe(p,["stop"])},[s(ve,{style:{color:"red"},"icon-class":"Delete"})],8,["onClick"])]))}});const yo=A(fo,[["__scopeId","data-v-ee446569"]]),vo=D({__name:"DragArea",props:{fieldId:{},fieldType:{},label:{},data:{}},emits:["delete","setting"],setup(u,{emit:i}){const n=u,p=i,l=()=>{const{fieldId:d,data:t,fieldType:r,label:o}=n;if(r===C.formula)Tt(G(t));else{const _={fieldId:d,fieldType:r,label:o,summaryMethod:"",isMissTime:Ke.off,formula:"",tag:""};Tt(G(_))}},a=()=>{_o()};return(d,t)=>(v(),I("div",{draggable:"true",class:"draggable",onDragstart:l,onDragend:a},[d.fieldType===e(C).formula?(v(),x(yo,{key:0,label:d.label,onDelete:t[0]||(t[0]=r=>p("delete")),onSetting:t[1]||(t[1]=r=>p("setting"))},null,8,["label"])):(v(),x(mo,{key:1,type:d.fieldType,label:d.label},null,8,["type","label"]))],32))}});const pt=A(vo,[["__scopeId","data-v-1ca48ba8"]]),bo=D({__name:"FieldList",setup(u){const i=U(),{chartData:n}=i;ro();const p=ct(),l=L(()=>{const V=n.type===2?"aggregateId":"sourceId",S=p.getFields({[V]:n.sourceIds[0]})??[];return mt(et(S,{blockFilter(P){return P.type===ze.subform},excludeFilter(P,$){return!($!=null&&$.isFormItem)&&!($!=null&&$.isVirtual)}}))}),a=k("add"),d=k(!1),t=V=>{if(a.value==="add")n.columnJson.push(V);else{const S=n.columnJson.findIndex(P=>P.tag===V.tag);n.columnJson.splice(S,1,V)}},r=V=>{n.columnJson=n.columnJson.filter(S=>S.tag!==V.tag)},o=k(),_=V=>{a.value="edit",o.value=G(V),d.value=!0},g=k([]),{isAggregate:b}=Q();Ae(()=>{h(),n.dashboardType===j.detailedChart&&g.value.push(ze.number)});const m=k();Ve(()=>[l,n.columnJson],()=>{m.value="",h()},{deep:!0}),Ve(m,()=>{h(m.value)});const y=k([]),f=k([]),h=V=>{const S=n.columnJson,P=Array.isArray(l.value)?l.value:[];V?(y.value=P.filter($=>$.options.label.includes(V)),f.value=S.filter($=>$.label.includes(V))):(y.value=G(P),f.value=G(S))};return(V,S)=>{const P=tt,$=Xe,z=Re;return v(),x(F,{title:"字段"},{hRight:c(()=>[Array.isArray(l.value)&&!e(b)?(v(),x($,{key:0,effect:"dark",content:"添加计算字段",placement:"top"},{default:c(()=>[s(P,{icon:e(Bl),onClick:S[0]||(S[0]=R=>{d.value=!0,a.value="add"}),underline:!1},null,8,["icon"])]),_:1})):M("",!0)]),default:c(()=>[s(z,{prefixIcon:e(Yt),modelValue:m.value,"onUpdate:modelValue":S[1]||(S[1]=R=>m.value=R),placeholder:"搜索"},null,8,["prefixIcon","modelValue"]),w("div",{class:"mt-10"}),w("div",{class:"field-list"},[w("div",null,[(v(!0),I(B,null,K(y.value,R=>(v(),x(pt,{key:R.fieldId,"field-id":R.fieldId,label:R.options.label,fieldType:R.type,data:R},null,8,["field-id","label","fieldType","data"]))),128)),(v(!0),I(B,null,K(f.value,(R,te)=>(v(),x(pt,{key:R.fieldId+te,"field-id":R.fieldId,label:R.label,fieldType:R.fieldType,data:R,onSetting:()=>_(R),onDelete:()=>r(R)},null,8,["field-id","label","fieldType","data","onSetting","onDelete"]))),128)),s(po,{visible:d.value,"onUpdate:visible":S[2]||(S[2]=R=>d.value=R),status:a.value,"formula-data":o.value,"filter-types":g.value,onConfirm:t},null,8,["visible","status","formula-data","filter-types"])])])]),_:1})}}});const go=A(bo,[["__scopeId","data-v-940578f2"]]),ho=D({__name:"LeftAside",setup(u){const{isAggregate:i}=Q();return(n,p)=>(v(),I("div",{class:"aside-cell"},[s(al,{hideAggregation:""}),e(i)?M("",!0):(v(),x(ao,{key:0})),s(go,{style:{flex:"1"}})]))}});const Vo=A(ho,[["__scopeId","data-v-582f8dd5"]]),xo=D({__name:"DataAuth",setup(u){const i=U(),{chartData:n}=i,p=k([]),l=k([]),a=async()=>{const b=await Ie.listFlowIndex();p.value=b,await Te(),t(),n.dataConfig.yData.length<=0&&o()},d=()=>{t(),o(),r(),n.dataConfig.conditions=[],n.dataConfig.xData=[]},t=()=>{const b=p.value.find(f=>f.code===n.flowIndexType),y=((b==null?void 0:b.X)??[]).map(f=>{const h=Al(f.fieldType);return h&&(h.fieldId=f.fieldId,h.options.label=f.label),h});i.fieldList=X(y),l.value=[...i.fieldList]},r=()=>{if((n.flowIndexType===5||n.flowIndexType===6)&&n.dashboardType!==j.indicatorsChart){const b="act_name_",m=l.value.find(y=>y.fieldId===b);if(m){const y=nt({fieldId:m.fieldId,fieldType:m.type,label:m.options.label,isMissTime:Ke.off,formula:"",tag:""});n.dataConfig.xData=[y]}}},o=()=>{const b=p.value.find(y=>y.code===n.flowIndexType),m=((b==null?void 0:b.Y)??[]).map(y=>ol({fieldId:y.fieldId,fieldType:y.fieldType,label:y.label,isMissTime:Ke.off,formula:"",tag:"",summaryMethod:y.summaryMethod}));n.dataConfig.yData=[...m]};Ve(()=>n.sourceIds,()=>{a()}),Ae(()=>{a()});const _=k(""),g=L(()=>_.value?l.value.filter(b=>b.options.label.includes(_.value)):l.value);return(b,m)=>{const y=Be,f=qe,h=Re;return v(),I(B,null,[s(F,{title:"分析指标"},{default:c(()=>[s(f,{modelValue:e(n).flowIndexType,"onUpdate:modelValue":m[0]||(m[0]=V=>e(n).flowIndexType=V),onChange:d,style:{width:"100%"}},{default:c(()=>[(v(!0),I(B,null,K(p.value,V=>(v(),x(y,{key:V.code,label:V.text,value:V.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(F,{title:"字段"},{default:c(()=>[s(h,{prefixIcon:e(Yt),modelValue:_.value,"onUpdate:modelValue":m[1]||(m[1]=V=>_.value=V),placeholder:"搜索"},null,8,["prefixIcon","modelValue"]),w("div",{class:"mt-10"}),w("div",{class:"field-list"},[w("div",null,[(v(!0),I(B,null,K(g.value,V=>(v(),x(pt,{key:V.fieldId,label:V.options.label,fieldType:V.type,"field-id":V.fieldId,data:V},null,8,["label","fieldType","field-id","data"]))),128))])])]),_:1})],64)}}});const So=A(xo,[["__scopeId","data-v-57bb4196"]]),Do=D({__name:"LeftAsideProcess",props:{readonlySource:{type:Boolean}},setup(u){return(i,n)=>(v(),I("div",{class:"aside-cell"},[s(al,{multiple:"",tabs:[5],readonlySource:i.readonlySource},null,8,["readonlySource"]),s(So)]))}});const Io=A(Do,[["__scopeId","data-v-17909cde"]]),Co=D({__name:"ChartType",props:{chartTypes:{}},setup(u){const i=u,{chartData:n,handleUpdateType:p}=U(),l=L(()=>Kt.filter(r=>n.type===2&&r.type===j.pivotTable?!1:i.chartTypes.includes(r.type))),a=k(""),d=()=>{Te(()=>{a.value=""})},t=r=>{Te(()=>{a.value=r})};return(r,o)=>{const _=yt,g=Rl,b=Pl;return v(),x(F,{title:"图表类型"},{default:c(()=>[s(b,{class:"chart-type"},{default:c(()=>[(v(!0),I(B,null,K(l.value,(m,y)=>(v(),x(g,{key:y,span:4},{default:c(()=>[s(_,{visible:`${m.type+y}`===a.value,placement:"left",title:m.label,width:200,trigger:"hover"},{reference:c(()=>[w("div",{class:Le(["chart-cell",e(n).dashboardType===m.type?"chart-active":""]),onClick:f=>e(p)(m.type),onMouseenter:xe(f=>t(`${m.type+y}`),["stop"]),onMouseleave:xe(d,["stop"])},[s(ve,{"icon-class":`${m.type}_icon`,style:{"font-size":"26px"}},null,8,["icon-class"])],42,["onClick","onMouseenter","onMouseleave"])]),default:c(()=>[(v(!0),I(B,null,K(m.tip,(f,h)=>(v(),I("div",{key:h},W(f),1))),128))]),_:2},1032,["visible","title"])]),_:2},1024))),128))]),_:1})]),_:1})}}});const wo=A(Co,[["__scopeId","data-v-f02eba3d"]]),To=D({__name:"ColorOption",props:{list:{},label:{},value:{}},setup(u){return(i,n)=>{const p=jl,l=Be;return v(),x(l,{label:i.label,value:i.value},{default:c(()=>[w("div",{class:"cOption"},[w("span",{class:"mr-15 label"},W(i.label),1),(v(!0),I(B,null,K(i.list,a=>(v(),x(p,{key:a,class:"mr-5 tag",style:Qe({"background-color":a})},{default:c(()=>[H("     ")]),_:2},1032,["style"]))),128))])]),_:1},8,["label","value"])}}});const kt=A(To,[["__scopeId","data-v-9ed243de"]]),Lo=D({__name:"ColorBlock",props:{list:{},isEdit:{type:Boolean}},emits:["update:list"],setup(u,{emit:i}){const l=N(u,"list",i),a=(d,t)=>{t&&l.value.splice(d,1,t)};return(d,t)=>{const r=zl;return v(),I("div",{class:"color-block"},[(v(!0),I(B,null,K(d.list,(o,_)=>(v(),I("div",{class:"bar",key:_+o},[w("div",{class:"bar-color"},[w("div",{style:{flex:"1",width:"100%"}}," "),w("div",{style:Qe([{width:"100%"},{"background-color":o,height:(d.isEdit?100:138)+15*_+"px"}])},null,4)]),d.isEdit?(v(),x(r,{key:0,"model-value":o,"onUpdate:modelValue":g=>a(_,g)},null,8,["model-value","onUpdate:modelValue"])):M("",!0),w("div",{style:{display:"inline-block"}},"序号"+W(_+1),1)]))),128))])}}});const Ut=A(Lo,[["__scopeId","data-v-e50974a5"]]),ko=D({__name:"ColorScheme",setup(u){const{chartData:i}=U(),n=k(!1),p=()=>{a.value=G(i.dashboardStyle.colorScheme),a.value===Fe&&(r.value=G(i.dashboardStyle.customColors)),n.value=!0},l=()=>{n.value=!1,i.dashboardStyle.colorScheme=G(a.value),i.dashboardStyle.colorScheme===Fe?i.dashboardStyle.customColors=G(r.value):i.dashboardStyle.customColors=[]},a=k(0),d=L(()=>Ee(ut,"colorKey")[a.value].colors),t=L(()=>{var _;const o=i.dashboardStyle.colorScheme;return o===Fe?"自定义配色":`${(_=Ee(ut,"colorKey")[o])==null?void 0:_.label}`}),r=k(["#7daeff","#7daeff","#7daeff","#7daeff","#7daeff","#7daeff","#7daeff","#7daeff","#7daeff"]);return(o,_)=>{const g=Ye,b=qe,m=_t,y=Ne;return v(),I("div",null,[s(g,{style:{width:"100%"},onClick:p},{default:c(()=>[H(W(t.value),1)]),_:1}),s(y,{class:"color-dialog",modelValue:n.value,"onUpdate:modelValue":_[3]||(_[3]=f=>n.value=f),title:"图表配色",width:"700px","destroy-on-close":""},{footer:c(()=>[w("span",{class:"dialog-footer"},[s(g,{onClick:_[2]||(_[2]=f=>n.value=!1)},{default:c(()=>[H("取消")]),_:1}),s(g,{type:"primary",onClick:l},{default:c(()=>[H("确定")]),_:1})])]),default:c(()=>[s(m,{label:"配色方案","label-width":"100px"},{default:c(()=>[s(b,{modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=f=>a.value=f),style:{width:"100%"}},{default:c(()=>[(v(!0),I(B,null,K(e(ut),f=>(v(),x(kt,{list:f.colors,key:f.colorKey,label:f.label,value:f.colorKey},null,8,["list","label","value"]))),128)),s(kt,{list:r.value,label:"自定义",value:e(Fe)},null,8,["list","value"])]),_:1},8,["modelValue"])]),_:1}),a.value===e(Fe)?(v(),x(m,{key:0,label:"自定义配色","label-width":"100px"},{default:c(()=>[s(Ut,{list:r.value,"onUpdate:list":_[1]||(_[1]=f=>r.value=f),"is-edit":""},null,8,["list"])]),_:1})):(v(),x(m,{key:1,label:"预览配色","label-width":"100px"},{default:c(()=>[s(Ut,{list:d.value},null,8,["list"])]),_:1}))]),_:1},8,["modelValue"])])}}});const pe=A(ko,[["__scopeId","data-v-2a2653a7"]]),xt=D({__name:"blur-input",props:{modelValue:{}},emits:["update:modelValue"],setup(u,{emit:i}){const n=u,p=i,l=k("");Ae(()=>{l.value=n.modelValue});const a=()=>{p("update:modelValue",l.value)};return(d,t)=>{const r=Re;return v(),x(r,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),onBlur:a},null,8,["modelValue"])}}}),ke=D({__name:"xAxis-item",props:{modelValue:{},showX:{type:Boolean},scrollBar:{type:Boolean,default:!1},isScrollBar:{type:Boolean,default:!1}},emits:["update:modelValue","update:showX","update:scrollBar"],setup(u,{emit:i}){const n=u,p=i,{showX:l,modelValue:a,scrollBar:d}=vt(n,p);return(t,r)=>{const o=ee;return v(),x(O,{title:"X轴",disable:e(l),"onUpdate:disable":r[3]||(r[3]=_=>T(l)?l.value=_:null)},{default:c(()=>[w("div",{style:{display:"flex","flex-direction":"column"}},[s(o,{label:"显示标题",modelValue:e(a).showTitle,"onUpdate:modelValue":r[0]||(r[0]=_=>e(a).showTitle=_)},null,8,["modelValue"]),Ge(s(xt,{modelValue:e(a).title,"onUpdate:modelValue":r[1]||(r[1]=_=>e(a).title=_),placeholder:"请输入标题","show-word-limit":"",type:"text",maxlength:100},null,8,["modelValue"]),[[We,e(a).showTitle]]),t.isScrollBar?(v(),x(o,{key:0,label:"显示缩略轴",modelValue:e(d),"onUpdate:modelValue":r[2]||(r[2]=_=>T(d)?d.value=_:null)},null,8,["modelValue"])):M("",!0)])]),_:1},8,["disable"])}}}),Ze=D({__name:"chart-input",props:{modelValue:{}},emits:["update:modelValue"],setup(u,{emit:i}){const n=u,p=i,l=L({get(){return n.modelValue===""?null:n.modelValue},set(a){a===""?p("update:modelValue",null):p("update:modelValue",a)}});return(a,d)=>(v(),x(xt,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=t=>l.value=t)},null,8,["modelValue"]))}}),Uo=D({__name:"yAxis-item",props:{modelValue:{},showY:{type:Boolean},title:{default:"Y轴"}},emits:["update:modelValue","update:showY"],setup(u,{emit:i}){const n=u,p=i,{showY:l,modelValue:a}=vt(n,p);return(d,t)=>{const r=ee;return v(),x(O,{title:d.title,disable:e(l),"onUpdate:disable":t[4]||(t[4]=o=>T(l)?l.value=o:null)},{default:c(()=>[w("div",null,[s(r,{label:"显示标题",modelValue:e(a).showTitle,"onUpdate:modelValue":t[0]||(t[0]=o=>e(a).showTitle=o)},null,8,["modelValue"]),Ge(s(xt,{"show-word-limit":"",type:"text",placeholder:"请输入标题",modelValue:e(a).title,"onUpdate:modelValue":t[1]||(t[1]=o=>e(a).title=o),maxlength:100},null,8,["modelValue"]),[[We,e(a).showTitle]])]),w("div",null,[w("p",{class:"mb-8 mt-8"},"最大值"),s(Ze,{placeholder:"自动计算",modelValue:e(a).maxVal,"onUpdate:modelValue":t[2]||(t[2]=o=>e(a).maxVal=o),modelModifiers:{number:!0}},null,8,["modelValue"])]),w("div",null,[w("p",{class:"mb-8 mt-8"},"最小值"),s(Ze,{placeholder:"自动计算",modelValue:e(a).minVal,"onUpdate:modelValue":t[3]||(t[3]=o=>e(a).minVal=o),modelModifiers:{number:!0}},null,8,["modelValue"])])]),_:1},8,["title","disable"])}}});const Se=A(Uo,[["__scopeId","data-v-adcf8478"]]),Fo=D({__name:"Collapse-title",props:{title:{},modelValue:{type:Boolean,default:void 0},tip:{default:"单独设置该图表的整体样式"}},emits:["update:modelValue"],setup(u,{emit:i}){const n=u,p=i,l=k(!0),a=L({get(){return typeof n.modelValue=="boolean"?n.modelValue:l.value},set(d){typeof n.modelValue=="boolean"&&p("update:modelValue",d)}});return(d,t)=>{const r=bt,o=Xe;return v(),I("div",{class:"collapse-text"},[w("div",null,W(d.title),1),typeof n.modelValue=="boolean"?(v(),x(o,{key:0,effect:"dark",content:d.tip,placement:"top-end"},{default:c(()=>[s(r,{onClick:t[0]||(t[0]=xe(()=>{},["stop"])),modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=_=>a.value=_)},null,8,["modelValue"])]),_:1},8,["content"])):M("",!0)])}}});const fe=A(Fo,[["__scopeId","data-v-6692f80f"]]),$o=D({__name:"allChartStyle",props:{modelValue:{}},emits:["update:modelValue"],setup(u,{emit:i}){const n=u,p=i;Ae(()=>{n.modelValue.enable?l.value=G(n.modelValue):l.value=G($e())});const l=k($e()),a=t=>{t?l.value.enable=t:l.value=$e()},d=t=>{l.value={...t,enable:l.value.enable}};return Ve(()=>l.value,()=>{p("update:modelValue",l.value)}),(t,r)=>(v(),I(B,null,[s(fe,{style:{padding:"unset"},title:"图表整体样式","model-value":l.value.enable,"onUpdate:modelValue":a},null,8,["model-value"]),s($a,{class:Le(l.value.enable?"":"is-disable"),"model-value":l.value,"onUpdate:modelValue":d,style:{padding:"10px 0","border-bottom":"1px solid rgb(240, 240, 240)"}},null,8,["class","model-value"])],64))}});const ge=A($o,[["__scopeId","data-v-38ed3ce1"]]),Oo=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const n=U(),a=N(u,"dashboardStyle",i);return(d,t)=>{const r=ee;return v(),I(B,null,[s(ge,{modelValue:e(n).chartStyle,"onUpdate:modelValue":t[0]||(t[0]=o=>e(n).chartStyle=o)},null,8,["modelValue"]),s(fe,{title:"面积图样式"}),s(J,null,{default:c(()=>[s(O,{title:"面积图类型"},{default:c(()=>[s(le,{modelValue:e(a).graphType,"onUpdate:modelValue":t[1]||(t[1]=o=>e(a).graphType=o),list:e(Qt)},null,8,["modelValue","list"])]),_:1}),s(ke,{"show-x":e(a).showX,"onUpdate:showX":t[2]||(t[2]=o=>e(a).showX=o),modelValue:e(a).xDisplay,"onUpdate:modelValue":t[3]||(t[3]=o=>e(a).xDisplay=o)},null,8,["show-x","modelValue"]),s(Se,{"show-y":e(a).showY,"onUpdate:showY":t[4]||(t[4]=o=>e(a).showY=o),modelValue:e(a).yDisplay,"onUpdate:modelValue":t[5]||(t[5]=o=>e(a).yDisplay=o)},null,8,["show-y","modelValue"]),s(O,{title:"图例",disable:e(a).showLegend,"onUpdate:disable":t[7]||(t[7]=o=>e(a).showLegend=o)},{default:c(()=>[w("div",null,[w("p",{class:"mb-8 mt-8"},"位置"),s(le,{modelValue:e(a).legendType,"onUpdate:modelValue":t[6]||(t[6]=o=>e(a).legendType=o),list:e(De)},null,8,["modelValue","list"])])]),_:1},8,["disable"]),s(O,{title:"数据标签"},{default:c(()=>[s(r,{label:"显示数据标签",modelValue:e(a).showDataLabel,"onUpdate:modelValue":t[8]||(t[8]=o=>e(a).showDataLabel=o)},null,8,["modelValue"])]),_:1}),s(O,{title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1})],64)}}});const Mo=A(Oo,[["__scopeId","data-v-bba0e37e"]]),Bo=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),Ao=D({__name:"DataDisplay",props:{show:{type:Boolean},num:{}},emits:["update:show","update:num"],setup(u,{emit:i}){const n=u,p=i,{show:l,num:a}=vt(n,p);return(d,t)=>{const r=ee,o=ht;return v(),I("div",{class:"style-set-flex"},[s(r,{label:"显示前",modelValue:e(l),"onUpdate:modelValue":t[0]||(t[0]=_=>T(l)?l.value=_:null)},null,8,["modelValue"]),s(o,{disabled:!e(l),modelValue:e(a),"onUpdate:modelValue":t[1]||(t[1]=_=>T(a)?a.value=_:null),modelModifiers:{number:!0},class:"ml-5 w-100",max:1e3,min:1,"controls-position":"right"},null,8,["disabled","modelValue"]),H(" 条数据 ")])}}});const nl=A(Ao,[["__scopeId","data-v-55b5ab6c"]]),Ro=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const n=U(),a=N(u,"dashboardStyle",i);return(d,t)=>{const r=bt,o=ee;return v(),I(B,null,[s(ge,{modelValue:e(n).chartStyle,"onUpdate:modelValue":t[0]||(t[0]=_=>e(n).chartStyle=_)},null,8,["modelValue"]),s(fe,{title:"条形图样式"}),s(J,null,{default:c(()=>[s(O,{title:"条形图类型"},{default:c(()=>[s(le,{modelValue:e(a).graphType,"onUpdate:modelValue":t[1]||(t[1]=_=>e(a).graphType=_),list:e(Zt)},null,8,["modelValue","list"])]),_:1}),s(ke,{"show-x":e(a).showX,"onUpdate:showX":t[2]||(t[2]=_=>e(a).showX=_),modelValue:e(a).xDisplay,"onUpdate:modelValue":t[3]||(t[3]=_=>e(a).xDisplay=_)},null,8,["show-x","modelValue"]),s(Se,{"show-y":e(a).showY,"onUpdate:showY":t[4]||(t[4]=_=>e(a).showY=_),modelValue:e(a).yDisplay,"onUpdate:modelValue":t[5]||(t[5]=_=>e(a).yDisplay=_)},null,8,["show-y","modelValue"]),s(O,{title:"图例",disable:e(a).showLegend},{right:c(()=>[s(r,{onClick:t[6]||(t[6]=xe(()=>{},["stop"])),modelValue:e(a).showLegend,"onUpdate:modelValue":t[7]||(t[7]=_=>e(a).showLegend=_)},null,8,["modelValue"])]),default:c(()=>[w("div",null,[w("p",{class:"mb-8 mt-8"},"位置"),s(le,{modelValue:e(a).legendType,"onUpdate:modelValue":t[8]||(t[8]=_=>e(a).legendType=_),list:e(De)},null,8,["modelValue","list"])])]),_:1},8,["disable"]),s(O,{title:"柱条的宽度"},{default:c(()=>[s(Ze,{placeholder:"自适应",min:10,modelValue:e(a).barWidth,"onUpdate:modelValue":t[9]||(t[9]=_=>e(a).barWidth=_),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),s(O,{title:"数据标签"},{default:c(()=>[s(o,{label:"显示数据标签",modelValue:e(a).showDataLabel,"onUpdate:modelValue":t[10]||(t[10]=_=>e(a).showDataLabel=_)},null,8,["modelValue"])]),_:1}),s(O,{title:"数据显示"},{default:c(()=>[s(nl,{show:e(a).dataDisplay,"onUpdate:show":t[11]||(t[11]=_=>e(a).dataDisplay=_),num:e(a).dataDisplayNum,"onUpdate:num":t[12]||(t[12]=_=>e(a).dataDisplayNum=_)},null,8,["show","num"])]),_:1}),s(O,{title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1})],64)}}});const Po=A(Ro,[["__scopeId","data-v-1a5008cc"]]),jo=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),zo=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const n=U(),a=N(u,"dashboardStyle",i);return(d,t)=>{const r=ee;return v(),I(B,null,[s(ge,{modelValue:e(n).chartStyle,"onUpdate:modelValue":t[0]||(t[0]=o=>e(n).chartStyle=o)},null,8,["modelValue"]),s(fe,{title:"双轴图样式"}),s(J,null,{default:c(()=>[s(ke,{"show-x":e(a).showX,"onUpdate:showX":t[1]||(t[1]=o=>e(a).showX=o),modelValue:e(a).xDisplay,"onUpdate:modelValue":t[2]||(t[2]=o=>e(a).xDisplay=o),"scroll-bar":e(a).scrollBar,"onUpdate:scrollBar":t[3]||(t[3]=o=>e(a).scrollBar=o),isScrollBar:""},null,8,["show-x","modelValue","scroll-bar"]),s(Se,{title:"Y轴(左)","show-y":e(a).showY,"onUpdate:showY":t[4]||(t[4]=o=>e(a).showY=o),modelValue:e(a).yDisplay,"onUpdate:modelValue":t[5]||(t[5]=o=>e(a).yDisplay=o)},null,8,["show-y","modelValue"]),s(Se,{title:"Y轴(右)","show-y":e(a).showAuxY,"onUpdate:showY":t[6]||(t[6]=o=>e(a).showAuxY=o),modelValue:e(a).auxYDisplay,"onUpdate:modelValue":t[7]||(t[7]=o=>e(a).auxYDisplay=o)},null,8,["show-y","modelValue"]),s(O,{title:"图例",disable:e(a).showLegend,"onUpdate:disable":t[9]||(t[9]=o=>e(a).showLegend=o)},{default:c(()=>[w("div",null,[w("p",{class:"mb-8 mt-8"},"位置"),s(le,{modelValue:e(a).legendType,"onUpdate:modelValue":t[8]||(t[8]=o=>e(a).legendType=o),list:e(De)},null,8,["modelValue","list"])])]),_:1},8,["disable"]),s(O,{title:"数据标签"},{default:c(()=>[s(r,{label:"显示数据标签",modelValue:e(a).showDataLabel,"onUpdate:modelValue":t[10]||(t[10]=o=>e(a).showDataLabel=o)},null,8,["modelValue"])]),_:1}),s(O,{title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1})],64)}}});const Eo=A(zo,[["__scopeId","data-v-cb385928"]]),No=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Xo=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i);return(a,d)=>{const t=ee;return v(),x(J,null,{default:c(()=>[s(ke,{"show-x":e(l).showX,"onUpdate:showX":d[0]||(d[0]=r=>e(l).showX=r),modelValue:e(l).xDisplay,"onUpdate:modelValue":d[1]||(d[1]=r=>e(l).xDisplay=r)},null,8,["show-x","modelValue"]),s(Se,{"show-y":e(l).showY,"onUpdate:showY":d[2]||(d[2]=r=>e(l).showY=r),modelValue:e(l).yDisplay,"onUpdate:modelValue":d[3]||(d[3]=r=>e(l).yDisplay=r)},null,8,["show-y","modelValue"]),s(O,{title:"图例",disable:e(l).showLegend,"onUpdate:disable":d[5]||(d[5]=r=>e(l).showLegend=r)},{default:c(()=>[w("div",null,[w("p",{class:"mb-8 mt-8"},"位置"),s(le,{modelValue:e(l).legendType,"onUpdate:modelValue":d[4]||(d[4]=r=>e(l).legendType=r),list:e(De)},null,8,["modelValue","list"])])]),_:1},8,["disable"]),s(O,{title:"数据标签"},{default:c(()=>[s(t,{label:"显示数据标签",modelValue:e(l).showDataLabel,"onUpdate:modelValue":d[6]||(d[6]=r=>e(l).showDataLabel=r)},null,8,["modelValue"])]),_:1}),s(O,{title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1})}}});const Yo=A(Xo,[["__scopeId","data-v-3c9852c3"]]),qo=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),Ho=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const n=U(),a=N(u,"dashboardStyle",i);return(d,t)=>{const r=ee;return v(),I(B,null,[s(ge,{modelValue:e(n).chartStyle,"onUpdate:modelValue":t[0]||(t[0]=o=>e(n).chartStyle=o)},null,8,["modelValue"]),s(fe,{title:"柱形图样式"}),s(J,null,{default:c(()=>[s(O,{title:"柱形图类型"},{default:c(()=>[s(le,{modelValue:e(a).graphType,"onUpdate:modelValue":t[1]||(t[1]=o=>e(a).graphType=o),list:e(Zt)},null,8,["modelValue","list"])]),_:1}),s(ke,{"show-x":e(a).showX,"onUpdate:showX":t[2]||(t[2]=o=>e(a).showX=o),modelValue:e(a).xDisplay,"onUpdate:modelValue":t[3]||(t[3]=o=>e(a).xDisplay=o),scrollBar:e(a).scrollBar,"onUpdate:scrollBar":t[4]||(t[4]=o=>e(a).scrollBar=o),isScrollBar:""},null,8,["show-x","modelValue","scrollBar"]),s(Se,{"show-y":e(a).showY,"onUpdate:showY":t[5]||(t[5]=o=>e(a).showY=o),modelValue:e(a).yDisplay,"onUpdate:modelValue":t[6]||(t[6]=o=>e(a).yDisplay=o)},null,8,["show-y","modelValue"]),s(O,{title:"图例",disable:e(a).showLegend,"onUpdate:disable":t[8]||(t[8]=o=>e(a).showLegend=o)},{default:c(()=>[w("div",null,[w("p",{class:"mb-8 mt-8"},"位置"),s(le,{modelValue:e(a).legendType,"onUpdate:modelValue":t[7]||(t[7]=o=>e(a).legendType=o),list:e(De)},null,8,["modelValue","list"])])]),_:1},8,["disable"]),s(O,{title:"柱条的宽度"},{default:c(()=>[s(Ze,{placeholder:"自适应",min:10,modelValue:e(a).barWidth,"onUpdate:modelValue":t[9]||(t[9]=o=>e(a).barWidth=o),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),s(O,{title:"数据标签"},{default:c(()=>[s(r,{label:"显示数据标签",modelValue:e(a).showDataLabel,"onUpdate:modelValue":t[10]||(t[10]=o=>e(a).showDataLabel=o)},null,8,["modelValue"])]),_:1}),s(O,{title:"数据显示"},{default:c(()=>[s(nl,{show:e(a).dataDisplay,"onUpdate:show":t[11]||(t[11]=o=>e(a).dataDisplay=o),num:e(a).dataDisplayNum,"onUpdate:num":t[12]||(t[12]=o=>e(a).dataDisplayNum=o)},null,8,["show","num"])]),_:1}),s(O,{title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1})],64)}}});const Jo=A(Ho,[["__scopeId","data-v-4ec8e2cc"]]),Go=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),Wo=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){return N(u,"dashboardStyle",i),(l,a)=>(v(),x(J,null,{default:c(()=>[s(O,{class:"un-header-padding",title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1}))}});const Ko=A(Wo,[["__scopeId","data-v-ed8a510b"]]),Qo=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),sl=D({__name:"tableStyle",props:{modelValue:{}},emits:["update:modelValue"],setup(u,{emit:i}){const n=u,p=i;Ae(()=>{n.modelValue.enable?l.value=G(n.modelValue):l.value=G(Oe())});const l=k(Oe()),a=t=>{t?l.value.enable=t:l.value=Oe()},d=t=>{l.value={...t,enable:l.value.enable}};return Ve(()=>l.value,()=>{p("update:modelValue",l.value)}),(t,r)=>(v(),x(O,{title:"表格样式",disable:l.value.enable,"onUpdate:disable":a},{default:c(()=>[s(Oa,{"model-value":l.value,"onUpdate:modelValue":d},null,8,["model-value"])]),_:1},8,["disable"]))}}),Zo=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const n=u,p=i,l=U(),a=L(()=>{const t=l.chartData.dataConfig.xData.length;return d.value.isDisplayIndex?t+1:t}),d=N(n,"dashboardStyle",p);return(t,r)=>{const o=ee,_=ht,g=Be,b=qe;return v(),I(B,null,[s(ge,{modelValue:e(l).chartStyle,"onUpdate:modelValue":r[0]||(r[0]=m=>e(l).chartStyle=m)},null,8,["modelValue"]),s(fe,{title:"明细表样式"}),s(J,null,{default:c(()=>[s(O,{title:"数据显示"},{default:c(()=>[s(o,{label:"显示序号",modelValue:e(d).isDisplayIndex,"onUpdate:modelValue":r[1]||(r[1]=m=>e(d).isDisplayIndex=m)},null,8,["modelValue"]),w("div",{class:"style-set-flex"},[s(o,{label:"显示前",modelValue:e(d).isDisplayLimit,"onUpdate:modelValue":r[2]||(r[2]=m=>e(d).isDisplayLimit=m)},null,8,["modelValue"]),s(_,{disabled:!e(d).isDisplayLimit,modelValue:e(d).displayNum,"onUpdate:modelValue":r[3]||(r[3]=m=>e(d).displayNum=m),modelModifiers:{number:!0},class:"ml-5",style:{width:"100px"},max:1e3,min:1,"controls-position":"right"},null,8,["disabled","modelValue"]),H(" 条数据 ")])]),_:1}),s(O,{title:"列冻结"},{default:c(()=>[w("div",{class:"style-set-flex"},[s(o,{label:"电脑端固定前",modelValue:e(d).isPcColumnFreeze,"onUpdate:modelValue":r[4]||(r[4]=m=>e(d).isPcColumnFreeze=m)},null,8,["modelValue"]),s(b,{modelValue:e(d).pcColumnFreeze,"onUpdate:modelValue":r[5]||(r[5]=m=>e(d).pcColumnFreeze=m),class:"ml-5 w-100",disabled:!e(d).isPcColumnFreeze},{default:c(()=>[(v(!0),I(B,null,K(a.value,m=>(v(),x(g,{key:m,label:m+"列",value:m},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),w("div",{class:"style-set-flex"},[s(o,{label:"移动端固定前",modelValue:e(d).isH5ColumnFreeze,"onUpdate:modelValue":r[6]||(r[6]=m=>e(d).isH5ColumnFreeze=m)},null,8,["modelValue"]),s(b,{modelValue:e(d).h5ColumnFreeze,"onUpdate:modelValue":r[7]||(r[7]=m=>e(d).h5ColumnFreeze=m),class:"ml-5 w-100",disabled:!e(d).isH5ColumnFreeze},{default:c(()=>[(v(!0),I(B,null,K(a.value,m=>(v(),x(g,{key:m,label:m+"列",value:m},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])])]),_:1}),s(sl,{modelValue:e(l).tableStyle,"onUpdate:modelValue":r[8]||(r[8]=m=>e(l).tableStyle=m)},null,8,["modelValue"])]),_:1})],64)}}});const en=A(Zo,[["__scopeId","data-v-0eaf75d8"]]),tn=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),ln=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){return N(u,"dashboardStyle",i),(l,a)=>(v(),x(J,null,{default:c(()=>[s(O,{title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1}))}});const an=A(ln,[["__scopeId","data-v-c4c66eae"]]),on=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),nn=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const n=U(),a=N(u,"dashboardStyle",i),d=L({get(){return a.value.size.toString()},set(r){a.value.size=Number(r)}}),t=L({get(){return a.value.customColors[0]},set(r){a.value.customColors=[r],a.value.colorScheme=Fe}});return(r,o)=>(v(),I(B,null,[s(ge,{modelValue:e(n).chartStyle,"onUpdate:modelValue":o[0]||(o[0]=_=>e(n).chartStyle=_)},null,8,["modelValue"]),s(fe,{title:"指标图样式"}),s(J,null,{default:c(()=>[s(O,{title:"尺寸"},{default:c(()=>[s(le,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=_=>d.value=_),list:e(ga)},null,8,["modelValue","list"])]),_:1}),s(O,{title:"数值颜色"},{default:c(()=>[s(Ma,{color:t.value,"onUpdate:color":o[2]||(o[2]=_=>t.value=_)},null,8,["color"])]),_:1})]),_:1})],64))}}),sn=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),rn=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const n=U(),a=N(u,"dashboardStyle",i);return(d,t)=>{const r=ee;return v(),I(B,null,[s(ge,{modelValue:e(n).chartStyle,"onUpdate:modelValue":t[0]||(t[0]=o=>e(n).chartStyle=o)},null,8,["modelValue"]),s(fe,{title:"折线图样式"}),s(J,null,{default:c(()=>[s(O,{title:"折线图类型"},{default:c(()=>[s(le,{modelValue:e(a).graphType,"onUpdate:modelValue":t[1]||(t[1]=o=>e(a).graphType=o),list:e(Qt)},null,8,["modelValue","list"])]),_:1}),s(ke,{"show-x":e(a).showX,"onUpdate:showX":t[2]||(t[2]=o=>e(a).showX=o),modelValue:e(a).xDisplay,"onUpdate:modelValue":t[3]||(t[3]=o=>e(a).xDisplay=o)},null,8,["show-x","modelValue"]),s(Se,{"show-y":e(a).showY,"onUpdate:showY":t[4]||(t[4]=o=>e(a).showY=o),modelValue:e(a).yDisplay,"onUpdate:modelValue":t[5]||(t[5]=o=>e(a).yDisplay=o)},null,8,["show-y","modelValue"]),s(O,{title:"图例",disable:e(a).showLegend,"onUpdate:disable":t[7]||(t[7]=o=>e(a).showLegend=o)},{default:c(()=>[w("div",null,[w("p",{class:"mb-8 mt-8"},"位置"),s(le,{modelValue:e(a).legendType,"onUpdate:modelValue":t[6]||(t[6]=o=>e(a).legendType=o),list:e(De)},null,8,["modelValue","list"])])]),_:1},8,["disable"]),s(O,{title:"数据标签"},{default:c(()=>[s(r,{label:"显示数据标签",modelValue:e(a).showDataLabel,"onUpdate:modelValue":t[8]||(t[8]=o=>e(a).showDataLabel=o)},null,8,["modelValue"])]),_:1}),s(O,{title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1})],64)}}});const dn=A(rn,[["__scopeId","data-v-0dd7e064"]]),un=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"})),pn=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const n=U(),a=N(u,"dashboardStyle",i);return(d,t)=>{const r=ee;return v(),I(B,null,[s(ge,{modelValue:e(n).chartStyle,"onUpdate:modelValue":t[0]||(t[0]=o=>e(n).chartStyle=o)},null,8,["modelValue"]),s(fe,{title:"饼图样式"}),s(J,null,{default:c(()=>[s(O,{title:"饼图类型"},{default:c(()=>[s(le,{modelValue:e(a).graphType,"onUpdate:modelValue":t[1]||(t[1]=o=>e(a).graphType=o),list:e(ha)},null,8,["modelValue","list"])]),_:1}),s(O,{title:"图例",disable:e(a).showLegend,"onUpdate:disable":t[3]||(t[3]=o=>e(a).showLegend=o)},{default:c(()=>[w("div",null,[w("p",{class:"mb-8 mt-8"},"位置"),s(le,{modelValue:e(a).legendType,"onUpdate:modelValue":t[2]||(t[2]=o=>e(a).legendType=o),list:e(De)},null,8,["modelValue","list"])])]),_:1},8,["disable"]),s(O,{title:"数据标签"},{default:c(()=>[s(r,{label:"显示数据标签",modelValue:e(a).showDataLabel,"onUpdate:modelValue":t[4]||(t[4]=o=>e(a).showDataLabel=o)},null,8,["modelValue"])]),_:1}),s(O,{title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1})],64)}}});const cn=A(pn,[["__scopeId","data-v-68a25d75"]]),mn=Object.freeze(Object.defineProperty({__proto__:null,default:cn},Symbol.toStringTag,{value:"Module"})),_n=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i),a=U(),d=()=>{l.value.rowName||(l.value.rowName="行汇总")},t=()=>{l.value.colName||(l.value.colName="列汇总")};return(r,o)=>{const _=ee,g=Re;return v(),I(B,null,[s(ge,{modelValue:e(a).chartStyle,"onUpdate:modelValue":o[0]||(o[0]=b=>e(a).chartStyle=b)},null,8,["modelValue"]),s(fe,{title:"透视表样式"}),s(J,null,{default:c(()=>[s(O,{title:"汇总"},{default:c(()=>[w("div",null,[s(_,{modelValue:e(l).isRowSummary,"onUpdate:modelValue":o[1]||(o[1]=b=>e(l).isRowSummary=b),label:"显示行汇总"},null,8,["modelValue"])]),e(l).isRowSummary?(v(),x(g,{key:0,modelValue:e(l).rowName,"onUpdate:modelValue":o[2]||(o[2]=b=>e(l).rowName=b),onBlur:d,placeholder:"请输入汇总行的名称"},{prepend:c(()=>[H("名称:")]),_:1},8,["modelValue"])):M("",!0),w("div",null,[s(_,{modelValue:e(l).isColumnSummary,"onUpdate:modelValue":o[3]||(o[3]=b=>e(l).isColumnSummary=b),label:"显示列汇总"},null,8,["modelValue"])]),e(l).isColumnSummary?(v(),x(g,{key:1,modelValue:e(l).colName,"onUpdate:modelValue":o[4]||(o[4]=b=>e(l).colName=b),onBlur:t,placeholder:"请输入列总行的名称"},{prepend:c(()=>[H("名称:")]),_:1},8,["modelValue"])):M("",!0)]),_:1}),s(sl,{modelValue:e(a).tableStyle,"onUpdate:modelValue":o[5]||(o[5]=b=>e(a).tableStyle=b)},null,8,["modelValue"])]),_:1})],64)}}}),fn=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"})),yn=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){return N(u,"dashboardStyle",i),(l,a)=>(v(),x(J,null,{default:c(()=>[s(O,{title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1}))}});const vn=A(yn,[["__scopeId","data-v-11730c6c"]]),bn=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"})),gn=D({__name:"styleSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i);return(a,d)=>{const t=ee;return v(),x(J,null,{default:c(()=>[s(ke,{"show-x":e(l).showX,"onUpdate:showX":d[0]||(d[0]=r=>e(l).showX=r),modelValue:e(l).xDisplay,"onUpdate:modelValue":d[1]||(d[1]=r=>e(l).xDisplay=r)},null,8,["show-x","modelValue"]),s(Se,{"show-y":e(l).showY,"onUpdate:showY":d[2]||(d[2]=r=>e(l).showY=r),modelValue:e(l).yDisplay,"onUpdate:modelValue":d[3]||(d[3]=r=>e(l).yDisplay=r)},null,8,["show-y","modelValue"]),s(O,{title:"图例",disable:e(l).showLegend,"onUpdate:disable":d[5]||(d[5]=r=>e(l).showLegend=r)},{default:c(()=>[w("div",null,[w("p",{class:"mb-8 mt-8"},"位置"),s(le,{modelValue:e(l).legendType,"onUpdate:modelValue":d[4]||(d[4]=r=>e(l).legendType=r),list:e(De)},null,8,["modelValue","list"])])]),_:1},8,["disable"]),s(O,{title:"数据标签"},{default:c(()=>[s(t,{label:"显示数据标签",modelValue:e(l).showDataLabel,"onUpdate:modelValue":d[6]||(d[6]=r=>e(l).showDataLabel=r)},null,8,["modelValue"])]),_:1}),s(O,{title:"图表配色"},{default:c(()=>[s(pe)]),_:1})]),_:1})}}});const hn=A(gn,[["__scopeId","data-v-64ece719"]]),Vn=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"})),rl={},xn=Object.assign({"../charts/areaChart/styleSetting.vue":Bo,"../charts/barChart/styleSetting.vue":jo,"../charts/biaxialChart/styleSetting.vue":No,"../charts/bubbleChart/styleSetting.vue":qo,"../charts/columnChart/styleSetting.vue":Go,"../charts/dashboard/styleSetting.vue":Qo,"../charts/detailedChart/styleSetting.vue":tn,"../charts/funnelChart/styleSetting.vue":on,"../charts/indicatorsChart/styleSetting.vue":sn,"../charts/lineChart/styleSetting.vue":un,"../charts/pieChart/styleSetting.vue":mn,"../charts/pivotTable/styleSetting.vue":fn,"../charts/radarChart/styleSetting.vue":bn,"../charts/scatterChart/styleSetting.vue":Vn});Object.entries(xn).forEach(([u,i])=>{const n=u.split(lt.sep);n.pop();const p=n.pop();let l=i;l=l.default||l,rl[p]=l});function Sn(u){let i=rl[u]??null;return at(i)==="module"&&(i=i==null?void 0:i.default),i||console.error(`你需要查找控件类型为${u}的配置组件, 但是并没有找到, 请检查一下是否存在该类型, 或者组件路径存在问题`),i}const Dn=D({__name:"DropArea",props:{validations:{type:Function}},emits:["dropCallback"],setup(u,{emit:i}){const n=u,p=i,l=k();return je(l,"drop",function(a){const d=Lt(),t=n.validations;d&&t&&t(d)&&p("dropCallback",d),l.value.classList.remove("dragging"),l.value.classList.remove("error")}),je(l,"dragover",a=>{a.preventDefault()}),je(l,"dragenter",a=>{const d=Lt(),t=n.validations;d?t&&t(d)!==!0?(l.value.classList.add("error"),a.preventDefault()):l.value.classList.add("dragging"):l.value.classList.add("error")}),je(l,"dragleave",()=>{l.value.classList.remove("dragging"),l.value.classList.remove("error")}),(a,d)=>(v(),I("div",{ref_key:"dropRef",ref:l,class:"drag-placeholder"},"从左侧拖拽添加字段",512))}});const In=A(Dn,[["__scopeId","data-v-072f0ac1"]]),Cn=D({__name:"ItemName",props:{chartFieldInfo:{}},setup(u){const i=U(),{chartData:n}=i,p=u,l=L(()=>{var _,g;const{fieldId:t,fieldType:r}=p.chartFieldInfo;let o;switch(r){case C.formula:return o=(_=n.columnJson.find(b=>b.fieldId===t))==null?void 0:_.label,o;default:return o=(g=i.fieldList.find(b=>b.fieldId===t))==null?void 0:g.options.label,o}}),a=L(()=>l.value?l.value===p.chartFieldInfo.label:!0),d=L(()=>{const t=Ee([..._e[qt],..._e[jt],..._e[Xt],..._e[zt],..._e[Nt]],"value"),r=p.chartFieldInfo.summaryMethod,o=p.chartFieldInfo.proportion,_=o&&o!==ye.none?`-${t[o].label}`:"";return t[r]?`(${t[r].label}${_})`:""});return(t,r)=>{const o=Xe;return v(),I("div",{class:"item-name_box"},[s(o,{disabled:a.value,effect:"dark",content:`原名: ${l.value}`,placement:"top-start"},{default:c(()=>[w("span",{class:"az-ellipsis",style:{"font-weight":"bold"}},W(t.chartFieldInfo.label),1)]),_:1},8,["disabled","content"]),w("span",{style:{"flex-shrink":"0"}},W(d.value),1)])}}});const wn=A(Cn,[["__scopeId","data-v-97a34f80"]]),Tn=D({__name:"PopoverSecond",props:{actionList:{}},emits:["clickItem"],setup(u,{emit:i}){const n=i,p=k(!1),l=a=>{n("clickItem",a),p.value=!1};return(a,d)=>{const t=Xe,r=yt;return v(),x(r,{visible:p.value,"onUpdate:visible":d[0]||(d[0]=o=>p.value=o),"popper-class":"az-custom-popper",placement:"right",width:"auto",trigger:"hover"},{reference:c(()=>[he(a.$slots,"second-trigger",{},void 0,!0)]),default:c(()=>[w("ul",{class:"az-custom-popper-menu"},[(v(!0),I(B,null,K(a.actionList,(o,_)=>{var g,b,m,y;return v(),I("li",{key:_,class:Le(["az-custom-popper-menu__item",[(g=o.isActive)!=null&&g.call(o)?"isActive":"",(b=o.isDisable)!=null&&b.call(o)?"isDisable":""]]),onClick:xe(f=>{var h;return(h=o.isDisable)!=null&&h.call(o)?()=>{}:l(o)},["stop"])},[s(t,{disabled:!((m=o.isDisable)!=null&&m.call(o)),effect:"dark",width:200,content:(y=o.getDisableTooltip)==null?void 0:y.call(o),placement:"right"},{default:c(()=>[w("span",{style:{flex:"1","margin-right":"5px"}},W(o.label),1)]),_:2},1032,["disabled","content"]),o.getTip?(v(),I("span",{key:0,class:"fs-12 Gray_75"},W(o==null?void 0:o.getTip()),1)):M("",!0)],10,["onClick"])}),128))])]),_:3},8,["visible"])}}});const Ln=A(Tn,[["__scopeId","data-v-374be3ef"]]),kn=D({__name:"Popover",props:{actionList:{}},setup(u){const i=u,n=g=>{var b;(b=g.onClick)==null||b.call(g),p.value=!1};je(document,"dragstart",g=>{l.value=!1});const p=k(!1),l=L({set(g){a.value>0||(p.value=g)},get(){return p.value}}),a=k(0),d=k(),t=g=>{d.value=g,a.value=a.value+1},r=g=>{d.value===g&&(d.value=void 0),a.value=a.value-1},o=k([]),_=async()=>{o.value=X(await Promise.all(i.actionList))};return(g,b)=>{const m=tt,y=yt;return v(),x(y,{ref:"PopoverRef","popper-class":"az-custom-popper",placement:"bottom-start",width:180,visible:l.value,"onUpdate:visible":b[0]||(b[0]=f=>l.value=f),trigger:"click"},{reference:c(()=>[s(m,{class:"ml-15",underline:!1,icon:e(El)},null,8,["icon"])]),default:c(()=>[s(Ht,{load:_},{default:c(()=>[w("ul",{class:"az-custom-popper-menu"},[(v(!0),I(B,null,K(o.value,(f,h)=>{var V;return v(),I(B,{key:h},[f.children?(v(),x(Ln,{key:0,onShow:S=>t(h),onHide:S=>r(h),"action-list":f.children,onClickItem:n},{"second-trigger":c(()=>[w("li",{class:"az-custom-popper-menu__item popper-item-flex"},[H(W(f.label)+" ",1),s(ve,{"icon-class":"CaretRight"})])]),_:2},1032,["onShow","onHide","action-list"])):(v(),I("li",{key:1,class:Le(["az-custom-popper-menu__item",[(V=f.isDisable)!=null&&V.call(f)?"isDisable":""]]),onClick:xe(S=>{var P;return(P=f.isDisable)!=null&&P.call(f)?()=>{}:n(f)},["stop"])},W(f.label),11,["onClick"]))],64)}),128))])]),_:1})]),_:1},8,["visible"])}}});const Un=A(kn,[["__scopeId","data-v-d8b4da50"]]),Fn=D({__name:"DataFormat",props:{visible:{type:Boolean},dataFormat:{}},emits:["update:visible","confirm"],setup(u,{emit:i}){const n=u,p=i,{chartDataFormatUnitText:l}=Va(),a=N(n,"visible",p),d=L(()=>n.dataFormat),t=k(99999999),r=k(""),o=()=>{m()},_=f=>{f||(d.value.unit=It[0].value),m()},g=f=>{f||(d.value.textUnit=""),m()},b=f=>{f||(d.value.toPrecision=2),m()},m=()=>{r.value=l(t.value,d.value)},y=()=>{a.value=!1,p("confirm",d.value)};return(f,h)=>{const V=Nl,S=Xl,P=_t,$=ee,z=ht,R=Be,te=qe,rt=Re,dt=ft,Dt=Ye,cl=Ne;return v(),x(cl,{modelValue:e(a),"onUpdate:modelValue":h[9]||(h[9]=q=>T(a)?a.value=q:null),"destroy-on-close":"","append-to-body":"",title:"数据格式",width:"500px",onOpened:o},{footer:c(()=>[w("span",{class:"dialog-footer"},[s(Dt,{onClick:h[8]||(h[8]=q=>a.value=!1)},{default:c(()=>[H("取消")]),_:1}),s(Dt,{type:"primary",onClick:y},{default:c(()=>[H("确定")]),_:1})])]),default:c(()=>[s(dt,null,{default:c(()=>[s(P,{label:"显示格式"},{default:c(()=>[s(S,{modelValue:d.value.format,"onUpdate:modelValue":h[0]||(h[0]=q=>d.value.format=q),onChange:m},{default:c(()=>[(v(!0),I(B,null,K(e(xa),q=>(v(),x(V,{key:q.value,label:q.value},{default:c(()=>[H(W(q.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(P,{label:"显示设置"},{default:c(()=>[w("div",null,[w("div",{class:"center"},[s($,{modelValue:d.value.isThousandth,"onUpdate:modelValue":h[1]||(h[1]=q=>d.value.isThousandth=q),onChange:m,label:"千分符"},null,8,["modelValue"])]),w("div",{class:"center"},[s($,{modelValue:d.value.isPrecision,"onUpdate:modelValue":h[2]||(h[2]=q=>d.value.isPrecision=q),onChange:b,class:"mr-10",label:"小数位数"},null,8,["modelValue"]),d.value.isPrecision?(v(),x(z,{key:0,modelValue:d.value.toPrecision,"onUpdate:modelValue":h[3]||(h[3]=q=>d.value.toPrecision=q),min:0,max:9,style:{width:"220px"},"controls-position":"right",onChange:m},null,8,["modelValue"])):M("",!0)]),d.value.format===e(ot).number?(v(),I(B,{key:0},[w("div",{class:"center"},[s($,{modelValue:d.value.isNumberLevel,"onUpdate:modelValue":h[4]||(h[4]=q=>d.value.isNumberLevel=q),class:"mr-10",onChange:_,label:"数值量级"},null,8,["modelValue"]),d.value.isNumberLevel?(v(),x(te,{key:0,modelValue:d.value.unit,"onUpdate:modelValue":h[5]||(h[5]=q=>d.value.unit=q),style:{width:"220px"},onChange:m},{default:c(()=>[(v(!0),I(B,null,K(e(It),q=>(v(),x(R,{key:q.value,label:q.label,value:q.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):M("",!0)]),w("div",{class:"center"},[s($,{modelValue:d.value.isTextUnit,"onUpdate:modelValue":h[6]||(h[6]=q=>d.value.isTextUnit=q),class:"mr-10",onChange:g,label:"显示单位"},null,8,["modelValue"]),d.value.isTextUnit?(v(),x(rt,{key:0,style:{width:"220px"},modelValue:d.value.textUnit,"onUpdate:modelValue":h[7]||(h[7]=q=>d.value.textUnit=q),onChange:m,placeholder:"请输入单位,如个、元等"},null,8,["modelValue"])):M("",!0)])],64)):M("",!0)])]),_:1}),w("div",{class:"format-view"},[r.value?(v(),I(B,{key:0},[H(W(r.value),1)],64)):(v(),I(B,{key:1},[H(W(t.value),1)],64))])]),_:1})]),_:1},8,["modelValue"])}}});const $n=A(Fn,[["__scopeId","data-v-f013f2d8"]]),On=D({__name:"DraggableItem",props:{chartFieldInfo:{},expandOperation:{},isDataFormat:{type:Boolean},isSort:{type:Boolean,default:!0},orderBys:{},exclusionField:{},isClose:{type:Boolean,default:!0}},emits:["remove","update:orderBys"],setup(u,{emit:i}){const n=u,p=i,l=U(),a=L(()=>{var m;return[{label:"重命名",onClick:()=>{const y=n.chartFieldInfo;Yl.prompt("","重命名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入名称",inputValue:y.label}).then(({value:f})=>{if(f)y.label=f;else{const{fieldId:h}=n.chartFieldInfo,V=l.fieldList.find(S=>S.fieldId===h);y.label=(V==null?void 0:V.options.label)??y.label}})}},...n.isSort?[{label:"排序",children:_e[qt].map(y=>({label:y.label,onClick:()=>{const f=n.chartFieldInfo,h=G(n.orderBys),V=h.findIndex(S=>S.column===f.tag);V>=0?h[V].sort=y.value:h.push({column:f.tag,sort:y.value}),y.value!==we.defaultOrder?r(t(h)):r(h)},isActive:()=>{const f=n.chartFieldInfo,h=n.orderBys.find(V=>V.column===f.tag);return h?h.sort===y.value:y.value===we.defaultOrder}}))}]:[],...((m=n==null?void 0:n.expandOperation)==null?void 0:m.call(n))??[],...n.isDataFormat?[{label:"数据格式",onClick:()=>{_.value=G(n.chartFieldInfo.dataFormat),o.value=!0}}]:[]]}),d=()=>{const m=n.chartFieldInfo.tag,y=G(n.orderBys).filter(f=>f.column!==m);r(y),p("remove")},t=m=>{const y=((n==null?void 0:n.exclusionField)??[]).map(h=>h.tag);return m.filter(h=>!y.includes(h.column))},r=m=>{const y=m.filter(f=>f.sort!=="0");p("update:orderBys",y)},o=k(!1),_=k(),g=m=>{const y=n.chartFieldInfo;y.dataFormat=m},b=L(()=>n.orderBys.find(m=>m.column===n.chartFieldInfo.tag));return(m,y)=>{var h,V,S,P;const f=tt;return v(),I("div",{class:"item"},[w("span",{class:Le(((h=b.value)==null?void 0:h.sort)===e(we).asc||((V=b.value)==null?void 0:V.sort)===e(we).desc?"":"mr-5")},[((S=b.value)==null?void 0:S.sort)===e(we).asc?(v(),x(ve,{key:0,"icon-class":"Top"})):((P=b.value)==null?void 0:P.sort)===e(we).desc?(v(),x(ve,{key:1,"icon-class":"Bottom"})):M("",!0)],2),w("div",{style:{flex:"1"}},[s(wn,{"chart-field-info":m.chartFieldInfo},null,8,["chart-field-info"])]),s(Un,{"action-list":a.value},null,8,["action-list"]),m.isClose?(v(),x(f,{key:0,class:"ml-15",underline:!1,icon:e(ql),onClick:d},null,8,["icon"])):M("",!0),_.value?(v(),x($n,{key:1,visible:o.value,"onUpdate:visible":y[0]||(y[0]=$=>o.value=$),"data-format":_.value,onConfirm:g},null,8,["visible","data-format"])):M("",!0)])}}});const E=A(On,[["__scopeId","data-v-87d877c8"]]),Y=D({__name:"Draggable",props:{modelValue:{},multiple:{type:Boolean,default:!1},multipleLimit:{default:0},validations:{},isDropArea:{type:Boolean,default:!0},fieldKey:{default:"fieldId"},isUnique:{type:Boolean,default:!1},uniqueList:{default:()=>[]},uniqueText:{default:"添加失败!维度不允许添加重复的字段!"},receiveDataByType:{type:[String,Function],default:"x"}},emits:["update:modelValue"],setup(u,{emit:i}){const n=u,l=N(n,"modelValue",i,{deep:!0,clone:!0,passive:!0,shouldEmit(o){return!Hl(o,n.modelValue)}}),a=o=>{n.isUnique&&[...n.modelValue,...n.uniqueList].some(g=>g.fieldId===o.fieldId)?Bt.error(n.uniqueText):l.value.push(d(o))},d=o=>{const _=nt(o);return $t(n.receiveDataByType)?n.receiveDataByType(_):n.receiveDataByType==="y"?ol(o):_},t=o=>{l.value=l.value.filter((_,g)=>g!==o)},r=()=>n.fieldKey+"_"+Kl();return(o,_)=>(v(),I("div",null,[s(e(Wl),{modelValue:e(l),"onUpdate:modelValue":_[0]||(_[0]=g=>T(l)?l.value=g:null),"item-key":r,animation:"500"},{item:c(({element:g,index:b})=>[w("div",{class:"drag-item"},[he(o.$slots,"default",Jl(Gl({element:g,remove:t,index:b})),()=>[s(E,{"chart-field-info":g,"order-bys":[],onRemove:m=>t(b)},null,8,["chart-field-info","onRemove"])])])]),_:3},8,["modelValue"]),o.isDropArea?(v(),x(In,{key:0,class:Le(e(l).length>=1?"mt-12":""),onDropCallback:a,validations:o.validations},null,8,["class","validations"])):M("",!0)]))}});const oe=D({__name:"DraggableCondition",setup(u){const i=U(),{chartData:n}=i,p=k(),l=k(!1),a=k([]),d=()=>{a.value=n.dataConfig.conditions,l.value=!0},t=async()=>{var _;await((_=p.value)==null?void 0:_.validate()),n.dataConfig.conditions=a.value,l.value=!1},r=L(()=>n.frontType===1?void 0:n.sourceIds[0]),o=L(()=>n.frontType===1?i.fieldList:void 0);return(_,g)=>{const b=Ye,m=Ne;return v(),I("div",null,[e(n).dataConfig.conditions.length>=1?(v(),x(Aa,{key:0,class:"mb-10",fields:o.value,style:{"max-height":"240px","overflow-y":"auto"},condition:e(n).dataConfig.conditions},null,8,["fields","condition"])):M("",!0),s(b,{style:{width:"100%"},onClick:d},{default:c(()=>[H(" 点击设置过滤条件 ")]),_:1}),s(m,{modelValue:l.value,"onUpdate:modelValue":g[2]||(g[2]=y=>l.value=y),"append-to-body":"",title:"设置过滤条件",width:"800px"},{footer:c(()=>[w("span",{class:"dialog-footer"},[s(b,{onClick:g[1]||(g[1]=y=>l.value=!1)},{default:c(()=>[H("取消")]),_:1}),s(b,{type:"primary",onClick:t},{default:c(()=>[H("确认")]),_:1})])]),default:c(()=>[l.value?(v(),x(Ba,{key:0,condition:a.value,"onUpdate:condition":g[0]||(g[0]=y=>a.value=y),fields:o.value,sourceId:r.value,isDataType:"",ref_key:"fieldConditionRef",ref:p},null,8,["condition","fields","sourceId"])):M("",!0)]),_:1},8,["modelValue"])])}}}),ne=()=>{const{chartData:u}=U(),i=u.dashboardType,{isAdd:n,isClose:p}=be(i),l=L({get(){return u.dataConfig.xData},set(y){u.dataConfig.xData=y}}),a=L({get(){return u.dataConfig.yData},set(y){u.dataConfig.yData=y}}),d=L({get(){return u.dataConfig.target},set(y){u.dataConfig.target=y}}),t=L({get(){return u.dataConfig.xArrangeData},set(y){u.dataConfig.xArrangeData=y}}),r=L({get(){return u.dataConfig.orderBys??[]},set(y){const{xArrangeData:f,xData:h,yData:V,target:S}=u.dataConfig,P=[...f,...h,...V,...S].map(z=>z.tag),$=y.filter(z=>P.includes(z.column));u.dataConfig.orderBys=$}}),o=L(()=>n(u,"x")),_=L(()=>n(u,"a")),g=L(()=>n(u,"y")),b=L(()=>n(u,"t")),m=L(()=>p(u,"y"));return{xData:l,yData:a,tData:d,aData:t,orderBys:r,isXDrag:o,isYDrag:g,isTargetDrag:b,isXADrag:_,isYClose:m}},Mn=D({__name:"dataSetting",setup(u){const{chartData:i,getFormInfoBySourceIds:n}=U(),p=m=>X([ie(m),ae(m,n)]),l=m=>X([re(m),ue(m,i.dataConfig),ae(m,n)]),{xData:a,yData:d,isXDrag:t,orderBys:r,isYDrag:o,isYClose:_}=ne(),{isAggregate:g,validations:b}=Q();return Rt(()=>{a.value.length>=2&&(d.value=d.value.filter((m,y)=>y<1))}),(m,y)=>(v(),I("div",null,[s(F,{title:"维度"},{default:c(()=>[s(Y,{modelValue:e(a),"onUpdate:modelValue":y[1]||(y[1]=f=>T(a)?a.value=f:null),validations:e(se),"is-drop-area":e(t),"receive-data-by-type":"x"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"order-bys":e(r),"onUpdate:orderBys":y[0]||(y[0]=S=>T(r)?r.value=S:null),exclusionField:e(d),chartFieldInfo:f,onRemove:S=>h(V),"expand-operation":()=>p(f)},null,8,["order-bys","exclusionField","chartFieldInfo","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标"},{default:c(()=>[s(Y,{modelValue:e(d),"onUpdate:modelValue":y[3]||(y[3]=f=>T(d)?d.value=f:null),"is-drop-area":e(o),validations:e(b),"receive-data-by-type":"y"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"is-close":e(_),"is-data-format":"",exclusionField:e(a),"order-bys":e(r),"onUpdate:orderBys":y[2]||(y[2]=S=>T(r)?r.value=S:null),chartFieldInfo:f,"expand-operation":()=>e(g)?[]:l(f),onRemove:S=>h(V)},null,8,["is-close","exclusionField","order-bys","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","is-drop-area","validations"])]),_:1}),e(g)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),Bn=Object.freeze(Object.defineProperty({__proto__:null,default:Mn},Symbol.toStringTag,{value:"Module"})),An=D({__name:"dataSetting",setup(u){const{chartData:i,getFormInfoBySourceIds:n}=U(),p=m=>X([ie(m),ae(m,n)]),l=m=>X([re(m),ue(m,i.dataConfig),ae(m,n)]),{xData:a,yData:d,orderBys:t,isXDrag:r,isYDrag:o,isYClose:_}=ne(),{isAggregate:g,validations:b}=Q();return(m,y)=>(v(),I("div",null,[s(F,{title:"维度"},{default:c(()=>[s(Y,{modelValue:e(a),"onUpdate:modelValue":y[1]||(y[1]=f=>T(a)?a.value=f:null),validations:e(se),"is-drop-area":e(r),"receive-data-by-type":"x"},{default:c(({element:f,remove:h,index:V})=>[s(E,{chartFieldInfo:f,"order-bys":e(t),"onUpdate:orderBys":y[0]||(y[0]=S=>T(t)?t.value=S:null),exclusionField:e(d),onRemove:S=>h(V),"expand-operation":()=>p(f)},null,8,["chartFieldInfo","order-bys","exclusionField","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标"},{default:c(()=>[s(Y,{modelValue:e(d),"onUpdate:modelValue":y[3]||(y[3]=f=>T(d)?d.value=f:null),validations:e(b),"is-drop-area":e(o),"receive-data-by-type":"y"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"is-close":e(_),"is-data-format":"","order-bys":e(t),"onUpdate:orderBys":y[2]||(y[2]=S=>T(t)?t.value=S:null),exclusionField:e(a),chartFieldInfo:f,"expand-operation":()=>e(g)?[]:l(f),onRemove:S=>h(V)},null,8,["is-close","order-bys","exclusionField","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),e(g)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),Rn=Object.freeze(Object.defineProperty({__proto__:null,default:An},Symbol.toStringTag,{value:"Module"})),St=u=>{const{chartData:i}=U(),n=L(()=>l.value.length<((u==null?void 0:u.axisLength[0])??0)),p=L(()=>a.value.length<((u==null?void 0:u.axisLength[1])??0)),l=L({get(){return i.dataConfig.yData.filter(t=>t.position==="left")??[]},set(d){const t=i.dataConfig.yData.filter(o=>o.position==="right"),r=d.concat(t);i.dataConfig.yData=G(r)}}),a=L({get(){return i.dataConfig.yData.filter(t=>t.position==="right")??[]},set(d){const r=i.dataConfig.yData.filter(o=>o.position==="left").concat(d.map(o=>({...o,position:"right"})));i.dataConfig.yData=G(r)}});return{hasLeft:n,hasRight:p,leftAxis:l,rightAxis:a}},Pn=D({__name:"dataSetting",setup(u){const{chartData:i,getFormInfoBySourceIds:n}=U(),p=y=>X([ie(y),ae(y,n)]),l=y=>X([re(y),ue(y,i.dataConfig),ae(y,n)]),{isXDrag:a,xData:d,orderBys:t}=ne(),{hasLeft:r,hasRight:o,leftAxis:_,rightAxis:g}=St({axisLength:[1,1]}),{isAggregate:b,validations:m}=Q();return(y,f)=>(v(),I("div",null,[s(F,{title:"维度"},{default:c(()=>[s(Y,{modelValue:e(d),"onUpdate:modelValue":f[1]||(f[1]=h=>T(d)?d.value=h:null),validations:e(se),"is-drop-area":e(a),"receive-data-by-type":"x"},{default:c(({element:h,remove:V,index:S})=>[s(E,{"order-bys":e(t),"onUpdate:orderBys":f[0]||(f[0]=P=>T(t)?t.value=P:null),exclusionField:[...e(_),...e(g)],chartFieldInfo:h,onRemove:P=>V(S),"expand-operation":()=>p(h)},null,8,["order-bys","exclusionField","chartFieldInfo","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标(左)"},{default:c(()=>[s(Y,{modelValue:e(_),"onUpdate:modelValue":f[3]||(f[3]=h=>T(_)?_.value=h:null),validations:e(m),"receive-data-by-type":"y"},{default:c(({element:h,remove:V,index:S})=>[s(E,{"order-bys":e(t),"onUpdate:orderBys":f[2]||(f[2]=P=>T(t)?t.value=P:null),exclusionField:[...e(d),...e(g)],chartFieldInfo:h,"is-data-format":"","expand-operation":()=>e(b)?[]:l(h),onRemove:P=>V(S)},null,8,["order-bys","exclusionField","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations"])]),_:1}),s(F,{title:"指标(右)"},{default:c(()=>[s(Y,{modelValue:e(g),"onUpdate:modelValue":f[5]||(f[5]=h=>T(g)?g.value=h:null),validations:e(m),"receive-data-by-type":"y"},{default:c(({element:h,remove:V,index:S})=>[s(E,{"order-bys":e(t),"onUpdate:orderBys":f[4]||(f[4]=P=>T(t)?t.value=P:null),exclusionField:[...e(d),...e(_)],chartFieldInfo:h,"is-data-format":"","expand-operation":()=>e(b)?[]:l(h),onRemove:P=>V(S)},null,8,["order-bys","exclusionField","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations"])]),_:1}),e(b)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),jn=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"})),zn=D({__name:"dataSetting",setup(u){const{chartData:i}=U(),n=m=>X([ie(m)]),p=m=>X([re(m),ue(m,i.dataConfig)]),{isXDrag:l,xData:a,orderBys:d}=ne(),{hasLeft:t,hasRight:r,leftAxis:o,rightAxis:_}=St({axisLength:[1,1]}),{isAggregate:g,validations:b}=Q();return(m,y)=>(v(),I("div",null,[s(F,{title:"维度"},{default:c(()=>[s(Y,{modelValue:e(a),"onUpdate:modelValue":y[1]||(y[1]=f=>T(a)?a.value=f:null),validations:e(se),"is-drop-area":e(l),"receive-data-by-type":"x"},{default:c(({element:f,remove:h,index:V})=>[s(E,{chartFieldInfo:f,"order-bys":e(d),"onUpdate:orderBys":y[0]||(y[0]=S=>T(d)?d.value=S:null),"exclusion-field":[...e(t),...e(r)],onRemove:S=>h(V),"expand-operation":()=>n(f)},null,8,["chartFieldInfo","order-bys","exclusion-field","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标(x轴)"},{default:c(()=>[s(Y,{modelValue:e(o),"onUpdate:modelValue":y[2]||(y[2]=f=>T(o)?o.value=f:null),validations:e(b),"is-drop-area":e(t),"receive-data-by-type":"y"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"order-bys":e(d),"exclusion-field":e(a),chartFieldInfo:f,"expand-operation":()=>e(g)?[]:p(f),onRemove:S=>h(V)},null,8,["order-bys","exclusion-field","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标(y轴)"},{default:c(()=>[s(Y,{modelValue:e(_),"onUpdate:modelValue":y[3]||(y[3]=f=>T(_)?_.value=f:null),validations:e(b),"is-drop-area":e(r),"receive-data-by-type":"y"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"order-bys":e(d),"exclusion-field":e(a),chartFieldInfo:f,"expand-operation":()=>e(g)?[]:p(f),onRemove:S=>h(V)},null,8,["order-bys","exclusion-field","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),e(g)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),En=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"})),Nn=D({__name:"dataSetting",setup(u){const{xData:i,yData:n,isXDrag:p,isYDrag:l,isYClose:a,orderBys:d}=ne(),{chartData:t,getFormInfoBySourceIds:r}=U(),o=m=>X([ie(m),ae(m,r)]),_=m=>X([re(m),ue(m,t.dataConfig),ae(m,r)]),{isAggregate:g,validations:b}=Q();return(m,y)=>(v(),I("div",null,[s(F,{title:"维度"},{default:c(()=>[s(Y,{modelValue:e(i),"onUpdate:modelValue":y[1]||(y[1]=f=>T(i)?i.value=f:null),validations:e(se),"is-drop-area":e(p),"receive-data-by-type":"x"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"order-bys":e(d),"onUpdate:orderBys":y[0]||(y[0]=S=>T(d)?d.value=S:null),"exclusion-field":[...e(n)],chartFieldInfo:f,onRemove:S=>h(V),"expand-operation":()=>o(f)},null,8,["order-bys","exclusion-field","chartFieldInfo","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标"},{default:c(()=>[s(Y,{modelValue:e(n),"onUpdate:modelValue":y[3]||(y[3]=f=>T(n)?n.value=f:null),validations:e(b),"is-drop-area":e(l),"receive-data-by-type":"y"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"is-close":e(a),"order-bys":e(d),"onUpdate:orderBys":y[2]||(y[2]=S=>T(d)?d.value=S:null),"exclusion-field":e(i),"is-data-format":"",chartFieldInfo:f,"expand-operation":()=>e(g)?[]:_(f),onRemove:S=>h(V)},null,8,["is-close","order-bys","exclusion-field","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),e(g)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),Xn=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"})),Yn=u=>[C.input,C.textarea,C.number,C.date,C.daterange,C.time,C.timerange,C.radio,C.multiple,C.member,C.memberSingle,C.department,C.departmentSingle,C.role,C.job,C.cooperatePersonnel,C.cooperateEnterprise,C.address,C.autoNumber,C.formula].includes(u.fieldType),qn=D({__name:"dataSetting",setup(u){const{chartData:i}=U(),n=_=>X([re(_),ue(_,i.dataConfig)]),{tData:p,yData:l,orderBys:a,isYDrag:d,isTargetDrag:t}=ne(),{isAggregate:r,validations:o}=Q();return(_,g)=>(v(),I("div",null,[s(F,{title:"指标"},{default:c(()=>[s(Y,{modelValue:e(l),"onUpdate:modelValue":g[1]||(g[1]=b=>T(l)?l.value=b:null),validations:e(o),"is-drop-area":e(d),"receive-data-by-type":"y"},{default:c(({element:b,remove:m,index:y})=>[s(E,{chartFieldInfo:b,"is-data-format":"","order-bys":e(a),"onUpdate:orderBys":g[0]||(g[0]=f=>T(a)?a.value=f:null),"expand-operation":()=>n(b),onRemove:f=>m(y)},null,8,["chartFieldInfo","order-bys","expand-operation","onRemove"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"目标值"},{default:c(()=>[s(Y,{modelValue:e(p),"onUpdate:modelValue":g[3]||(g[3]=b=>T(p)?p.value=b:null),validations:e(Yn),"is-drop-area":e(t),"receive-data-by-type":"y"},{default:c(({element:b,remove:m,index:y})=>[s(E,{chartFieldInfo:b,"order-bys":e(a),"onUpdate:orderBys":g[2]||(g[2]=f=>T(a)?a.value=f:null),onRemove:f=>m(y),"expand-operation":()=>e(r)?[]:n(b)},null,8,["chartFieldInfo","order-bys","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),e(r)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),Hn=Object.freeze(Object.defineProperty({__proto__:null,default:qn},Symbol.toStringTag,{value:"Module"})),Jn=D({__name:"dataSetting",setup(u){const{chartData:i}=U(),{xData:n,orderBys:p}=ne(),l=d=>Ra(d,["summaryMethod"]),a=d=>X([uo(d,i.dataConfig)]);return(d,t)=>(v(),I("div",null,[s(F,{title:"显示字段"},{default:c(()=>[s(Y,{modelValue:e(n),"onUpdate:modelValue":t[1]||(t[1]=r=>T(n)?n.value=r:null),"is-unique":"","unique-text":"添加失败!同一字段不允许重复添加",validations:r=>e(se)(r,[e(C).formula]),"receive-data-by-type":l},{default:c(({element:r,remove:o,index:_})=>[s(E,{chartFieldInfo:r,onRemove:g=>o(_),orderBys:e(p),"onUpdate:orderBys":t[0]||(t[0]=g=>T(p)?p.value=g:null),"expand-operation":()=>a(r)},null,8,["chartFieldInfo","onRemove","orderBys","expand-operation"])]),_:1},8,["modelValue","validations"])]),_:1}),s(F,{title:"过滤"},{default:c(()=>[s(oe)]),_:1})]))}}),Gn=Object.freeze(Object.defineProperty({__proto__:null,default:Jn},Symbol.toStringTag,{value:"Module"})),Wn=D({__name:"dataSetting",setup(u){const{chartData:i}=U(),n=_=>X([ie(_)]),p=_=>X([re(_),ue(_,i.dataConfig)]),{xData:l,yData:a,orderBys:d,isXDrag:t}=ne(),{isAggregate:r,validations:o}=Q();return(_,g)=>(v(),I("div",null,[s(F,{title:"维度"},{default:c(()=>[s(Y,{modelValue:e(l),"onUpdate:modelValue":g[1]||(g[1]=b=>T(l)?l.value=b:null),validations:e(se),"is-drop-area":e(t),"receive-data-by-type":"x"},{default:c(({element:b,remove:m,index:y})=>[s(E,{"order-bys":e(d),"onUpdate:orderBys":g[0]||(g[0]=f=>T(d)?d.value=f:null),"exclusion-field":e(a),chartFieldInfo:b,onRemove:f=>m(y),"expand-operation":()=>n(b)},null,8,["order-bys","exclusion-field","chartFieldInfo","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标"},{default:c(()=>[s(Y,{modelValue:e(a),"onUpdate:modelValue":g[2]||(g[2]=b=>T(a)?a.value=b:null),validations:e(o),"receive-data-by-type":"y"},{default:c(({element:b,remove:m,index:y})=>[s(E,{"order-bys":e(d),"exclusion-field":e(l),chartFieldInfo:b,"expand-operation":()=>e(r)?[]:p(b),onRemove:f=>m(y)},null,8,["order-bys","exclusion-field","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations"])]),_:1}),e(r)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),Kn=Object.freeze(Object.defineProperty({__proto__:null,default:Wn},Symbol.toStringTag,{value:"Module"})),Qn=D({__name:"dataSetting",setup(u){const i=r=>X([re(r)]),{yData:n,orderBys:p,isYDrag:l,isYClose:a}=ne(),{isAggregate:d,validations:t}=Q();return(r,o)=>(v(),I("div",null,[s(F,{title:"指标"},{default:c(()=>[s(Y,{modelValue:e(n),"onUpdate:modelValue":o[1]||(o[1]=_=>T(n)?n.value=_:null),validations:e(t),"is-drop-area":e(l),"receive-data-by-type":"y"},{default:c(({element:_,remove:g,index:b})=>[s(E,{orderBys:e(p),"onUpdate:orderBys":o[0]||(o[0]=m=>T(p)?p.value=m:null),chartFieldInfo:_,"is-data-format":"","is-close":e(a),"expand-operation":()=>e(d)?[]:i(_),onRemove:m=>g(b)},null,8,["orderBys","chartFieldInfo","is-close","expand-operation","onRemove"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),e(d)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),Zn=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"})),es=D({__name:"dataSetting",setup(u){const{chartData:i,getFormInfoBySourceIds:n}=U(),p=m=>X([ie(m),ae(m,n)]),l=m=>X([re(m),ue(m,i.dataConfig),ae(m,n)]),{xData:a,yData:d,orderBys:t,isXDrag:r,isYClose:o,isYDrag:_}=ne(),{isAggregate:g,validations:b}=Q();return(m,y)=>(v(),I("div",null,[s(F,{title:"维度"},{default:c(()=>[s(Y,{modelValue:e(a),"onUpdate:modelValue":y[1]||(y[1]=f=>T(a)?a.value=f:null),validations:e(se),"is-drop-area":e(r),"receive-data-by-type":"x"},{default:c(({element:f,remove:h,index:V})=>[s(E,{orderBys:e(t),"onUpdate:orderBys":y[0]||(y[0]=S=>T(t)?t.value=S:null),"exclusion-field":e(d),chartFieldInfo:f,onRemove:S=>h(V),"expand-operation":()=>p(f)},null,8,["orderBys","exclusion-field","chartFieldInfo","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标"},{default:c(()=>[s(Y,{modelValue:e(d),"onUpdate:modelValue":y[3]||(y[3]=f=>T(d)?d.value=f:null),validations:e(b),"is-drop-area":e(_),"receive-data-by-type":"y"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"is-close":e(o),chartFieldInfo:f,"is-data-format":"",orderBys:e(t),"onUpdate:orderBys":y[2]||(y[2]=S=>T(t)?t.value=S:null),"exclusion-field":e(a),"expand-operation":()=>e(g)?[]:l(f),onRemove:S=>h(V)},null,8,["is-close","chartFieldInfo","orderBys","exclusion-field","expand-operation","onRemove"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),e(g)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),ts=Object.freeze(Object.defineProperty({__proto__:null,default:es},Symbol.toStringTag,{value:"Module"})),ls=D({__name:"dataSetting",setup(u){const{chartData:i,getFormInfoBySourceIds:n}=U(),p=m=>X([ie(m),ae(m,n)]),l=m=>X([re(m),ue(m,i.dataConfig),ae(m,n)]),{xData:a,yData:d,orderBys:t,isXDrag:r,isYDrag:o,isYClose:_}=ne(),{isAggregate:g,validations:b}=Q();return(m,y)=>(v(),I("div",null,[s(F,{title:"维度"},{default:c(()=>[s(Y,{modelValue:e(a),"onUpdate:modelValue":y[1]||(y[1]=f=>T(a)?a.value=f:null),validations:e(se),"is-drop-area":e(r),"receive-data-by-type":"x"},{default:c(({element:f,remove:h,index:V})=>[s(E,{orderBys:e(t),"onUpdate:orderBys":y[0]||(y[0]=S=>T(t)?t.value=S:null),"exclusion-field":e(d),chartFieldInfo:f,onRemove:S=>h(V),"expand-operation":()=>p(f)},null,8,["orderBys","exclusion-field","chartFieldInfo","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标"},{default:c(()=>[s(Y,{modelValue:e(d),"onUpdate:modelValue":y[3]||(y[3]=f=>T(d)?d.value=f:null),validations:e(b),"is-drop-area":e(o),"receive-data-by-type":"y"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"is-close":e(_),orderBys:e(t),"onUpdate:orderBys":y[2]||(y[2]=S=>T(t)?t.value=S:null),"exclusion-field":e(a),"is-data-format":"",chartFieldInfo:f,"expand-operation":()=>e(g)?[]:l(f),onRemove:S=>h(V)},null,8,["is-close","orderBys","exclusion-field","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),e(g)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),as=Object.freeze(Object.defineProperty({__proto__:null,default:ls},Symbol.toStringTag,{value:"Module"})),os=D({__name:"dataSetting",setup(u){const{chartData:i,getFormInfoBySourceIds:n}=U(),p=g=>X([ie(g),ae(g,n)]),l=g=>X([re(g),ue(g,i.dataConfig),ae(g,n)]),{xData:a,yData:d,aData:t,orderBys:r}=ne(),{isAggregate:o,validations:_}=Q();return(g,b)=>(v(),I("div",null,[s(F,{title:"维度(行)"},{default:c(()=>[s(Y,{modelValue:e(a),"onUpdate:modelValue":b[1]||(b[1]=m=>T(a)?a.value=m:null),"unique-list":e(t),validations:e(se),"is-unique":"","receive-data-by-type":"x"},{default:c(({element:m,remove:y,index:f})=>[s(E,{"order-bys":e(r),"onUpdate:orderBys":b[0]||(b[0]=h=>T(r)?r.value=h:null),"exclusion-field":e(d),chartFieldInfo:m,onRemove:h=>y(f),"expand-operation":()=>p(m)},null,8,["order-bys","exclusion-field","chartFieldInfo","onRemove","expand-operation"])]),_:1},8,["modelValue","unique-list","validations"])]),_:1}),s(F,{title:"维度(列)"},{default:c(()=>[s(Y,{modelValue:e(t),"onUpdate:modelValue":b[3]||(b[3]=m=>T(t)?t.value=m:null),"is-unique":"","unique-list":e(a),validations:e(se),"receive-data-by-type":"x"},{default:c(({element:m,remove:y,index:f})=>[s(E,{"order-bys":e(r),"onUpdate:orderBys":b[2]||(b[2]=h=>T(r)?r.value=h:null),chartFieldInfo:m,onRemove:h=>y(f),"expand-operation":()=>p(m)},null,8,["order-bys","chartFieldInfo","onRemove","expand-operation"])]),_:1},8,["modelValue","unique-list","validations"])]),_:1}),s(F,{title:"指标"},{default:c(()=>[s(Y,{modelValue:e(d),"onUpdate:modelValue":b[5]||(b[5]=m=>T(d)?d.value=m:null),validations:e(_),"receive-data-by-type":"y"},{default:c(({element:m,remove:y,index:f})=>[s(E,{"order-bys":e(r),"onUpdate:orderBys":b[4]||(b[4]=h=>T(r)?r.value=h:null),"exclusion-field":e(a),chartFieldInfo:m,isDataFormat:"","expand-operation":()=>e(o)?[]:l(m),onRemove:h=>y(f)},null,8,["order-bys","exclusion-field","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations"])]),_:1}),e(o)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),ns=Object.freeze(Object.defineProperty({__proto__:null,default:os},Symbol.toStringTag,{value:"Module"})),ss=D({__name:"dataSetting",setup(u){const{chartData:i}=U(),n=_=>X([ie(_)]),p=_=>X([re(_),ue(_,i.dataConfig)]),{xData:l,yData:a,orderBys:d,isXDrag:t}=ne(),{isAggregate:r,validations:o}=Q();return(_,g)=>(v(),I("div",null,[s(F,{title:"维度"},{default:c(()=>[s(Y,{modelValue:e(l),"onUpdate:modelValue":g[1]||(g[1]=b=>T(l)?l.value=b:null),validations:e(se),"is-drop-area":e(t),"receive-data-by-type":"x"},{default:c(({element:b,remove:m,index:y})=>[s(E,{"order-bys":e(d),"onUpdate:orderBys":g[0]||(g[0]=f=>T(d)?d.value=f:null),"exclusion-field":e(a),chartFieldInfo:b,onRemove:f=>m(y),"expand-operation":()=>n(b)},null,8,["order-bys","exclusion-field","chartFieldInfo","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标"},{default:c(()=>[s(Y,{modelValue:e(a),"onUpdate:modelValue":g[3]||(g[3]=b=>T(a)?a.value=b:null),validations:e(o),"receive-data-by-type":"y"},{default:c(({element:b,remove:m,index:y})=>[s(E,{"order-bys":e(d),"onUpdate:orderBys":g[2]||(g[2]=f=>T(d)?d.value=f:null),"exclusion-field":e(l),chartFieldInfo:b,isDataFormat:"","expand-operation":()=>e(r)?[]:p(b),onRemove:f=>m(y)},null,8,["order-bys","exclusion-field","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations"])]),_:1}),e(r)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),rs=Object.freeze(Object.defineProperty({__proto__:null,default:ss},Symbol.toStringTag,{value:"Module"})),ds=D({__name:"dataSetting",setup(u){const{chartData:i}=U(),n=m=>X([ie(m)]),p=m=>X([re(m),ue(m,i.dataConfig)]),{xData:l,isXDrag:a,orderBys:d}=ne(),{hasLeft:t,hasRight:r,leftAxis:o,rightAxis:_}=St({axisLength:[1,1]}),{isAggregate:g,validations:b}=Q();return(m,y)=>(v(),I("div",null,[s(F,{title:"维度"},{default:c(()=>[s(Y,{modelValue:e(l),"onUpdate:modelValue":y[1]||(y[1]=f=>T(l)?l.value=f:null),validations:e(se),"is-drop-area":e(a),"receive-data-by-type":"x"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"order-bys":e(d),"onUpdate:orderBys":y[0]||(y[0]=S=>T(d)?d.value=S:null),"exclusion-field":[...e(t),...e(r)],chartFieldInfo:f,onRemove:S=>h(V),"expand-operation":()=>n(f)},null,8,["order-bys","exclusion-field","chartFieldInfo","onRemove","expand-operation"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标(x轴)"},{default:c(()=>[s(Y,{modelValue:e(o),"onUpdate:modelValue":y[3]||(y[3]=f=>T(o)?o.value=f:null),validations:e(b),"is-drop-area":e(t),"receive-data-by-type":"y"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"order-bys":e(d),"onUpdate:orderBys":y[2]||(y[2]=S=>T(d)?d.value=S:null),"exclusion-field":e(l),"is-data-format":"",chartFieldInfo:f,"expand-operation":()=>e(g)?[]:p(f),onRemove:S=>h(V)},null,8,["order-bys","exclusion-field","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),s(F,{title:"指标(y轴)"},{default:c(()=>[s(Y,{modelValue:e(_),"onUpdate:modelValue":y[5]||(y[5]=f=>T(_)?_.value=f:null),validations:e(b),"is-drop-area":e(r),"receive-data-by-type":"y"},{default:c(({element:f,remove:h,index:V})=>[s(E,{"order-bys":e(d),"onUpdate:orderBys":y[4]||(y[4]=S=>T(d)?d.value=S:null),"exclusion-field":e(l),isDataFormat:"",chartFieldInfo:f,"expand-operation":()=>e(g)?[]:p(f),onRemove:S=>h(V)},null,8,["order-bys","exclusion-field","chartFieldInfo","expand-operation","onRemove"])]),_:1},8,["modelValue","validations","is-drop-area"])]),_:1}),e(g)?M("",!0):(v(),x(F,{key:0,title:"过滤"},{default:c(()=>[s(oe)]),_:1}))]))}}),us=Object.freeze(Object.defineProperty({__proto__:null,default:ds},Symbol.toStringTag,{value:"Module"})),dl={},is=Object.assign({"../charts/areaChart/dataSetting.vue":Bn,"../charts/barChart/dataSetting.vue":Rn,"../charts/biaxialChart/dataSetting.vue":jn,"../charts/bubbleChart/dataSetting.vue":En,"../charts/columnChart/dataSetting.vue":Xn,"../charts/dashboard/dataSetting.vue":Hn,"../charts/detailedChart/dataSetting.vue":Gn,"../charts/funnelChart/dataSetting.vue":Kn,"../charts/indicatorsChart/dataSetting.vue":Zn,"../charts/lineChart/dataSetting.vue":ts,"../charts/pieChart/dataSetting.vue":as,"../charts/pivotTable/dataSetting.vue":ns,"../charts/radarChart/dataSetting.vue":rs,"../charts/scatterChart/dataSetting.vue":us});Object.entries(is).forEach(([u,i])=>{const n=u.split(lt.sep);n.pop();const p=n.pop();let l=i;l=l.default||l,dl[p]=l});function ps(u){let i=dl[u]??null;return at(i)==="module"&&(i=i==null?void 0:i.default),i||console.error(`你需要查找控件类型为${u}的配置组件, 但是并没有找到, 请检查一下是否存在该类型, 或者组件路径存在问题`),i}const cs=D({__name:"ViewRawData",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(u,{emit:i}){const l=N(u,"modelValue",i);return(a,d)=>{const t=bt;return v(),I("div",{class:"flex"},[w("span",null,"查看原始数据"),s(t,{modelValue:e(l),"onUpdate:modelValue":d[0]||(d[0]=r=>T(l)?l.value=r:null)},null,8,["modelValue"])])}}});const Ce=A(cs,[["__scopeId","data-v-573090be"]]),Ue=D({__name:"LinkedData",props:{modelValue:{},isLinkageList:{type:Boolean},sourceId:{},currentModuleId:{}},emits:["update:modelValue","update:isLinkageList"],setup(u,{emit:i}){const n=u,p=i,l=N(n,"modelValue",p),a=N(n,"isLinkageList",p),{getLinkageList:d}=Pa(),t=k([]),r=async()=>{var y;const b=await d(),m=await Ie.listDashboardBySourceId(n.sourceId);return t.value=X(m.map(f=>{const h=b.find(V=>V.value===f.moduleId);if(h&&f.moduleId!==n.currentModuleId)return{label:h.label,value:f.moduleId}})),t.value.length>=1&&((y=l.value)==null?void 0:y.length)===t.value.length&&(o.value=!0),t.value};Ve(l,b=>{(b==null?void 0:b.length)===0?o.value=!1:(b==null?void 0:b.length)===t.value.length&&(o.value=!0)});const o=k(!1),_=L(()=>{var b,m,y;return((b=l.value)==null?void 0:b.length)===0?!1:(((m=l.value)==null?void 0:m.length)??0)>0&&(((y=l.value)==null?void 0:y.length)??0)<t.value.length}),g=b=>{b?l.value=t.value.map(m=>m.value):l.value=[]};return(b,m)=>{const y=ee,f=Be;return v(),x(O,{title:"联动数据",disable:e(a),"onUpdate:disable":m[2]||(m[2]=h=>T(a)?a.value=h:null)},{default:c(()=>[s(Ql,{filterable:"",multiple:"",modelValue:e(l),"onUpdate:modelValue":m[1]||(m[1]=h=>T(l)?l.value=h:null),load:r,placeholder:"请选择联动的图表"},{header:c(()=>[s(y,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=h=>o.value=h),indeterminate:_.value,onChange:g},{default:c(()=>[H(" 全选 ")]),_:1},8,["modelValue","indeterminate"])]),default:c(({options:h})=>[(v(!0),I(B,null,K(h,V=>(v(),x(f,{key:V.value,label:V.label,value:V.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["disable"])}}}),ms=D({__name:"advancedSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i),a=U(),d=L(()=>a.chartData.sourceIds[0]);return(t,r)=>(v(),I(B,null,[s(Ce,{modelValue:e(l).viewDataSource,"onUpdate:modelValue":r[0]||(r[0]=o=>e(l).viewDataSource=o)},null,8,["modelValue"]),s(J,null,{default:c(()=>[s(Ue,{modelValue:e(l).linkageList,"onUpdate:modelValue":r[1]||(r[1]=o=>e(l).linkageList=o),isLinkageList:e(l).isLinkageList,"onUpdate:isLinkageList":r[2]||(r[2]=o=>e(l).isLinkageList=o),sourceId:d.value,currentModuleId:e(a).chartData.moduleId},null,8,["modelValue","isLinkageList","sourceId","currentModuleId"])]),_:1})],64))}}),_s=Object.freeze(Object.defineProperty({__proto__:null,default:ms},Symbol.toStringTag,{value:"Module"})),fs=D({__name:"advancedSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i),a=U(),d=L(()=>a.chartData.sourceIds[0]);return(t,r)=>(v(),I(B,null,[s(Ce,{modelValue:e(l).viewDataSource,"onUpdate:modelValue":r[0]||(r[0]=o=>e(l).viewDataSource=o)},null,8,["modelValue"]),s(J,null,{default:c(()=>[s(Ue,{modelValue:e(l).linkageList,"onUpdate:modelValue":r[1]||(r[1]=o=>e(l).linkageList=o),isLinkageList:e(l).isLinkageList,"onUpdate:isLinkageList":r[2]||(r[2]=o=>e(l).isLinkageList=o),sourceId:d.value,currentModuleId:e(a).chartData.moduleId},null,8,["modelValue","isLinkageList","sourceId","currentModuleId"])]),_:1})],64))}}),ys=Object.freeze(Object.defineProperty({__proto__:null,default:fs},Symbol.toStringTag,{value:"Module"})),vs=D({__name:"advancedSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i),a=U(),d=L(()=>a.chartData.sourceIds[0]);return(t,r)=>(v(),I(B,null,[s(Ce,{modelValue:e(l).viewDataSource,"onUpdate:modelValue":r[0]||(r[0]=o=>e(l).viewDataSource=o)},null,8,["modelValue"]),s(J,null,{default:c(()=>[s(Ue,{modelValue:e(l).linkageList,"onUpdate:modelValue":r[1]||(r[1]=o=>e(l).linkageList=o),isLinkageList:e(l).isLinkageList,"onUpdate:isLinkageList":r[2]||(r[2]=o=>e(l).isLinkageList=o),sourceId:d.value,currentModuleId:e(a).chartData.moduleId},null,8,["modelValue","isLinkageList","sourceId","currentModuleId"])]),_:1})],64))}}),bs=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"})),gs=D({__name:"advancedSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i),a=U(),d=L(()=>a.chartData.sourceIds[0]);return(t,r)=>(v(),I(B,null,[s(Ce,{modelValue:e(l).viewDataSource,"onUpdate:modelValue":r[0]||(r[0]=o=>e(l).viewDataSource=o)},null,8,["modelValue"]),s(J,null,{default:c(()=>[s(Ue,{modelValue:e(l).linkageList,"onUpdate:modelValue":r[1]||(r[1]=o=>e(l).linkageList=o),isLinkageList:e(l).isLinkageList,"onUpdate:isLinkageList":r[2]||(r[2]=o=>e(l).isLinkageList=o),sourceId:d.value,currentModuleId:e(a).chartData.moduleId},null,8,["modelValue","isLinkageList","sourceId","currentModuleId"])]),_:1})],64))}}),hs=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"})),Vs=D({__name:"advancedSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i);return(a,d)=>(v(),x(Ce,{modelValue:e(l).viewDataSource,"onUpdate:modelValue":d[0]||(d[0]=t=>e(l).viewDataSource=t)},null,8,["modelValue"]))}}),xs=Object.freeze(Object.defineProperty({__proto__:null,default:Vs},Symbol.toStringTag,{value:"Module"})),Ss=D({__name:"advancedSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i),a=U(),d=L(()=>a.chartData.sourceIds[0]);return(t,r)=>(v(),I(B,null,[s(Ce,{modelValue:e(l).viewDataSource,"onUpdate:modelValue":r[0]||(r[0]=o=>e(l).viewDataSource=o)},null,8,["modelValue"]),s(J,null,{default:c(()=>[s(Ue,{modelValue:e(l).linkageList,"onUpdate:modelValue":r[1]||(r[1]=o=>e(l).linkageList=o),isLinkageList:e(l).isLinkageList,"onUpdate:isLinkageList":r[2]||(r[2]=o=>e(l).isLinkageList=o),sourceId:d.value,currentModuleId:e(a).chartData.moduleId},null,8,["modelValue","isLinkageList","sourceId","currentModuleId"])]),_:1})],64))}}),Ds=Object.freeze(Object.defineProperty({__proto__:null,default:Ss},Symbol.toStringTag,{value:"Module"})),Is=D({__name:"advancedSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i),a=U(),d=L(()=>a.chartData.sourceIds[0]);return(t,r)=>(v(),I(B,null,[s(Ce,{modelValue:e(l).viewDataSource,"onUpdate:modelValue":r[0]||(r[0]=o=>e(l).viewDataSource=o)},null,8,["modelValue"]),s(J,null,{default:c(()=>[s(Ue,{modelValue:e(l).linkageList,"onUpdate:modelValue":r[1]||(r[1]=o=>e(l).linkageList=o),isLinkageList:e(l).isLinkageList,"onUpdate:isLinkageList":r[2]||(r[2]=o=>e(l).isLinkageList=o),sourceId:d.value,currentModuleId:e(a).chartData.moduleId},null,8,["modelValue","isLinkageList","sourceId","currentModuleId"])]),_:1})],64))}}),Cs=Object.freeze(Object.defineProperty({__proto__:null,default:Is},Symbol.toStringTag,{value:"Module"})),ws=D({__name:"advancedSetting",props:{dashboardStyle:{}},emits:["update:dashboardStyle"],setup(u,{emit:i}){const l=N(u,"dashboardStyle",i),a=U(),d=L(()=>a.chartData.sourceIds[0]);return(t,r)=>(v(),x(J,null,{default:c(()=>[s(Ce,{modelValue:e(l).viewDataSource,"onUpdate:modelValue":r[0]||(r[0]=o=>e(l).viewDataSource=o)},null,8,["modelValue"]),s(Ue,{modelValue:e(l).linkageList,"onUpdate:modelValue":r[1]||(r[1]=o=>e(l).linkageList=o),isLinkageList:e(l).isLinkageList,"onUpdate:isLinkageList":r[2]||(r[2]=o=>e(l).isLinkageList=o),sourceId:d.value,currentModuleId:e(a).chartData.moduleId},null,8,["modelValue","isLinkageList","sourceId","currentModuleId"])]),_:1}))}}),Ts=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"})),ul={},Ls=Object.assign({"../charts/areaChart/advancedSetting.vue":_s,"../charts/barChart/advancedSetting.vue":ys,"../charts/biaxialChart/advancedSetting.vue":bs,"../charts/columnChart/advancedSetting.vue":hs,"../charts/indicatorsChart/advancedSetting.vue":xs,"../charts/lineChart/advancedSetting.vue":Ds,"../charts/pieChart/advancedSetting.vue":Cs,"../charts/pivotTable/advancedSetting.vue":Ts});Object.entries(Ls).forEach(([u,i])=>{const n=u.split(lt.sep);n.pop();const p=n.pop();let l=i;l=l.default||l,ul[p]=l});function ks(u){let i=ul[u]??null;return at(i)==="module"&&(i=i==null?void 0:i.default),i||console.error(`你需要查找控件类型为${u}的配置组件, 但是并没有找到, 请检查一下是否存在该类型, 或者组件路径存在问题`),i}const Us=D({__name:"RightAside",props:{isTypeModule:{type:Boolean},chartTypes:{}},setup(u){const{chartData:i}=U(),n=L(()=>i.dashboardType),p=L(()=>i.dashboardStyle),l=o=>ps(o),a=o=>Sn(o),d=o=>ks(o),t=k("1"),r=L(()=>[j.columnChart,j.pieChart,j.barChart,j.lineChart,j.areaChart,j.biaxialChart,j.pivotTable,j.indicatorsChart].includes(n.value));return(o,_)=>{const g=Zl,b=ft,m=ea;return v(),I("div",{class:"aside-cell"},[o.isTypeModule&&o.chartTypes.length>1?(v(),x(wo,{key:0,chartTypes:o.chartTypes,active:n.value,"onUpdate:active":_[0]||(_[0]=y=>n.value=y)},null,8,["chartTypes","active"])):M("",!0),s(m,{class:"tabs",modelValue:t.value,"onUpdate:modelValue":_[3]||(_[3]=y=>t.value=y),stretch:""},{default:c(()=>[s(g,{label:"数据配置",name:"1"},{default:c(()=>[(v(),x(Je(l(n.value)),{class:"mt-16"}))]),_:1}),s(g,{label:"图表样式",name:"2",lazy:""},{default:c(()=>[s(b,{model:p.value},{default:c(()=>[(v(),x(Je(a(n.value)),{dashboardStyle:p.value,"onUpdate:dashboardStyle":_[1]||(_[1]=y=>p.value=y)},null,40,["dashboardStyle"]))]),_:1},8,["model"])]),_:1}),r.value?(v(),x(g,{key:0,label:"高级",name:"3",lazy:""},{default:c(()=>[s(b,{model:p.value},{default:c(()=>[(v(),x(Je(d(n.value)),{dashboardStyle:p.value,"onUpdate:dashboardStyle":_[2]||(_[2]=y=>p.value=y)},null,40,["dashboardStyle"]))]),_:1},8,["model"])]),_:1})):M("",!0)]),_:1},8,["modelValue"])])}}});const Fs=A(Us,[["__scopeId","data-v-b207248f"]]),$s=D({__name:"ConfigEmpty",setup(u){const{chartData:i,getHelperByType:n}=U(),p=L(()=>{var l;return(l=n(i.dashboardType))==null?void 0:l.errorList});return(l,a)=>{const d=ta;return v(),x(d,null,{description:c(()=>[p.value?(v(),I("div",{key:0},[H(" 请拖拽左侧字段到右侧 "),(v(!0),I(B,null,K(p.value,(t,r)=>(v(),I(B,{key:r},[w("b",null,W(t),1),r<p.value.length-1?(v(),I(B,{key:0},[H("、")],64)):M("",!0)],64))),128)),H(" 栏来添加数据 ")])):(v(),I("div",{key:1},"未捕获的异常"))]),_:1})}}}),Os=D({__name:"DesignLoad",props:{loadFn:{type:Function}},setup(u,{expose:i}){const n=u,p=k(),l=k(Z.LOADING),a=async()=>{try{l.value=await n.loadFn()}catch{l.value=Z.ERROR}},d=Mt(()=>{t()},500),t=async()=>{var r;await((r=p.value)==null?void 0:r.reload())};return i({refresh:d}),(r,o)=>(v(),x(ja,{load:a,ref_key:"LoadingDataRef",ref:p,class:"loading-box"},{default:c(()=>[l.value===e(Z).SUCCESS?he(r.$slots,"default",{key:0},void 0,!0):l.value===e(Z).NO_Data?(v(),x(Sa,{key:1,class:"empty-box"})):l.value===e(Z).NO_CONFIG?(v(),x($s,{key:2,class:"empty-box"})):l.value===e(Z).LOADING?(v(),I("div",{key:3,class:"empty-box"}," 正在加载 ")):M("",!0)]),_:3},512))}});const st=A(Os,[["__scopeId","data-v-ab670619"]]),Pe=D({__name:"DesignView",props:{chartType:{}},setup(u){const i=u,{on:n,chartData:p}=U(),l=k(),a=k(),d=k(),t=k(),r=async()=>{const g=be(i.chartType);if(g.verifyRequest(p)){const b=await Ie.listDashboardData(p),y=await el(i.chartType)(b,b.dashboard);return g.verifyResultData(y)?(d.value=b.dashboard,a.value=b,l.value=y,Z.SUCCESS):Z.NO_Data}else return Z.NO_CONFIG},o=()=>{var g;(g=t.value)==null||g.refresh()},_=()=>{d.value=p,o()};return n(de.uploadData,o),n(de.uploadConfig,_),(g,b)=>(v(),x(st,{"load-fn":r,ref_key:"LoadDataRef",ref:t},{default:c(()=>[l.value&&g.chartType?(v(),x(Da,{key:0,type:g.chartType,options:l.value},null,8,["type","options"])):M("",!0)]),_:1},512))}}),Ms=D({__name:"designView",setup(u){return(i,n)=>(v(),x(Pe,{"chart-type":e(j).areaChart},null,8,["chart-type"]))}}),Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Ms},Symbol.toStringTag,{value:"Module"})),As=D({__name:"designView",setup(u){return(i,n)=>(v(),x(Pe,{"chart-type":e(j).barChart},null,8,["chart-type"]))}}),Rs=Object.freeze(Object.defineProperty({__proto__:null,default:As},Symbol.toStringTag,{value:"Module"})),Ps=D({__name:"designView",setup(u){return(i,n)=>(v(),x(Pe,{"chart-type":e(j).biaxialChart},null,8,["chart-type"]))}}),js=Object.freeze(Object.defineProperty({__proto__:null,default:Ps},Symbol.toStringTag,{value:"Module"})),zs=D({__name:"designView",setup(u){return(i,n)=>(v(),x(Pe,{"chart-type":e(j).columnChart},null,8,["chart-type"]))}}),Es=Object.freeze(Object.defineProperty({__proto__:null,default:zs},Symbol.toStringTag,{value:"Module"})),Ns=D({__name:"designView",props:{bgTableStyle:{}},setup(u){const i=u,n=j.detailedChart,p=U(),{on:l,chartData:a}=p,d=k(),t=k(),r=k(),o=k(),_=L(()=>{var z;return((z=o.value)==null?void 0:z.tableData)??[]}),g=L(()=>{var z;return((z=o.value)==null?void 0:z.headers)??[]}),b=L(()=>{var z;return((z=o.value)==null?void 0:z.sourceId)??""}),m=k({current:1,limit:10,total:0}),y=async()=>{if(be(n).verifyRequest(a)){const R=await Ie.listDashboardDetailed({...a,dataConfig:{...a.dataConfig,...m.value}}),{current:te,limit:rt,total:dt}=R;return m.value={current:Number(te),limit:Number(rt),total:Number(dt)},r.value=R.dashboard,t.value=R,o.value=await Ca(R,R.dashboard),Z.SUCCESS}else return Z.NO_CONFIG},f=()=>{var z;(z=d.value)==null||z.refresh()},h=()=>{var R;r.value=a,a.dashboardStyle.isDisplayLimit&&(m.value.current=1,(R=d.value)==null||R.refresh())};l(de.uploadData,f),l(de.uploadConfig,h);const V=L(()=>r.value?r.value.dashboardStyle:Wt),S=z=>{var R;m.value.current=1,m.value.limit=z,(R=d.value)==null||R.refresh()},P=z=>{var R;m.value.current=z,(R=d.value)==null||R.refresh()},$=L(()=>"enable"in p.tableStyle&&p.tableStyle.enable?p.tableStyle:i.bgTableStyle);return(z,R)=>(v(),x(st,{"load-fn":y,ref_key:"LoadDataRef",ref:d},{default:c(()=>[s(Ia,{"order-bys":e(a).dataConfig.orderBys,"onUpdate:orderBys":R[0]||(R[0]=te=>e(a).dataConfig.orderBys=te),headers:g.value,"table-data":_.value,"page-size":m.value,"source-id":b.value,"style-config":V.value,tableStyle:$.value,"handle-size-change":S,"handle-current-change":P},null,8,["order-bys","headers","table-data","page-size","source-id","style-config","tableStyle"])]),_:1},512))}}),Xs=Object.freeze(Object.defineProperty({__proto__:null,default:Ns},Symbol.toStringTag,{value:"Module"})),Ys=D({__name:"designView",setup(u){const i=j.indicatorsChart,{on:n,chartData:p}=U(),l=k(),a=k(),d=k(),t=k(),r=async()=>{if(be(i).verifyRequest(p)){const b=await Ie.listDashboardData(p);a.value=b.dashboard,l.value=b;const m=el(i);return d.value=await m(l.value,a.value),Z.SUCCESS}else return Z.NO_CONFIG},o=()=>{var g;(g=t.value)==null||g.refresh()},_=()=>{a.value=p,o()};return n(de.uploadData,o),n(de.uploadConfig,_),(g,b)=>(v(),x(st,{"load-fn":r,ref_key:"LoadDataRef",ref:t},{default:c(()=>[s(wa,{source:d.value},null,8,["source"])]),_:1},512))}}),qs=Object.freeze(Object.defineProperty({__proto__:null,default:Ys},Symbol.toStringTag,{value:"Module"})),Hs=D({__name:"designView",setup(u){return(i,n)=>(v(),x(Pe,{"chart-type":e(j).lineChart},null,8,["chart-type"]))}}),Js=Object.freeze(Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"})),Gs=D({__name:"designView",setup(u){return(i,n)=>(v(),x(Pe,{"chart-type":e(j).pieChart},null,8,["chart-type"]))}}),Ws=Object.freeze(Object.defineProperty({__proto__:null,default:Gs},Symbol.toStringTag,{value:"Module"})),Ks=D({__name:"designView",props:{bgTableStyle:{}},setup(u){const i=u,n=k(),p=j.pivotTable,l=U(),{on:a,chartData:d}=l,t=k(),r=k(),o=L(()=>t.value&&r.value?Ta(t.value,r.value):void 0),_=L(()=>{var $;return(($=t.value)==null?void 0:$.repData)??{}}),g=L(()=>{var $;return(($=o.value)==null?void 0:$.tableData)??[]}),b=L(()=>{var $;return(($=o.value)==null?void 0:$.sums)??[]}),m=L(()=>{var $;return(($=o.value)==null?void 0:$.renderRows)??[]}),y=L(()=>{var $;return(($=o.value)==null?void 0:$.renderClos)??[]}),f=L(()=>d.sourceIds),h=async()=>{if(be(p).verifyRequest(d)){const z=await Ie.listDashboardData({...d});return r.value=z.dashboard,t.value=z,Z.SUCCESS}else return Z.NO_CONFIG},V=()=>{var $;($=n.value)==null||$.refresh()},S=()=>{r.value=d};a(de.uploadData,V),a(de.uploadConfig,S);const P=L(()=>"enable"in l.tableStyle&&l.tableStyle.enable?l.tableStyle:i.bgTableStyle);return($,z)=>(v(),x(st,{"load-fn":h,ref_key:"LoadDataRef",ref:n},{default:c(()=>[r.value?(v(),x(La,{key:0,"chart-data":r.value,"render-clos":y.value,"render-rows":m.value,"sum-list":b.value,"table-data":g.value,sourceIds:f.value,tableStyle:P.value,repData:_.value},null,8,["chart-data","render-clos","render-rows","sum-list","table-data","sourceIds","tableStyle","repData"])):M("",!0)]),_:1},512))}}),Qs=Object.freeze(Object.defineProperty({__proto__:null,default:Ks},Symbol.toStringTag,{value:"Module"})),il={},Zs=Object.assign({"../charts/areaChart/designView.vue":Bs,"../charts/barChart/designView.vue":Rs,"../charts/biaxialChart/designView.vue":js,"../charts/columnChart/designView.vue":Es,"../charts/detailedChart/designView.vue":Xs,"../charts/indicatorsChart/designView.vue":qs,"../charts/lineChart/designView.vue":Js,"../charts/pieChart/designView.vue":Ws,"../charts/pivotTable/designView.vue":Qs});Object.entries(Zs).forEach(([u,i])=>{const n=u.split(lt.sep);n.pop();const p=n.pop();let l=i;l=l.default||l,il[p]=l});function er(u){let i=il[u]??null;return at(i)==="module"&&(i=i==null?void 0:i.default),i||console.error(`你需要查找控件类型为${u}的配置组件, 但是并没有找到, 请检查一下是否存在该类型, 或者组件路径存在问题`),i}const pl=(u,i)=>{function n(p,l){return Ea(l,function(a,d,t){Ft(d)?a[t]=p[t]?p[t]:d:it(d)&&it(p[t])?a[t]=n(p[t],d):t in l&&t in p?a[t]=p[t]:a[t]=d})}return n(u,i)},tr=u=>pl(u,{target:[],xData:[],xArrangeData:[],yData:[],conditions:[],orderBys:[]}),lr=D({__name:"ChartBox",props:{bgChartStyle:{}},setup(u){const i=u,n=U(),{chartLabel:p}=n,l=L(()=>{var t,r;return n.chartStyle.enable?(r=(t=n.chartStyle)==null?void 0:t.title)==null?void 0:r.icon:i.bgChartStyle.title.icon}),a=L(()=>{var t,r;return n.chartStyle,n.chartStyle.enable?Ct(ka({...(t=n.chartStyle)==null?void 0:t.bg,color:"#ffffff"},(r=n.chartStyle)==null?void 0:r.bg)):Ct({...i.bgChartStyle.bg})}),d=L(()=>{var t;return n.chartStyle.enable?wt((t=n.chartStyle)==null?void 0:t.title):wt(i.bgChartStyle.title)});return(t,r)=>(v(),I("div",{class:"layout-chart_box",style:Qe(a.value)},[e(p).showLabel?(v(),I("div",{key:0,class:"layout-chart_title-box",style:Qe(d.value)},[w("div",{class:"layout-chart_title"},[l.value?(v(),x(ve,{key:0,"icon-class":l.value},null,8,["icon-class"])):M("",!0),H(" "+W(e(p).label),1)])],4)):M("",!0),w("div",{class:Le(["layout-chart_body",e(p).showLabel?"layout-chart--height":""])},[he(t.$slots,"default",{},void 0,!0)],2)],4))}});const ar=A(lr,[["__scopeId","data-v-4d62a056"]]),or=D({__name:"Design",props:{moduleItem:{},appId:{},entryId:{},isTypeModule:{type:Boolean,default:!0},readonlySource:{type:Boolean,default:!1},defaultType:{default:j.columnChart},type:{default:0},chartTypes:{default:()=>Kt.map(u=>u.type)},tableStyle:{default:()=>Oe()},chartStyle:{default:()=>$e()},bgTableStyle:{default:()=>Oe()},bgChartStyle:{default:()=>$e()}},emits:["save","close"],setup(u,{emit:i}){const n=u,p=i;n.chartStyle;const l=Wa({appId:n.appId,entryId:n.entryId,dashboardId:n.moduleItem.options.dashboardId,sourceIds:X(n.moduleItem.options.sourceId.split(",")),moduleId:n.moduleItem.moduleId,label:n.moduleItem.options.label,showLabel:n.moduleItem.options.showLabel,defaultType:n.defaultType,type:0,frontType:n.type,tableStyle:n.tableStyle,chartStyle:n.chartStyle});la(ll,l);const a=async()=>{const{entryId:r,sourceId:o,label:_,showLabel:g}=n.moduleItem.options;if(o&&r){const b=await Ie.info({entryId:r,moduleId:n.moduleItem.moduleId}),{dataConfig:m,dashboardStyle:y,dashboardType:f,...h}=b,V=be(f);V.defaultStyleOptions;const S=pl(y,V.defaultStyleOptions);l.chartData=G({...h,dashboardStyle:S,dashboardType:f,dataConfig:tr(m)}),l.chartLabel.label=_,l.chartLabel.showLabel=g,setTimeout(()=>{l.delayed=!0},200)}else l.delayed=!0},d=r=>er(r),t=()=>{p("save",l.chartData)};return(r,o)=>{const _=aa,g=oa,b=na,m=sa;return v(),x(m,null,{default:c(()=>[s(_,{height:"48px"},{default:c(()=>[s(to,{moduleItem:r.moduleItem,onClose:o[0]||(o[0]=y=>p("close")),onSaveChart:t},null,8,["moduleItem"])]),_:1}),s(Ht,{load:a,class:"design-layout"},{default:c(()=>[s(m,{class:"design-layout__body"},{default:c(()=>[s(g,{width:"260px",class:"left-aside"},{default:c(()=>[r.type===0?(v(),x(Vo,{key:0})):(v(),x(Io,{key:1,readonlySource:r.readonlySource},null,8,["readonlySource"]))]),_:1}),s(b,{class:"center-main"},{default:c(()=>[e(l).delayed?(v(),x(ar,{key:0,"bg-chart-style":r.bgChartStyle},{default:c(()=>[(v(),x(Je(d(e(l).chartData.dashboardType)),{"bg-table-style":r.bgTableStyle},null,8,["bg-table-style"]))]),_:1},8,["bg-chart-style"])):M("",!0)]),_:1}),s(g,{width:"300px",class:"right-aside",style:{overflow:"auto"}},{default:c(()=>[s(Fs,{chartTypes:r.chartTypes,isTypeModule:r.isTypeModule},null,8,["chartTypes","isTypeModule"])]),_:1})]),_:1})]),_:1})]),_:1})}}});const nr=A(or,[["__scopeId","data-v-17c7fe63"]]),Yr=D({__name:"DesignLayout",props:{visible:{type:Boolean},moduleItem:{},appId:{},entryId:{}},emits:["update:visible","save"],setup(u,{emit:i}){const n=u,p=i,l=N(n,"visible",p),a=d=>{p("save",d),l.value=!1};return(d,t)=>(v(),x(Na,{visible:e(l),"onUpdate:visible":t[1]||(t[1]=r=>T(l)?l.value=r:null)},{default:c(({lazy:r})=>[r?(v(),x(nr,At({key:0,"app-id":d.appId,"entry-id":d.entryId,"module-item":d.moduleItem},d.$attrs,{onSave:a,onClose:t[0]||(t[0]=o=>l.value=!1)}),null,16,["app-id","entry-id","module-item"])):M("",!0)]),_:1},8,["visible"]))}});export{Yr as default};
