import{d as C,v as D,c as T,r as V,o as I,b as w,w as m,i as o,bu as z,B as g,d9 as Z,C as R,bv as N,st as ee,aN as B,su as le,Q as K,ac as P,eG as ae,bm as G,f as k,F as U,g as H,j as te,l as S,aq as oe,p as se,by as ne,_ as O,bp as ue,sv as de,sw as ie,sx as re,q as me,bi as pe,k as E,m as x,sy as ce,rr as Q,rs as M,av as ve,U as Y,bn as be,sd as $,y as X,aT as fe,Y as W,bh as j,sz as q,sA as _e,se as ye,sf as J,sg as Ve,sB as ge,aa as Ie,sC as Ae,sD as he,fx as we,t as L,sE as ke,sF as Fe,ao as Ce,ap as Ee,iC as Re,e as xe,ae as Te,fA as Ue,sG as $e,rW as Be,P as De,cc as Pe,sH as Se,sI as Me,sJ as ze,b4 as Ne,sK as Oe}from"./index-b80d5ef5.js";import{A as qe}from"./AddAndEditMember-2206634e.js";import{o as Le}from"./omit-14b2042c.js";import{S as We}from"./SetPasswordFormItem-fa70a559.js";import{_ as je}from"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./AzPasswordFormItem-db212711.js";import"./AccountFormItem.vue_vue_type_script_setup_true_lang-c783353b.js";import"./SelectOrg.vue_vue_type_script_setup_true_lang-3e503345.js";import"./last-862de5a8.js";import"./_baseSlice-cf92e063.js";import"./PasswordFormItem.vue_vue_type_script_setup_true_lang-6a395c05.js";const Ge=[{value:"计算机/互联网/通信/电子",label:"计算机/互联网/通信/电子",children:[{label:"计算机软件",value:"计算机软件"},{label:"计算机硬件",value:"计算机硬件"},{label:"计算机服务(系统、数据服务、维修)",value:"计算机服务(系统、数据服务、维修)"},{label:"通信/电信/网络设备",value:"通信/电信/网络设备"},{label:"通信/电信运营、增值服务",value:"通信/电信运营、增值服务"},{label:"互联网/电子商务",value:"互联网/电子商务"},{label:"网络游戏",value:"网络游戏"},{label:"电子技术/半导体/集成电路",value:"电子技术/半导体/集成电路"},{label:"仪器仪表/工业自动化",value:"仪器仪表/工业自动化"}]},{value:"会计/金融/银行/保险",label:"会计/金融/银行/保险",children:[{label:"会计/审计",value:"会计/审计"},{label:"金融/投资/证券",value:"金融/投资/证券"},{label:"银行",value:"银行"},{label:"保险",value:"保险"},{label:"信托/担保/拍卖/典当",value:"信托/担保/拍卖/典当"}]},{value:"贸易/消费/制造/营运",label:"贸易/消费/制造/营运",children:[{label:"贸易/进出口",value:"贸易/进出口"},{label:"批发/零售",value:"批发/零售"},{label:"快速消费品(食品、饮料、化妆品)",value:"快速消费品(食品、饮料、化妆品)"},{label:"服装/纺织/皮革",value:"服装/纺织/皮革"},{label:"家具/家电/玩具/礼品",value:"家具/家电/玩具/礼品"},{label:"奢侈品/收藏品/工艺品/珠宝",value:"奢侈品/收藏品/工艺品/珠宝"},{label:"办公用品及设备",value:"办公用品及设备"},{label:"机械/设备/重工",value:"机械/设备/重工"},{label:"汽车",value:"汽车"},{label:"汽车零配件",value:"汽车零配件"}]},{value:"制药/医疗",label:"制药/医疗",children:[{label:"制药/生物工程",value:"制药/生物工程"},{label:"医疗/护理/卫生",value:"医疗/护理/卫生"},{label:"医疗设备/器械",value:"医疗设备/器械"}]},{value:"广告/媒体",label:"广告/媒体",children:[{label:"广告",value:"广告"},{label:"公关/市场推广/会展",value:"公关/市场推广/会展"},{label:"影视/媒体/艺术/文化传播",value:"影视/媒体/艺术/文化传播"},{label:"文字媒体/出版",value:"文字媒体/出版"},{label:"印刷/包装/造纸",value:"印刷/包装/造纸"}]},{value:"房地产/建筑",label:"房地产/建筑",children:[{label:"房地产",value:"房地产"},{label:"建筑/建材/工程",value:"建筑/建材/工程"},{label:"家居/室内设计/装潢",value:"家居/室内设计/装潢"},{label:"物业管理/商业中心",value:"物业管理/商业中心"},{label:"中介服务",value:"中介服务"},{label:"租赁服务",value:"租赁服务"}]},{value:"专业服务/教育/培训",label:"专业服务/教育/培训",children:[{label:"专业服务(咨询、人力资源、财会)",value:"专业服务(咨询、人力资源、财会)"},{label:"外包服务",value:"外包服务"},{label:"检测，认证",value:"检测，认证"},{label:"法律",value:"法律"},{label:"教育/培训/院校",value:"教育/培训/院校"},{label:"学术/科研",value:"学术/科研"}]},{value:"服务业",label:"服务业",children:[{label:"餐饮业",value:"餐饮业"},{label:"酒店/旅游",value:"酒店/旅游"},{label:"娱乐/休闲/体育",value:"娱乐/休闲/体育"},{label:"美容/保健",value:"美容/保健"},{label:"生活服务",value:"生活服务"}]},{value:"物流/运输",label:"物流/运输",children:[{label:"交通/运输/物流",value:"交通/运输/物流"},{label:"航天/航空",value:"航天/航空"}]},{value:"能源/环保/化工",label:"能源/环保/化工",children:[{label:"石油/化工/矿产/地质",value:"石油/化工/矿产/地质"},{label:"采掘业/冶炼",value:"采掘业/冶炼"},{label:"电气/电力/水利",value:"电气/电力/水利"},{label:"新能源",value:"新能源"},{label:"原材料和加工",value:"原材料和加工"},{label:"政府/公共事业",value:"政府/公共事业"}]},{value:"政府/非营利组织/其他",label:"政府/非营利组织/其他",children:[{label:"非营利组织",value:"非营利组织"},{label:"环保",value:"环保"},{label:"农/林/牧/渔",value:"农/林/牧/渔"},{label:"多元化业务集团公司",value:"多元化业务集团公司"}]}],He=C({__name:"AddAndEdit",props:{modelValue:{type:Boolean},edit:{}},emits:["update:modelValue","refresh"],setup(h,{emit:A}){const t=h,_=A,s=D(t,"modelValue",_),i=T(()=>!!t.edit),v=T(()=>i.value?"编辑企业":"新增企业"),n=V(),b={corpName:"",industry:"互联网/电子商务",logo:"",remarks:""},d=V({...b}),a={corpName:[{required:!0,message:"请输入企业名称",trigger:"change"}]},p=async l=>{var e;d.value.logo,await((e=n.value)==null?void 0:e.validate()),i.value?(await ee(d.value),B.success("编辑企业成功")):(await le(d.value),B.success("新增企业成功")),l==="submitContinue"&&(d.value={...b},setTimeout(()=>{var f;(f=n.value)==null||f.clearValidate()},100)),_("refresh")},u=async()=>{s.value&&(d.value=t.edit?{...t.edit}:{...b},setTimeout(()=>{var l;(l=n.value)==null||l.clearValidate()},100))};return(l,e)=>{const f=K,y=P,r=ae,F=G;return I(),w(N,{modelValue:g(s),"onUpdate:modelValue":e[5]||(e[5]=c=>R(s)?s.value=c:null),title:v.value,"show-load":u},{footer:m(()=>[o(z,{editMode:i.value,onClose:e[4]||(e[4]=c=>s.value=!1),"on-submit":p},null,8,["editMode"])]),default:m(()=>[o(F,{ref_key:"ruleFormRef",ref:n,rules:a,model:d.value,"label-width":"100px","label-position":"left"},{default:m(()=>[o(y,{label:"企业名称",prop:"corpName"},{default:m(()=>[o(f,{modelValue:d.value.corpName,"onUpdate:modelValue":e[0]||(e[0]=c=>d.value.corpName=c),placeholder:"请输入您的机构名称作为企业名称"},null,8,["modelValue"])]),_:1}),o(y,{label:"所在行业"},{default:m(()=>[o(r,{style:{width:"100%"},modelValue:d.value.industry,"onUpdate:modelValue":e[1]||(e[1]=c=>d.value.industry=c),options:g(Ge),props:{emitPath:!1},"show-all-levels":!1},null,8,["modelValue","options"])]),_:1}),o(y,{label:"系统简称"},{default:m(()=>[o(f,{modelValue:d.value.remarks,"onUpdate:modelValue":e[2]||(e[2]=c=>d.value.remarks=c),placeholder:"请输入，可作为首页名称"},null,8,["modelValue"])]),_:1}),o(y,{label:"LOGO图标"},{default:m(()=>[o(Z,{modelValue:d.value.logo,"onUpdate:modelValue":e[3]||(e[3]=c=>d.value.logo=c),accept:["jpg","jpeg","bmp","png"]},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),Je=C({__name:"Display",props:{modelValue:{},readonly:{type:Boolean},disabled:{type:Boolean},placeholder:{}},emits:["open","update:modelValue"],setup(h,{emit:A}){const t=h,_=A,s=()=>{t.readonly||t.disabled||_("open")},i=v=>{var b;const n=(b=t.modelValue)==null?void 0:b.filter(d=>d.userId!==v);_("update:modelValue",n??[])};return(v,n)=>{var d;const b=ne;return I(),k("div",{class:se(["display_wrapper",{"is-display-entry":!v.readonly&&!v.disabled,"is-display-readonly":v.readonly,"is-disabled":v.disabled}]),onClick:s},[o(oe,{placeholder:(d=v.modelValue)!=null&&d.length?"":v.placeholder,readonly:"","validate-event":!1,disabled:v.disabled},{prefix:m(()=>{var a;return[(a=v.modelValue)!=null&&a.length?(I(),k("div",{key:0,class:"tags_wrapper"},[(I(!0),k(U,null,H(v.modelValue,p=>(I(),w(b,{class:"tag_item",key:p.memberId,closable:"",onClose:u=>i(p.userId)},{default:m(()=>[o(te,{style:{width:"100%"},content:p.nickname},null,8,["content"])]),_:2},1032,["onClose"]))),128))])):S("",!0)]}),_:1},8,["placeholder","disabled"])],2)}}});const Ke=O(Je,[["__scopeId","data-v-5a711590"]]),Qe=C({__name:"SelectDialog",props:{modelValue:{},visible:{type:Boolean},corpId:{}},emits:["update:visible","update:modelValue"],setup(h,{emit:A}){const t=h,_=A,s=D(t,"visible",_),i=V([...t.modelValue??[]]),v=V(),n=T(()=>({query:{list:[{label:"姓名",prop:"nickname",type:"input"},{label:"手机号",prop:"mobile",type:"input"},{label:"账号",prop:"username",type:"input"},{label:"分类",prop:"userSource",type:"select",options:ue(de),initValue:ie}]},request:{api:re,extraParams:{corpId:t.corpId}},table:{tableProps:{rowKey:e=>e.userId+e.memberId,height:"320px"},tableCols:[{width:50,slots:{default({row:e}){const f=()=>{i.value.some(r=>r.userId===e.userId)?i.value=i.value.filter(r=>r.userId!==e.userId):i.value.push({...e})};return o(me,{modelValue:i.value.some(y=>y.userId===e.userId),onClick:f},null)}}},{label:"姓名",prop:"nickname"},{label:"手机号",prop:"mobile"},{label:"账号",prop:"username"},{label:"所属企业",prop:"corpName"}]}})),b=()=>{_("update:modelValue",i.value),s.value=!1},d=V(),a=V(!1),p=()=>{a.value=!0},u=async()=>{var f,y,r;await((y=(f=d.value)==null?void 0:f.ruleFormRef)==null?void 0:y.validate());const l=(r=d.value)==null?void 0:r.form;if(!l)return;const e=await ce({corpId:t.corpId,email:l.email,mobile:l.mobile,password:l.password,pwdType:l.passwordType===Q?1:l.passwordType===M?2:3,username:l.username,nickname:l.nickname});e&&i.value.push(e),v.value.refresh(),B.success("新增成功"),a.value=!1};return(l,e)=>{const f=pe("az-page"),y=ve,r=Y,F=be;return I(),k(U,null,[o(F,{title:"选择管理员",width:"800px",modelValue:g(s),"onUpdate:modelValue":e[1]||(e[1]=c=>R(s)?s.value=c:null),"append-to-body":""},{footer:m(()=>[E("div",{class:"dialog_footer"},[o(y,{type:"primary",underline:!1,onClick:p},{default:m(()=>[x(" 新增企业内成员 ")]),_:1}),E("span",null,[o(r,{onClick:e[0]||(e[0]=c=>s.value=!1)},{default:m(()=>[x("取消")]),_:1}),o(r,{type:"primary",onClick:b},{default:m(()=>[x("确定")]),_:1})])])]),default:m(()=>[o(f,{config:g(n),ref_key:"azPageRef",ref:v},null,8,["config"])]),_:1},8,["modelValue"]),o(N,{modelValue:g(a),"onUpdate:modelValue":e[3]||(e[3]=c=>R(a)?a.value=c:null),title:"新增用户","append-to-body":""},{footer:m(()=>[o(z,{editMode:"",onClose:e[2]||(e[2]=c=>a.value=!1),"on-submit":u})]),default:m(()=>[o(qe,{ref_key:"addAndEditMemberRef",ref:d,isSimple:""},null,512)]),_:1},8,["modelValue"])],64)}}});const Ye=O(Qe,[["__scopeId","data-v-5e2aab13"]]),Xe=C({__name:"AdminSelector",props:{corpId:{},placeholder:{},readonly:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(h,{emit:A}){const s=D(h,"modelValue",A),i=V(!1);return(v,n)=>{const b=P;return I(),k(U,null,[o(Ke,{onOpen:n[0]||(n[0]=d=>i.value=!0),style:{width:"100%"},placeholder:v.placeholder,modelValue:g(s),"onUpdate:modelValue":n[1]||(n[1]=d=>R(s)?s.value=d:null)},null,8,["placeholder","modelValue"]),o(b,null,{default:m(()=>[g(i)?(I(),w(Ye,{key:0,visible:g(i),"onUpdate:visible":n[2]||(n[2]=d=>R(i)?i.value=d:null),corpId:v.corpId,modelValue:g(s),"onUpdate:modelValue":n[3]||(n[3]=d=>R(s)?s.value=d:null)},null,8,["visible","corpId","modelValue"])):S("",!0)]),_:1})],64)}}}),Ze=C({__name:"SelectAdmin",props:{id:{},modelValue:{},ruleFormRef:{},syFlag:{}},emits:["update:modelValue"],setup(h,{emit:A}){const t=h,_=A,s=[{label:"系统管理员",prop:"systemAdmin"},{label:"安全管理员",prop:"securityAdmin"},{label:"审计管理员",prop:"auditAdmin"}],i=[{label:"机构管理员",prop:"systemAdmin"}],v=T(()=>t.syFlag!==$?i:s),n=(a,p)=>{_("update:modelValue",{...t.modelValue,[p]:[...a||[]]})},b={systemAdmin:!1,securityAdmin:!1,auditAdmin:!1},d=a=>{const p=s[a];return[{validator:(u,l,e)=>{if(t.syFlag!==$)return e();const f=W([...s]);f.splice(a,1);for(const{label:y,prop:r}of f)if((l||[]).some(F=>(t.modelValue[r]||[]).some(c=>c.memberId===F.memberId))){b[p.prop]=!0,e(new Error(`${p.label}与${y}不能存在同一成员`)),!b[p.prop]&&t.ruleFormRef&&t.ruleFormRef.validateField(r,()=>null);return}else b[p.prop]=!1,b[p.prop]&&t.ruleFormRef&&t.ruleFormRef.validateField(r,()=>null);e()},trigger:"change"},{required:!0,type:"array",message:`请至少选择一个${p.label}`,trigger:"change"}]};return X(()=>t.syFlag,()=>{if(!t.syFlag){const a={systemAdmin:[],securityAdmin:[],auditAdmin:[]};for(const{prop:p}of s)a.systemAdmin=[...new Set([...a.systemAdmin??[],...t.modelValue[p]??[]])];_("update:modelValue",{...t.modelValue,...a})}fe(()=>{var a;for(const{prop:p}of s)if(t.syFlag===$||p==="systemAdmin"){const u=t.modelValue[p];u!=null&&u.length&&((a=t.ruleFormRef)==null||a.validateField(p,()=>null))}})}),(a,p)=>{const u=P;return I(!0),k(U,null,H(g(v),(l,e)=>(I(),k(U,{key:e},[a.syFlag===g($)||l.prop==="systemAdmin"?(I(),w(u,{key:0,label:l.label,prop:l.prop,rules:d(e)},{default:m(()=>[o(Xe,{corpId:a.id,"model-value":a.modelValue[l.prop],"onUpdate:modelValue":f=>n(f,l.prop),placeholder:"请选择管理员"},null,8,["corpId","model-value","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])):S("",!0)],64))),128)}}}),el=C({__name:"SetAdmin",props:{modelValue:{type:Boolean},entInfo:{}},emits:["update:modelValue","refresh"],setup(h,{emit:A}){const t=h,_=A,s=D(t,"modelValue",_),i=V(),n=V({...{corpId:"",syFlag:q,isAuthBusiness:J,auditAdminIds:[],securityAdminIds:[],systemAdminIds:[],auditAdmin:[],securityAdmin:[],systemAdmin:[]}}),b={},d=async()=>{const u=await ge(t.entInfo.id);n.value={...n.value,...u}},a=async()=>{var l;await((l=i.value)==null?void 0:l.validate());let u=!1;n.value.auditAdminIds=(n.value.auditAdmin||[]).map(e=>(e.currentCorp||(u=!0),{memberId:e.memberId,userId:e.userId,corpId:e.corpId})),n.value.securityAdminIds=(n.value.securityAdmin||[]).map(e=>(e.currentCorp||(u=!0),{memberId:e.memberId,userId:e.userId,corpId:e.corpId})),n.value.systemAdminIds=(n.value.systemAdmin||[]).map(e=>(e.currentCorp||(u=!0),{memberId:e.memberId,userId:e.userId,corpId:e.corpId})),u?await Ie.confirm("您正在将企业外用户设置为管理员，确定后用户将自动加入企业，并成为管理员","操作确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await p()}):await p()};async function p(){const l={...Le(n.value,["auditAdmin","securityAdmin","systemAdmin"])};n.value.syFlag===q&&(l.auditAdminIds=[],l.securityAdminIds=[]),await Ae(l),B.success("设置管理员成功"),_("refresh")}return(u,l)=>{const e=K,f=P,y=G;return I(),w(N,{modelValue:g(s),"onUpdate:modelValue":l[4]||(l[4]=r=>R(s)?s.value=r:null),title:"设置管理员","show-load":d},{footer:m(()=>[o(z,{editMode:!0,onClose:l[3]||(l[3]=r=>s.value=!1),"on-submit":a})]),default:m(()=>[o(y,{ref_key:"ruleFormRef",ref:i,rules:b,model:n.value,"label-width":"120px","label-position":"left"},{default:m(()=>[o(f,{label:"企业名称"},{default:m(()=>{var r;return[o(e,{"model-value":(r=u.entInfo)==null?void 0:r.corpName,disabled:"",placeholder:"请输入您的机构名称作为企业名称"},null,8,["model-value"])]}),_:1}),o(f,{label:"系统三员管理",required:"",prop:"syFlag"},{default:m(()=>[o(j,{modelValue:n.value.syFlag,"onUpdate:modelValue":l[0]||(l[0]=r=>n.value.syFlag=r),"inline-prompt":"","active-value":g($),"inactive-value":g(q),"dict-key":g(_e)},null,8,["modelValue","active-value","inactive-value","dict-key"])]),_:1}),o(Ze,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=r=>n.value=r),id:u.entInfo.id,ruleFormRef:i.value,syFlag:n.value.syFlag},null,8,["modelValue","id","ruleFormRef","syFlag"]),o(f,{label:"应用访问权限",required:"",prop:"isAuthBusiness"},{default:m(()=>[o(j,{modelValue:n.value.isAuthBusiness,"onUpdate:modelValue":l[2]||(l[2]=r=>n.value.isAuthBusiness=r),"active-value":g(ye),"inactive-value":g(J),"dict-key":g(Ve)},null,8,["modelValue","active-value","inactive-value","dict-key"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});const ll=O(el,[["__scopeId","data-v-3e8dbc82"]]),al=C({__name:"EntCount",setup(h,{expose:A}){const t=V({all:0,enable:0,disable:0});return A({async refresh(_){t.value=await he(we(_,["limit","current"]))}}),(_,s)=>(I(),k("div",{class:"ent_count"},[E("span",null,[x(" 已入驻企业: "),E("span",null,L(t.value.all),1)]),E("span",null,[x(" 使用中: "),E("span",null,L(t.value.enable),1)]),E("span",null,[x(" 已停用: "),E("span",null,L(t.value.disable),1)])]))}});const tl=O(al,[["__scopeId","data-v-d9afb835"]]),ol=C({__name:"ResetPassword",props:{modelValue:{type:Boolean},entInfo:{}},emits:["update:modelValue"],setup(h,{emit:A}){const t=h,s=D(t,"modelValue",A),i=V([]),v=async()=>{if(!t.entInfo)return;const l=await ke(t.entInfo.id);i.value=l??[],i.value.length>0?a.value.mobile=i.value[0].mobile:setTimeout(()=>{var e;(e=b.value)==null||e.validateField("mobile")},100)},n=T(()=>({mobile:[{required:!0,message:i.value.length?"请选择管理员":"你没有可操作的管理员",trigger:"change"}]})),b=V(),d={mobile:"",passwordType:M,password:"",confirmPassword:"",type:0},a=V({...d});X(s,()=>{s.value&&(a.value={...d})});const p=T(()=>{var l;return(l=i.value.find(e=>e.mobile===a.value.mobile))==null?void 0:l.email}),u=async()=>{var l,e;await((l=b.value)==null?void 0:l.validate()),await Fe({corpId:((e=t.entInfo)==null?void 0:e.id)??"",mobile:a.value.mobile,password:a.value.password,pwdType:a.value.passwordType===Q?1:a.value.passwordType===M?2:3,type:a.value.type})};return(l,e)=>{const f=Ce,y=Ee,r=P,F=G;return I(),w(N,{modelValue:g(s),"onUpdate:modelValue":e[3]||(e[3]=c=>R(s)?s.value=c:null),title:"重置密码","show-load":v},{footer:m(()=>[o(z,{editMode:"",onClose:e[2]||(e[2]=c=>s.value=!1),"on-submit":u})]),default:m(()=>[t.entInfo?(I(),w(F,{key:0,ref_key:"ruleFormRef",ref:b,rules:n.value,model:a.value,"label-width":"120px","label-position":"left"},{default:m(()=>[o(r,{label:"姓名/手机号",prop:"mobile"},{default:m(()=>[o(y,{modelValue:a.value.mobile,"onUpdate:modelValue":e[0]||(e[0]=c=>a.value.mobile=c),placeholder:"请选择管理员",style:{width:"100%"}},{default:m(()=>[(I(!0),k(U,null,H(i.value,c=>(I(),w(f,{key:c.memberId,label:`${c.nickname}/${c.mobile}`,value:c.mobile},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(We,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=c=>a.value=c),mobile:a.value.mobile,email:p.value,passType:[g(M)]},null,8,["modelValue","mobile","email","passType"])]),_:1},8,["rules","model"])):S("",!0)]),_:1},8,["modelValue"])}}}),sl={name:"EnterpriseManagement"},_l=C({...sl,setup(h){const A={query:{list:[{type:"input",label:"企业名称",prop:"corpName"},{type:"timerange",label:"入驻时间",prop:["startTime","endTime"]}]},request:{api:$e,startLoad(u){var l;(l=t.value)==null||l.refresh(u)}},table:{tableCols:[{type:"index",width:55,label:"序号"},{prop:"corpName",label:"企业名称",minWidth:250,showOverflowTooltip:!0},{prop:"adminAccounts",label:"企业管理员账号",minWidth:250,showOverflowTooltip:!0},{prop:"createTime",label:"入驻时间",minWidth:250},{prop:"status",label:"状态",minWidth:100,slots:{default({row:u}){const l=async()=>{u.status==Pe?await Se(u.id):await Me(u.id),s()};return o(j,{modelValue:u.status,"onUpdate:modelValue":e=>u.status=e,updateFetch:l,disabled:!Be("system:corp:enable")},null)}}},{fixed:"right",minWidth:180,label:"操作",slots:{default({row:u}){const F=[{type:"primary",onClick:()=>{i.value=!0,v.value=W(u)},text:"编辑",premission:"system:corp:edit"},{type:"primary",onClick:()=>{d.value=u,b.value=!0},text:"设置管理员",premission:"system:corp:manager"},{type:"primary",onClick:()=>{a.value=!0,p.value=W(u)},text:"重置密码",premission:"system:corp:reset"},{type:"primary",onClick:async()=>{Ne(Oe,{query:{id:u.id}})},text:"查看详情",premission:"system:corp:detail"},{type:"danger",text:"删除",premission:"system:corp:delete",popconfirmProps:{title:"您确定要删除该企业吗?",confirm:async()=>{await ze(u.id),B.success("删除成功"),s()}}}];return o(je,{num:2,rowId:u.id,list:F},null)}}}]}},t=V(),_=V(),s=async()=>{var u;await((u=_.value)==null?void 0:u.refresh())},i=V(!1),v=V(),n=()=>{v.value=null,i.value=!0},b=V(!1),d=V(),a=V(!1),p=V();return(u,l)=>{const e=De,f=Y,y=Re("premission");return I(),k("div",null,[o(Ue,{class:"layout_box",ref_key:"azPageRef",ref:_,config:A,maxHeight:"var(--az-layout-main-height) - 32px"},{searchTop:m(()=>[o(tl,{ref_key:"entCountRef",ref:t},null,512)]),operation:m(()=>[xe((I(),w(f,{onClick:n,type:"primary"},{default:m(()=>[o(e,{size:16,style:{"margin-right":"8px"}},{default:m(()=>[o(g(Te))]),_:1}),x(" 新增企业 ")]),_:1})),[[y,"system:corp:add"]])]),_:1},512),o(He,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=r=>i.value=r),edit:v.value,onRefresh:s},null,8,["modelValue","edit"]),b.value?(I(),w(ll,{key:0,modelValue:b.value,"onUpdate:modelValue":l[1]||(l[1]=r=>b.value=r),entInfo:d.value,onRefresh:s},null,8,["modelValue","entInfo"])):S("",!0),o(ol,{modelValue:a.value,"onUpdate:modelValue":l[2]||(l[2]=r=>a.value=r),entInfo:p.value},null,8,["modelValue","entInfo"])])}}});export{_l as default};
