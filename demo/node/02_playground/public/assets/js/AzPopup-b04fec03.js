/* empty css              *//* empty css              */import{r as p,ik as V,il as O,y as R,cC as K,c as t,bI as N,xO as T,d as D,v as H,bK as L,bJ as M,xP as U,bx as j,o as n,b as E,w as J,B as q,f as i,p as k,h as v,k as l,i as F,l as d,t as G,I as Q,aT as W,lS as X,wc as Y,_ as Z}from"./index-b80d5ef5.js";function x(){const a=p(!0);return V(()=>{a.value=!0}),O(()=>{a.value=!1}),{activated:a}}const c=p(new Set);t(()=>{var a;return(a=[...c.value].reverse())==null?void 0:a[0]});function ee(a){const r=a.blockCallback;R(()=>!a.disable,e=>{e?c.value.add(r):c.value.delete(r)},{immediate:!0}),K(()=>c.value.delete(r))}function oe(){const a=N(T,void 0);return{target:t(()=>(a==null?void 0:a.value)??document.body)}}const ae=D({__name:"AzPopup",props:{show:{type:Boolean,default:!1},closeable:{type:Boolean,default:!0},title:{},teleport:{},backClose:{type:Boolean,default:!0},isHedadBorder:{type:Boolean,default:!1},beforeBlock:{},router:{type:Boolean,default:!1},closeIcon:{},position:{},destroyOnClose:{type:Boolean},overlay:{type:[null,Boolean],default:null},safeAreaInsetBottom:{type:Boolean,default:!1}},emits:["update:show"],setup(a,{emit:r}){const e=a,B=r,{activated:w}=x(),s=H(e,"show",B),z=async()=>(await W(),!!w.value),y=t(()=>!e.closeable&&!e.router?null:e.closeIcon?e.closeIcon:e.router?"arrow-left":"cross"),{target:C}=oe(),I=t(()=>(e.teleport&&e.teleport,C.value));ee(L({disable:t(()=>!e.backClose||!s.value),blockCallback:()=>{var o;((o=e.beforeBlock)==null?void 0:o.call(e))!==!1&&(s.value=!1)}}));const m=p();M(U,m);const A=t(()=>{if(e.overlay!=null)return e.overlay;if(e.router)return!1}),g=t(()=>e.router?{width:"100vw",height:"calc(var(--vh) * 100)"}:{}),P=t(()=>{if(e.position)return e.position;if(e.router)return"right"}),f=p(!1);s.value&&(f.value=!0,j(()=>{f.value=!1}));const b=t({get(){return f.value?!1:s.value},set(o){s.value=o}}),_=t(()=>e.router?!0:e.safeAreaInsetBottom);return(o,u)=>{const $=X,S=Y;return n(),E(S,Q({class:["az-popup-wrapper",{"is-header":o.$slots.header||o.closeable||o.title}],show:b.value,"onUpdate:show":u[1]||(u[1]=h=>b.value=h),closeable:!1,teleport:I.value,style:g.value,position:P.value,overlay:A.value},o.$attrs,{"safe-area-inset-bottom":_.value,"before-close":z}),{default:J(()=>[!o.destroyOnClose||q(s)?(n(),i("div",{key:0,ref_key:"azPopupRef",ref:m,class:k(["az-popup",{"az-popup-router":o.router}])},[o.$slots.header||o.closeable||o.title?(n(),i("div",{key:0,class:k(["az-popup-header",{"van-hairline--bottom":o.isHedadBorder||o.router}])},[v(o.$slots,"header",{},()=>[l("div",{class:"popup-header-wrapper"},[y.value?(n(),i("div",{key:0,class:"header-back",onClick:u[0]||(u[0]=h=>s.value=!1)},[F($,{name:y.value},null,8,["name"])])):d("",!0),l("div",{class:"header-text"},G(o.title),1),l("div",{class:"header-right"},[l("div",{class:"header-right-placeholder"})])])],!0)],2)):d("",!0),l("div",{class:"az_layout-header--other"}),l("div",{class:"az-popup-body"},[v(o.$slots,"default",{},void 0,!0)]),l("div",{class:"az_layout-footer"}),o.$slots.footer?(n(),i("div",{key:1,class:"az-popup-footer"},[v(o.$slots,"footer",{},void 0,!0)])):d("",!0)],2)):d("",!0)]),_:3},16,["class","show","teleport","style","position","overlay","safe-area-inset-bottom"])}}});const re=Z(ae,[["__scopeId","data-v-d890fd7a"]]);export{re as A};
