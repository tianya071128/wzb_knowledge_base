import{d as R,R as D,z as T,o as n,f as t,i as N,w as p,F as m,g as b,b as u,cR as k,I as F,ad as $,cj as j,l as v,B as C,m as x,a5 as z,dC as A,dD as L,av as O,Z as S}from"./index-b80d5ef5.js";const G=R({__name:"RenderTable",props:{tableCols:{},hideAdd:{type:Boolean},modelValue:{},rowKey:{default:"controlId"},idPrefix:{default:"mapping"},childrenFiled:{default:"subParams"},readonly:{type:Boolean}},emits:["add","update:modelValue"],setup(V,{expose:g,emit:K}){const e=V,y=K,d=D(e,"modelValue",y),f=()=>`_${e.idPrefix}_${S()}`,B=a=>{var r;const l=f();(r=d.value)==null||r.push({...a,[e.rowKey]:l})},I=a=>{d.value=h(e.modelValue??[],a)};function h(a,l){return a.reduce((r,s)=>{if(s[e.rowKey]!==l){const i=s[e.childrenFiled]?h(s[e.childrenFiled],l):void 0;r.push({...s,[e.childrenFiled]:i})}return r},[])}function w(a){return a.map(l=>{var r;return{...l,[e.rowKey]:l[e.rowKey]?l[e.rowKey]:f(),[e.childrenFiled]:(r=l[e.childrenFiled])!=null&&r.length?w(l[e.childrenFiled]):[]}})}return T(()=>{d.value=w(d.value??[])}),g({addRow:B,delRow:I}),(a,l)=>{const r=A,s=L,i=O;return n(),t("div",{class:"render-table-wrap"},[N(s,{data:C(d),class:"params-table","row-key":a.rowKey,"tree-props":{children:"subParams"}},{default:p(()=>[(n(!0),t(m,null,b(a.tableCols,(o,P)=>(n(),t(m,{key:P},[o.hide?v("",!0):(n(),t(m,{key:0},[o.slots&&(!a.readonly||o.alwaysOn)?(n(),u(r,k(F({key:0},o)),$({_:2},[b(o.slots||{},(c,_,Z)=>({name:_,fn:p(E=>[(n(),u(j(c==null?void 0:c(E)),{key:_}))])}))]),1040)):(n(),u(r,k(F({key:1},o)),null,16))],64))],64))),128))]),_:1},8,["data","row-key"]),!a.hideAdd&&!a.readonly?(n(),u(i,{key:0,underline:!1,icon:C(z),type:"primary",class:"mt-10",onClick:l[0]||(l[0]=o=>y("add"))},{default:p(()=>[x(" 添加参数 ")]),_:1},8,["icon"])):v("",!0)])}}});export{G as _};
