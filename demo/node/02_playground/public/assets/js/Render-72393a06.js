import{F as x}from"./FormItemFieldWrapper-ec4d2a36.js";import{M as g}from"./Base-9b7f3306.js";import{wL as m,n3 as y,d as k,wA as w,c as u,jG as N,o as a,b as d,w as C,B as c,C as F,ex as R}from"./index-b80d5ef5.js";import"./useValidateError-9f6399dc.js";/* empty css                          */import"./useFieldMaxWidth-d82f063e.js";import"./index-f0ed738f.js";async function $({field:o,val:t}){if(o.options.isCheckNum){const n=(t==null?void 0:t.length)??0;if(o.options.checkNumType===m.all){const i=(await y(o.options.dataOptions)).length;if(n!==i)return"选项必须全部选中"}else if(o.options.checkNumType===m.custom){const i=o.options.min,r=o.options.max;if(i!=null&&r!=null){if(n<i||n>r)return`请选择 ${i} ~ ${r} 个选项`}else if(i!=null){if(n<i)return`最少选择 ${i} 个选项`}else if(r!=null&&n>r)return`最多选择 ${r} 个选项`}}return!0}const O=k({__name:"Render",props:{field:{},index:{}},setup(o){const t=o,n=w(t.field,u(()=>t.index),{getFormat:e=>(Array.isArray(e)||(e=[]),e)}),i=N(),r=u(()=>!!i.getFieldAuth(t.field.fieldId,"edit",t.index)),h=u(()=>{const e=[];if(t.field.options.isCheckNum){const s={trigger:["blur","change"],validator:(f,v,l)=>{$({field:t.field,val:n.value}).then(p=>{if(typeof p=="string")return l(new Error(p));l()}).catch(()=>l())}};e.push(s)}return e});return(e,s)=>(a(),d(x,{field:e.field,rules:h.value,index:e.index},{default:C(()=>[r.value?(a(),d(g,{key:0,modelValue:c(n),"onUpdate:modelValue":s[0]||(s[0]=f=>F(n)?n.value=f:null),field:e.field,index:e.index},null,8,["modelValue","field","index"])):(a(),d(R,{key:1,content:c(n),field:e.field},null,8,["content","field"]))]),_:1},8,["field","rules","index"]))}});export{O as default};
