import{d as y,gY as w,a as o,y as h,M as c,o as V,f as g,i as s,w as t,a3 as m,B as d,m as v,t as S,F as b,a8 as D}from"./index-b80d5ef5.js";import{E as n}from"./routePage-70460a50.js";import{S as B}from"./SortSetField-face42ca.js";import{B as C}from"./ButtonState-cb54910b.js";import{C as E}from"./ConditionWrapper-43da1676.js";const N=y({__name:"ShowFieldSettings",props:{field:{}},setup(F){const f=F,r=w(),I=[o.input,o.textarea],p=(e,l)=>D(e,{blockFilter(i){return i.type===o.subform},excludeFilter(i){return!I.includes(i.type)||i.fieldId===l}});return h(()=>f.field.options.showFieldId,()=>{c(f.field.options.showOtherFieldIds,e=>e===f.field.options.showFieldId)}),(e,l)=>(V(),g(b,null,[s(n,{required:"",label:"显示控件",id:`${e.field.fieldId}.showFieldId`},{default:t(()=>[s(m,{class:"w100",modelValue:e.field.options.showFieldId,"onUpdate:modelValue":l[0]||(l[0]=i=>e.field.options.showFieldId=i),fields:e.field.type===d(o).parent?d(r).form.fields:void 0,"source-id":e.field.type===d(o).parent?void 0:e.field.options.cascaderData.sourceId,filter:p},null,8,["modelValue","fields","source-id"])]),_:1},8,["id"]),s(n,{label:"显示附加信息",id:`${e.field.fieldId}.showOtherFieldIds`},{default:t(()=>[s(m,{class:"w100",modelValue:e.field.options.showOtherFieldIds,"onUpdate:modelValue":l[1]||(l[1]=i=>e.field.options.showOtherFieldIds=i),fields:e.field.type===d(o).parent?d(r).form.fields:void 0,"source-id":e.field.type===d(o).parent?void 0:e.field.options.cascaderData.sourceId,filter:i=>p(i,e.field.options.showFieldId),placeholder:"选填",multiple:""},null,8,["modelValue","fields","source-id","filter"])]),_:1},8,["id"]),s(n,{label:"数据显示排序"},{default:t(()=>[s(B,{modelValue:e.field.options.sortFields,"onUpdate:modelValue":l[2]||(l[2]=i=>e.field.options.sortFields=i),fields:e.field.type===d(o).parent?d(r).totalFields:void 0,"source-id":e.field.type===d(o).parent?void 0:e.field.options.cascaderData.sourceId},null,8,["modelValue","fields","source-id"])]),_:1}),s(n,{label:"数据过滤",tip:"添加过滤条件来限定数据范围",id:`${e.field.fieldId}.condition`},{default:t(({error:i})=>[s(E,{condition:e.field.options.condition,"onUpdate:condition":l[3]||(l[3]=a=>e.field.options.condition=a),conditionPlaceholder:e.field.type===d(o).parent?"选择表单控件":"选择关联数据集控件",sourceId:e.field.type===d(o).parent?void 0:e.field.options.cascaderData.sourceId,fields:e.field.type===d(o).parent?d(r).totalFields:void 0,compareFields:d(r).getFieldsByFieldId({excludeCrrentField:!0,fieldId:e.field.fieldId,isSystemField:!0})},{default:t(()=>{var a;return[s(C,{"is-error":!!i,"is-set":!!((a=e.field.options.condition)!=null&&a.length),disabled:e.field.type===d(o).parent?void 0:!e.field.options.cascaderData.sourceId},{default:t(()=>{var u;return[v(S((u=e.field.options.condition)!=null&&u.length?"已添加过滤条件":"添加过滤条件"),1)]}),_:2},1032,["is-error","is-set","disabled"])]}),_:2},1032,["condition","conditionPlaceholder","sourceId","fields","compareFields"])]),_:1},8,["id"])],64))}});export{N as _};
