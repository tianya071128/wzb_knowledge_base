import{tP as Ml,tQ as Nl,d as pe,tR as Oe,tS as Vt,tT as At,iW as rt,cB as Yt,r as E,iQ as ue,tU as Ze,tV as Ol,c as H,B as o,bx as wt,pd as Vl,tW as kt,tX as Je,aT as Pe,tY as Al,tZ as Me,t_ as kl,t$ as zt,u0 as zl,u1 as Dt,cj as Pt,dN as ze,j3 as Ft,u2 as Wt,u3 as Lt,u4 as Dl,u5 as Pl,u6 as De,u7 as ht,u8 as ft,u9 as Qt,ua as Kt,iY as Fl,pq as bt,y as qe,cm as Ee,d5 as Wl,kl as $e,ub as St,kG as tt,c7 as Ae,uc as Ll,du as Kl,el as Gt,kg as W,pb as Gl,iO as We,ud as $l,ue as Ul,h as Ye,i as b,kH as jl,I as ae,bI as Xt,uf as Bl,ug as ql,P as Rt,nO as Yl,uh as Ql,c3 as Xl,bJ as Zl,j5 as Zt,bK as Jt,ui as Jl,uj as ea,si as el,dj as tl,o as te,b as ge,C as xt,is as ll,dl as al,v as ol,bz as ta,w as Z,bu as nl,p as la,f as Fe,F as Ke,g as ot,dO as aa,l as dt,H as mt,r$ as gt,bv as rl,uk as oa,aN as Ge,ul as na,ss as ra,ey as sa,Q as sl,ac as il,ao as cl,bm as dl,um as ia,_ as ul,un as ca,to as da,bs as ua,rW as ha,uo as fa,bh as ma,ik as ga,iC as ya,k as et,e as pa,ae as va,m as wa,tu as ba,tO as Sa,fA as Ra,up as xa,cc as Ta,uq as _a,ur as Ia,us as Ca,ut as Ea,U as Ha,uu as Ma,uv as Na}from"./index-b80d5ef5.js";import{_ as Oa}from"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import{O as Va}from"./OrgDetails-14c28d8f.js";import"./lodash-ae95bc60.js";const Aa=({atXEndEdge:e,atXStartEdge:t,atYEndEdge:l,atYStartEdge:a},c)=>{let r=null,i=0,s=0;const h=(d,f)=>{const w=d<=0&&t.value||d>=0&&e.value,p=f<=0&&a.value||f>=0&&l.value;return w&&p};return{hasReachedEdge:h,onWheel:d=>{Ml(r);let f=d.deltaX,w=d.deltaY;Math.abs(f)>Math.abs(w)?w=0:f=0,d.shiftKey&&w!==0&&(f=w,w=0),!(h(i,s)&&h(i+f,s+w))&&(i+=f,s+=w,d.preventDefault(),r=Nl(()=>{c(i,s),i=0,s=0}))}}},hl=({name:e,clearCache:t,getColumnPosition:l,getColumnStartIndexForOffset:a,getColumnStopIndexForStartIndex:c,getEstimatedTotalHeight:r,getEstimatedTotalWidth:i,getColumnOffset:s,getRowOffset:h,getRowPosition:m,getRowStartIndexForOffset:d,getRowStopIndexForStartIndex:f,initCache:w,injectToInstance:p,validateProps:g})=>pe({name:e??"ElVirtualList",props:Oe,emits:[Vt,At],setup(n,{emit:u,expose:S,slots:I}){const C=rt("vl");g(n);const R=Yt(),x=E(w(n,R));p==null||p(R,x);const $=E(),q=E(),O=E(),A=E(null),v=E({isScrolling:!1,scrollLeft:ue(n.initScrollLeft)?n.initScrollLeft:0,scrollTop:ue(n.initScrollTop)?n.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Ze,yAxisScrollDir:Ze}),z=Ol(),P=H(()=>Number.parseInt(`${n.height}`,10)),j=H(()=>Number.parseInt(`${n.width}`,10)),Q=H(()=>{const{totalColumn:_,totalRow:M,columnCache:N}=n,{isScrolling:L,xAxisScrollDir:k,scrollLeft:D}=o(v);if(_===0||M===0)return[0,0,0,0];const G=a(n,D,o(x)),U=c(n,G,D,o(x)),Y=!L||k===kt?Math.max(1,N):1,se=!L||k===Ze?Math.max(1,N):1;return[Math.max(0,G-Y),Math.max(0,Math.min(_-1,U+se)),G,U]}),ne=H(()=>{const{totalColumn:_,totalRow:M,rowCache:N}=n,{isScrolling:L,yAxisScrollDir:k,scrollTop:D}=o(v);if(_===0||M===0)return[0,0,0,0];const G=d(n,D,o(x)),U=f(n,G,D,o(x)),Y=!L||k===kt?Math.max(1,N):1,se=!L||k===Ze?Math.max(1,N):1;return[Math.max(0,G-Y),Math.max(0,Math.min(M-1,U+se)),G,U]}),re=H(()=>r(n,o(x))),J=H(()=>i(n,o(x))),he=H(()=>{var _;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:n.direction,height:ue(n.height)?`${n.height}px`:n.height,width:ue(n.width)?`${n.width}px`:n.width},(_=n.style)!=null?_:{}]}),ve=H(()=>{const _=`${o(J)}px`;return{height:`${o(re)}px`,pointerEvents:o(v).isScrolling?"none":void 0,width:_}}),ie=()=>{const{totalColumn:_,totalRow:M}=n;if(_>0&&M>0){const[U,Y,se,me]=o(Q),[de,oe,Xe,st]=o(ne);u(Vt,{columnCacheStart:U,columnCacheEnd:Y,rowCacheStart:de,rowCacheEnd:oe,columnVisibleStart:se,columnVisibleEnd:me,rowVisibleStart:Xe,rowVisibleEnd:st})}const{scrollLeft:N,scrollTop:L,updateRequested:k,xAxisScrollDir:D,yAxisScrollDir:G}=o(v);u(At,{xAxisScrollDir:D,scrollLeft:N,yAxisScrollDir:G,scrollTop:L,updateRequested:k})},T=_=>{const{clientHeight:M,clientWidth:N,scrollHeight:L,scrollLeft:k,scrollTop:D,scrollWidth:G}=_.currentTarget,U=o(v);if(U.scrollTop===D&&U.scrollLeft===k)return;let Y=k;if(Wt(n.direction))switch(zt()){case Dt:Y=-k;break;case Dl:Y=G-N-k;break}v.value={...U,isScrolling:!0,scrollLeft:Y,scrollTop:Math.max(0,Math.min(D,L-M)),updateRequested:!0,xAxisScrollDir:Je(U.scrollLeft,Y),yAxisScrollDir:Je(U.scrollTop,D)},Pe(()=>ee()),K(),ie()},y=(_,M)=>{const N=o(P),L=(re.value-N)/M*_;B({scrollTop:Math.min(re.value-N,L)})},V=(_,M)=>{const N=o(j),L=(J.value-N)/M*_;B({scrollLeft:Math.min(J.value-N,L)})},{onWheel:F}=Aa({atXStartEdge:H(()=>v.value.scrollLeft<=0),atXEndEdge:H(()=>v.value.scrollLeft>=J.value-o(j)),atYStartEdge:H(()=>v.value.scrollTop<=0),atYEndEdge:H(()=>v.value.scrollTop>=re.value-o(P))},(_,M)=>{var N,L,k,D;(L=(N=q.value)==null?void 0:N.onMouseUp)==null||L.call(N),(D=(k=O.value)==null?void 0:k.onMouseUp)==null||D.call(k);const G=o(j),U=o(P);B({scrollLeft:Math.min(v.value.scrollLeft+_,J.value-G),scrollTop:Math.min(v.value.scrollTop+M,re.value-U)})}),B=({scrollLeft:_=v.value.scrollLeft,scrollTop:M=v.value.scrollTop})=>{_=Math.max(_,0),M=Math.max(M,0);const N=o(v);M===N.scrollTop&&_===N.scrollLeft||(v.value={...N,xAxisScrollDir:Je(N.scrollLeft,_),yAxisScrollDir:Je(N.scrollTop,M),scrollLeft:_,scrollTop:M,updateRequested:!0},Pe(()=>ee()),K(),ie())},le=(_=0,M=0,N=Me)=>{const L=o(v);M=Math.max(0,Math.min(M,n.totalColumn-1)),_=Math.max(0,Math.min(_,n.totalRow-1));const k=Al(C.namespace.value),D=o(x),G=r(n,D),U=i(n,D);B({scrollLeft:s(n,M,N,L.scrollLeft,D,U>n.width?k:0),scrollTop:h(n,_,N,L.scrollTop,D,G>n.height?k:0)})},X=(_,M)=>{const{columnWidth:N,direction:L,rowHeight:k}=n,D=z.value(t&&N,t&&k,t&&L),G=`${_},${M}`;if(Pl(D,G))return D[G];{const[,U]=l(n,M,o(x)),Y=o(x),se=Wt(L),[me,de]=m(n,_,Y),[oe]=l(n,M,Y);return D[G]={position:"absolute",left:se?void 0:`${U}px`,right:se?`${U}px`:void 0,top:`${de}px`,height:`${me}px`,width:`${oe}px`},D[G]}},ee=()=>{v.value.isScrolling=!1,Pe(()=>{z.value(-1,null,null)})};wt(()=>{if(!Vl)return;const{initScrollLeft:_,initScrollTop:M}=n,N=o($);N&&(ue(_)&&(N.scrollLeft=_),ue(M)&&(N.scrollTop=M)),ie()});const K=()=>{const{direction:_}=n,{scrollLeft:M,scrollTop:N,updateRequested:L}=o(v),k=o($);if(L&&k){if(_===kl)switch(zt()){case Dt:{k.scrollLeft=-M;break}case zl:{k.scrollLeft=M;break}default:{const{clientWidth:D,scrollWidth:G}=k;k.scrollLeft=G-D-M;break}}else k.scrollLeft=Math.max(0,M);k.scrollTop=Math.max(0,N)}},{resetAfterColumnIndex:fe,resetAfterRowIndex:_e,resetAfter:Ie}=R.proxy;S({windowRef:$,innerRef:A,getItemStyleCache:z,scrollTo:B,scrollToItem:le,states:v,resetAfterColumnIndex:fe,resetAfterRowIndex:_e,resetAfter:Ie});const ce=()=>{const{scrollbarAlwaysOn:_,scrollbarStartGap:M,scrollbarEndGap:N,totalColumn:L,totalRow:k}=n,D=o(j),G=o(P),U=o(J),Y=o(re),{scrollLeft:se,scrollTop:me}=o(v),de=ze(Lt,{ref:q,alwaysOn:_,startGap:M,endGap:N,class:C.e("horizontal"),clientSize:D,layout:"horizontal",onScroll:V,ratio:D*100/U,scrollFrom:se/(U-D),total:k,visible:!0}),oe=ze(Lt,{ref:O,alwaysOn:_,startGap:M,endGap:N,class:C.e("vertical"),clientSize:G,layout:"vertical",onScroll:y,ratio:G*100/Y,scrollFrom:me/(Y-G),total:L,visible:!0});return{horizontalScrollbar:de,verticalScrollbar:oe}},we=()=>{var _;const[M,N]=o(Q),[L,k]=o(ne),{data:D,totalColumn:G,totalRow:U,useIsScrolling:Y,itemKey:se}=n,me=[];if(U>0&&G>0)for(let de=L;de<=k;de++)for(let oe=M;oe<=N;oe++)me.push((_=I.default)==null?void 0:_.call(I,{columnIndex:oe,data:D,key:se({columnIndex:oe,data:D,rowIndex:de}),isScrolling:Y?o(v).isScrolling:void 0,style:X(de,oe),rowIndex:de}));return me},Re=()=>{const _=Pt(n.innerElement),M=we();return[ze(_,{style:o(ve),ref:A},Ft(_)?M:{default:()=>M})]};return()=>{const _=Pt(n.containerElement),{horizontalScrollbar:M,verticalScrollbar:N}=ce(),L=Re();return ze("div",{key:0,class:C.e("wrapper"),role:n.role},[ze(_,{class:n.className,style:o(he),onScroll:T,onWheel:F,ref:$},Ft(_)?L:{default:()=>L}),M,N])}}}),ka=hl({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},t)=>[e,t*e],getRowPosition:({rowHeight:e},t)=>[e,t*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:t})=>t*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:t})=>t*e,getColumnOffset:({totalColumn:e,columnWidth:t,width:l},a,c,r,i,s)=>{l=Number(l);const h=Math.max(0,e*t-l),m=Math.min(h,a*t),d=Math.max(0,a*t-l+s+t);switch(c==="smart"&&(r>=d-l&&r<=m+l?c=Me:c=De),c){case ft:return m;case ht:return d;case De:{const f=Math.round(d+(m-d)/2);return f<Math.ceil(l/2)?0:f>h+Math.floor(l/2)?h:f}case Me:default:return r>=d&&r<=m?r:d>m||r<d?d:m}},getRowOffset:({rowHeight:e,height:t,totalRow:l},a,c,r,i,s)=>{t=Number(t);const h=Math.max(0,l*e-t),m=Math.min(h,a*e),d=Math.max(0,a*e-t+s+e);switch(c===Qt&&(r>=d-t&&r<=m+t?c=Me:c=De),c){case ft:return m;case ht:return d;case De:{const f=Math.round(d+(m-d)/2);return f<Math.ceil(t/2)?0:f>h+Math.floor(t/2)?h:f}case Me:default:return r>=d&&r<=m?r:d>m||r<d?d:m}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:t},l)=>Math.max(0,Math.min(t-1,Math.floor(l/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:t,width:l},a,c)=>{const r=a*e,i=Math.ceil((l+c-r)/e);return Math.max(0,Math.min(t-1,a+i-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:t},l)=>Math.max(0,Math.min(t-1,Math.floor(l/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:t,height:l},a,c)=>{const r=a*e,i=Math.ceil((l+c-r)/e);return Math.max(0,Math.min(t-1,a+i-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:t})=>{}}),{max:nt,min:fl,floor:ml}=Math,za={column:"columnWidth",row:"rowHeight"},yt={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},Se=(e,t,l,a)=>{const[c,r,i]=[l[a],e[za[a]],l[yt[a]]];if(t>i){let s=0;if(i>=0){const h=c[i];s=h.offset+h.size}for(let h=i+1;h<=t;h++){const m=r(h);c[h]={offset:s,size:m},s+=m}l[yt[a]]=t}return c[t]},gl=(e,t,l,a,c,r)=>{for(;l<=a;){const i=l+ml((a-l)/2),s=Se(e,i,t,r).offset;if(s===c)return i;s<c?l=i+1:a=i-1}return nt(0,l-1)},Da=(e,t,l,a,c)=>{const r=c==="column"?e.totalColumn:e.totalRow;let i=1;for(;l<r&&Se(e,l,t,c).offset<a;)l+=i,i*=2;return gl(e,t,ml(l/2),fl(l,r-1),a,c)},$t=(e,t,l,a)=>{const[c,r]=[t[a],t[yt[a]]];return(r>0?c[r].offset:0)>=l?gl(e,t,0,r,l,a):Da(e,t,nt(0,r),l,a)},yl=({totalRow:e},{estimatedRowHeight:t,lastVisitedRowIndex:l,row:a})=>{let c=0;if(l>=e&&(l=e-1),l>=0){const s=a[l];c=s.offset+s.size}const i=(e-l-1)*t;return c+i},pl=({totalColumn:e},{column:t,estimatedColumnWidth:l,lastVisitedColumnIndex:a})=>{let c=0;if(a>e&&(a=e-1),a>=0){const s=t[a];c=s.offset+s.size}const i=(e-a-1)*l;return c+i},Pa={column:pl,row:yl},Ut=(e,t,l,a,c,r,i)=>{const[s,h]=[r==="row"?e.height:e.width,Pa[r]],m=Se(e,t,c,r),d=h(e,c),f=nt(0,fl(d-s,m.offset)),w=nt(0,m.offset-s+i+m.size);switch(l===Qt&&(a>=w-s&&a<=f+s?l=Me:l=De),l){case ft:return f;case ht:return w;case De:return Math.round(w+(f-w)/2);case Me:default:return a>=w&&a<=f?a:w>f||a<w?w:f}},Fa=hl({name:"ElDynamicSizeGrid",getColumnPosition:(e,t,l)=>{const a=Se(e,t,l,"column");return[a.size,a.offset]},getRowPosition:(e,t,l)=>{const a=Se(e,t,l,"row");return[a.size,a.offset]},getColumnOffset:(e,t,l,a,c,r)=>Ut(e,t,l,a,c,"column",r),getRowOffset:(e,t,l,a,c,r)=>Ut(e,t,l,a,c,"row",r),getColumnStartIndexForOffset:(e,t,l)=>$t(e,l,t,"column"),getColumnStopIndexForStartIndex:(e,t,l,a)=>{const c=Se(e,t,a,"column"),r=l+e.width;let i=c.offset+c.size,s=t;for(;s<e.totalColumn-1&&i<r;)s++,i+=Se(e,t,a,"column").size;return s},getEstimatedTotalHeight:yl,getEstimatedTotalWidth:pl,getRowStartIndexForOffset:(e,t,l)=>$t(e,l,t,"row"),getRowStopIndexForStartIndex:(e,t,l,a)=>{const{totalRow:c,height:r}=e,i=Se(e,t,a,"row"),s=l+r;let h=i.size+i.offset,m=t;for(;m<c-1&&h<s;)m++,h+=Se(e,m,a,"row").size;return m},injectToInstance:(e,t)=>{const l=({columnIndex:r,rowIndex:i},s)=>{var h,m;s=Fl(s)?!0:s,ue(r)&&(t.value.lastVisitedColumnIndex=Math.min(t.value.lastVisitedColumnIndex,r-1)),ue(i)&&(t.value.lastVisitedRowIndex=Math.min(t.value.lastVisitedRowIndex,i-1)),(h=e.exposed)==null||h.getItemStyleCache.value(-1,null,null),s&&((m=e.proxy)==null||m.$forceUpdate())},a=(r,i)=>{l({columnIndex:r},i)},c=(r,i)=>{l({rowIndex:r},i)};Object.assign(e.proxy,{resetAfterColumnIndex:a,resetAfterRowIndex:c,resetAfter:l})},initCache:({estimatedColumnWidth:e=Kt,estimatedRowHeight:t=Kt})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:t,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:t})=>{}});var Ue=(e=>(e.ASC="asc",e.DESC="desc",e))(Ue||{}),je=(e=>(e.CENTER="center",e.RIGHT="right",e))(je||{}),Tt=(e=>(e.LEFT="left",e.RIGHT="right",e))(Tt||{});const pt={asc:"desc",desc:"asc"},Be=Symbol("placeholder"),Wa=(e,t,l)=>{var a;const c={flexGrow:0,flexShrink:0,...l?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};l||(c.flexShrink=1);const r={...(a=e.style)!=null?a:{},...c,flexBasis:"auto",width:e.width};return t||(e.maxWidth&&(r.maxWidth=e.maxWidth),e.minWidth&&(r.minWidth=e.minWidth)),r};function La(e,t,l){const a=H(()=>o(t).filter(n=>!n.hidden)),c=H(()=>o(a).filter(n=>n.fixed==="left"||n.fixed===!0)),r=H(()=>o(a).filter(n=>n.fixed==="right")),i=H(()=>o(a).filter(n=>!n.fixed)),s=H(()=>{const n=[];return o(c).forEach(u=>{n.push({...u,placeholderSign:Be})}),o(i).forEach(u=>{n.push(u)}),o(r).forEach(u=>{n.push({...u,placeholderSign:Be})}),n}),h=H(()=>o(c).length||o(r).length),m=H(()=>o(t).reduce((u,S)=>(u[S.key]=Wa(S,o(l),e.fixed),u),{})),d=H(()=>o(a).reduce((n,u)=>n+u.width,0)),f=n=>o(t).find(u=>u.key===n),w=n=>o(m)[n],p=(n,u)=>{n.width=u};function g(n){var u;const{key:S}=n.currentTarget.dataset;if(!S)return;const{sortState:I,sortBy:C}=e;let R=Ue.ASC;bt(I)?R=pt[I[S]]:R=pt[C.order],(u=e.onColumnSort)==null||u.call(e,{column:f(S),key:S,order:R})}return{columns:t,columnsStyles:m,columnsTotalWidth:d,fixedColumnsOnLeft:c,fixedColumnsOnRight:r,hasFixedColumns:h,mainColumns:s,normalColumns:i,visibleColumns:a,getColumn:f,getColumnStyle:w,updateColumnWidth:p,onColumnSorted:g}}const Ka=(e,{mainTableRef:t,leftTableRef:l,rightTableRef:a,onMaybeEndReached:c})=>{const r=E({scrollLeft:0,scrollTop:0});function i(p){var g,n,u;const{scrollTop:S}=p;(g=t.value)==null||g.scrollTo(p),(n=l.value)==null||n.scrollToTop(S),(u=a.value)==null||u.scrollToTop(S)}function s(p){r.value=p,i(p)}function h(p){r.value.scrollTop=p,i(o(r))}function m(p){var g,n;r.value.scrollLeft=p,(n=(g=t.value)==null?void 0:g.scrollTo)==null||n.call(g,o(r))}function d(p){var g;s(p),(g=e.onScroll)==null||g.call(e,p)}function f({scrollTop:p}){const{scrollTop:g}=o(r);p!==g&&h(p)}function w(p,g="auto"){var n;(n=t.value)==null||n.scrollToRow(p,g)}return qe(()=>o(r).scrollTop,(p,g)=>{p>g&&c()}),{scrollPos:r,scrollTo:s,scrollToLeft:m,scrollToTop:h,scrollToRow:w,onScroll:d,onVerticalScroll:f}},Ga=(e,{mainTableRef:t,leftTableRef:l,rightTableRef:a})=>{const c=Yt(),{emit:r}=c,i=Ee(!1),s=Ee(null),h=E(e.defaultExpandedRowKeys||[]),m=E(-1),d=Ee(null),f=E({}),w=E({}),p=Ee({}),g=Ee({}),n=Ee({}),u=H(()=>ue(e.estimatedRowHeight));function S(O){var A;(A=e.onRowsRendered)==null||A.call(e,O),O.rowCacheEnd>o(m)&&(m.value=O.rowCacheEnd)}function I({hovered:O,rowKey:A}){s.value=O?A:null}function C({expanded:O,rowData:A,rowIndex:v,rowKey:z}){var P,j;const Q=[...o(h)],ne=Q.indexOf(z);O?ne===-1&&Q.push(z):ne>-1&&Q.splice(ne,1),h.value=Q,r("update:expandedRowKeys",Q),(P=e.onRowExpand)==null||P.call(e,{expanded:O,rowData:A,rowIndex:v,rowKey:z}),(j=e.onExpandedRowsChange)==null||j.call(e,Q)}const R=Wl(()=>{var O,A,v,z;i.value=!0,f.value={...o(f),...o(w)},x(o(d),!1),w.value={},d.value=null,(O=t.value)==null||O.forceUpdate(),(A=l.value)==null||A.forceUpdate(),(v=a.value)==null||v.forceUpdate(),(z=c.proxy)==null||z.$forceUpdate(),i.value=!1},0);function x(O,A=!1){o(u)&&[t,l,a].forEach(v=>{const z=o(v);z&&z.resetAfterRowIndex(O,A)})}function $(O,A,v){const z=o(d);(z===null||z>v)&&(d.value=v),w.value[O]=A}function q({rowKey:O,height:A,rowIndex:v},z){z?z===Tt.RIGHT?n.value[O]=A:p.value[O]=A:g.value[O]=A;const P=Math.max(...[p,n,g].map(j=>j.value[O]||0));o(f)[O]!==P&&($(O,P,v),R())}return{hoveringRowKey:s,expandedRowKeys:h,lastRenderedRowIndex:m,isDynamic:u,isResetting:i,rowHeights:f,resetAfterIndex:x,onRowExpanded:C,onRowHovered:I,onRowsRendered:S,onRowHeightChange:q}},$a=(e,{expandedRowKeys:t,lastRenderedRowIndex:l,resetAfterIndex:a})=>{const c=E({}),r=H(()=>{const s={},{data:h,rowKey:m}=e,d=o(t);if(!d||!d.length)return h;const f=[],w=new Set;d.forEach(g=>w.add(g));let p=h.slice();for(p.forEach(g=>s[g[m]]=0);p.length>0;){const g=p.shift();f.push(g),w.has(g[m])&&Array.isArray(g.children)&&g.children.length>0&&(p=[...g.children,...p],g.children.forEach(n=>s[n[m]]=s[g[m]]+1))}return c.value=s,f}),i=H(()=>{const{data:s,expandColumnKey:h}=e;return h?o(r):s});return qe(i,(s,h)=>{s!==h&&(l.value=-1,a(0,!0))}),{data:i,depthMap:c}},Ua=(e,t)=>e+t,lt=e=>$e(e)?e.reduce(Ua,0):e,Ve=(e,t,l={})=>St(e)?e(t):e??l,Te=e=>(["width","maxWidth","minWidth","height"].forEach(t=>{e[t]=tt(e[t])}),e),vl=e=>Ae(e)?t=>ze(e,t):e,ja=(e,{columnsTotalWidth:t,data:l,fixedColumnsOnLeft:a,fixedColumnsOnRight:c})=>{const r=H(()=>{const{fixed:C,width:R,vScrollbarSize:x}=e,$=R-x;return C?Math.max(Math.round(o(t)),$):$}),i=H(()=>o(r)+(e.fixed?e.vScrollbarSize:0)),s=H(()=>{const{height:C=0,maxHeight:R=0,footerHeight:x,hScrollbarSize:$}=e;if(R>0){const q=o(g),O=o(h),v=o(p)+q+O+$;return Math.min(v,R-x)}return C-x}),h=H(()=>{const{rowHeight:C,estimatedRowHeight:R}=e,x=o(l);return ue(R)?x.length*R:x.length*C}),m=H(()=>{const{maxHeight:C}=e,R=o(s);if(ue(C)&&C>0)return R;const x=o(h)+o(p)+o(g);return Math.min(R,x)}),d=C=>C.width,f=H(()=>lt(o(a).map(d))),w=H(()=>lt(o(c).map(d))),p=H(()=>lt(e.headerHeight)),g=H(()=>{var C;return(((C=e.fixedData)==null?void 0:C.length)||0)*e.rowHeight}),n=H(()=>o(s)-o(p)-o(g)),u=H(()=>{const{style:C={},height:R,width:x}=e;return Te({...C,height:R,width:x})}),S=H(()=>Te({height:e.footerHeight})),I=H(()=>({top:tt(o(p)),bottom:tt(e.footerHeight),width:tt(e.width)}));return{bodyWidth:r,fixedTableHeight:m,mainTableHeight:s,leftTableWidth:f,rightTableWidth:w,headerWidth:i,rowsHeight:h,windowHeight:n,footerHeight:S,emptyStyle:I,rootStyle:u,headerHeight:p}},Ba=e=>{const t=E(),l=E(0),a=E(0);let c;return wt(()=>{c=Ll(t,([r])=>{const{width:i,height:s}=r.contentRect,{paddingLeft:h,paddingRight:m,paddingTop:d,paddingBottom:f}=getComputedStyle(r.target),w=Number.parseInt(h)||0,p=Number.parseInt(m)||0,g=Number.parseInt(d)||0,n=Number.parseInt(f)||0;l.value=i-w-p,a.value=s-g-n}).stop}),Kl(()=>{c==null||c()}),qe([l,a],([r,i])=>{var s;(s=e.onResize)==null||s.call(e,{width:r,height:i})}),{sizer:t,width:l,height:a}};function qa(e){const t=E(),l=E(),a=E(),{columns:c,columnsStyles:r,columnsTotalWidth:i,fixedColumnsOnLeft:s,fixedColumnsOnRight:h,hasFixedColumns:m,mainColumns:d,onColumnSorted:f}=La(e,Gt(e,"columns"),Gt(e,"fixed")),{scrollTo:w,scrollToLeft:p,scrollToTop:g,scrollToRow:n,onScroll:u,onVerticalScroll:S,scrollPos:I}=Ka(e,{mainTableRef:t,leftTableRef:l,rightTableRef:a,onMaybeEndReached:Ie}),{expandedRowKeys:C,hoveringRowKey:R,lastRenderedRowIndex:x,isDynamic:$,isResetting:q,rowHeights:O,resetAfterIndex:A,onRowExpanded:v,onRowHeightChange:z,onRowHovered:P,onRowsRendered:j}=Ga(e,{mainTableRef:t,leftTableRef:l,rightTableRef:a}),{data:Q,depthMap:ne}=$a(e,{expandedRowKeys:C,lastRenderedRowIndex:x,resetAfterIndex:A}),{bodyWidth:re,fixedTableHeight:J,mainTableHeight:he,leftTableWidth:ve,rightTableWidth:ie,headerWidth:T,rowsHeight:y,windowHeight:V,footerHeight:F,emptyStyle:B,rootStyle:le,headerHeight:X}=ja(e,{columnsTotalWidth:i,data:Q,fixedColumnsOnLeft:s,fixedColumnsOnRight:h}),ee=Ee(!1),K=E(),fe=H(()=>{const ce=o(Q).length===0;return $e(e.fixedData)?e.fixedData.length===0&&ce:ce});function _e(ce){const{estimatedRowHeight:we,rowHeight:Re,rowKey:xe}=e;return we?o(O)[o(Q)[ce][xe]]||we:Re}function Ie(){const{onEndReached:ce}=e;if(!ce)return;const{scrollTop:we}=o(I),Re=o(y),xe=o(V),_=Re-(we+xe)+e.hScrollbarSize;o(x)>=0&&Re===we+o(he)-o(X)&&ce(_)}return qe(()=>e.expandedRowKeys,ce=>C.value=ce,{deep:!0}),{columns:c,containerRef:K,mainTableRef:t,leftTableRef:l,rightTableRef:a,isDynamic:$,isResetting:q,isScrolling:ee,hoveringRowKey:R,hasFixedColumns:m,columnsStyles:r,columnsTotalWidth:i,data:Q,expandedRowKeys:C,depthMap:ne,fixedColumnsOnLeft:s,fixedColumnsOnRight:h,mainColumns:d,bodyWidth:re,emptyStyle:B,rootStyle:le,headerWidth:T,footerHeight:F,mainTableHeight:he,fixedTableHeight:J,leftTableWidth:ve,rightTableWidth:ie,showEmpty:fe,getRowHeight:_e,onColumnSorted:f,onRowHovered:P,onRowExpanded:v,onRowsRendered:j,onRowHeightChange:z,scrollTo:w,scrollToLeft:p,scrollToTop:g,scrollToRow:n,onScroll:u,onVerticalScroll:S}}const _t=Symbol("tableV2"),wl=String,Qe={type:W(Array),required:!0},It={type:W(Array)},bl={...It,required:!0},Ya=String,jt={type:W(Array),default:()=>Gl([])},He={type:Number,required:!0},Sl={type:W([String,Number,Symbol]),default:"id"},Bt={type:W(Object)},Ne=We({class:String,columns:Qe,columnsStyles:{type:W(Object),required:!0},depth:Number,expandColumnKey:Ya,estimatedRowHeight:{...Oe.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:W(Function)},onRowHover:{type:W(Function)},onRowHeightChange:{type:W(Function)},rowData:{type:W(Object),required:!0},rowEventHandlers:{type:W(Object)},rowIndex:{type:Number,required:!0},rowKey:Sl,style:{type:W(Object)}}),ut={type:Number,required:!0},Ct=We({class:String,columns:Qe,fixedHeaderData:{type:W(Array)},headerData:{type:W(Array),required:!0},headerHeight:{type:W([Number,Array]),default:50},rowWidth:ut,rowHeight:{type:Number,default:50},height:ut,width:ut}),at=We({columns:Qe,data:bl,fixedData:It,estimatedRowHeight:Ne.estimatedRowHeight,width:He,height:He,headerWidth:He,headerHeight:Ct.headerHeight,bodyWidth:He,rowHeight:He,cache:$l.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Oe.scrollbarAlwaysOn,scrollbarStartGap:Oe.scrollbarStartGap,scrollbarEndGap:Oe.scrollbarEndGap,class:wl,style:Bt,containerStyle:Bt,getRowHeight:{type:W(Function),required:!0},rowKey:Ne.rowKey,onRowsRendered:{type:W(Function)},onScroll:{type:W(Function)}}),Qa=We({cache:at.cache,estimatedRowHeight:Ne.estimatedRowHeight,rowKey:Sl,headerClass:{type:W([String,Function])},headerProps:{type:W([Object,Function])},headerCellProps:{type:W([Object,Function])},headerHeight:Ct.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:W([String,Function])},rowProps:{type:W([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:W([Object,Function])},columns:Qe,data:bl,dataGetter:{type:W(Function)},fixedData:It,expandColumnKey:Ne.expandColumnKey,expandedRowKeys:jt,defaultExpandedRowKeys:jt,class:wl,fixed:Boolean,style:{type:W(Object)},width:He,height:He,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Oe.hScrollbarSize,vScrollbarSize:Oe.vScrollbarSize,scrollbarAlwaysOn:Ul.alwaysOn,sortBy:{type:W(Object),default:()=>({})},sortState:{type:W(Object),default:void 0},onColumnSort:{type:W(Function)},onExpandedRowsChange:{type:W(Function)},onEndReached:{type:W(Function)},onRowExpand:Ne.onRowExpand,onScroll:at.onScroll,onRowsRendered:at.onRowsRendered,rowEventHandlers:Ne.rowEventHandlers}),Et=(e,{slots:t})=>{var l;const{cellData:a,style:c}=e,r=((l=a==null?void 0:a.toString)==null?void 0:l.call(a))||"",i=Ye(t,"default",e,()=>[r]);return b("div",{class:e.class,title:r,style:c},[i])};Et.displayName="ElTableV2Cell";Et.inheritAttrs=!1;const Ht=(e,{slots:t})=>Ye(t,"default",e,()=>{var l,a;return[b("div",{class:e.class,title:(l=e.column)==null?void 0:l.title},[(a=e.column)==null?void 0:a.title])]});Ht.displayName="ElTableV2HeaderCell";Ht.inheritAttrs=!1;const Xa=We({class:String,columns:Qe,columnsStyles:{type:W(Object),required:!0},headerIndex:Number,style:{type:W(Object)}}),Za=pe({name:"ElTableV2HeaderRow",props:Xa,setup(e,{slots:t}){return()=>{const{columns:l,columnsStyles:a,headerIndex:c,style:r}=e;let i=l.map((s,h)=>t.cell({columns:l,column:s,columnIndex:h,headerIndex:c,style:a[s.key]}));return t.header&&(i=t.header({cells:i.map(s=>$e(s)&&s.length===1?s[0]:s),columns:l,headerIndex:c})),b("div",{class:e.class,style:r,role:"row"},[i])}}}),Ja="ElTableV2Header",eo=pe({name:Ja,props:Ct,setup(e,{slots:t,expose:l}){const a=rt("table-v2"),c=E(),r=H(()=>Te({width:e.width,height:e.height})),i=H(()=>Te({width:e.rowWidth,height:e.height})),s=H(()=>jl(o(e.headerHeight))),h=f=>{const w=o(c);Pe(()=>{w!=null&&w.scroll&&w.scroll({left:f})})},m=()=>{const f=a.e("fixed-header-row"),{columns:w,fixedHeaderData:p,rowHeight:g}=e;return p==null?void 0:p.map((n,u)=>{var S;const I=Te({height:g,width:"100%"});return(S=t.fixed)==null?void 0:S.call(t,{class:f,columns:w,rowData:n,rowIndex:-(u+1),style:I})})},d=()=>{const f=a.e("dynamic-header-row"),{columns:w}=e;return o(s).map((p,g)=>{var n;const u=Te({width:"100%",height:p});return(n=t.dynamic)==null?void 0:n.call(t,{class:f,columns:w,headerIndex:g,style:u})})};return l({scrollToLeft:h}),()=>{if(!(e.height<=0))return b("div",{ref:c,class:e.class,style:o(r),role:"rowgroup"},[b("div",{style:o(i),class:a.e("header")},[d(),m()])])}}}),to=e=>{const{isScrolling:t}=Xt(_t),l=E(!1),a=E(),c=H(()=>ue(e.estimatedRowHeight)&&e.rowIndex>=0),r=(h=!1)=>{const m=o(a);if(!m)return;const{columns:d,onRowHeightChange:f,rowKey:w,rowIndex:p,style:g}=e,{height:n}=m.getBoundingClientRect();l.value=!0,Pe(()=>{if(h||n!==Number.parseInt(g.height)){const u=d[0],S=(u==null?void 0:u.placeholderSign)===Be;f==null||f({rowKey:w,height:n,rowIndex:p},u&&!S&&u.fixed)}})},i=H(()=>{const{rowData:h,rowIndex:m,rowKey:d,onRowHover:f}=e,w=e.rowEventHandlers||{},p={};return Object.entries(w).forEach(([g,n])=>{St(n)&&(p[g]=u=>{n({event:u,rowData:h,rowIndex:m,rowKey:d})})}),f&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:g,hovered:n})=>{const u=p[g];p[g]=S=>{f({event:S,hovered:n,rowData:h,rowIndex:m,rowKey:d}),u==null||u(S)}}),p}),s=h=>{const{onRowExpand:m,rowData:d,rowIndex:f,rowKey:w}=e;m==null||m({expanded:h,rowData:d,rowIndex:f,rowKey:w})};return wt(()=>{o(c)&&r(!0)}),{isScrolling:t,measurable:c,measured:l,rowRef:a,eventHandlers:i,onExpand:s}},lo="ElTableV2TableRow",ao=pe({name:lo,props:Ne,setup(e,{expose:t,slots:l,attrs:a}){const{eventHandlers:c,isScrolling:r,measurable:i,measured:s,rowRef:h,onExpand:m}=to(e);return t({onExpand:m}),()=>{const{columns:d,columnsStyles:f,expandColumnKey:w,depth:p,rowData:g,rowIndex:n,style:u}=e;let S=d.map((I,C)=>{const R=$e(g.children)&&g.children.length>0&&I.key===w;return l.cell({column:I,columns:d,columnIndex:C,depth:p,style:f[I.key],rowData:g,rowIndex:n,isScrolling:o(r),expandIconProps:R?{rowData:g,rowIndex:n,onExpand:m}:void 0})});if(l.row&&(S=l.row({cells:S.map(I=>$e(I)&&I.length===1?I[0]:I),style:u,columns:d,depth:p,rowData:g,rowIndex:n,isScrolling:o(r)})),o(i)){const{height:I,...C}=u||{},R=o(s);return b("div",ae({ref:h,class:e.class,style:R?u:C,role:"row"},a,o(c)),[S])}return b("div",ae(a,{ref:h,class:e.class,style:u,role:"row"},o(c)),[S])}}}),oo=e=>{const{sortOrder:t}=e;return b(Rt,{size:14,class:e.class},{default:()=>[t===Ue.ASC?b(Bl,null,null):b(ql,null,null)]})},no=e=>{const{expanded:t,expandable:l,onExpand:a,style:c,size:r}=e,i={onClick:l?()=>a(!t):void 0,class:e.class};return b(Rt,ae(i,{size:r,style:c}),{default:()=>[b(Yl,null,null)]})},ro="ElTableV2Grid",so=e=>{const t=E(),l=E(),a=H(()=>{const{data:n,rowHeight:u,estimatedRowHeight:S}=e;if(!S)return n.length*u}),c=H(()=>{const{fixedData:n,rowHeight:u}=e;return((n==null?void 0:n.length)||0)*u}),r=H(()=>lt(e.headerHeight)),i=H(()=>{const{height:n}=e;return Math.max(0,n-o(r)-o(c))}),s=H(()=>o(r)+o(c)>0),h=({data:n,rowIndex:u})=>n[u][e.rowKey];function m({rowCacheStart:n,rowCacheEnd:u,rowVisibleStart:S,rowVisibleEnd:I}){var C;(C=e.onRowsRendered)==null||C.call(e,{rowCacheStart:n,rowCacheEnd:u,rowVisibleStart:S,rowVisibleEnd:I})}function d(n,u){var S;(S=l.value)==null||S.resetAfterRowIndex(n,u)}function f(n,u){const S=o(t),I=o(l);!S||!I||(bt(n)?(S.scrollToLeft(n.scrollLeft),I.scrollTo(n)):(S.scrollToLeft(n),I.scrollTo({scrollLeft:n,scrollTop:u})))}function w(n){var u;(u=o(l))==null||u.scrollTo({scrollTop:n})}function p(n,u){var S;(S=o(l))==null||S.scrollToItem(n,1,u)}function g(){var n,u;(n=o(l))==null||n.$forceUpdate(),(u=o(t))==null||u.$forceUpdate()}return{bodyRef:l,forceUpdate:g,fixedRowHeight:c,gridHeight:i,hasHeader:s,headerHeight:r,headerRef:t,totalHeight:a,itemKey:h,onItemRendered:m,resetAfterRowIndex:d,scrollTo:f,scrollToTop:w,scrollToRow:p}},Mt=pe({name:ro,props:at,setup(e,{slots:t,expose:l}){const{ns:a}=Xt(_t),{bodyRef:c,fixedRowHeight:r,gridHeight:i,hasHeader:s,headerRef:h,headerHeight:m,totalHeight:d,forceUpdate:f,itemKey:w,onItemRendered:p,resetAfterRowIndex:g,scrollTo:n,scrollToTop:u,scrollToRow:S}=so(e);l({forceUpdate:f,totalHeight:d,scrollTo:n,scrollToTop:u,scrollToRow:S,resetAfterRowIndex:g});const I=()=>e.bodyWidth;return()=>{const{cache:C,columns:R,data:x,fixedData:$,useIsScrolling:q,scrollbarAlwaysOn:O,scrollbarEndGap:A,scrollbarStartGap:v,style:z,rowHeight:P,bodyWidth:j,estimatedRowHeight:Q,headerWidth:ne,height:re,width:J,getRowHeight:he,onScroll:ve}=e,ie=ue(Q),T=ie?Fa:ka,y=o(m);return b("div",{role:"table",class:[a.e("table"),e.class],style:z},[b(T,{ref:c,data:x,useIsScrolling:q,itemKey:w,columnCache:0,columnWidth:ie?I:j,totalColumn:1,totalRow:x.length,rowCache:C,rowHeight:ie?he:P,width:J,height:o(i),class:a.e("body"),role:"rowgroup",scrollbarStartGap:v,scrollbarEndGap:A,scrollbarAlwaysOn:O,onScroll:ve,onItemRendered:p,perfMode:!1},{default:V=>{var F;const B=x[V.rowIndex];return(F=t.row)==null?void 0:F.call(t,{...V,columns:R,rowData:B})}}),o(s)&&b(eo,{ref:h,class:a.e("header-wrapper"),columns:R,headerData:x,headerHeight:e.headerHeight,fixedHeaderData:$,rowWidth:ne,rowHeight:P,width:J,height:Math.min(y+o(r),re)},{dynamic:t.header,fixed:t.row})])}}});function io(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ae(e)}const co=(e,{slots:t})=>{const{mainTableRef:l,...a}=e;return b(Mt,ae({ref:l},a),io(t)?t:{default:()=>[t]})};function uo(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ae(e)}const ho=(e,{slots:t})=>{if(!e.columns.length)return;const{leftTableRef:l,...a}=e;return b(Mt,ae({ref:l},a),uo(t)?t:{default:()=>[t]})};function fo(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ae(e)}const mo=(e,{slots:t})=>{if(!e.columns.length)return;const{rightTableRef:l,...a}=e;return b(Mt,ae({ref:l},a),fo(t)?t:{default:()=>[t]})};function go(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ae(e)}const yo=(e,{slots:t})=>{const{columns:l,columnsStyles:a,depthMap:c,expandColumnKey:r,expandedRowKeys:i,estimatedRowHeight:s,hasFixedColumns:h,hoveringRowKey:m,rowData:d,rowIndex:f,style:w,isScrolling:p,rowProps:g,rowClass:n,rowKey:u,rowEventHandlers:S,ns:I,onRowHovered:C,onRowExpanded:R}=e,x=Ve(n,{columns:l,rowData:d,rowIndex:f},""),$=Ve(g,{columns:l,rowData:d,rowIndex:f}),q=d[u],O=c[q]||0,A=!!r,v=f<0,z=[I.e("row"),x,{[I.e(`row-depth-${O}`)]:A&&f>=0,[I.is("expanded")]:A&&i.includes(q),[I.is("hovered")]:!p&&q===m,[I.is("fixed")]:!O&&v,[I.is("customized")]:!!t.row}],P=h?C:void 0,j={...$,columns:l,columnsStyles:a,class:z,depth:O,expandColumnKey:r,estimatedRowHeight:v?void 0:s,isScrolling:p,rowIndex:f,rowData:d,rowKey:q,rowEventHandlers:S,style:w};return b(ao,ae(j,{onRowHover:P,onRowExpand:R}),go(t)?t:{default:()=>[t]})},vt=({columns:e,column:t,columnIndex:l,depth:a,expandIconProps:c,isScrolling:r,rowData:i,rowIndex:s,style:h,expandedRowKeys:m,ns:d,cellProps:f,expandColumnKey:w,indentSize:p,iconSize:g,rowKey:n},{slots:u})=>{const S=Te(h);if(t.placeholderSign===Be)return b("div",{class:d.em("row-cell","placeholder"),style:S},null);const{cellRenderer:I,dataKey:C,dataGetter:R}=t,x=St(R)?R({columns:e,column:t,columnIndex:l,rowData:i,rowIndex:s}):Ql(i,C??""),$=Ve(f,{cellData:x,columns:e,column:t,columnIndex:l,rowIndex:s,rowData:i}),q={class:d.e("cell-text"),columns:e,column:t,columnIndex:l,cellData:x,isScrolling:r,rowData:i,rowIndex:s},O=vl(I),A=O?O(q):Ye(u,"default",q,()=>[b(Et,q,null)]),v=[d.e("row-cell"),t.class,t.align===je.CENTER&&d.is("align-center"),t.align===je.RIGHT&&d.is("align-right")],z=s>=0&&w&&t.key===w,P=s>=0&&m.includes(i[n]);let j;const Q=`margin-inline-start: ${a*p}px;`;return z&&(bt(c)?j=b(no,ae(c,{class:[d.e("expand-icon"),d.is("expanded",P)],size:g,expanded:P,style:Q,expandable:!0}),null):j=b("div",{style:[Q,`width: ${g}px; height: ${g}px;`].join(" ")},null)),b("div",ae({class:v,style:S},$,{role:"cell"}),[j,A])};vt.inheritAttrs=!1;function po(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ae(e)}const vo=({columns:e,columnsStyles:t,headerIndex:l,style:a,headerClass:c,headerProps:r,ns:i},{slots:s})=>{const h={columns:e,headerIndex:l},m=[i.e("header-row"),Ve(c,h,""),{[i.is("customized")]:!!s.header}],d={...Ve(r,h),columnsStyles:t,class:m,columns:e,headerIndex:l,style:a};return b(Za,d,po(s)?s:{default:()=>[s]})},qt=(e,{slots:t})=>{const{column:l,ns:a,style:c,onColumnSorted:r}=e,i=Te(c);if(l.placeholderSign===Be)return b("div",{class:a.em("header-row-cell","placeholder"),style:i},null);const{headerCellRenderer:s,headerClass:h,sortable:m}=l,d={...e,class:a.e("header-cell-text")},f=vl(s),w=f?f(d):Ye(t,"default",d,()=>[b(Ht,d,null)]),{sortBy:p,sortState:g,headerCellProps:n}=e;let u,S;if(g){const R=g[l.key];u=!!pt[R],S=u?R:Ue.ASC}else u=l.key===p.key,S=u?p.order:Ue.ASC;const I=[a.e("header-cell"),Ve(h,e,""),l.align===je.CENTER&&a.is("align-center"),l.align===je.RIGHT&&a.is("align-right"),m&&a.is("sortable")],C={...Ve(n,e),onClick:l.sortable?r:void 0,class:I,style:i,["data-key"]:l.key};return b("div",ae(C,{role:"columnheader"}),[w,m&&b(oo,{class:[a.e("sort-icon"),u&&a.is("sorting")],sortOrder:S},null)])},Rl=(e,{slots:t})=>{var l;return b("div",{class:e.class,style:e.style},[(l=t.default)==null?void 0:l.call(t)])};Rl.displayName="ElTableV2Footer";const xl=(e,{slots:t})=>{const l=Ye(t,"default",{},()=>[b(Xl,null,null)]);return b("div",{class:e.class,style:e.style},[l])};xl.displayName="ElTableV2Empty";const Tl=(e,{slots:t})=>{var l;return b("div",{class:e.class,style:e.style},[(l=t.default)==null?void 0:l.call(t)])};Tl.displayName="ElTableV2Overlay";function Le(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ae(e)}const wo="ElTableV2",bo=pe({name:wo,props:Qa,setup(e,{slots:t,expose:l}){const a=rt("table-v2"),{columnsStyles:c,fixedColumnsOnLeft:r,fixedColumnsOnRight:i,mainColumns:s,mainTableHeight:h,fixedTableHeight:m,leftTableWidth:d,rightTableWidth:f,data:w,depthMap:p,expandedRowKeys:g,hasFixedColumns:n,hoveringRowKey:u,mainTableRef:S,leftTableRef:I,rightTableRef:C,isDynamic:R,isResetting:x,isScrolling:$,bodyWidth:q,emptyStyle:O,rootStyle:A,headerWidth:v,footerHeight:z,showEmpty:P,scrollTo:j,scrollToLeft:Q,scrollToTop:ne,scrollToRow:re,getRowHeight:J,onColumnSorted:he,onRowHeightChange:ve,onRowHovered:ie,onRowExpanded:T,onRowsRendered:y,onScroll:V,onVerticalScroll:F}=qa(e);return l({scrollTo:j,scrollToLeft:Q,scrollToTop:ne,scrollToRow:re}),Zl(_t,{ns:a,isResetting:x,hoveringRowKey:u,isScrolling:$}),()=>{const{cache:B,cellProps:le,estimatedRowHeight:X,expandColumnKey:ee,fixedData:K,headerHeight:fe,headerClass:_e,headerProps:Ie,headerCellProps:ce,sortBy:we,sortState:Re,rowHeight:xe,rowClass:_,rowEventHandlers:M,rowKey:N,rowProps:L,scrollbarAlwaysOn:k,indentSize:D,iconSize:G,useIsScrolling:U,vScrollbarSize:Y,width:se}=e,me=o(w),de={cache:B,class:a.e("main"),columns:o(s),data:me,fixedData:K,estimatedRowHeight:X,bodyWidth:o(q)+Y,headerHeight:fe,headerWidth:o(v),height:o(h),mainTableRef:S,rowKey:N,rowHeight:xe,scrollbarAlwaysOn:k,scrollbarStartGap:2,scrollbarEndGap:Y,useIsScrolling:U,width:se,getRowHeight:J,onRowsRendered:y,onScroll:V},oe=o(d),Xe=o(m),st={cache:B,class:a.e("left"),columns:o(r),data:me,estimatedRowHeight:X,leftTableRef:I,rowHeight:xe,bodyWidth:oe,headerWidth:oe,headerHeight:fe,height:Xe,rowKey:N,scrollbarAlwaysOn:k,scrollbarStartGap:2,scrollbarEndGap:Y,useIsScrolling:U,width:oe,getRowHeight:J,onScroll:F},it=o(f)+Y,_l={cache:B,class:a.e("right"),columns:o(i),data:me,estimatedRowHeight:X,rightTableRef:C,rowHeight:xe,bodyWidth:it,headerWidth:it,headerHeight:fe,height:Xe,rowKey:N,scrollbarAlwaysOn:k,scrollbarStartGap:2,scrollbarEndGap:Y,width:it,style:`--${o(a.namespace)}-table-scrollbar-size: ${Y}px`,useIsScrolling:U,getRowHeight:J,onScroll:F},ke=o(c),Il={ns:a,depthMap:o(p),columnsStyles:ke,expandColumnKey:ee,expandedRowKeys:o(g),estimatedRowHeight:X,hasFixedColumns:o(n),hoveringRowKey:o(u),rowProps:L,rowClass:_,rowKey:N,rowEventHandlers:M,onRowHovered:ie,onRowExpanded:T,onRowHeightChange:ve},Nt={cellProps:le,expandColumnKey:ee,indentSize:D,iconSize:G,rowKey:N,expandedRowKeys:o(g),ns:a},Cl={ns:a,headerClass:_e,headerProps:Ie,columnsStyles:ke},Ot={ns:a,sortBy:we,sortState:Re,headerCellProps:ce,onColumnSorted:he},be={row:ct=>b(yo,ae(ct,Il),{row:t.row,cell:ye=>{let Ce;return t.cell?b(vt,ae(ye,Nt,{style:ke[ye.column.key]}),Le(Ce=t.cell(ye))?Ce:{default:()=>[Ce]}):b(vt,ae(ye,Nt,{style:ke[ye.column.key]}),null)}}),header:ct=>b(vo,ae(ct,Cl),{header:t.header,cell:ye=>{let Ce;return t["header-cell"]?b(qt,ae(ye,Ot,{style:ke[ye.column.key]}),Le(Ce=t["header-cell"](ye))?Ce:{default:()=>[Ce]}):b(qt,ae(ye,Ot,{style:ke[ye.column.key]}),null)}})},El=[e.class,a.b(),a.e("root"),{[a.is("dynamic")]:o(R)}],Hl={class:a.e("footer"),style:o(z)};return b("div",{class:El,style:o(A)},[b(co,de,Le(be)?be:{default:()=>[be]}),b(ho,st,Le(be)?be:{default:()=>[be]}),b(mo,_l,Le(be)?be:{default:()=>[be]}),t.footer&&b(Rl,Hl,{default:t.footer}),o(P)&&b(xl,{class:a.e("empty"),style:o(O)},{default:t.empty}),t.overlay&&b(Tl,{class:a.e("overlay")},{default:t.overlay})])}}}),So=We({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:W(Function)}}),Ro=pe({name:"ElAutoResizer",props:So,setup(e,{slots:t}){const l=rt("auto-resizer"),{height:a,width:c,sizer:r}=Ba(e),i={width:"100%",height:"100%"};return()=>{var s;return b("div",{ref:r,class:l.b(),style:i},[(s=t.default)==null?void 0:s.call(t,{height:a.value,width:c.value})])}}}),xo=Zt(bo),To=Zt(Ro);const _o=Jt({name:[{required:!0,message:"请输入机构名称",trigger:"change"}],parentId:[{required:!0,message:"请选择上级机构",trigger:"blur"}],nature:[{required:!0,message:"请选择机构性质",trigger:"change"}],type:[{required:!0,message:"请选择机构类型",trigger:"change"}],certificateType:[{required:!0,message:"请选择证件类型",trigger:"change"}],email:[{message:"请输入正确格式的邮箱",trigger:"change",validator(e,t){return t?Jl(t):!0}}],phone:[{message:"请输入正确格式的手机号",trigger:"change",validator(e,t){return t?ea(t):!0}}]}),Io=[{type:"treeSelect",itemType:"elItem",propName:"parentId",label:"上级机构",placeholder:"请选择，未选择时为顶级机构"},{type:"input",itemType:"elItem",propName:"name",label:"机构名称",placeholder:"请输入机构名称"},{type:"select",itemType:"elDict",propName:"nature",label:"机构性质",placeholder:"请选择机构性质",load:el}],Co=[{type:"SelectCompanyInfo",itemType:"elItem",propName:"orgManagerId",label:"机构主管",placeholder:"请选择机构主管"},{type:"select",itemType:"elDict",propName:"type",label:"机构类型",placeholder:"请选择机构类型",isShow:"edit",load:"org_type"},{type:"select",itemType:"elDict",propName:"certificateType",label:"证件类型",placeholder:"请选择证件类型",isShow:"edit",load:"certificate_type"},{type:"input",itemType:"elItem",propName:"certificateNumber",label:"证件号码",placeholder:"请输入机构证件号码(统一社会信息代码)"},{type:"input",itemType:"elItem",propName:"legalName",label:"法人代表人名称",placeholder:"请输入法人代表人名称",isShow:"edit"},{type:"input",itemType:"elItem",propName:"legalCardNumber",label:"法人代表人身份证号码",placeholder:"请输入法人代表人身份证号码",isShow:"edit"},{type:"input",itemType:"elItem",propName:"phone",label:"联系电话",placeholder:"请输入联系电话",maxlength:"11"},{type:"input",itemType:"elItem",propName:"email",label:"联系邮箱",placeholder:"请输入联系邮箱"},{type:"textarea",itemType:"elItem",propName:"address",label:"详细地址",placeholder:"请输入详细地址",maxlength:"200"}],Eo=[{type:"SelectCompanyInfo",itemType:"elItem",propName:"orgManagerId",label:"部门主管",placeholder:"请选择部门主管"}],Ho=pe({__name:"SelectMember",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,a=t,c=H({get(){return(Array.isArray(l.modelValue)?l.modelValue:[l.modelValue]).map(i=>({type:tl.memberSelectMemberId,id:i}))},set(r){const i=r.map(s=>s.id);a("update:modelValue",i)}});return(r,i)=>(te(),ge(al,{modelValue:o(c),"onUpdate:modelValue":i[0]||(i[0]=s=>xt(c)?c.value=s:null),"dialog-title":"选择机构主管",placeholder:"选择机构主管",tabs:[o(ll).memberSelectMemberIdByOrg],multiple:""},null,8,["modelValue","tabs"]))}}),Mo=pe({__name:"OrgAddOrModifyForms",props:{drawerModel:{type:Boolean},rowData:{},comState:{},pid:{}},emits:["update:drawerModel","refresh"],setup(e,{emit:t}){const l=t,a=e,c=E([]),r=ol(a,"drawerModel",l),i=()=>{r.value=!1},s=R=>a.comState===R,h={address:"",name:"",nature:0,orgManagerName:"",certificateNumber:"",certificateType:0,email:"",id:"",legalCardNumber:"",legalName:"",orgManagerId:[],parentId:"",phone:"",status:"",type:0,parentIds:""},m=E(),d=E({...h}),f=async()=>{c.value=await ia({})},w=H(()=>{let R=Io;return d.value.parentId==="0"&&(R=R.filter(x=>x.type!=="treeSelect")),d.value.nature==0?R=[...R,...Co]:R=[...R,...Eo],s("add")?R.filter(x=>x.isShow!=="edit"):R}),p=async R=>{var x;await((x=m.value)==null?void 0:x.validate()),s("add")?(await oa(d.value),Ge.success("新增机构成功"),R==="submitContinue"&&(d.value={...h,parentId:d.value.parentId},setTimeout(()=>{var $;($=m.value)==null||$.clearValidate()},100))):(await na(d.value),Ge.success("修改机构成功")),await l("refresh"),await f()},g=b(ta,{iconClass:"treeSelect"},null),n=async()=>{if(await f(),s("add"))d.value={...h},a.pid?d.value.parentId=a.pid:(d.value.parentId=c.value[0].id,d.value);else{if(a.rowData,!a.rowData)return;const R=await ra(a.rowData.id);for(const x in d.value)Object.prototype.hasOwnProperty.call(R,x)?d.value[x]=R[x]:d.value[x]=R.corpCert[x];C()}setTimeout(()=>{var R;(R=m.value)==null||R.clearValidate()},100)},u=E([]),S=E(!1),I=E(""),C=async()=>{const R=d.value.parentId;await sa(300),Pe(()=>{const x=u.value[0];x&&(!x.getNode(R)&&R?(d.value.parentId="",I.value="该机构已删除或不存在",S.value=!0):(S.value=!1,I.value=""))})};return qe(()=>d.value.parentId,()=>{C()},{immediate:!0}),(R,x)=>{const $=sl,q=il,O=cl,A=dl;return te(),ge(rl,{modelValue:o(r),"onUpdate:modelValue":x[1]||(x[1]=v=>xt(r)?r.value=v:null),title:s("add")?"新增机构":"编辑机构",onClose:i,"show-load":n},{footer:Z(()=>[b(nl,{editMode:s("edit"),onClose:x[0]||(x[0]=v=>r.value=!1),"on-submit":p},null,8,["editMode"])]),default:Z(()=>[b(A,{ref_key:"ruleFormRef",ref:m,rules:o(_o),model:d.value,class:la([S.value?"is-remove":""]),"label-width":s("add")?"100px":"170px","label-position":"left"},{default:Z(()=>[(te(!0),Fe(Ke,null,ot(w.value,(v,z)=>(te(),Fe(Ke,{key:z},[v.itemType==="elItem"?(te(),ge(q,{label:v.label,key:z,prop:v.propName},{default:Z(()=>[v.type==="input"||v.type==="textarea"?(te(),ge($,{key:0,type:v.type,maxlength:v.maxlength??"","show-word-limit":"",modelValue:d.value[v.propName],"onUpdate:modelValue":P=>d.value[v.propName]=P,placeholder:v.placeholder},null,8,["type","maxlength","modelValue","onUpdate:modelValue","placeholder"])):v.type==="treeSelect"?(te(),ge(o(aa),{key:1,ref_for:!0,ref_key:"ElTreeSelectRef",ref:u,"suffix-icon":o(g),filterable:"","default-expanded-keys":[R.pid],props:{label:"name"},class:"elTreeSelect","value-key":"id",modelValue:d.value[v.propName],"onUpdate:modelValue":P=>d.value[v.propName]=P,data:c.value,"check-strictly":"",placeholder:I.value??v.placeholder,"render-after-expand":!1},null,8,["suffix-icon","default-expanded-keys","modelValue","onUpdate:modelValue","data","placeholder"])):v.type==="SelectCompanyInfo"?(te(),ge(Ho,{key:2,modelValue:d.value[v.propName],"onUpdate:modelValue":P=>d.value[v.propName]=P},null,8,["modelValue","onUpdate:modelValue"])):dt("",!0)]),_:2},1032,["label","prop"])):dt("",!0),v.itemType==="elDict"?(te(),ge(mt,{label:v.label,key:z,prop:v.propName},{default:Z(()=>[b(gt,{modelValue:d.value[v.propName],"onUpdate:modelValue":P=>d.value[v.propName]=P,style:{width:"100%"},placeholder:v.placeholder,load:v.load},{default:Z(({options:P})=>[(te(!0),Fe(Ke,null,ot(P,j=>(te(),ge(O,{key:j.value,label:j.label,value:j.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","load"])]),_:2},1032,["label","prop"])):dt("",!0)],64))),128))]),_:1},8,["rules","model","class","label-width"])]),_:1},8,["modelValue","title"])}}});const No=ul(Mo,[["__scopeId","data-v-0e8f7f79"]]),Oo=pe({__name:"OrgRealName",props:{drawerModel:{type:Boolean},rowData:{},openCloudRealName:{type:Function}},emits:["update:drawerModel"],setup(e,{emit:t}){const l=t,a=e,c=E(),r=ol(a,"drawerModel",l),i=E({relationId:"",certificateNumber:"",certificateType:0,type:0,name:""}),s=Jt({type:[{required:!0,message:"请选择机构类型",trigger:"change"}],certificateType:[{required:!0,message:"请选择证件类型",trigger:"change"}],name:[{required:!0,message:"请输入机构名称",trigger:"blur"}],certificateNumber:[{required:!0,message:"请输入证件号码",trigger:"blur"}]}),h=async()=>{var f;await((f=c.value)==null?void 0:f.validate());const d=await ca(i.value);a.openCloudRealName({bizId:d.bizId,authUrl:d.authUrl})},m=async()=>{var d;i.value={...a.rowData,relationId:a.rowData.id},await((d=c.value)==null?void 0:d.clearValidate())};return(d,f)=>{const w=cl,p=sl,g=il,n=dl;return te(),ge(rl,{modelValue:o(r),"onUpdate:modelValue":f[5]||(f[5]=u=>xt(r)?r.value=u:null),title:"机构实名","show-load":m},{footer:Z(()=>[b(nl,{editMode:!0,"submit-text":"下一步",onClose:f[4]||(f[4]=u=>r.value=!1),"on-submit":h})]),default:Z(()=>[b(n,{ref_key:"ruleFormRef",ref:c,rules:s,model:i.value,"label-position":"left"},{default:Z(()=>[b(mt,{label:"机构类型",prop:"type"},{default:Z(()=>[b(gt,{modelValue:i.value.type,"onUpdate:modelValue":f[0]||(f[0]=u=>i.value.type=u),style:{width:"100%"},placeholder:"请选择机构类型",load:"org_type"},{default:Z(({options:u})=>[(te(!0),Fe(Ke,null,ot(u,S=>(te(),ge(w,{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),b(g,{label:"机构名称",prop:"name"},{default:Z(()=>[b(p,{modelValue:i.value.name,"onUpdate:modelValue":f[1]||(f[1]=u=>i.value.name=u),placeholder:"企业实名时的名称"},null,8,["modelValue"])]),_:1}),b(mt,{label:"证件类型",prop:"certificateType"},{default:Z(()=>[b(gt,{modelValue:i.value.certificateType,"onUpdate:modelValue":f[2]||(f[2]=u=>i.value.certificateType=u),style:{width:"100%"},placeholder:"请选择证件类型",load:"certificate_type"},{default:Z(({options:u})=>[(te(!0),Fe(Ke,null,ot(u,S=>(te(),ge(w,{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),b(g,{label:"证件号码",prop:"certificateNumber"},{default:Z(()=>[b(p,{modelValue:i.value.certificateNumber,"onUpdate:modelValue":f[3]||(f[3]=u=>i.value.certificateNumber=u),placeholder:"账号实名时的证件号码"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])}}}),Vo=()=>{const e=(l,a="0")=>{const c=l.map(s=>({...s,children:[]})),r=new Map(c.map(s=>[s.id,s])),i=[];return c.forEach(s=>{const h=s.parentId;if(s.id===a||h==="0"){i.push(s);return}const m=r.get(h??"");m&&m.children.push(s)}),i};function t(l,a){if(a<=0)return l;const c=(r,i)=>r.map(s=>{const h=i<a;return{...s,children:h&&s.children?c(s.children,i+1):[]}});return c(l,0)}return{array2Tree:e,onDeepLevel:t}},Ao={name:"Org"},ko=pe({...Ao,setup(e){const{menuId:t}=da(),{array2Tree:l,onDeepLevel:a}=Vo(),c=E(!1),r=E(!1),i=E(!1),s=E(!1),h=E(!1),m=E(),d=E(),f=E(),w=E(),p=E(),g=E(),n=E(""),u=E({parentIdLike:""}),S=E([]),I=E(0),C={query:{list:[{type:"input",label:"机构名称",prop:"name"},{type:"input",label:"机构主管",prop:"orgManagerName"},{type:"select",label:"状态",prop:"status",options:"status",isAll:!0,initValue:Ta.toString()}]},request:{api:async T=>{const y=await _a({parentIdLike:T.parentIdLike,limit:9999,menuId:t.value});J.value=y.records.map(F=>F.id+"");const V=l(y.records,T.parentIdLike);return Q(a(V,Number(I.value)),T)},extraParams:u},operation:{fullEl:m},pagination:{hidePagination:!0},table:{tableCols:[]}},R=(T,y)=>{var V;T==="edit"&&(g.value=y),((V=g.value)==null?void 0:V.parentId)==="0"&&(g.value.parentId=""),n.value=T,r.value=!0},x=async T=>{var y,V;(!T||T==="table")&&await((y=d.value)==null?void 0:y.refresh()),(!T||T==="tree")&&await((V=w.value)==null?void 0:V.initTreeData())},$=async T=>{const y=T.id;g.value=T;const V=await Na(y);S.value=V.map(F=>({id:F,type:tl.memberSelectMemberId})),s.value=!0},q=async T=>{var F,B;const V={corpMemberIds:(Array.isArray(T)?T:[T]).map(le=>le.id),orgId:(F=g.value)==null?void 0:F.id};await Ia(V),await((B=w.value)==null?void 0:B.initTreeData()),Ge.success("保存成功")},O=async()=>{await A(g.value),h.value=!1},A=async T=>{p.value={};const y=await Ca({type:"1",corpId:T.id});switch(String(y.status)){case"-1":case"2":g.value={...T},i.value=!0;break;case"0":v({authUrl:y.authUrl,bizId:y.bizId}),g.value={...T};break;case"1":x();break;default:Ge.error("状态异常")}},v=T=>{p.value={...T},h.value=!0},z=()=>{h.value=!1,x()},P=T=>{var V;const y=(V=w.value)==null?void 0:V.getNode(T.data);if(y!=null&&y.parent){const F=y.parent.childNodes,B=F.findIndex(X=>X.data.id===T.data.id);return B===0?"0":F[B-1].data.id}else return"0"},j=async T=>{var F;const y=P(T),V=(F=w.value)==null?void 0:F.getNode(T.data);await Ea({beforeOrgId:y,orgId:T.data.id,parentId:(V==null?void 0:V.parent.data.id)||"0"}),x("table")};function Q(T,y){return y.name||y.orgManagerName||y.status?function V(F,B){const le=[];if(!(F&&F.length))return[];for(const X of F){const ee=V(X.children,B);(ne(X,B)||ee&&ee.length)&&(X.children=ee,le.push(X))}return le.length?le:[]}(T,y):T}function ne(T,y){var F;const V=Object.values(T.orgManagerName??{});return(!y.name||((F=T.name)==null?void 0:F.includes(y.name)))&&(!y.orgManagerName||(V==null?void 0:V.includes(y.orgManagerName)))&&(!y.status||T.status==y.status)}const re=H(()=>[{dataKey:"name",key:"name",title:"机构名称",width:220,minWidth:220,flexGrow:1},{title:"机构性质",dataKey:"nature",key:"nature",flexGrow:1,width:220,cellRenderer:({rowData:y})=>b("span",null,[ua(y.nature,el)])},{dataKey:"orgManagerName",key:"orgManagerName",title:"机构主管",flexGrow:1,width:220,cellRenderer:({rowData:y})=>b("span",null,[Object.keys(y.orgManagerName??{}).map((V,F)=>`${y.orgManagerName[V]}`).join("、")])},{dataKey:"status",key:"status",title:"状态",width:220,flexGrow:1,cellRenderer:({rowData:y})=>b(ma,{disabled:!ha("system:org:enable"),modelValue:y.status,"onUpdate:modelValue":V=>y.status=V,updateFetch:async()=>await fa(y.id)},null)},{fixed:Tt.RIGHT,width:180,title:"操作",cellRenderer:({rowData:y})=>{const V=async()=>{await Ma(y.id),Ge.success("删除成功"),x()},F=async()=>{await R("edit",y)},B=async()=>{var K;await((K=f.value)==null?void 0:K.getDetails(y.id)),c.value=!0},le=()=>{A(y)},ee=[{type:"primary",premission:"system:org:detail",onClick:B,text:"查看"},{type:"primary",premission:"system:org:edit",onClick:F,text:"编辑"},{type:"primary",premission:"system:org:orguser",onClick:()=>{$(y)},text:"组织人员"},{type:"danger",text:"删除",premission:"system:org:delete",popconfirmProps:{title:"您确定要删除该机构吗?",confirm:V}}];return String(y.certificateAuthStatus)==="0"&&String(y.nature)==="0"&&String(y.parentId)!=="0"&&ee.splice(3,0,{type:"primary",premission:"system:org:auth",onClick:le,text:"实名认证"}),b(Oa,{num:3,rowId:y.id,list:ee},null)}}]),J=E([]),he=E(),ve=E(0),ie=T=>{ve.value=T.scrollTop};return ga(()=>{var y;const T=ve.value;(y=he.value)==null||y.scrollToTop(0),setTimeout(()=>{var V;(V=he.value)==null||V.scrollToTop(T)})}),(T,y)=>{var ee;const V=Rt,F=Ha,B=xo,le=To,X=ya("premission");return te(),Fe("div",{ref_key:"orgRef",ref:m,class:"layout_box az_layout_tree"},[et("div",{class:"az_page_tree"},[pa((te(),ge(F,{type:"primary",style:{"margin-bottom":"10px"},onClick:y[0]||(y[0]=K=>R("add"))},{default:Z(()=>[b(V,{size:16,style:{"margin-right":"8px"}},{default:Z(()=>[b(o(va))]),_:1}),wa(" 新增机构 ")]),_:1})),[[X,"system:org:add"]]),b(ba,{ref_key:"OrgTreeRef",ref:w,modelValue:u.value.parentIdLike,"onUpdate:modelValue":y[1]||(y[1]=K=>u.value.parentIdLike=K),"is-filter-org":!1,isMemberCount:"",topTree:{id:"",name:"全部机构"},class:"org-tree","tree-props":{draggable:!0,allowDrag:K=>K.data.id,allowDrop:(K,fe)=>fe.data.id&&fe.data.parentId!=="0"},"tree-events":{nodeDrop:j}},null,8,["modelValue","tree-props","tree-events"])]),et("div",{class:"az_page_table"},[b(Ra,{ref_key:"azPageRef",ref:d,config:C,style:{height:"100%"}},{operation:Z(()=>[b(Sa,{load:[{label:"查看全部下级",value:0},{label:"查看下级",value:1},{label:"查看下2级",value:2},{label:"查看下3级",value:3}],modelValue:I.value,"onUpdate:modelValue":[y[2]||(y[2]=K=>I.value=K),y[3]||(y[3]=K=>x("table"))]},null,8,["modelValue"])]),table:Z(({tableData:K})=>[et("div",{class:"table_wrapper"},[b(le,null,{default:Z(({height:fe,width:_e})=>[b(B,{ref_key:"tableV2Ref",ref:he,"expanded-row-keys":J.value,"onUpdate:expandedRowKeys":y[4]||(y[4]=Ie=>J.value=Ie),"header-class":"table_v2-header",columns:o(re),data:K,width:_e,height:fe,expandColumnKey:"name","header-height":40,onScroll:ie},null,8,["expanded-row-keys","columns","data","width","height"])]),_:2},1024)])]),_:1},512)]),b(No,{"com-state":n.value,"drawer-model":r.value,"onUpdate:drawerModel":y[5]||(y[5]=K=>r.value=K),"row-data":g.value,pid:u.value.parentIdLike,onRefresh:x},null,8,["com-state","drawer-model","row-data","pid"]),b(Va,{ref_key:"viewRef",ref:f,"drawer-model":c.value,"onUpdate:drawerModel":y[6]||(y[6]=K=>c.value=K)},null,8,["drawer-model"]),et("div",{style:{display:"none"}},[b(al,{"model-value":S.value,"onUpdate:modelValue":q,visible:s.value,"onUpdate:visible":y[7]||(y[7]=K=>s.value=K),dialogTitle:"组织人员",miniTitle:(ee=g.value)==null?void 0:ee.name,multiple:!0,tabs:[o(ll).memberSelectMemberIdByOrg]},null,8,["model-value","visible","miniTitle","tabs"])]),b(Oo,{"drawer-model":i.value,"onUpdate:drawerModel":y[8]||(y[8]=K=>i.value=K),openCloudRealName:v,"row-data":g.value},null,8,["drawer-model","row-data"]),b(xa,{"dialog-model":h.value,"onUpdate:dialogModel":y[9]||(y[9]=K=>h.value=K),onEditRealName:O,onRefresh:y[10]||(y[10]=K=>z()),"init-auth":p.value},null,8,["dialog-model","init-auth"])],512)}}});const Lo=ul(ko,[["__scopeId","data-v-f008627b"]]);export{Lo as default};
