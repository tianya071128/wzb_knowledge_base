import{d as x,aV as C,aW as V,r as p,vN as y,o as w,b as U,w as _,k,i as s,B as o,vL as T,m as I,vO as v,aa as L,vB as b,vC as B,kX as g,v9 as N,U as R,bm as q,_ as z}from"./index-b80d5ef5.js";import{_ as E}from"./MobileFormItem.vue_vue_type_script_setup_true_lang-b23f5d06.js";import{S as F}from"./SecondaryPage-60f4f4b3.js";const P={name:"Bind"},$=x({...P,setup(M){const t=C(),u=V(),e=p({mobile:"",thirdType:t.query.thirdType,thirdUserId:t.query.thirdUserId,thirdUserName:decodeURIComponent(t.query.thirdUserName),type:y,verifyCode:""}),f=p(),l=p(!1),h=async()=>{var i;await((i=f.value)==null?void 0:i.validate());try{l.value=!0;const a=await v(e.value);a.replaceBinding?L.confirm(`该手机号（${e.value.mobile}）已绑定过其他第三方登录账号。是否替换当前登录方式，替换后原第三方登录账号将不在关联该手机。`,"提示",{confirmButtonText:"替换并登录",cancelButtonText:"取消",async beforeClose(d,r,n){if(d==="confirm"){r.confirmButtonLoading=!0;try{const m=await v({...e.value,replaceBinding:!0});n(),b(m),await u.replace(B(t,g))}finally{r.confirmButtonLoading=!1}}else n()}}):(b(a),await u.replace(B(t,g)))}finally{l.value=!1}};return(i,a)=>{const d=E,r=N,n=R,m=q;return w(),U(F,{content:"请绑定您的手机号"},{default:_(()=>[k("div",{class:"find_pass"},[s(m,{ref_key:"formRef",ref:f,model:o(e),"label-position":"top","hide-required-asterisk":"",style:{width:"400px"}},{default:_(()=>[s(d,{modelValue:o(e).mobile,"onUpdate:modelValue":a[0]||(a[0]=c=>o(e).mobile=c),class:"az_form-one-border",label:"手机号",prop:"mobile",inputProps:{placeholder:"请输入手机号码"}},null,8,["modelValue"]),s(r,{modelValue:o(e).verifyCode,"onUpdate:modelValue":a[1]||(a[1]=c=>o(e).verifyCode=c),prop:"verifyCode",mobile:o(e).mobile,type:o(y),class:"az_form-one-border",receiverType:o(T)},null,8,["modelValue","mobile","type","receiverType"]),s(n,{class:"find_pass-btn",type:"primary",size:"large",loading:o(l),onClick:h},{default:_(()=>[I(" 立即绑定 ")]),_:1},8,["loading"])]),_:1},8,["model"])])]),_:1})}}});const J=z($,[["__scopeId","data-v-8478712c"]]);export{J as default};
