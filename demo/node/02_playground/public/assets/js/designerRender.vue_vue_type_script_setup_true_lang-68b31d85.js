import{d as _,r as l,o as v,b as w,w as C,l as R,L,ii as u}from"./index-b80d5ef5.js";import{b as F,c as D,d as S}from"./app.vue_vue_type_script_setup_true_lang-59fd2507.js";import{F as h}from"./enum-7a2ae6a9.js";const J=_({__name:"designerRender",props:{flowId:{},appId:{},entryId:{},scene:{default:h.Default},viewConfig:{}},emits:["callbackRelease","callbackSave"],setup(I,{expose:m,emit:p}){const e=I,f=p,o=l(),r=l(),s=l([]),y=async()=>{var a,t;if(e!=null&&e.flowId){const n=await D({flowId:e.flowId}),d=(e==null?void 0:e.entryId)??n.entryId;if(d){const c=await u(d);s.value=((a=c==null?void 0:c.formJson)==null?void 0:a.fields)??[]}o.value=n}else if(o.value=S({appId:e.appId,entryId:e.entryId}),e.entryId){const n=await u(e.entryId);s.value=((t=n==null?void 0:n.formJson)==null?void 0:t.fields)??[]}},i=l(),k=async()=>{var a;return(a=i.value)==null?void 0:a.beforeLeave()},b=()=>{f("callbackRelease")},g=()=>{f("callbackSave")};return m({beforeLeave:k,refresh:()=>{var a;(a=r.value)==null||a.reload()}}),(a,t)=>(v(),w(L,{load:y,ref_key:"LoadingDataRef",ref:r},{default:C(()=>[o.value?(v(),w(F,{key:0,flowDesigner:o.value,fields:s.value,scene:a.scene,viewConfig:a.viewConfig,ref_key:"AppRef",ref:i,onCallbackRelease:b,onCallbackSave:g},null,8,["flowDesigner","fields","scene","viewConfig"])):R("",!0)]),_:1},512))}});export{J as _};
