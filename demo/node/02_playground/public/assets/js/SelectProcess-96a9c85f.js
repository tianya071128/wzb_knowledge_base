import{d as M,v as N,r as _,c as f,d8 as S,o as s,b as r,w as d,i as b,bu as h,k as D,f as m,F as w,g as V,l as g,B as P,C as U,aN as y,ao as F,ap as G,bn as $,_ as O}from"./index-b80d5ef5.js";const R=M({__name:"SelectProcess",props:{visible:{type:Boolean},flowList:{}},emits:["update:visible","submit"],setup(I,{emit:k}){const i=I,c=k,t=N(i,"visible",c),o=_(""),a=_(""),C=f(()=>i.flowList??[]),x=f(()=>S.value.userInfo.orgInfoList??[]),n=f(()=>{const u=i.flowList.find(l=>l.flowId===a.value);return(u==null?void 0:u.hasDeptManagerChain)??!1}),B=async()=>{if(!a.value)return y.error("请选择需要的流程"),!1;if(!o.value&&n.value)return y.error("请选择你的部门"),!1;n.value?c("submit",{flowId:a.value,orgId:o.value}):c("submit",{flowId:a.value})},L=()=>{o.value="",a.value=""};return(u,l)=>{const v=F,p=G,E=$;return s(),r(E,{onClosed:L,modelValue:P(t),"onUpdate:modelValue":l[3]||(l[3]=e=>U(t)?t.value=e:null),title:"操作确认",width:"500px"},{footer:d(()=>[b(h,{editMode:!0,onClose:l[2]||(l[2]=e=>t.value=!1),"on-submit":B})]),default:d(()=>[D("span",{class:"m-10 Gray_75"}," 检测到满足多个流程的启动条件，请选择需要的流程 "),b(p,{class:"m-10",modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),style:{width:"100%"},placeholder:"请选择需要的流程"},{default:d(()=>[(s(!0),m(w,null,V(C.value,e=>(s(),r(v,{key:e.flowId,label:e.flowName,value:e.flowId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),n.value?(s(),m("span",{key:0,class:"m-10 Gray_75"}," 你同时为多个部门的成员，请选择需要审批流程的部门 ")):g("",!0),n.value?(s(),r(p,{key:1,class:"m-10",modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),style:{width:"100%"},placeholder:"请选择你的部门"},{default:d(()=>[(s(!0),m(w,null,V(x.value,e=>(s(),r(v,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):g("",!0)]),_:1},8,["modelValue"])}}});const q=O(R,[["__scopeId","data-v-d663b18e"]]);export{q as default};
