import{d as M,gY as O,r as E,A6 as $,c,o as p,f as C,i,w as t,k as q,m as B,K as R,H as I,B as s,a3 as N,T as z,Y,a8 as D,a as f,U as j,hU as U,b as u,F as h,g as A,A7 as G,hT as W,l as v,A8 as H,A9 as K,t as L,mp as J,ao as P,ap as Q,q as X,br as Z,_ as x}from"./index-b80d5ef5.js";/* empty css                          */import{_ as ee}from"./FormFieldHeaderEditor.vue_vue_type_script_setup_true_lang-6c993e5c.js";import{_ as oe}from"./BtnSetting.vue_vue_type_script_setup_true_lang-3de9e244.js";import{_ as ie,a as le}from"./FieldOtherEditor.vue_vue_type_script_setup_true_lang-a2d4ed75.js";import{_ as te}from"./FieldWidthEditor.vue_vue_type_script_setup_true_lang-3f895778.js";import{E as V}from"./routePage-70460a50.js";import{B as re}from"./ButtonState-cb54910b.js";import{_ as pe}from"./SelectForm.vue_vue_type_script_setup_true_lang-0170236d.js";import{C as de}from"./CloumnSetField-0ab83820.js";import{C as ae}from"./ConditionWrapper-43da1676.js";/* empty css                        */import"./AzInputNumber-d6212644.js";import"./el-input-number-c15b1cc7.js";import"./Base.vue_vue_type_script_setup_true_lang-832ddae3.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./keyBy-8fcfdd74.js";import"./_createAggregator-d66ed64c.js";import"./useQueryTab-05fa7456.js";import"./useExtractQuery-f96f705c.js";import"./CardTabs-ca59b5e9.js";import"./EditItemTargetForm.vue_vue_type_script_setup_true_lang-199df786.js";import"./SelectEntryAndOther-76a65b2d.js";import"./FieldCondition-1c72aa9d.js";import"./Base.vue_vue_type_script_setup_true_lang-03820366.js";import"./useFieldMaxWidth-d82f063e.js";import"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import"./index-318b68f4.js";import"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import"./useMultipleVal-904406c1.js";import"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import"./el-dropdown-item-455a6589.js";import"./CardShowFieldItem-fd24f218.js";import"./LoadingData-195d0581.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./ComponentParamsSetWrapper-71afc840.js";import"./default-component-4c80201b.js";import"./SelectFieldByMultEntry-84abd0c3.js";import"./fieldDefaultComponent-58752d9c.js";import"./Base.vue_vue_type_script_setup_true_lang-4fbdbc85.js";import"./DaterangeBase.vue_vue_type_script_setup_true_lang-bec97540.js";import"./InputBase.vue_vue_type_script_setup_true_lang-ffcf63f1.js";import"./Base-9b7f3306.js";import"./index-f0ed738f.js";import"./NumberBase.vue_vue_type_script_setup_true_lang-745b39c5.js";import"./Base-c9aa1df0.js";import"./SliderBase.vue_vue_type_script_setup_true_lang-5d73415b.js";import"./TextareaBase.vue_vue_type_script_setup_true_lang-7091b2cb.js";import"./TimeBase.vue_vue_type_script_setup_true_lang-ea537bf3.js";import"./TimerangeBase.vue_vue_type_script_setup_true_lang-0827c241.js";import"./UploadFileBase.vue_vue_type_script_setup_true_lang-0c253daa.js";import"./UploadImgBase.vue_vue_type_script_setup_true_lang-d23c1306.js";import"./CooperateEnterpriseBase.vue_vue_type_script_setup_true_lang-23720971.js";import"./CooperatePersonnelBase.vue_vue_type_script_setup_true_lang-adcd0db7.js";import"./Base.vue_vue_type_script_setup_true_lang-0e9a0e2c.js";import"./Base.vue_vue_type_script_setup_true_lang-aa25657d.js";import"./SelectCascaderEntry.vue_vue_type_script_setup_true_lang-673c5dca.js";import"./ParamsSet.vue_vue_type_script_setup_true_lang-37c252c5.js";import"./MessageRemindConfig-98484405.js";import"./utils-a7200637.js";import"./messageTemplate-8658e6b4.js";import"./SetFieldDefault-5fc1ae2a.js";import"./ButtonSelectField.vue_vue_type_script_setup_true_lang-aae15f71.js";import"./FormulaWrapper-92a83208.js";import"./Formula.vue_vue_type_style_index_0_lang-ef444f24.js";import"./index-8e050109.js";import"./routePage.vue_vue_type_script_setup_true_lang-efb79c93.js";import"./CollageTable-791f0954.js";import"./index-617ab4b4.js";import"./FieldConditionView-ad1b057c.js";import"./SetAuth-50c8e12e.js";import"./usePublicRelease-2335b254.js";import"./Qrcode-850531ac.js";import"./html2canvas.esm-0543ed55.js";import"./DesignerDialog-22d70853.js";import"./Designer.vue_vue_type_script_setup_true_lang-3c7dafd1.js";import"./form-success-1777d0da.js";import"./TableRender-bab4d661.js";import"./Resize-eb80395d.js";import"./FormShare-9773b44c.js";import"./dataShare-2d7ae3f7.js";import"./SelectDataSourece-70a968c3.js";import"./useTransformColor-38b5da33.js";import"./SetFieldAuth-3d0b80a0.js";import"./DesignerTabs-a9795edf.js";import"./Base-3571a39e.js";import"./AddFormDataBtnPlus-a775412e.js";import"./formDesigner-462b10d7.js";import"./useValidateError-9f6399dc.js";import"./AutoNumberBase.vue_vue_type_script_setup_true_lang-56f78b68.js";import"./PluginBase-56c4bf37.js";import"./RichTextBase-228f0924.js";import"./Base-11a86176.js";import"./UploadWrapper.vue_vue_type_script_setup_true_lang-4553cd48.js";import"./index-c89dfa90.js";import"./TemplateCustomEntry.vue_vue_type_script_setup_true_lang-346d01b1.js";import"./TextBase.vue_vue_type_script_setup_true_lang-09411e7a.js";import"./BtnDisplay.vue_vue_type_script_setup_true_lang-cbe1b7c6.js";import"./Base.vue_vue_type_script_setup_true_lang-392ceecd.js";import"./GridBase.vue_vue_type_script_setup_true_lang-f18077d3.js";import"./Base-16c93ea0.js";import"./TableBase-393fac1a.js";import"./TabsBase.vue_vue_type_style_index_0_lang-861f3fae.js";import"./DepartmentBase.vue_vue_type_script_setup_true_lang-6f309530.js";import"./MemberBase.vue_vue_type_script_setup_true_lang-77a28117.js";import"./AddOrEditValidate.vue_vue_type_style_index_0_lang-5bd5a73c.js";import"./DataSoureceWrapper-047a1c9d.js";import"./ComponentPostAction-12970ad1.js";import"./InternalComponentSelectPlus-00c8c38f.js";import"./app.vue_vue_type_script_setup_true_lang-59fd2507.js";import"./enum-7a2ae6a9.js";import"./index-20639231.js";import"./el-space-0d01b33a.js";import"./cloneDeep-dc1c677b.js";import"./isTypedArray-10beecc7.js";import"./el-collapse-transition-4ed993c7.js";import"./defaultValue-7c7c87ea.js";import"./EditorDraggable-a06dbc71.js";import"./typeof-7fd5df1e.js";import"./utils-052731c0.js";import"./designerRender.vue_vue_type_script_setup_true_lang-68b31d85.js";const me=M({__name:"OtherFormConfig",props:{field:{}},setup(b){const a=b,F=O(),_=()=>{var r;e.value=Y(((r=a.field.options.waitCompareFile)==null?void 0:r.otherFormConfig)??$()),m.value=!0},y=E(),m=E(!1),e=E($()),l={entryId:[{required:!0,message:"请选择",trigger:"change"}],fileFieldId:[{required:!0,message:"请选择",trigger:"change"}],showFields:[{required:!0,message:"请选择",trigger:"change"}]},n=c({get(){return e.value.entryId},set(r){e.value={...$(),entryId:r}}}),w=r=>D(r,{blockFilter(o){return o.type===f.subform},excludeFilter(o){return![f.uploadFile,f.uploadImg,f.templateFile].includes(o.type)}}),k=async()=>{var r,o,g;await((o=(r=y.value)==null?void 0:r.ruleFormRef)==null?void 0:o.validate()),a.field.options.waitCompareFile={...a.field.options.waitCompareFile??{},types:((g=a.field.options.waitCompareFile)==null?void 0:g.types)??[],otherFormConfig:e.value},m.value=!1};return(r,o)=>{var S,T;const g=j;return p(),C("div",{class:"w100"},[i(re,{class:"w100",onClick:_,"is-set":!!((T=(S=r.field.options.waitCompareFile)==null?void 0:S.otherFormConfig)!=null&&T.entryId),text:"设置"},null,8,["is-set"]),i(z,{modelValue:m.value,"onUpdate:modelValue":o[5]||(o[5]=d=>m.value=d),"destroy-on-close":"","append-to-body":"",title:"设置",width:"800px"},{footer:t(()=>[q("span",{class:"dialog-footer"},[i(g,{onClick:o[4]||(o[4]=d=>m.value=!1)},{default:t(()=>[B("取消")]),_:1}),i(g,{type:"primary",onClick:k},{default:t(()=>[B("确定")]),_:1})])]),default:t(()=>[i(R,{model:e.value,rules:l,labelWidth:"150px",ref_key:"formRef",ref:y},{default:t(()=>[i(I,{label:"来源表单",prop:"entryId"},{default:t(()=>[i(pe,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=d=>n.value=d),style:{width:"350px"},appId:s(F).appId,currentEntryId:s(F).entryId},null,8,["modelValue","appId","currentEntryId"])]),_:1}),i(I,{label:"选择文件",prop:"fileFieldId"},{default:t(()=>[i(N,{modelValue:e.value.fileFieldId,"onUpdate:modelValue":o[1]||(o[1]=d=>e.value.fileFieldId=d),style:{width:"350px"},"entry-id":n.value,disabled:!n.value,filter:w},null,8,["modelValue","entry-id","disabled"])]),_:1}),i(I,{label:"数据过滤"},{default:t(()=>[i(ae,{style:{width:"350px"},condition:e.value.dataFilter,"onUpdate:condition":o[2]||(o[2]=d=>e.value.dataFilter=d),btnText:"设置筛选条件",disabled:!n.value,conditionForm:n.value,compareFields:s(F).getFieldsByFieldId({fieldId:r.field.fieldId})},null,8,["condition","disabled","conditionForm","compareFields"])]),_:1}),i(I,{label:"选择时显示字段",alignItems:"flex-start",prop:"showFields"},{default:t(()=>[i(de,{modelValue:e.value.showFields,"onUpdate:modelValue":o[3]||(o[3]=d=>e.value.showFields=d),entryId:n.value,style:{width:"350px"}},null,8,["modelValue","entryId"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ne=M({__name:"Setting",props:{field:{}},setup(b){const a=b,F=O(),_=c(()=>D(F.form.fields,{blockFilter(e){return e.type===f.subform},excludeFilter(e){return![f.uploadFile,f.uploadImg].includes(e.type)}})),y=c(()=>{var e,l;return((l=(e=F.matchField(a.field.fieldId))==null?void 0:e.parentField)==null?void 0:l.type)===f.uploadFile}),m=c({get(){var e;return((e=a.field.options.waitCompareFile)==null?void 0:e.types)??[U.custom,U.history]},set(e){a.field.options.waitCompareFile={...a.field.options.waitCompareFile,types:[...e]}}});return(e,l)=>{const n=P,w=Q,k=X,r=Z;return p(),C(h,null,[i(ee,{modelValue:e.field.options,"onUpdate:modelValue":l[0]||(l[0]=o=>e.field.options=o),id:e.field.fieldId},null,8,["modelValue","id"]),y.value?v("",!0):(p(),u(V,{key:0,label:"标准文件",tip:`支持 ${s(H).join("、")} 文件`},{default:t(()=>[i(w,{modelValue:e.field.options.fileMode,"onUpdate:modelValue":l[1]||(l[1]=o=>e.field.options.fileMode=o),placeholder:"请选择",onChange:l[2]||(l[2]=o=>e.field.options.fileFieldId="")},{default:t(()=>[(p(!0),C(h,null,A(s(G),o=>(p(),u(n,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e.field.options.fileMode===s(W).field?(p(),u(V,{key:0,id:`${e.field.fieldId}.fileFieldId`},{default:t(()=>[i(N,{class:"w100 mt-10",modelValue:e.field.options.fileFieldId,"onUpdate:modelValue":l[3]||(l[3]=o=>e.field.options.fileFieldId=o),fields:_.value,placeholder:"可选择附件控件、图片控件"},null,8,["modelValue","fields"])]),_:1},8,["id"])):v("",!0)]),_:1},8,["tip"])),y.value||e.field.options.fileMode===s(W).field?(p(),u(V,{key:1,label:"待比对文件",id:`${e.field.fieldId}.waitFile`},{default:t(()=>[i(r,{class:"file_comparison-wait",modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=o=>m.value=o)},{default:t(()=>[(p(!0),C(h,null,A(s(K),o=>(p(),u(k,{key:o.value,label:o.value},{default:t(()=>[q("span",null,L(o.label),1),o.tip?(p(),u(J,{key:0,tip:o.tip},null,8,["tip"])):v("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),m.value.includes(s(U).otherForm)?(p(),u(V,{key:0,id:`${e.field.fieldId}.otherFormConfig`},{default:t(()=>[i(me,{field:e.field},null,8,["field"])]),_:1},8,["id"])):v("",!0)]),_:1},8,["id"])):v("",!0),i(oe,{field:e.field},null,8,["field"]),i(ie,{modelValue:e.field.options,"onUpdate:modelValue":l[5]||(l[5]=o=>e.field.options=o),id:e.field.fieldId,hideEdit:""},null,8,["modelValue","id"]),y.value?v("",!0):(p(),u(te,{key:2,modelValue:e.field.options,"onUpdate:modelValue":l[6]||(l[6]=o=>e.field.options=o),field:e.field},null,8,["modelValue","field"])),i(le,{field:e.field},null,8,["field"])],64)}}});const $i=x(ne,[["__scopeId","data-v-d8276caa"]]);export{$i as default};
