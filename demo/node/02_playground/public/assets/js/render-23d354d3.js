import{M as k}from"./ModuleWrapper-dbe018a4.js";import{u as L}from"./createDesigner-82222fc7.js";import{u as M}from"./useAddModuleContext-27547570.js";import{u as R,a as P,D as B,_ as E}from"./useThemeStyles-97832ef4.js";import{u as V}from"./useEditState-4239cd64.js";import{C as o}from"./enum-dc6240e9.js";import{u as A}from"./useProcessAnalysis-0a0845eb.js";import{d as F,bK as d,bx as K,r as N,c as _,eK as $,o as u,b as p,w as x,B as t,C as O,l as U,i as W}from"./index-b80d5ef5.js";import"./dashboardDesigner-ce3c2e23.js";import"./enum-baae9292.js";import"./skeleton-9235483f.js";import"./keyBy-8fcfdd74.js";import"./_createAggregator-d66ed64c.js";import"./useTransformColor-38b5da33.js";const le=F({__name:"render",props:{moduleItem:{}},setup(c){const r=c,{appId:f,entryId:y}=L(),{editVisible:s,isDesignMode:h}=V(),{filterCondition:b,handleFilter:I}=R(),C=d({refresh(){var e;(e=a.value)==null||e.refresh()},async asyncRefresh(){var e;await((e=a.value)==null?void 0:e.refresh())},handleFilter:I});M(r.moduleItem.moduleId,C);const{sourceId:n,readonlySource:v}=A();K(()=>{const e=r.moduleItem.options;n&&(e.sourceId=n)});const a=N(),S=()=>{var e;(e=a.value)==null||e.refresh()},g=_(()=>r.moduleItem.options.dashboardId),{pcTableStyle:w,pcChartStyle:j,pcDesignOverallChart:D,pcDesignTableStyle:q}=P(d($(r)));return(e,l)=>(u(),p(k,{"module-item":e.moduleItem,onEdit:l[1]||(l[1]=i=>s.value=!0)},{default:x(()=>{var i,m;return[t(h)?(u(),p(t(B),{key:0,visible:t(s),"onUpdate:visible":l[0]||(l[0]=T=>O(s)?s.value=T:null),"module-item":e.moduleItem,"readonly-source":t(v),appId:t(f),entryId:t(y),type:1,chartTypes:[t(o).columnChart,t(o).pieChart,t(o).barChart,t(o).lineChart,t(o).indicatorsChart],onSave:S,bgChartStyle:t(D),chartStyle:(m=(i=e.moduleItem)==null?void 0:i.options)==null?void 0:m.pcStyles},null,8,["visible","module-item","readonly-source","appId","entryId","chartTypes","bgChartStyle","chartStyle"])):U("",!0),W(E,{dashboardId:g.value,ref_key:"PreviewRef",ref:a,filterList:t(b),showLabel:e.moduleItem.options.showLabel,label:e.moduleItem.options.label,tableStyle:t(w)},null,8,["dashboardId","filterList","showLabel","label","tableStyle"])]}),_:1},8,["module-item"]))}});export{le as default};
