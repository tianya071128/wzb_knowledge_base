import{d as z,v as Q,r as b,c as q,y as B,Y as U,Z,o as c,b as g,w as t,k as h,i as l,m as V,aq as j,B as v,C as K,ac as X,bm as x,U as L,bn as W,gY as Y,hQ as T,hR as G,An as ee,f as A,bt as le,Ao as oe,F as N,g as H,t as J,l as O,i2 as te,j as ie,ao as ae,av as de,eB as re,cI as ne,_ as pe,Ap as se,jC as me,a as ue,ds as fe,E as ce,ab as ve}from"./index-b80d5ef5.js";import{_ as Ve}from"./FormFieldHeaderEditor.vue_vue_type_script_setup_true_lang-6c993e5c.js";import{_ as _e}from"./FormFieldValidateEditor.vue_vue_type_script_setup_true_lang-670668c9.js";import{_ as ye,a as be}from"./FieldOtherEditor.vue_vue_type_script_setup_true_lang-a2d4ed75.js";import{_ as ge}from"./FieldWidthEditor.vue_vue_type_script_setup_true_lang-3f895778.js";import{E as w,A as Ie}from"./routePage-70460a50.js";import{B as De,_ as ke}from"./fieldDefaultComponent-58752d9c.js";import{D as Ce}from"./DataSoureceWrapper-047a1c9d.js";import{_ as Ee}from"./index.vue_vue_type_script_setup_true_lang-2e692a6b.js";import{_ as we}from"./ShowFieldSettings.vue_vue_type_script_setup_true_lang-ae1faac3.js";import{_ as $e}from"./FieldLengthEditor.vue_vue_type_script_setup_true_lang-b711d652.js";import{F as Fe}from"./FillFieldEditor-d53a836a.js";/* empty css                        */import"./AzInputNumber-d6212644.js";import"./el-input-number-c15b1cc7.js";import"./Base.vue_vue_type_script_setup_true_lang-832ddae3.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./keyBy-8fcfdd74.js";import"./_createAggregator-d66ed64c.js";import"./useQueryTab-05fa7456.js";import"./useExtractQuery-f96f705c.js";import"./CardTabs-ca59b5e9.js";import"./EditItemTargetForm.vue_vue_type_script_setup_true_lang-199df786.js";import"./SelectEntryAndOther-76a65b2d.js";import"./FieldCondition-1c72aa9d.js";import"./Base.vue_vue_type_script_setup_true_lang-03820366.js";import"./useFieldMaxWidth-d82f063e.js";import"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import"./index-318b68f4.js";import"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import"./useMultipleVal-904406c1.js";import"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import"./el-dropdown-item-455a6589.js";import"./CardShowFieldItem-fd24f218.js";import"./LoadingData-195d0581.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./ComponentParamsSetWrapper-71afc840.js";import"./default-component-4c80201b.js";import"./ButtonState-cb54910b.js";import"./SelectFieldByMultEntry-84abd0c3.js";import"./SelectCascaderEntry.vue_vue_type_script_setup_true_lang-673c5dca.js";import"./SelectForm.vue_vue_type_script_setup_true_lang-0170236d.js";import"./ParamsSet.vue_vue_type_script_setup_true_lang-37c252c5.js";import"./MessageRemindConfig-98484405.js";/* empty css                          */import"./utils-a7200637.js";import"./messageTemplate-8658e6b4.js";import"./SetFieldDefault-5fc1ae2a.js";import"./ButtonSelectField.vue_vue_type_script_setup_true_lang-aae15f71.js";import"./FormulaWrapper-92a83208.js";import"./Formula.vue_vue_type_style_index_0_lang-ef444f24.js";import"./index-8e050109.js";import"./routePage.vue_vue_type_script_setup_true_lang-efb79c93.js";import"./CollageTable-791f0954.js";import"./index-617ab4b4.js";import"./ConditionWrapper-43da1676.js";import"./FieldConditionView-ad1b057c.js";import"./SetAuth-50c8e12e.js";import"./usePublicRelease-2335b254.js";import"./Qrcode-850531ac.js";import"./html2canvas.esm-0543ed55.js";import"./DesignerDialog-22d70853.js";import"./Designer.vue_vue_type_script_setup_true_lang-3c7dafd1.js";import"./form-success-1777d0da.js";import"./TableRender-bab4d661.js";import"./Resize-eb80395d.js";import"./FormShare-9773b44c.js";import"./dataShare-2d7ae3f7.js";import"./SelectDataSourece-70a968c3.js";import"./useTransformColor-38b5da33.js";import"./SetFieldAuth-3d0b80a0.js";import"./DesignerTabs-a9795edf.js";import"./Base-3571a39e.js";import"./AddFormDataBtnPlus-a775412e.js";import"./formDesigner-462b10d7.js";import"./useValidateError-9f6399dc.js";import"./AutoNumberBase.vue_vue_type_script_setup_true_lang-56f78b68.js";import"./PluginBase-56c4bf37.js";import"./RichTextBase-228f0924.js";import"./Base-11a86176.js";import"./UploadWrapper.vue_vue_type_script_setup_true_lang-4553cd48.js";import"./index-c89dfa90.js";import"./TemplateCustomEntry.vue_vue_type_script_setup_true_lang-346d01b1.js";import"./Base.vue_vue_type_script_setup_true_lang-4fbdbc85.js";import"./DaterangeBase.vue_vue_type_script_setup_true_lang-bec97540.js";import"./InputBase.vue_vue_type_script_setup_true_lang-ffcf63f1.js";import"./Base-9b7f3306.js";import"./index-f0ed738f.js";import"./NumberBase.vue_vue_type_script_setup_true_lang-745b39c5.js";import"./Base-c9aa1df0.js";import"./SliderBase.vue_vue_type_script_setup_true_lang-5d73415b.js";import"./TextBase.vue_vue_type_script_setup_true_lang-09411e7a.js";import"./TextareaBase.vue_vue_type_script_setup_true_lang-7091b2cb.js";import"./TimeBase.vue_vue_type_script_setup_true_lang-ea537bf3.js";import"./TimerangeBase.vue_vue_type_script_setup_true_lang-0827c241.js";import"./UploadFileBase.vue_vue_type_script_setup_true_lang-0c253daa.js";import"./UploadImgBase.vue_vue_type_script_setup_true_lang-d23c1306.js";import"./BtnDisplay.vue_vue_type_script_setup_true_lang-cbe1b7c6.js";import"./Base.vue_vue_type_script_setup_true_lang-392ceecd.js";import"./GridBase.vue_vue_type_script_setup_true_lang-f18077d3.js";import"./Base-16c93ea0.js";import"./TableBase-393fac1a.js";import"./TabsBase.vue_vue_type_style_index_0_lang-861f3fae.js";import"./CooperateEnterpriseBase.vue_vue_type_script_setup_true_lang-23720971.js";import"./CooperatePersonnelBase.vue_vue_type_script_setup_true_lang-adcd0db7.js";import"./DepartmentBase.vue_vue_type_script_setup_true_lang-6f309530.js";import"./Base.vue_vue_type_script_setup_true_lang-0e9a0e2c.js";import"./MemberBase.vue_vue_type_script_setup_true_lang-77a28117.js";import"./Base.vue_vue_type_script_setup_true_lang-aa25657d.js";import"./AddOrEditValidate.vue_vue_type_style_index_0_lang-5bd5a73c.js";import"./ComponentPostAction-12970ad1.js";import"./InternalComponentSelectPlus-00c8c38f.js";import"./app.vue_vue_type_script_setup_true_lang-59fd2507.js";import"./enum-7a2ae6a9.js";import"./index-20639231.js";import"./el-space-0d01b33a.js";import"./cloneDeep-dc1c677b.js";import"./isTypedArray-10beecc7.js";import"./el-collapse-transition-4ed993c7.js";import"./defaultValue-7c7c87ea.js";import"./EditorDraggable-a06dbc71.js";import"./typeof-7fd5df1e.js";import"./utils-052731c0.js";import"./designerRender.vue_vue_type_script_setup_true_lang-68b31d85.js";import"./SortSetField-face42ca.js";const Ue=z({__name:"AddOrEditDataItem",props:{modelValue:{type:Boolean},options:{},edit:{},parentOption:{}},emits:["update:modelValue"],setup($,{emit:p}){const s=$,e=Q(s,"modelValue",p),i=b(""),_=q(()=>{const o=[],m=[...s.options];let u;for(;u=m.shift();)o.push(u.id),m.push(...u.children??[]);return o}),n=b({id:"",label:""}),I=b(),D={id:[{required:!0,message:"请输入唯一编号",trigger:"blur"},{validator:(o,m,u)=>{if(_.value.filter(a=>a!==i.value).includes(m))return u(new Error("唯一编号不能重复!"));u()},trigger:"blur"}],label:[{required:!0,message:"请输入名称",trigger:"blur"}]},k=async()=>{var o;await((o=I.value)==null?void 0:o.validate()),s.edit?(s.edit.id=n.value.id,s.edit.label=n.value.label):s.parentOption?(s.parentOption.children||(s.parentOption.children=[]),s.parentOption.children.push(U(n.value))):s.options.push(U(n.value)),e.value=!1};return B(e,()=>{var o;e.value&&(s.edit?(i.value=s.edit.id,n.value=U(s.edit)):(i.value=Z(_.value),n.value={id:i.value,label:""}),(o=I.value)==null||o.clearValidate())}),(o,m)=>{const u=X,a=x,d=L,C=W;return c(),g(C,{modelValue:v(e),"onUpdate:modelValue":m[3]||(m[3]=f=>K(e)?e.value=f:null),title:"",width:"350","append-to-body":""},{footer:t(()=>[h("span",{class:"dialog-footer"},[l(d,{onClick:m[2]||(m[2]=f=>e.value=!1)},{default:t(()=>[V("取消")]),_:1}),l(d,{type:"primary",onClick:k},{default:t(()=>[V("确定")]),_:1})])]),default:t(()=>[l(a,{model:n.value,rules:D,ref_key:"ruleFormRef",ref:I,"label-width":"100px"},{default:t(()=>[l(u,{label:"唯一编号",prop:"id"},{default:t(()=>[l(j,{modelValue:n.value.id,"onUpdate:modelValue":m[0]||(m[0]=f=>n.value.id=f),placeholder:"唯一编号",isBlurCache:"","blur-value":i.value},null,8,["modelValue","blur-value"])]),_:1}),l(u,{label:"名称",prop:"label"},{default:t(()=>[l(j,{modelValue:n.value.label,"onUpdate:modelValue":m[1]||(m[1]=f=>n.value.label=f),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Oe=z({__name:"CascaderDataSettings",props:{field:{}},setup($){const p=$,s=Y(),y=b(!1),e=b(!1),i=b(),_=b(),n=b([]),I=()=>{y.value=!0,n.value=U(p.field.options.cascaderData.options)},D=a=>{i.value=void 0,_.value=a,e.value=!0},k=a=>{i.value=a,_.value=void 0,e.value=!0},o=(a,d)=>{const C=a.parent,f=C.data.children||C.data,F=f.findIndex(R=>R.id===d.id);f.splice(F,1),n.value=[...n.value]},m=()=>{p.field.options.cascaderData.options=U(n.value),y.value=!1};B(()=>p.field.options.cascaderData.type,()=>{p.field.options.cascaderData.type!==T.sourece&&(p.field.options.cascaderData.sourceId="")}),B(()=>p.field.options.cascaderData.sourceId,()=>{p.field.options.showFieldId="",p.field.options.showOtherFieldIds=[],p.field.options.fillFields=[]});const u=q({get(){return p.field.options.defaultValue??{type:G,custom:null}},set(a){p.field.options.defaultValue=a}});return B(()=>ee(JSON.stringify([p.field.options.leaf,p.field.options.cascaderData])),()=>{p.field.options.defaultValue&&(p.field.options.defaultValue.custom=null)}),(a,d)=>{const C=ae,f=L,F=de,R=re,M=ne,P=W;return c(),A(N,null,[l(w,{label:"级联数据",class:"mb-0"},{default:t(()=>[l(le,{modelValue:a.field.options.cascaderData.type,"onUpdate:modelValue":d[0]||(d[0]=r=>a.field.options.cascaderData.type=r),class:"w100",placeholder:"请选择",load:v(oe)},{default:t(({options:r})=>[(c(!0),A(N,null,H(r,(E,S)=>(c(),g(C,{key:S,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","load"])]),_:1}),a.field.options.cascaderData.type===v(T).custom?(c(),g(w,{key:0},{default:t(()=>[l(De,{"is-set":!!a.field.options.cascaderData.options.length,onClick:I},{default:t(()=>[V(J(a.field.options.cascaderData.options.length>0?"已设置级联数据":"设置级联数据"),1)]),_:1},8,["is-set"])]),_:1})):O("",!0),a.field.options.cascaderData.type===v(T).sourece?(c(),g(w,{key:1,id:`${a.field.fieldId}.cascaderData.soureceId`},{default:t(()=>[l(Ce,{modelValue:a.field.options.cascaderData.sourceId,"onUpdate:modelValue":d[1]||(d[1]=r=>a.field.options.cascaderData.sourceId=r),class:"w100",appId:v(s).appId,currentEntryId:v(s).entryId,hideCurrentEntry:"",isTree:""},null,8,["modelValue","appId","currentEntryId"])]),_:1},8,["id"])):O("",!0),l(Ee,{modelValue:u.value,"onUpdate:modelValue":d[3]||(d[3]=r=>u.value=r),type:[v(G),v(te)],field:a.field},{default:t(()=>[l(ke,{modelValue:u.value.custom,"onUpdate:modelValue":d[2]||(d[2]=r=>u.value.custom=r),field:a.field},null,8,["modelValue","field"])]),_:1},8,["modelValue","type","field"]),l(P,{modelValue:y.value,"onUpdate:modelValue":d[6]||(d[6]=r=>y.value=r),title:"设置级联数据",width:"600","close-on-click-modal":!1,"append-to-body":""},{footer:t(()=>[h("span",{class:"dialog-footer"},[l(f,{onClick:d[5]||(d[5]=r=>y.value=!1)},{default:t(()=>[V("取消")]),_:1}),l(f,{type:"primary",onClick:m},{default:t(()=>[V("确定")]),_:1})])]),default:t(()=>[l(f,{type:"primary",onClick:d[4]||(d[4]=r=>D())},{default:t(()=>[V("新增顶级")]),_:1}),l(Ie,{name:"级联数据",class:"mt-20"},{default:t(()=>[l(M,{data:n.value,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},{default:t(({node:r,data:E})=>[h("span",{class:"custom-tree-node"},[l(ie,{class:"az-flex-width",content:r.label},null,8,["content"]),h("span",null,[(r==null?void 0:r.level)<6?(c(),g(F,{key:0,underline:!1,type:"primary",onClick:S=>D(E),class:"mr-5"},{default:t(()=>[V(" 新增下级 ")]),_:2},1032,["onClick"])):O("",!0),l(F,{underline:!1,type:"primary",onClick:S=>k(E),class:"mr-5"},{default:t(()=>[V(" 编辑 ")]),_:2},1032,["onClick"]),l(R,{title:"确定要删除?",onConfirm:S=>o(r,E)},{reference:t(()=>[l(F,{underline:!1,type:"danger"},{default:t(()=>[V("删除")]),_:1})]),_:2},1032,["onConfirm"])])])]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"]),l(Ue,{modelValue:e.value,"onUpdate:modelValue":d[7]||(d[7]=r=>e.value=r),options:n.value,edit:i.value,parentOption:_.value},null,8,["modelValue","options","edit","parentOption"])],64)}}});const Se=pe(Oe,[["__scopeId","data-v-716cd07f"]]),Xo=z({__name:"Setting",props:{field:{}},setup($){const p=$,s=Y(),y=q(()=>s.matchField(p.field.fieldId));return(e,i)=>{var D,k;const _=fe,n=ce,I=ve;return c(),A(N,null,[l(Ve,{modelValue:e.field.options,"onUpdate:modelValue":i[0]||(i[0]=o=>e.field.options=o),id:e.field.fieldId,"is-placeholder":""},null,8,["modelValue","id"]),l(Se,{field:e.field},null,8,["field"]),e.field.options.cascaderData.sourceId?(c(),g(we,{key:0,field:e.field},null,8,["field"])):O("",!0),l(w,{label:"必须选择到最后一级"},{titleRight:t(()=>[l(_,{modelValue:e.field.options.leaf,"onUpdate:modelValue":i[1]||(i[1]=o=>e.field.options.leaf=o)},null,8,["modelValue"])]),_:1}),l(w,{label:"选择结果显示层级路径"},{titleRight:t(()=>[l(_,{modelValue:e.field.options.level,"onUpdate:modelValue":i[2]||(i[2]=o=>e.field.options.level=o)},null,8,["modelValue"])]),_:1}),l(w,{label:"选择数据条数"},{default:t(()=>[l(I,{modelValue:e.field.options.showNum,"onUpdate:modelValue":i[3]||(i[3]=o=>e.field.options.showNum=o),onChange:i[4]||(i[4]=o=>e.field.options.fillFields=[])},{default:t(()=>[(c(!0),A(N,null,H(v(se),o=>(c(),g(n,{label:o.value,key:o.value},{default:t(()=>[V(J(o.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e.field.options.cascaderData.sourceId&&(e.field.options.showNum===v(me).single||((k=(D=y.value)==null?void 0:D.parentField)==null?void 0:k.type)!==v(ue).subform)?(c(),g(Fe,{key:1,id:`${e.field.fieldId}.fillFields`,label:"数据填充规则",tip:"选择数据后，将关联数据集字段的值填充到当前表单字段。",field:e.field},null,8,["id","field"])):O("",!0),l(_e,{modelValue:e.field.options,"onUpdate:modelValue":i[5]||(i[5]=o=>e.field.options=o),id:e.field.fieldId},null,8,["modelValue","id"]),l(ye,{modelValue:e.field.options,"onUpdate:modelValue":i[6]||(i[6]=o=>e.field.options=o),id:e.field.fieldId},null,8,["modelValue","id"]),l(ge,{field:e.field,modelValue:e.field.options,"onUpdate:modelValue":i[7]||(i[7]=o=>e.field.options=o)},null,8,["field","modelValue"]),l($e,{field:e.field},null,8,["field"]),l(be,{field:e.field},null,8,["field"])],64)}}});export{Xo as default};
