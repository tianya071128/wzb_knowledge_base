import{d as I,r as m,o as p,b as n,w as r,i as u,bu as x,K as T,l as V,rq as g,aN as C,bn as D,rr as k,rs as q,rt as M}from"./index-b80d5ef5.js";import{a as N}from"./LoadingData-195d0581.js";import{S as P}from"./SetPasswordFormItem-fa70a559.js";import{a as S}from"./allUser-b2fd4b31.js";const L=I({__name:"ResetPassword",emits:["refresh"],setup(U,{expose:i,emit:f}){const v=f,o=m(!1),l=m(),a=m({userId:"",pwdType:"random",type:0}),w=async()=>{var s,e;l.value=await S({userId:a.value.userId,queryCorpInfo:!1}),(s=l.value)!=null&&s.mobile?a.value.type=0:(e=l.value)!=null&&e.email&&(a.value.type=1)},y=async()=>{const s={[k]:1,[q]:2,[M]:3},e={userId:a.value.userId,pwdType:s[a.value.pwdType],type:a.value.type};await g(e),C.success("重置密码成功"),v("refresh")};return i({reset:s=>{a.value={userId:s,pwdType:"random",type:null},o.value=!0}}),(s,e)=>{const _=N,b=D;return p(),n(b,{title:"重置密码",modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value=t),width:"500px"},{footer:r(()=>[u(x,{"edit-mode":"",onClose:e[1]||(e[1]=t=>o.value=!1),"on-submit":y})]),default:r(()=>[o.value?(p(),n(_,{key:0,load:w},{default:r(()=>[u(T,{"label-width":"120px",model:a.value,"label-suffix":":"},{default:r(()=>{var t,d;return[u(P,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=c=>a.value=c),prop:{passwordType:"pwdType"},passType:["random"],mobile:(t=l.value)==null?void 0:t.mobile,email:(d=l.value)==null?void 0:d.email},null,8,["modelValue","mobile","email"])]}),_:1},8,["model"])]),_:1})):V("",!0)]),_:1},8,["modelValue"])}}});export{L as _};
