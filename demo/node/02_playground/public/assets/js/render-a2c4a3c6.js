import{M as E}from"./ModuleWrapper-dbe018a4.js";import{h as V,u as $}from"./createDesigner-82222fc7.js";import{u as F,a as N,D as P,_ as U}from"./useThemeStyles-97832ef4.js";import{u as K}from"./useAddModuleContext-27547570.js";import{d as k,c as g,o as f,b as c,w as b,m as j,B as t,oj as A,l as L,U as O,er as W,bK as S,r as q,eK as z,i as C,C as G}from"./index-b80d5ef5.js";import{u as H}from"./useEditState-4239cd64.js";import{u as J}from"./useLinkedData-b8036587.js";import"./dashboardDesigner-ce3c2e23.js";import"./enum-baae9292.js";import"./skeleton-9235483f.js";import"./enum-dc6240e9.js";import"./keyBy-8fcfdd74.js";import"./_createAggregator-d66ed64c.js";import"./useTransformColor-38b5da33.js";const Q=k({__name:"CancelLinkButton",props:{moduleId:{}},setup(n){const l=n,{moduleLinkMap:o,handleCancel:i}=V(),d=g(()=>o.has(l.moduleId));return(m,a)=>{const u=O;return d.value?(f(),c(u,{key:0,link:"",icon:t(A),onClick:a[0]||(a[0]=I=>t(i)(m.moduleId))},{default:b(()=>[j(" 取消联动 ")]),_:1},8,["icon"])):L("",!0)}}}),ue=k({__name:"render",props:{moduleItem:{}},setup(n){const l=n,{editVisible:o,isDesignMode:i}=H();W();const{appId:d,entryId:m}=$(),{filterCondition:a,handleFilter:u,handleLinkedData:I}=F(),w=S({refresh(){var e;(e=s.value)==null||e.refresh()},async asyncRefresh(){var e;await((e=s.value)==null?void 0:e.refresh())},handleFilter:u,handleLinkedData:I});K(l.moduleItem.moduleId,w),J();const s=q(),D=()=>{var e;(e=s.value)==null||e.refresh()},_=g(()=>l.moduleItem.options.dashboardId),{pcTableStyle:T,pcChartStyle:X,pcDesignOverallChart:B,pcDesignTableStyle:M}=N(S(z(l)));return(e,r)=>(f(),c(E,{"module-item":e.moduleItem,onEdit:r[1]||(r[1]=p=>o.value=!0)},{"top-right":b(()=>[C(Q,{moduleId:e.moduleItem.moduleId},null,8,["moduleId"])]),default:b(()=>{var p,y,h,v;return[t(i)?(f(),c(t(P),{key:0,visible:t(o),"onUpdate:visible":r[0]||(r[0]=R=>G(o)?o.value=R:null),"module-item":e.moduleItem,appId:t(d),entryId:t(m),onSave:D,bgTableStyle:t(M),bgChartStyle:t(B),tableStyle:(y=(p=e.moduleItem)==null?void 0:p.options)==null?void 0:y.pcTableStyles,chartStyle:(v=(h=e.moduleItem)==null?void 0:h.options)==null?void 0:v.pcStyles},null,8,["visible","module-item","appId","entryId","bgTableStyle","bgChartStyle","tableStyle","chartStyle"])):L("",!0),C(U,{dashboardId:_.value,ref_key:"PreviewRef",ref:s,filterList:t(a),showLabel:e.moduleItem.options.showLabel,label:e.moduleItem.options.label,tableStyle:t(T)},null,8,["dashboardId","filterList","showLabel","label","tableStyle"])]}),_:1},8,["module-item"]))}});export{ue as default};
