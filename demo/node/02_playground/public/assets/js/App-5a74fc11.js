import{d as S,o as h,b as C,w as v,f as B,F as P,g as K,k as b,t as Z,B as f,bc as Je,i as m,bz as Ie,di as Ne,_ as O,bK as ee,eK as Ze,kY as z,aN as te,kZ as Ye,m as M,C as T,e as X,S as re,U,c5 as ne,ab as le,eU as Ge,ba as Ee,r as k,k_ as ie,y as W,c as L,l as H,bH as V,c3 as Y,v as oe,p as Xe,a2 as we,cA as We,Z as qe,bx as $e,du as et,k$ as tt,l0 as nt,j as lt,aT as ae,dw as G,bJ as Be,l1 as Fe,l2 as Se,dy as de,l3 as ot,P as ke,cp as at,N as st,co as rt,cq as it,ca as dt,bv as ct,a4 as ut,aa as Re,cH as gt,l4 as pt,dx as mt,dv as ce,ip as At,er as ft}from"./index-b80d5ef5.js";import{E as vt}from"./el-space-0d01b33a.js";import{u as Q,a as ht,g as _t,b as J,c as N,d as De,e as Me,p as Pe,D as Qe}from"./createDesigner-82222fc7.js";import"./el-collapse-transition-4ed993c7.js";import{E as yt}from"./el-input-number-c15b1cc7.js";/* empty css                        */import{_ as bt}from"./AzTabs.vue_vue_type_style_index_0_lang-d6635a7d.js";import{C as j,_ as xe,a as Ue,b as ze,c as Ct,A as ue,B as It,d as Et}from"./TableChart.vue_vue_type_script_setup_true_lang-4c6079d0.js";import{C as ge}from"./enum-dc6240e9.js";import{e as wt}from"./dashboardDesigner-ce3c2e23.js";import{u as Bt}from"./useProcessAnalysis-0a0845eb.js";const Ft=S({__name:"WidgetPanel",setup(s){const t=Q(),l=i=>{t.addModule(i)},{handleDrag:o,handleDragend:e,handleStartDrag:a}=ht(),d=i=>{const n=t.createModule(i);n&&a(n)},A=()=>{const i=t.scene;return _t().map(g=>{const r=g.modules.filter(c=>{const[_,y]=c;if(y!=null&&y.scene&&y.scene.includes(i))return c});return{...g,modules:r}}).filter(g=>g.modules.length>=1)};return(i,n)=>{const u=Ne;return h(),C(u,{class:"widget_panel"},{default:v(()=>[(h(!0),B(P,null,K(A(),(g,r)=>(h(),B("div",{key:r,class:"widget-category"},[b("div",{class:"widget-title"},Z(g.title),1),(h(!0),B(P,null,K(g.modules,([p,c])=>(h(),B("div",{class:"widget-item",draggable:"true",unselectable:"on",onDragstart:_=>d(p),onDrag:n[0]||(n[0]=(..._)=>f(o)&&f(o)(..._)),onDragend:n[1]||(n[1]=(..._)=>f(e)&&f(e)(..._)),onClick:Je(_=>l(p),["stop"]),key:p},[b("span",{class:"widget-icon"},[m(Ie,{"icon-class":c.svg},null,8,["icon-class"])]),b("span",{class:"widget-name"},Z(c.name),1)],40,["onDragstart","onClick"]))),128))]))),128))]),_:1})}}});const St=O(Ft,[["__scopeId","data-v-84e0a813"]]),kt=()=>{const s=[{label:"1/6",value:z/6},{label:"1/5",value:z/5},{label:"1/4",value:z/4},{label:"1/3",value:z/3},{label:"1/2",value:z/2},{label:"整行",value:z},{label:"自定义",value:0}],t=[{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"25",value:25},{label:"30",value:30},{label:"35",value:35},{label:"自定义",value:0}],l=Q(),o=ee({visible:!1,wRadio:-1,hRadio:-1,wInput:0,hInput:0});return{wRadios:s,hRadios:t,beforeEnter:()=>{l.selectedModuleIds.length>=1?o.visible=!0:(o.visible=!1,te.warning("未选中图表"))},afterLeave:()=>{o.wRadio=-1,o.hRadio=-1,o.wInput=0,o.hInput=0},wChange:i=>{if(i===0)return;l.selectedModuleIds.forEach(u=>{const g=l.matchModule(u);g&&(g.module.layout.w=i)})},hChange:i=>{if(i===0)return;l.selectedModuleIds.forEach(u=>{const g=l.matchModule(u);g&&(g.module.layout.h=i)})},...Ze(o)}},Rt=S({__name:"Resize",setup(s){const{wRadio:t,wRadios:l,wInput:o,hInput:e,hRadio:a,hRadios:d,beforeEnter:A,afterLeave:i,visible:n,hChange:u,wChange:g}=kt();return(r,p)=>{const c=U,_=ne,y=le,w=yt,F=Ge,D=Ee;return h(),C(D,{visible:f(n),"onUpdate:visible":p[4]||(p[4]=E=>T(n)?n.value=E:null),onBeforeEnter:f(A),onAfterLeave:f(i),placement:"bottom",width:350,trigger:"click"},{reference:v(()=>[m(c,{text:"",icon:f(Ye),size:"small"},{default:v(()=>[M("调整尺寸")]),_:1},8,["icon"])]),default:v(()=>[b("div",{class:"resize-box"},[b("div",{class:"resize-cell"},[b("p",{class:"resize-title"},"选中图表的宽度"),m(y,{modelValue:f(t),"onUpdate:modelValue":p[0]||(p[0]=E=>T(t)?t.value=E:null),size:"small",onChange:f(g)},{default:v(()=>[(h(!0),B(P,null,K(f(l),(E,x)=>(h(),C(_,{key:E.label+x,label:E.value},{default:v(()=>[M(Z(E.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","onChange"])]),m(F,null,{default:v(()=>[X(b("div",{class:"resize-cell"},[b("p",{class:"resize-title"},"自定义宽度(格)"),m(w,{modelValue:f(o),"onUpdate:modelValue":p[1]||(p[1]=E=>T(o)?o.value=E:null),onChange:f(g),min:1,max:60,size:"small"},null,8,["modelValue","onChange"])],512),[[re,f(t)===0]])]),_:1}),b("div",{class:"resize-cell"},[b("p",{class:"resize-title"},"选中图表的高度(格)"),m(y,{modelValue:f(a),"onUpdate:modelValue":p[2]||(p[2]=E=>T(a)?a.value=E:null),size:"small",onChange:f(u)},{default:v(()=>[(h(!0),B(P,null,K(f(d),(E,x)=>(h(),C(_,{key:E.label+x,label:E.value},{default:v(()=>[M(Z(E.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","onChange"])]),m(F,null,{default:v(()=>[X(b("div",{class:"resize-cell"},[b("p",{class:"resize-title"},"自定义高度(格)"),m(w,{modelValue:f(e),"onUpdate:modelValue":p[3]||(p[3]=E=>T(e)?e.value=E:null),onChange:f(u),min:1,size:"small"},null,8,["modelValue","onChange"])],512),[[re,f(a)===0]])]),_:1})])]),_:1},8,["visible","onBeforeEnter","onAfterLeave"])}}});const Dt=O(Rt,[["__scopeId","data-v-d7d2050b"]]);var I=(s=>(s.PC="PC",s.H5="H5",s))(I||{});const Mt=()=>({modelSelect:k("PC"),MODE_ENUM:I}),Pt=S({__name:"ChartStyle",props:{styleMode:{}},setup(s){const t=s,l=Q(),o=k(J()),e=r=>{l.selectedModuleIds.forEach(p=>{const c=l.matchModule(p);c&&(t.styleMode===I.PC&&(c.module.options.pcStyles=r),t.styleMode===I.H5&&(c.module.options.h5Styles=r))})},a=k(N()),d=r=>{l.selectedModuleIds.forEach(p=>{const c=l.matchModule(p);if(c){const _=c.module.options;t.styleMode===I.PC&&(_.pcTableStyles=r),t.styleMode===I.H5&&(_.h5TableStyles=r)}})},A=[ie.detailedChart,ie.dashboard],i=[ge.detailedChart,ge.pivotTable];W(()=>l.selectedModuleIds,()=>{var r,p;if(l.selectedModuleIds.length===1){const c=l.selectedModuleIds[0],_=l.matchModule(c);if(_&&(t.styleMode===I.PC&&(o.value=((r=_.module.options)==null?void 0:r.pcStyles)??J()),t.styleMode===I.H5&&(o.value=((p=_.module.options)==null?void 0:p.h5Styles)??J()),A.includes(_.module.type)&&"type"in _.module.options&&i.includes(_.module.options.type))){const y=_.module.options;t.styleMode===I.PC&&(a.value=y.pcTableStyles??N()),t.styleMode===I.H5&&(a.value=(y==null?void 0:y.h5TableStyles)??N())}}else o.value=J(),a.value=N()});const n=L(()=>l.selectedModuleIds.filter(p=>{const c=l.matchModule(p);if(c&&A.includes(c.module.type)&&"type"in c.module.options&&i.includes(c.module.options.type))return c.module})),u=r=>{o.value.enable=r,r||(o.value=V(J()),e(o.value))},g=r=>{a.value.enable=r,r||(a.value=V(N()),d(a.value))};return(r,p)=>{const c=Y;return f(l).selectedModuleIds.length>=1?(h(),C(ze,{key:0},{default:v(()=>[m(j,{title:"图表整体样式",disable:o.value.enable,"onUpdate:disable":u},{default:v(()=>[m(xe,{"model-value":o.value,"onUpdate:modelValue":e},null,8,["model-value"])]),_:1},8,["disable"]),n.value.length>=1?(h(),C(j,{key:0,disable:a.value.enable,"onUpdate:disable":g,title:"表格类图表"},{default:v(()=>[m(Ue,{"model-value":a.value,"onUpdate:modelValue":d},null,8,["model-value"])]),_:1},8,["disable"])):H("",!0)]),_:1})):(h(),C(c,{key:1,description:"点击选择图表来设置样式,按住“ctrl”或“command”可选择多个图表"}))}}}),Qt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAABgCAYAAACaJ3mZAAAAAXNSR0IArs4c6QAAA/BJREFUeF7tnDFOlkEURd/EDbAE6CxJ3ACsQDdgYmeplFZKZenfWmniBtyBugAjpR0sgQ2YkSE/hBCMueHO+GY8JBSEx5035x0fH/5oiVtvtdaDiHgcEU8iYvf25+/7cSml3Myotdb7ZvL16QmcXPjU3o9LKWc3u72Woda6c/GJNxHxoud1ELAn3SmyN1sRz1u3lwJu5fsSEfu9r4CAvQlPkd+24WEp5fxKwGZl1813hQUBpxBkRJObUspRqbW257zTESderlyeAUehnuGcwybgh4h4NqpbBBxFeopzNk3AHyOe/fgWPIUQo5s8awIO/WsQNuDoGec+DwFzz2f57hBw+RHnviAC5p7P8t0h4PIjzn1BBMw9n+W7Q8DlR5z7ggiYez7Ld4eAy4849wURMPd8lu8OAZcfce4LImDu+SzfHQIuP+LcF0TA3PNZvjsEXH7EuS84vYAPX+UG3Lu7n297n9A3HwH78u2ejoAiYvcvpLIBxQEkK2cDJhuI2g4bUCTGBhSB/aUcAUWeCCgCQ0AvMAT08mQDijwRUATGBvQCQ0AvTzagyBMBRWBsQC8wBPTyZAOKPBFQBMYG9AJzC+jtjrTRBKZ/JWQ0MM7zEkBAL0/SRAIIKAKj3EsAAb08SRMJIKAIjHIvAQT08iRNJICAIjDKvQSmF3Dv+3svEdIkAqePnkv1t4sR8F74+GIEZAP+0z8FCIiACKgQcL8WzDOgQt9fywZkA/qtEhIREAEFXfylCIiAfquERAREQEEXfykCIqDfKiERARFQ0MVfioAI6LdKSPzvBRRYUZqQwPSvBSdkSksCAQQUYFHqJ4CAfqYkCgQQUIBFqZ8AAvqZkigQQEABFqV+AgjoZ0qiQGB6AX99OhCum6/0wdOv+Zoa2BECDoR911EIWGsdOQP3b0SzAUdOz38WG9DPVEpkA7IBJWHcxQiIgG6npDwEREBJGHcxAiKg2ykpDwERUBLGXYyACOh2SspDQASUhHEXIyACup2S8hBwcgGlaVOcjsD0r4SkI0pDEgEElHBR7CaAgG6i5EkEEFDCRbGbAAK6iZInEUBACRfFbgII6CZKnkQAASVcFLsJIKCbKHkSAQSUcFHsJoCAbqLkSQQQUMJFsZsAArqJkicRQEAJF8VuAk3A04jYdQf/Kc/9D9NH9c05XQicNAHfRcTLLvF3hCLgKNJTnPOxCdj+d58vo9pFwFGkpzhnr7Q2R25BBJxCjBFNbkopR1cC7my34H7vkxGwN+Ep8k8i4rCUcn4p4HYLNglf934eRMApBOnZ5CYijpt87ZBrAW+I2H4ibiK2bWjfiAjYc7Zps88uXPrc3ksp3252+Rt7UXJwPudGVwAAAABJRU5ErkJggg==",xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAABgCAYAAACaJ3mZAAAAAXNSR0IArs4c6QAAA/JJREFUeF7tmzFuk0EQRmcPgJSCA4QOupwAxSeAI1DRQkqqkIoS1zRwBG4QwQVwB118AApLHGDxRk5kRUHok79ddpcXKUXkybezbx6THxxS3PnIOZ9GxLOIeB4Rx3dfP/TrlFLaz8g550Mz+f7uCay2PpXPi5TSer/bWxlyzkfbF95GxKua10HAmnSHyF7uRNyUbq8F3Ml3GREnta+AgLUJD5FftuEipbS5EbBYWXXz3WBBwCEEadHkMqV0lnLO5TnvqsWJ1yuXZ8BWqEc4Z1EE/BgRL1p1i4CtSA9xzrII+K3Fsx8/gocQonWT6yJg038GYQO2nnHf5yFg3/OZvjsEnH7EfV8QAfuez/TdIeD0I+77ggjY93ym7w4Bpx9x3xdEwL7nM313CDj9iPu+IAL2PZ/pu0PA6Ufc9wURsO/5TN8dAk4/4r4viIB9z2f67hBw+hH3fcHhBXz8pm/Atbv78a72CXXzEbAu3+rpCCgidv9CKhtQHEBn5WzAzgaitsMGFImxAUVgfylHQJEnAorAENALDAG9PNmAIk8EFIGxAb3AENDLkw0o8kRAERgb0AsMAb082YAiTwQUgbEBvcDcAnq7I601geHfCWkNjPO8BBDQy5M0kQACisAo9xJAQC9P0kQCCCgCo9xLAAG9PEkTCSCgCIxyL4HhBfz14amXCGkSgQcvv0r1d4sR8CB8fDMCsgH/6Z8CBERABFQIuN8L5hlQoe+vZQOyAf1WCYkIiICCLv5SBERAv1VCIgIioKCLvxQBEdBvlZCIgAgo6OIvRUAE9FslJP73AgqsKO2QwPDvBXfIlJYEAggowKLUTwAB/UxJFAggoACLUj8BBPQzJVEggIACLEr9BBDQz5REgcDwAl58/ylct7/S8ycP+2uqYUcI2BD2fUchYM655QzcvxHNBmw5Pf9ZbEA/UymRDcgGlIRxFyMgArqdkvIQEAElYdzFCIiAbqekPAREQEkYdzECIqDbKSkPARFQEsZdjIAI6HZKykPAwQWUpk1xdwSGfyekO6I0JBFAQAkXxW4CCOgmSp5EAAElXBS7CSCgmyh5EgEElHBR7CaAgG6i5EkEEFDCRbGbAAK6iZInEUBACRfFbgII6CZKnkQAASVcFLsJIKCbKHkSAQSUcFHsJlAEvIqIY3fwn/Lc/zG9Vd+cU4XAqgj4PiJeV4m/JxQBW5Ee4pxPRcDTiLhs1S4CtiI9xDmPUmmz5RZEwCHEaNHkMqV0diPg0W4LntQ+GQFrEx4ifxURi5TS5lrA3RYsEp7Xfh5EwCEEqdnkMiIuinzlkFsB90QsfyMuIpZtaN+ICFhztt1mr7cufS6fKaUv+13+BsfJcnBdEND0AAAAAElFTkSuQmCC",Ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAABgCAYAAACaJ3mZAAAAAXNSR0IArs4c6QAAA/hJREFUeF7tm9FN1EEQh2c6oASMDZDQAFSAD775YgNGqUCpwEssQF9880ErIBZAvAYMVwIdrLeXg5wEw05uZp1dPhIeyA2/nf3mc/jrocq9j1LKiYicicgLETm8//q+X6uq7maUUsq+mXx/egLLtU/180JVV7vd3slQSjlYv/BBRN5GXgcBI+kOkb3YinhTu90IuJXvUkSOoq+AgNGEh8iv2/BUVW9uBaxWhm6+WywIOIQgPZpcqOq5llLqc951jxM3K5dnwF6oRzjntAr4WURe9+oWAXuRHuKcRRXwV49nP34EDyFE7yZXVcCu/wzCBuw949znIWDu+UzfHQJOP+LcF0TA3POZvjsEnH7EuS+IgLnnM313CDj9iHNfEAFzz2f67hBw+hHnviAC5p7P9N0h4PQjzn1BBMw9n+m7Q8DpR5z7ggiYez7Td4eA04849wWHF/Dr8fPchIO7e3X1O/iE2HgEjOUbno6ARsTev5DKBmQDmhREQBOuR4vZgI8i+rsAAY3AHilHQCNPBDQCQ0BfYAjoy5MNaOSJgEZgbEBfYAjoy5MNaOSJgEZgbEBfYAjoy5MNaOSJgEZgbEBfYN4C+nZHWm8Cw78X3BsY5/kSQEBfnqQZCSCgERjlvgQQ0JcnaUYCCGgERrkvAQT05UmakQACGoFR7ktgfAF/vPQlQpqNwNk3W/29agTcCx/fLAjIBvyvfwwQEAER0EDA/b1gngEN9ANK2YBswACt2iMREAHbbQmoREAEDNCqPRIBEbDdloBKBETAAK3aIxEQAdttCahEQAQM0Ko98skL2I6KyoQExn8vOCFUWmongIDtrKgMIICAAVCJbCeAgO2sqAwggIABUIlsJ4CA7ayoDCCAgAFQiWwnMLyAb67aL5ux8tNxxq769YSA/Vg/eBICllJ6zsD7N6LZgD2n538WG9CfqSmRDcgGNAnjXYyACOjtlCkPARHQJIx3MQIioLdTpjwERECTMN7FCIiA3k6Z8hAQAU3CeBcjIAJ6O2XKQ8DBBTRNm+J0BIZ/JyQdURoyEUBAEy6KvQkgoDdR8kwEENCEi2JvAgjoTZQ8EwEENOGi2JsAAnoTJc9EAAFNuCj2JoCA3kTJMxFAQBMuir0JIKA3UfJMBBDQhItibwII6E2UPBMBBDThotibQBXwWkQOvYP/lef9H9N79c05IQSWVcCPIvIuJP6BUATsRXqIc75UAU9E5LJXuwjYi/QQ5zzT2mbPLYiAQ4jRo8mFqp7fCniw3YJH0ScjYDThIfKXInKqqjcbAbdbsEr4Pvp5EAGHECSyyYWIXFT56iF3Au6IWP9GXEWs29B9IyJg5GzTZq/WLn2vn6r6c7fLP1EjZnDhYGIHAAAAAElFTkSuQmCC",zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAABgCAYAAACaJ3mZAAAAAXNSR0IArs4c6QAABHBJREFUeF7tm79PU1EUx99tSzAOMJjg5CQmaomDhPDDRTYxWiZZjJtOjPhn6MjkXyCbRmUxwUlCYh2MGhM7OmGI1hhNS9+75jWBVKIhJz33cvr4sBEO33vu53w4NJTnkgMfE1OLZzrl9Gw5KZ3zPhk5+PV+P/+49fRhb8bF6dpKv5l8v20CPvHbpVL69US7vVmvv2z2duv2PhkfXxgePj005zvJ5ZDXQcCQdO1nuyR929rJXjca6628266AuXxDpypLLnFjoa+AgKEJ28/PN+LuTmctl7ArYPVKbT705tvDgoD2BYnRYb4JP2w933CTk7dGf1dad2Mcmp+BgLFI2z+nnVQeu+ps7ZrPkmqsdhEwFmn752RpVncX5m7ecWn41378CrYvROwOvcuaLvafQdiAscds+zwEtD2fwneHgIUfse0LIqDt+RS+OwQs/IhtXxABbc+n8N0hYOFHbPuCCGh7PoXvDgELP2LbF0RA2/MpfHcIWPgR274gAtqeT+G7Q8DCj9j2BRHQ9nwK3x0CFn7Eti848AKm808e2EYctrvyxuL9sCeETUfAsHyDpyOgELH2P6SyAdmAIgURUITr0GI24KGI/i5AQCGwQ8oRUMgTAYXAEFAXGALq8mQDCnkioBAYG1AXGALq8mQDCnkioBAYG1AXGALq8mQDCnkioBAYG1AXmLaAut2RFpvAwL8XHBsY5+kSQEBdnqQJCSCgEBjlugQQUJcnaUICCCgERrkuAQTU5UmakAACCoFRrktg4AX8tXr9WD8ToquDPO3k8ou+nklBQDlzvqOHAAKyAY/0BwIBERABJQS03wvmNaCEvn4tG5ANqG+VIBEBEVCgi34pAiKgvlWCRAREQIEu+qUIiID6VgkSERABBbrolyIgAupbJUg89gIKWFFqkMDAvxdskCktCQggoAAWpfoEEFCfKYkCAggogEWpPgEE1GdKooAAAgpgUapPAAH1mZIoIDDwAr5bbg70MyGXVkf7eqZCMGuTpQh4xGNBwOnaSswZaP9HNBsw5vT0z2ID6jMVJbIB2YAiYbSLERABtZ0S5SEgAoqE0S5GQATUdkqUh4AIKBJGuxgBEVDbKVEeAiKgSBjtYgREQG2nRHkIOOACiqZNsTkCA/9OiDmiNCQigIAiXBRrE0BAbaLkiQggoAgXxdoEEFCbKHkiAggowkWxNgEE1CZKnogAAopwUaxNAAG1iZInIoCAIlwUaxNAQG2i5IkIIKAIF8XaBBBQmyh5IgIIKMJFsTYBV52p3fM+GdEO/l+e9oPpsfrmHH0CPvHb7vzMjaslX5rUj/93IgLGIm3/nMyn793E1OKZrOSXYrWLgLFI2z+nnew+cnmbMbcgAtoXI0aHWZrVP7159qor4PjCwvBQs7LkUjcW+nAEDE3Yfn7+2m93p7PWaKy3ugLuSVj5Vp4N/XoQAe0LErLDfPN1vqebuXz5OfsC7os4fXuk4n/OOpeNuUR/IyJgyPHazHZZ8iP12edOOW00tta/9Hb5B3oR8tG5hLc8AAAAAElFTkSuQmCC",Lt=""+new URL("../png/lhls-5cfe4f26.png",import.meta.url).href,Ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAABgCAYAAACaJ3mZAAAAAXNSR0IArs4c6QAABG5JREFUeF7tm79PU1EUx99tS3DCAYOTk5ioZbIh/HDRTYyWSRbDpvEPwD9D/wDj6CSjUVlMdJKQWCdrTOzohDaKMTEtfe+a1wRSiYac9NzL6ePDRjh877mf8+HQUJ5LDnzMzC6f6ZXTs+WkdM77ZOLg14f9/OPWs4eDGRfn6mvDZvL9tgn4xG+XSunXE93uZqPxamewW7f3yfT00vj46bFF30suhbwOAoakaz/bJen7Tjt722ptdPJu+wLm8o1NVlZc4qZCXwEBQxO2n59vxN12bz2XsC9g9XL9aujNt4cFAe0LEqPDfBM2t168drXarZO/K507MQ7Nz0DAWKTtn9NNKk9ddaF+zWdJNVa7CBiLtP1zsjRruAuLN1ddGv61H7+C7QsRu0Pvsh0X+88gbMDYY7Z9HgLank/hu0PAwo/Y9gUR0PZ8Ct8dAhZ+xLYviIC251P47hCw8CO2fUEEtD2fwneHgIUfse0LIqDt+RS+OwQs/IhtXxABbc+n8N0hYOFHbPuCCGh7PoXvDgELP2LbFxx5AZuP2g9sIw7bXfXe5P2wJ4RNR8CwfIOnI6AQsfY/pLIB2YAiBRFQhOvQYjbgoYj+LkBAIbBDyhFQyBMBhcAQUBcYAuryZAMKeSKgEBgbUBcYAuryZAMKeSKgEBgbUBcYAuryZAMKeSKgEBgbUBeYtoC63ZEWm8DIvxccGxjn6RJAQF2epAkJIKAQGOW6BBBQlydpQgIIKARGuS4BBNTlSZqQAAIKgVGuS2DkBWzWvh3rZ0J0dZCnVRunhnomBQHlzPmOAQIIyAY80h8IBERABJQQ0H4vmNeAEvr6tWxANqC+VYJEBERAgS76pQiIgPpWCRIREAEFuuiXIiAC6lslSERABBTool+KgAiob5Ug8dgLKGBFqUECI/9esEGmtCQggIACWJTqE0BAfaYkCgggoAAWpfoEEFCfKYkCAggogEWpPgEE1GdKooDAyAvYfHJ9pJ8Jqa6+HOqZCsGsTZYi4BGPBQHn6msxZ6D+H9FswJjjUz+LDaiOVBbIBmQDyoxRrkZABFRWShaHgAgoM0a5GgERUFkpWRwCIqDMGOVqBERAZaVkcQiIgDJjlKsREAGVlZLFIeCICygbN9XWCIz8OyHWgNKPjAACynhRrUwAAZWBEicjgIAyXlQrE0BAZaDEyQggoIwX1coEEFAZKHEyAggo40W1MgEEVAZKnIwAAsp4Ua1MAAGVgRInI4CAMl5UKxNAQGWgxMkIIKCMF9XKBFx1vn7X+2RCOfe/cdoPpsfqm3P0CfjEb7vz8zeulHypph//70QEjEXa/jmZTz+4mdnlM1nJr8RqFwFjkbZ/TjfZfezyNmNuQQS0L0aMDrM0a3x69/xNX8DppaXxsZ3KikvdVOjDETA0Yfv5+Wu/3XZvvdXa6PQF3JOw8r28EPr1IALaFyRkh/nm6/1IN3P58nP2BdwXce72RMX/WnAum3KJ/kZEwJDjtZntsuRn6rPPvXLaam1tfBns8g/sPvLRjruw4wAAAABJRU5ErkJggg==",Tt=S({__name:"DashStyle",props:{modelValue:{}},emits:["update:modelValue","change"],setup(s,{emit:t}){const l=s,o=t,e=oe(l,"modelValue",o),a=ee([{label:"智慧科技",img:Qt,bg:"#F2F3F5",theme:"zhkj_light"},{label:"智慧活力",img:xt,bg:"#F2F3F5",theme:"zhhl_light"},{label:"党政教务",img:Ut,bg:"#F2F3F5",theme:"dzjw_light"},{label:"智慧政务",img:zt,bg:"#0A0F14",theme:"zhzw_dark"},{label:"蓝红零售",img:Lt,bg:"#0A0F14",theme:"lhls_dark"},{label:"智慧金融",img:Ot,bg:"#0A0F14",theme:"zhjr_dark"}]),d=i=>{e.value=i;const n=A(i);o("change",n)},A=i=>{const n=De();switch(i){case"zhkj_light":return n.bg.color="#F2F3F5",n.highlightColor="#2778FF",n.themeStyle="zhkj_light",n.overallChart.bg.color="#FFFFFF",n.overallChart.title.color="#000000",n;case"zhhl_light":return n.bg.color="#F2F3F5",n.highlightColor="#2778FF",n.themeStyle="zhhl_light",n.overallChart.bg.color="#FFFFFF",n.overallChart.title.color="#000000",n;case"dzjw_light":return n.bg.color="#F2F3F5",n.highlightColor="#A43222",n.themeStyle="dzjw_light",n.overallChart.bg.color="#FFFFFF",n.overallChart.title.color="#000000",n;case"zhzw_dark":return n.bg.color="#0A0F14",n.highlightColor="#2778FF",n.themeStyle="zhzw_dark",n.overallChart.bg.color="rgb(26, 32, 56)",n.overallChart.title.color="#FFFFFF",n.tableStyle.tableThemeColor="#384C8E",n.tableStyle.tableHeaderTextColor="#FFFFFF",n.tableStyle.tableContentTextColor="#FFFFFF",n;case"lhls_dark":return n.bg.color="#0A0F14",n.highlightColor="#2778FF",n.themeStyle="lhls_dark",n.overallChart.bg.color="rgb(26, 32, 56)",n.overallChart.title.color="#FFFFFF",n.tableStyle.tableThemeColor="#4F3A85",n.tableStyle.tableHeaderTextColor="#FFFFFF",n.tableStyle.tableContentTextColor="#FFFFFF",n;case"zhjr_dark":return n.bg.color="#0A0F14",n.highlightColor="#FFD03B",n.themeStyle="zhjr_dark",n.overallChart.bg.color="rgb(26, 32, 56)",n.overallChart.title.color="#FFFFFF",n.tableStyle.tableThemeColor="#00687D",n.tableStyle.tableHeaderTextColor="#FFFFFF",n.tableStyle.tableContentTextColor="#FFFFFF",n;default:return n}};return(i,n)=>(h(),B("div",{class:"dash-box"},[(h(!0),B(P,null,K(a,(u,g)=>(h(),B("div",{class:"style-cell",key:g},[b("div",{class:Xe(["card-img",f(e)===u.theme?"active":""]),style:we({background:u.bg}),title:u.label,onClick:r=>d(u.theme)},[b("img",{src:u.img,alt:u.label},null,8,["src","alt"])],14,["title","onClick"])]))),128))]))}});const Ht=O(Tt,[["__scopeId","data-v-d6a807a1"]]),Vt=S({__name:"OverallStyle",props:{styleMode:{}},setup(s){const t=s,l=Q(),o=De();function e(r,p,c,_){const y=r===I.PC?p.pcThemeStyles:p.h5ThemeStyles;return(y&&y[_])??c[_]}function a(r,p,c,_){const y=r===I.PC?p.pcThemeStyles:p.h5ThemeStyles;y&&(y[_]=_==="overallChart"?V(c):c)}const d=L({get:()=>e(t.styleMode,l.page,o,"themeStyle"),set:r=>a(t.styleMode,l.page,r,"themeStyle")}),A=L({get:()=>V(e(t.styleMode,l.page,o,"bg")),set:r=>a(t.styleMode,l.page,r,"bg")}),i=L({get:()=>e(t.styleMode,l.page,o,"highlightColor"),set:r=>a(t.styleMode,l.page,r,"highlightColor")}),n=L({get:()=>e(t.styleMode,l.page,o,"overallChart"),set:r=>a(t.styleMode,l.page,r,"overallChart")}),u=L({get:()=>e(t.styleMode,l.page,o,"tableStyle"),set:r=>a(t.styleMode,l.page,r,"tableStyle")}),g=r=>{t.styleMode===I.PC?l.page.pcThemeStyles=r:l.page.h5ThemeStyles=r};return(r,p)=>(h(),C(ze,null,{default:v(()=>[m(j,{title:"风格",visible:""},{default:v(()=>[m(Ht,{modelValue:d.value,"onUpdate:modelValue":p[0]||(p[0]=c=>d.value=c),onChange:g},null,8,["modelValue"])]),_:1}),m(j,{title:"仪表盘整体"},{default:v(()=>[m(Ct,null,{default:v(()=>[m(ue,{label:"背景","align-items":"baseline"},{default:v(()=>[m(It,{modelValue:A.value,"onUpdate:modelValue":p[1]||(p[1]=c=>A.value=c),showClear:!1},null,8,["modelValue"])]),_:1}),m(ue,{label:"高亮色"},{default:v(()=>[m(Et,{color:i.value,"onUpdate:color":p[2]||(p[2]=c=>i.value=c),showClear:!1},null,8,["color"])]),_:1})]),_:1})]),_:1}),m(j,{title:"图表整体"},{default:v(()=>[m(xe,{modelValue:n.value,"onUpdate:modelValue":p[3]||(p[3]=c=>n.value=c)},null,8,["modelValue"])]),_:1}),m(j,{title:"表格图表"},{default:v(()=>[m(Ue,{modelValue:u.value,"onUpdate:modelValue":p[4]||(p[4]=c=>u.value=c)},null,8,["modelValue"])]),_:1})]),_:1}))}}),Sn=Symbol("移动端布局页面"),jt=Symbol("页面样式保存"),Kt=We();function R(s,t,l){return t in s?Object.defineProperty(s,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[t]=l,s}function pe(s,t){for(var l=0;l<t.length;l++){var o=t[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(s,o.key,o)}}function Le(s,t,l){return t&&pe(s.prototype,t),l&&pe(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function Oe(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}var q="client_response",$="server_response",me={server:{receive:q,post:$},client:{receive:$,post:q}},Jt=["hand-shake","wave-hand",q,$],Nt=Le(function s(t,l,o){var e=this;Oe(this,s),R(this,"receiveMessage",function(a,d,A){if(a===me[e.type].receive){if(d&&e.messageResponse[d]){var i=e.messageResponse[d];delete e.messageResponse[d],i(A)}}else if(e.listener){var n=function(g){e.messageProxy.request(me[e.type].post,d,g)};e.listener(a,A,n)}else console.warn("no message listener: ",a,A)}),R(this,"doPost",function(a,d,A){var i=a.resolve,n=a.reject,u=a.eventId;e.messageResponse[u]=i;try{e.messageProxy.request(d,u,A)}catch(g){throw delete e.messageResponse[u],n(),g}}),R(this,"listenMessage",function(a){e.listener=a}),R(this,"postMessage",function(a,d){return Jt.indexOf(a)>=0?Promise.reject(new Error("".concat(a," is a protected key-method."))):new Promise(function(A,i){if(e.destroyed){i(new Error("message-channel had been destroyed!"));return}var n=null,u=function(p){clearTimeout(n),A(p)},g=Math.random().toString().substr(3,10);e.doPost({resolve:u,reject:i,eventId:g},a,d),n=setTimeout(function(){e.messageResponse&&delete e.messageResponse[g],i(new Error("postMessage timeout"))},e.timeout||20*1e3)})}),R(this,"destroy",function(){e.destroyed=!0,e.unListen&&(e.unListen(),e.unListen=null),e.listener=null,e.messageResponse=null,e.messageProxy&&(e.messageProxy.destroy(),e.messageProxy=null)}),this.type=t,this.messageProxy=l,this.listener=null,this.messageResponse={},this.timeout=o,this.unListen=this.messageProxy.listen(this.receiveMessage)}),Ae="postmessage-promise_client",fe="postmessage-promise_server",ve="identity_key",he={server:{key:fe,accept:Ae},client:{key:Ae,accept:fe}},Zt=Le(function s(t,l,o){var e=this;Oe(this,s),R(this,"listen",function(i){var n=e,u=function(r){if(!(n.origin!=="*"&&r.origin!==n.origin||r.source!==n.source||!r.data||r.data[ve]!==he[n.type].accept||r.data.channelId!==n.channelId||!n.eventFilter(r)||!r.data.method)){var p=r.data,c=p.eventId,_=p.method,y=p.payload;i(_,c,y)}};return window.addEventListener("message",u),function(){window.removeEventListener("message",u)}}),R(this,"request",function(i,n,u){if(!e.source||e.source.closed){console.error("source closed.");return}e.source.postMessage(R(R(R(R(R({},ve,he[e.type].key),"channelId",e.channelId),"eventId",n),"method",i),"payload",u),e.origin)}),R(this,"destroy",function(){e.type="",e.origin="",e.source=null,e.channelId="",e.eventFilter=null}),this.type=t;var a=l.origin,d=l.source,A=l.channelId;this.origin=a,this.source=d,this.channelId=A,this.eventFilter=o});function _e(s,t){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);t&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})),l.push.apply(l,o)}return l}function ye(s){for(var t=1;t<arguments.length;t++){var l=arguments[t]!=null?arguments[t]:{};t%2?_e(Object(l),!0).forEach(function(o){R(s,o,l[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):_e(Object(l)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(l,o))})}return s}function Yt(s,t,l,o){return new Promise(function(e,a){var d=s.source,A=s.origin,i=s.channelId,n=1,u=0,g=Number(Math.random().toString().substr(3,10)),r=null,p=new Date,c=null;function _(w,F){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(w==="hand-shake"){var E=D||{},x=E.SYN,Ve=E.ACK,je=E.seqnumber,Ke=E.acknumber;x===1&&Ve===1&&Ke===g+1&&(clearInterval(r),c&&c(),t.request("hand-shake","hand-shake-event",{clientInfo:o,ACK:1,seqnumber:g+1,acknumber:je+1}),e({server:d,origin:A,channelId:i,serverInfo:D.serverInfo,clientInfo:o}))}}c=t.listen(_);var y=function(){if(!d||d.closed)throw clearInterval(r),c&&c(),a(new Error("server closed.")),new Error("server closed.");if(l){var F=new Date,D=F-p;if(D>l)throw clearInterval(r),c&&c(),a(new Error("connect timeout.")),new Error("connect timeout.")}t.request("hand-shake","hand-shake-event",{clientInfo:o,SYN:n,ACK:u,seqnumber:g})};r=setInterval(y,100)})}function Gt(s,t,l){var o=s.server,e=s.serverInfo,a=e===void 0?{}:e,d=s.channelId,A=new Nt("client",t,l),i=function(){A&&(A.destroy(),A=null),s.destroy&&s.destroy()},n=null;function u(){(!o||o.closed)&&(console.info("server closed."),clearInterval(n),i())}return n=setInterval(u,2e3),{run:function(r){r({channelId:d,serverInfo:a,postMessage:function(){if(A){var c;return(c=A).postMessage.apply(c,arguments)}return Promise.reject()},listenMessage:function(){if(A){var c;(c=A).listenMessage.apply(c,arguments)}},destroy:i})}}}function Xt(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!s)throw new Error("serverObject is null");var l=s.server,o=s.origin,e=t.eventFilter,a=e===void 0?function(){return!0}:e,d=t.timeout,A=d===void 0?20*1e3:d,i=t.clientInfo,n=i===void 0?{}:i,u=t.onDestroy,g=Math.random().toString().substr(3,10),r={source:l,origin:o,channelId:g};return new Promise(function(p,c){if(!l||l.closed){c(new Error("server closed"));return}var _=new Zt("client",r,a);Yt(r,_,A,n).then(function(y){var w=ye(ye({},y),{},{destroy:function(){_=null,u&&u(y.serverInfo,y)}});Gt(w,_,A).run(p)}).catch(function(y){c(y)})})}function se(s){var t=document.createElement("a");t.href=s;var l=t.protocol.length>4?t.protocol:window.location.protocol,o=t.host.length?t.port==="80"||t.port==="443"?t.hostname:t.host:window.location.host;return t.origin||"".concat(l,"//").concat(o)}function Wt(s,t,l){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],e=typeof s<"u"?s:document.body,a=se(t),d=document.createElement("iframe");d.name=l||"",d.classList.add.apply(d.classList,o),e.appendChild(d),d.src=t;var A=d.contentWindow||d.contentDocument.parentWindow;return{server:A,origin:a,frame:d}}function qt(s){for(var t,l=se(s),o=arguments.length,e=new Array(o>1?o-1:0),a=1;a<o;a++)e[a-1]=arguments[a];var d=(t=window).open.apply(t,[s].concat(e));return{server:d,origin:l}}var $t={resolveOrigin:se,getIframeServer:Wt,getOpenedServer:qt};const en=(s,t)=>{const l=k(`iframe-${qe()}`);let o=1;const e=k(!1),{getIframeServer:a}=$t;let d=null;const A=(g,r)=>{d?d(g,r):console.error("发送信息失败:",g,r)};let i=null;const n=g=>{const r=a(g,s,"iName",["default_iframe"]);Xt(r,{}).then(c=>{e.value=!0,d=c.postMessage,i=c.destroy,t&&c.listenMessage(t),setTimeout(()=>{t&&t("init",null,()=>"")},0)})},u=()=>{const g=document.getElementById(l.value);g?n(g):o<=5&&setTimeout(()=>{u(),`${l.value}${o}`,o++},300)};return $e(()=>{u()}),et(()=>{i==null||i()}),{iframeId:l,connected:e,init:u,sendPostMessage:A,postMessage:d,destroy:i}},tn=(s,t,l)=>{const o=Q(),e=`?appId=${o.appId}&entryId=${o.entryId}&mode=${s}&scene=${t}&hideAutoJump=1`,a="/h5/#/pageLayout";let d="";d=`${location.protocol}//${location.host}${a}${e}`;const{connected:A,iframeId:i,sendPostMessage:n}=en(d,(w,F,D)=>{u(w,F),l&&l(w,F,D)});function u(w,F){const D=JSON.parse(F);switch(w){case"init":y();break;case"updateLayout":g(D);break;case"selectId":o.selectedModuleIds=[...D];break}}const g=w=>{o.page=w},r=(w,F)=>{n(w,JSON.stringify(F))},p=()=>{const w=tt(),F=nt();r("token",{entId:w,token:F})},c=w=>{r("enableControl",{id:w})},_=()=>{r("updateMobileStyles",o.page)},y=async()=>{p(),r("render",o.page)};return{loading:A,iframeId:i,sendPostMessage:n,enableMobileControl:c,updateStyles:_}},nn=S({__name:"controlsView",props:{mode:{}},emits:["unhide"],setup(s,{emit:t}){const l=s,o=t,e=i=>l.mode==="layout"?i:void 0,a=Q(),d=L(()=>{const i=[];return function n(u){u.forEach(g=>{"enable"in g[l.mode]&&!g[l.mode].enable?i.push(g):"modules"in g&&g.modules.length>=1&&n(g.modules)})}(a.page.modules),i}),A=i=>{i[l.mode]={...i[l.mode],enable:!0},ae(()=>{d.value.length<=0&&o("unhide",i.moduleId)})};return(i,n)=>{const u=U,g=Y;return h(),B("div",{style:{width:"100%",height:"100%"}},[(h(!0),B(P,null,K(d.value,r=>(h(),B("div",{class:"hide-box",key:r.moduleId},[m(lt,{content:r.options.label},null,8,["content"]),m(u,{type:"primary",text:"",onClick:p=>A(r)},{default:v(()=>[M(" 取消隐藏 ")]),_:2},1032,["onClick"])]))),128)),d.value.length<1?(h(),C(g,{key:0,style:we({padding:e("unset")}),"image-size":e(50),description:"暂无隐藏的图表/控件"},null,8,["style","image-size"])):H("",!0)])}}});const Te=O(nn,[["__scopeId","data-v-be30155d"]]),ln=S({__name:"H5DesignerPanel",props:{isActiveBar:{type:Boolean},mode:{default:G.design},busScene:{default:"layout"}},setup(s,{expose:t}){const l=s,{loading:o,iframeId:e,enableMobileControl:a,updateStyles:d}=tn(l.mode,l.busScene);return t({updateStyles:d}),(A,i)=>(h(),B("div",{class:"h5-box"},[b("div",{class:"dash-h5-wrap"},[b("div",{class:"iPhone-14-pro"},[b("div",{class:"screen"},[b("div",{id:f(e),class:"wrapper"},null,8,["id"])]),b("div",{class:"mute-btn"}),b("div",{class:"volume-up-btn"}),b("div",{class:"volume-down-btn"}),b("div",{class:"power-btn"})])]),A.isActiveBar?H("",!0):(h(),B("div",{key:0,class:"action-bar"},[b("b",null,"隐藏的图表和控件"),m(Te,{mode:"mobile",onUnhide:f(a)},null,8,["onUnhide"])]))]))}});const He=O(ln,[["__scopeId","data-v-af91c98a"]]),on="关闭时，移动端样式和电脑端一致。开启后，你可以单独配置移动端的样式，包括仪表盘和单个图表样式。",an=S({__name:"MobileEmpty",setup(s){const t=Q(),l=async()=>{t.resetMobileStyles(),await ae(),t.page.isMobileStyles=!0};return(o,e)=>{const a=U,d=Y;return h(),C(d,{description:on},{default:v(()=>[m(a,{type:"primary",onClick:l},{default:v(()=>[M("开启移动端样式")]),_:1})]),_:1})}}}),sn=S({__name:"StyleDesign",props:{appId:{},entryId:{},dataId:{},scene:{},mode:{},pageDesigner:{},pageConfig:{},t_id:{},c_id:{}},setup(s,{expose:t}){const l=s,o=k(0),e=Me({appId:l.appId,entryId:l.entryId,scene:l.scene,mode:l.mode,pageDesigner:l.pageDesigner,pageConfig:l.pageConfig,dataId:l.dataId});Be(Pe,e),W(()=>e.selectedModuleIds,()=>{e.selectedModuleIds.length<=0?o.value=0:o.value=1});const a=k(!1),d=async()=>{e.page.isMobileStyles||e.resetMobileStyles();try{a.value=!0,await wt({appId:e.appId,entryId:e.entryId,id:e.dataId,pageeJson:e.page,pageeConfig:e.pageConfig}),Kt.emit(jt),te.success("保存成功")}finally{a.value=!1}},A=()=>{e.page.isMobileStyles=!1,e.resetMobileStyles(),n.value=I.PC},i=k();W(()=>e,()=>{var u;n.value===I.H5&&((u=i.value)==null||u.updateStyles())},{deep:!0}),t({handleConfirm:d});const n=k(I.PC);return(u,g)=>{const r=ke,p=ne,c=le,_=U,y=at,w=st,F=rt,D=it,E=dt;return h(),B(P,null,[(h(),C(de,{to:`#${u.t_id}`},[m(c,{modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=x=>n.value=x),size:"small"},{default:v(()=>[m(p,{label:f(I).PC},{default:v(()=>[m(r,null,{default:v(()=>[m(f(Fe))]),_:1})]),_:1},8,["label"]),m(p,{label:f(I).H5},{default:v(()=>[m(r,null,{default:v(()=>[m(f(Se))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],8,["to"])),(h(),C(de,{to:`#${u.c_id}`},[f(e).page.isMobileStyles&&n.value===f(I).H5?(h(),C(_,{key:0,text:"",icon:f(ot),onClick:A,type:"primary",size:"small"},{default:v(()=>[M(" 关闭移动端样式 ")]),_:1},8,["icon"])):H("",!0)],8,["to"])),X((h(),C(D,{class:"container"},{default:v(()=>[m(y,{style:{padding:"unset"}},{default:v(()=>[n.value===f(I).PC?(h(),C(Qe,{key:0})):(h(),B(P,{key:1},[f(e).page.isMobileStyles?(h(),C(He,{key:0,isActiveBar:"",mode:f(G).selectDesign,ref_key:"H5DesignerPanelRef",ref:i,"bus-scene":"style"},null,8,["mode"])):(h(),C(an,{key:1}))],64))]),_:1}),m(F,{width:"300px"},{default:v(()=>[m(bt,{modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=x=>o.value=x),stretch:""},{default:v(()=>[m(w,{label:"整体样式",name:0},{default:v(()=>[m(Vt,{styleMode:n.value},null,8,["styleMode"])]),_:1}),m(w,{label:"图表样式",name:1},{default:v(()=>[m(Pt,{styleMode:n.value},null,8,["styleMode"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})),[[E,a.value]])],64)}}});const rn=O(sn,[["__scopeId","data-v-3060a9d0"]]),be="dashModeId_65352",Ce="closeBtnId_65352",dn=S({__name:"DashboardStyle",setup(s){const t=k(!1),l=Q(),o=k(!1),e=()=>{o.value=!0},a=()=>{o.value=!1},d=()=>{t.value=!1},A=k(!1),i=k(),n=async()=>{var g;try{A.value=!0,await((g=i.value)==null?void 0:g.handleConfirm()),t.value=!1,A.value=!1}catch{t.value=!1,A.value=!1}},u=m(Ie,{iconClass:"pageStyle_icon"},null);return(g,r)=>{const p=U;return h(),B("div",null,[m(p,{onClick:r[0]||(r[0]=c=>t.value=!0),text:"",icon:f(u),size:"small"},{default:v(()=>[M(" 页面样式 ")]),_:1},8,["icon"]),m(ct,{class:"az-dash-drawer",modelValue:t.value,"onUpdate:modelValue":r[1]||(r[1]=c=>t.value=c),direction:"btt",size:"90%","append-to-body":"",onOpen:e,onClosed:a},{header:v(()=>[b("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[b("div",{id:Ce}," "),b("div",{style:{"text-align":"center"},id:be}),b("div",null," ")])]),footer:v(()=>[b("div",{style:{display:"flex","justify-content":"center"}},[m(p,{onClick:d},{default:v(()=>[M("取消")]),_:1}),m(p,{type:"primary",onClick:n,loading:A.value},{default:v(()=>[M(" 保存 ")]),_:1},8,["loading"])])]),default:v(()=>[o.value?(h(),C(rn,{key:0,ref_key:"StyleDesignRef",ref:i,appId:f(l).appId,entryId:f(l).entryId,scene:f(l).scene,mode:f(G).selectDesign,pageDesigner:f(l).page,pageConfig:f(l).pageConfig,dataId:f(l).dataId,t_id:be,c_id:Ce},null,8,["appId","entryId","scene","mode","pageDesigner","pageConfig","dataId"])):H("",!0)]),_:1},8,["modelValue"])])}}});const cn=S({__name:"ModeSelect",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{emit:t}){const e=oe(s,"modelValue",t);return(a,d)=>{const A=ke,i=ne,n=le;return h(),C(n,{modelValue:f(e),"onUpdate:modelValue":d[0]||(d[0]=u=>T(e)?e.value=u:null),size:"small"},{default:v(()=>[m(i,{label:f(I).PC},{default:v(()=>[m(A,null,{default:v(()=>[m(f(Fe))]),_:1})]),_:1},8,["label"]),m(i,{label:f(I).H5},{default:v(()=>[m(A,null,{default:v(()=>[m(f(Se))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])}}}),un=S({__name:"Delete",setup(s){const t=Q(),l=async()=>{if(t.selectedModuleIds.length<=0)te.warning("请选中要删除的图表/控件");else{const o=V(t.selectedModuleIds);Re.confirm(`你当前选中了${o.length}个组件，确定要删除吗？（删除后无法恢复）`,"你确定要删除所选图表/控件吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.forEach(e=>{t.deleteModule(e)})})}};return(o,e)=>{const a=U;return h(),C(a,{text:"",icon:f(ut),size:"small",onClick:l},{default:v(()=>[M(" 删除 ")]),_:1},8,["icon"])}}}),gn=S({__name:"HideControls",setup(s){const t=k(),l=o=>{ae(()=>{var e;(e=t.value)==null||e.hide()})};return(o,e)=>{const a=U,d=Ee;return h(),C(d,{ref_key:"ElPopoverRef",ref:t,placement:"bottom",width:300,trigger:"click"},{reference:v(()=>[m(a,{text:"",icon:f(gt),size:"small"},{default:v(()=>[M("隐藏的图表/控件")]),_:1},8,["icon"])]),default:v(()=>[m(Te,{mode:"layout",onUnhide:l})]),_:1},512)}}});const pn=O(gn,[["__scopeId","data-v-1807668a"]]),mn=S({__name:"CloseMobile",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{emit:t}){const e=oe(s,"modelValue",t),a=Q(),d=()=>{Re.confirm("关闭后，已有设置不会保存，此操作无法还原。","你确定要关闭移动端布局吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.page.isMobileLayout=!1,e.value=I.PC,function A(i){for(let n=0;n<i.length;n++){const u=i[n];u.mobile=V({...u.layout,w:z}),"modules"in u&&A(u.modules)}}(a.page.modules)})};return(A,i)=>{const n=U;return h(),C(n,{text:"",icon:f(pt),type:"primary",onClick:d,size:"small"},{default:v(()=>[M(" 关闭移动端布局 ")]),_:1},8,["icon"])}}}),An=S({__name:"OpenMobile",setup(s){const t=Q(),l=()=>{t.page.isMobileLayout=!0,function o(e){for(let a=0;a<e.length;a++){const d=e[a];d.mobile=V({...d.layout,w:z}),"modules"in d&&o(d.modules)}}(t.page.modules)};return(o,e)=>{const a=U,d=Y;return h(),C(d,{description:"默认状态下，移动端布局和电脑端一致。你可以自定义移动端布局，支持自定义图表大小、位置等。"},{default:v(()=>[m(a,{type:"primary",onClick:l},{default:v(()=>[M(" 开启移动端布局 ")]),_:1})]),_:1})}}}),fn=S({__name:"App",props:{mode:{default:G.design},scene:{default:mt.homePage},pageDesigner:{default(){return ce()}},dataId:{},appId:{default:""},entryId:{default:""},pageConfig:{default(){return At()}}},setup(s,{expose:t}){const l=s;ft();const{modelSelect:o}=Mt();Bt();const e=ee(Me(l));Be(Pe,e);const a=L(()=>e.page.isMobileLayout),d=A=>{o.value=A,e.selectedModuleIds=[]};return t({pageDesignerData:()=>e.page,clear:()=>{e.page=ce()}}),k(!0),(A,i)=>{const n=vt;return h(),B("div",{class:"page_layout-box"},[b("div",{class:"page_designer"},[b("div",{class:"designer_aside"},[m(St)]),b("div",{class:"designer_main az-flex-width"},[b("div",{class:"page_tools"},[m(n,{spacer:"|"},{default:v(()=>[f(o)===f(I).PC?(h(),B(P,{key:0},[m(Dt),m(un),m(pn)],64)):(h(),B(P,{key:1},[a.value?(h(),C(mn,{key:0,modelValue:f(o),"onUpdate:modelValue":i[0]||(i[0]=u=>T(o)?o.value=u:null)},null,8,["modelValue"])):(h(),B("span",{key:1}," "))],64))]),_:1}),m(n,{spacer:"|"},{default:v(()=>[m(cn,{"model-value":f(o),"onUpdate:modelValue":d},null,8,["model-value"]),m(dn)]),_:1})]),f(o)===f(I).PC?(h(),C(Qe,{key:0})):H("",!0),f(o)===f(I).H5?(h(),B(P,{key:1},[a.value?(h(),C(He,{key:0})):(h(),C(An,{key:1}))],64)):H("",!0)])])])}}});const kn=O(fn,[["__scopeId","data-v-1ca9c081"]]);export{Kt as $,kn as A,Sn as m,jt as p};
