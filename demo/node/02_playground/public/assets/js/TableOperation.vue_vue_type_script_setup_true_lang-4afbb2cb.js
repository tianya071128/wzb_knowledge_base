import{d as L,d5 as M,r as z,c as F,y as V,o as t,b as d,w as a,h as N,k as w,f as i,g as A,F as b,ba as R,i as v,p as H,m as P,t as T,bG as E,I as D,bc as g,aT as U,av as O,cj as q,_ as J,cV as K,l as B,cR as Q,h1 as W}from"./index-b80d5ef5.js";const j=L({__name:"Popover",props:{actionList:{},rowId:{},placement:{default:"bottom"},trigger:{default:"click"},transition:{}},emits:["visibleChange"],setup(k,{emit:l}){const h=k,f=l,m=M(n=>{var c;(c=n.onClick)==null||c.call(n)},300),y=n=>{n.popconfirmProps||(s.value=!1,m(n))},e=z(!1),s=F({set(n){o.value>0||(e.value=n)},get(){return e.value}});V(()=>h.rowId,()=>{o.value=0,p.value=void 0,s.value=!1}),V(s,()=>{f("visibleChange",s.value)});const o=z(0),p=z(),C=n=>{p.value=n,o.value=o.value+1},S=n=>{p.value===n&&(p.value=void 0),o.value=o.value-1,s.value=!1},x=n=>({...n,async confirm(){var c;await((c=n.confirm)==null?void 0:c.call(n)),U(()=>{e.value=!1})}});return(n,c)=>{const $=O,G=R;return t(),d(G,{placement:n.placement,width:"auto",trigger:n.trigger,transition:n.transition,"hide-after":0,"popper-class":"az-custom-popper",visible:s.value,"onUpdate:visible":c[0]||(c[0]=r=>s.value=r)},{reference:a(()=>[N(n.$slots,"pTrigger")]),default:a(()=>[w("ul",{class:"az-custom-popper-menu"},[(t(!0),i(b,null,A(n.actionList,(r,u)=>(t(),i("div",{key:u},[r.children?(t(),i("div",{key:0},[v(j,{actionList:r.children,"row-id":u+"1",placement:"right",onShow:_=>C(u),onHide:_=>S(u),trigger:"click"},{pTrigger:a(()=>[w("li",{class:H(["az-custom-popper-menu__item",{"az-custom-popper-menu__active":u===p.value}])},[v($,{type:r.type,underline:!1},{default:a(()=>[P(T(r.text),1)]),_:2},1032,["type"])],2)]),_:2},1032,["actionList","row-id","onShow","onHide"])])):r.popconfirmProps?(t(),d(E,D({key:1,placement:"right"},x(r.popconfirmProps),{onShow:_=>C(u),onHide:_=>S(u)}),{reference:a(()=>[w("li",{class:H(["az-custom-popper-menu__item",{"az-custom-popper-menu__active":u===p.value}]),onClick:g(_=>y(r),["stop"])},[v($,{type:r.type,underline:!1},{default:a(()=>[P(T(r.text),1)]),_:2},1032,["type"])],10,["onClick"])]),_:2},1040,["onShow","onHide"])):(t(),i("li",{key:2,class:"az-custom-popper-menu__item",onClick:g(_=>y(r),["stop"])},[v($,{type:r.type,underline:!1},{default:a(()=>[P(T(r.text),1)]),_:2},1032,["type"])],8,["onClick"]))]))),128))])]),_:3},8,["placement","trigger","transition","visible"])}}}),X=L({__name:"Trigger",props:{icon:{},type:{default:"primary"},text:{default:"..."}},setup(k){return(l,h)=>{const f=O;return t(),i("div",{class:"trigger_item"},[l.icon?(t(),d(q(l.icon),{key:0,class:"btn_cursor",title:l.text},null,8,["title"])):(t(),d(f,{key:1,type:l.type,underline:!1},{default:a(()=>[P(T(l.text),1)]),_:1},8,["type"]))])}}});const I=J(X,[["__scopeId","data-v-1f92c308"]]),Z=L({__name:"TableOperation",props:{dropdownIcon:{},dropdownText:{default:"..."},list:{},num:{default:2},rowId:{},placement:{default:"bottom"},transition:{default:"el-zoom-in-top"}},emits:["visibleChange"],setup(k,{emit:l}){const h=k,f=l,m=F(()=>(h.list??[]).filter(e=>{if(e.premission){const s=Array.isArray(e.premission)?e.premission:[e.premission];return K(s,e.premissionCondition)}return!0})),y=e=>{W(e.onClick)&&e.onClick(e)};return(e,s)=>(t(),i("div",null,[(t(!0),i(b,null,A(m.value.slice(0,e.num),(o,p)=>(t(),i(b,{key:p},[o.text?(t(),i(b,{key:0},[o.popconfirmProps?(t(),d(E,Q(D({key:0},o.popconfirmProps)),{reference:a(()=>[v(I,{onClick:g(C=>y(o),["stop"]),icon:o.icon,text:o.text,type:o.type},null,8,["onClick","icon","text","type"])]),_:2},1040)):(t(),d(I,{key:1,onClick:g(C=>y(o),["stop"]),icon:o.icon,text:o.text,type:o.type},null,8,["onClick","icon","text","type"]))],64)):B("",!0)],64))),128)),m.value.length>e.num?(t(),d(j,{key:0,num:0,actionList:m.value.slice(e.num),"row-id":e.rowId,placement:e.placement,transition:e.transition,onVisibleChange:s[1]||(s[1]=o=>f("visibleChange",o))},{pTrigger:a(()=>[N(e.$slots,"default",{},()=>[w("div",{style:{display:"inline-block"},onClick:s[0]||(s[0]=g(()=>{},["stop"]))},[v(I,{icon:e.dropdownIcon,text:e.dropdownText},null,8,["icon","text"])])])]),_:3},8,["actionList","row-id","placement","transition"])):B("",!0)]))}});export{Z as _};
