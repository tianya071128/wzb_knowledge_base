import{d as f,c as h,n as v,r as p,x as g,y as P,a9 as w,o as n,b as x,w as c,i as T,j as L,I as D,f as u,F as k,g as S,p as z,t as m,L as b,a$ as j,V as F}from"./index-b80d5ef5.js";const C=f({__name:"AggregationLabel",props:{id:{},azTextTooltipProps:{}},setup(y){const s=y,l=h(()=>v(s.id)),d=p(),r=g(),o=p([]),_=async()=>{if(!l.value.length)return Promise.reject({msg:"请传入聚合表id!",loadState:j.danger});const t=await Promise.all(l.value.map(e=>r.getAggregateInfo(e)));o.value=t.map(e=>F(e)?e:void 0)};return P([()=>s.id],(t,e)=>{var a;w(t,e)||(a=d.value)==null||a.reload()}),(t,e)=>(n(),x(b,{ref_key:"loadingDataRef",ref:d,style:{"max-width":"100%"},load:_,delay:300,inline:""},{default:c(()=>[T(L,D({style:{"max-width":"100%"}},t.azTextTooltipProps),{default:c(()=>[(n(!0),u(k,null,S(o.value,(a,i)=>(n(),u("span",{key:i,class:z({red:!a})},m(a?a==null?void 0:a.name:"聚合表已被删除")+" "+m(o.value.length-1!==i?"; ":""),3))),128))]),_:1},16)]),_:1},512))}}),R=f({__name:"FormLabel",props:{entryId:{},appId:{},azTextTooltipProps:{}},setup(y){const s=y,l=h(()=>v(s.entryId)),d=p(),r=p([]),o=g(),_=async()=>{if(!l.value.length)return Promise.reject({msg:"请传入条目id!",loadState:j.danger});if(s.appId){const t=await o.getForm(s.appId);r.value=l.value.map(e=>t.find(a=>a.id===e))}else{const t=await Promise.all(l.value.map(e=>o.getFormInfo(e)));r.value=t.map(e=>F(e)?e:void 0)}};return P([()=>s.entryId,()=>s.appId],(t,e)=>{var a;w(t,e)||(a=d.value)==null||a.reload()}),(t,e)=>(n(),x(b,{ref_key:"loadingDataRef",ref:d,style:{"max-width":"100%"},load:_,delay:300,inline:""},{default:c(()=>[T(L,D({style:{"max-width":"100%"}},t.azTextTooltipProps),{default:c(()=>[(n(!0),u(k,null,S(r.value,(a,i)=>(n(),u("span",{key:i,class:z({red:!a})},m(a?a==null?void 0:a.name:"表单已被删除")+" "+m(r.value.length-1!==i?"; ":""),3))),128))]),_:1},16)]),_:1},512))}});export{R as _,C as a};
