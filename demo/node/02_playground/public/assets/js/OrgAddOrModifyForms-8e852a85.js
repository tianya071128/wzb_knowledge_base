import{d as M,c as N,cc as T,o as _,f as U,i as l,w as s,m as c,t as p,B as C,bs as x,bT as B,by as $,bU as h,r as O,v as J,bK as R,b as y,ad as q,bu as z,bh as K,l as I,C as L,bv as Q,so as G,aN as F,sp as H,ac as P,Q as W,bm as X,_ as Y}from"./index-b80d5ef5.js";import{_ as Z}from"./SelectOrg.vue_vue_type_script_setup_true_lang-3e503345.js";const ee=M({__name:"OrgJobDetails",props:{details:{}},setup(f){const v=f,i=N(()=>v.details.status===T?"success":"danger");return(o,n)=>{const r=B,g=$,b=h;return _(),U("div",null,[l(b,{class:"user_center-desciptions",border:!0,column:1},{default:s(()=>[l(r,{label:"所属部门"},{default:s(()=>[c(p(o.details.orgName||"-"),1)]),_:1}),l(r,{label:"岗位名称"},{default:s(()=>[c(p(o.details.jobName||"-"),1)]),_:1}),l(r,{label:"状态"},{default:s(()=>[l(g,{type:i.value},{default:s(()=>[c(p(C(x)(o.details.status,"status")||"-"),1)]),_:1},8,["type"])]),_:1}),l(r,{label:"说明"},{default:s(()=>[c(p(o.details.remark||"-"),1)]),_:1})]),_:1})])}}}),ae=M({__name:"OrgAddOrModifyForms",props:{drawerModel:{type:Boolean},rowData:{},comState:{},selectedOrg:{}},emits:["update:drawerModel","refresh"],setup(f,{emit:v}){const i=v,o=f,n=O(),r=J(o,"drawerModel",i),g=()=>{var t;r.value=!1,(t=n.value)==null||t.resetFields()},b=R({status:[{required:!0,message:"请选择状态",trigger:"change"}],jobName:[{required:!0,message:"请输入岗位名称",trigger:"change"}]}),V=t=>o.comState===t,m={orgName:"",orgId:"",jobName:"",remark:"",status:0},e=O({...m}),w=N(()=>o.comState==="view"),D=N(()=>({view:"查看岗位",edit:"编辑岗位",add:"新增岗位"})[o.comState]),E=async t=>{var a;(a=n.value)==null||a.validate(),V("edit")?(await G(e.value),F.success("修改岗位成功")):(await H(e.value),F.success("新增岗位成功")),t==="submitContinue"&&(e.value={...m,orgId:e.value.orgId,orgName:e.value.orgName},setTimeout(()=>{var d;(d=n.value)==null||d.clearValidate()},100)),await i("refresh")},S=t=>{var a;e.value.orgName=((a=t==null?void 0:t[0])==null?void 0:a.name)??""},j=async()=>{e.value=V("add")?{...m}:{...o.rowData||m},o.selectedOrg.orgId&&(e.value=Object.assign(e.value,o.selectedOrg)),setTimeout(()=>{var t;(t=n.value)==null||t.clearValidate()},100)};return(t,a)=>{const d=P,k=W,A=X;return _(),y(Q,{modelValue:C(r),"onUpdate:modelValue":a[5]||(a[5]=u=>L(r)?r.value=u:null),title:D.value,onClose:g,"show-load":j},q({default:s(()=>[w.value?I("",!0):(_(),y(A,{key:0,ref_key:"ruleFormRef",ref:n,rules:b,model:e.value,"label-width":"100px","label-position":"left"},{default:s(()=>[l(d,{label:"所属部门",prop:"orgId"},{default:s(()=>[l(Z,{modelValue:e.value.orgId,"onUpdate:modelValue":a[0]||(a[0]=u=>e.value.orgId=u),clearable:"",onChange:S},null,8,["modelValue"])]),_:1}),l(d,{label:"岗位名称",prop:"jobName"},{default:s(()=>[l(k,{modelValue:e.value.jobName,"onUpdate:modelValue":a[1]||(a[1]=u=>e.value.jobName=u),placeholder:"请输入岗位名称"},null,8,["modelValue"])]),_:1}),l(d,{label:"状态",prop:"status"},{default:s(()=>[l(K,{modelValue:e.value.status,"onUpdate:modelValue":a[2]||(a[2]=u=>e.value.status=u)},null,8,["modelValue"])]),_:1}),l(d,{label:"说明"},{default:s(()=>[l(k,{type:"textarea",modelValue:e.value.remark,"onUpdate:modelValue":a[3]||(a[3]=u=>e.value.remark=u),placeholder:"请输入说明"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])),w.value?(_(),y(ee,{key:1,details:e.value},null,8,["details"])):I("",!0)]),_:2},[w.value?void 0:{name:"footer",fn:s(()=>[l(z,{editMode:V("edit"),onClose:a[4]||(a[4]=u=>r.value=!1),"on-submit":E},null,8,["editMode"])]),key:"0"}]),1032,["modelValue","title"])}}});const se=Y(ae,[["__scopeId","data-v-6adc32fe"]]);export{se as O};
