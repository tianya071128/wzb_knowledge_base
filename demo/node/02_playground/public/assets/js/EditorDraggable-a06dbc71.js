import{d as A,R as K,r as P,o,f as c,i as E,w as D,k as p,p as R,h as b,b as u,B as r,dQ as j,l as g,F as V,a4 as B,I as L,C as M,eA as O,b2 as Q,h1 as $,av as U,eB as _,_ as q}from"./index-b80d5ef5.js";const G=A({inheritAttrs:!1,__name:"EditorDraggable",props:{modelValue:{},list:{},deleteDisabledCallback:{},rankCallback:{},deleteCallback:{},isDelete:{type:Boolean,default:!0},isDeleteConfirm:{type:Boolean},deleteConfirmTitle:{default:"确认要删除"},itemKey:{default:"id"},itemClass:{},emptyText:{default:"没有数据"},isEmpty:{type:Boolean},widthExpansion:{default:"20px"}},emits:["update:list"],setup(w,{emit:I}){const a=w,i=K(a,"list",I),k=async(e,t)=>{var d;if($(a.deleteCallback)&&await a.deleteCallback(t,e)===!1)return;(d=a.modelValue)==null||d.splice(e,1);const n=[...i.value??[]];n.splice(e,1),i.value=[...n]},m=P(!1),T=()=>{m.value=!0},F=()=>{m.value=!1},N=e=>{var t;return!((t=a.rankCallback)!=null&&t.call(a,e.relatedContext.element))},S=e=>{if(typeof a.itemClass=="string")return a.itemClass;if($(a.itemClass))return a.itemClass(e)};return(e,t)=>{var f,C;const n=U,d=_;return o(),c(V,null,[E(r(O),L({tag:"div",modelValue:r(i),"onUpdate:modelValue":t[0]||(t[0]=l=>M(i)?i.value=l:null),list:e.modelValue,group:{name:"optionItem",pull:!1},animation:"300","ghost-class":"editor-draggable-ghost-item",chosenClass:"editor-draggable-ghost-item",handle:".editor-draggable-rank",class:"editor-draggable-container",style:{"--az-width-expansion":e.widthExpansion},move:N,"item-key":e.itemKey,onStart:T,onEnd:F},e.$attrs),{item:D(({element:l,index:s})=>{var y,v,h;return[p("div",null,[p("div",{class:R(["editor-draggable-item",[m.value&&"is-draggable",S(l)]])},[b(e.$slots,"default",{element:l,index:s},void 0,!0),p("div",{class:"editor-draggable-operation"},[(y=e.rankCallback)!=null&&y.call(e,l)?g("",!0):(o(),u(n,{key:0,underline:!1,title:"移动",icon:r(j),class:"editor-draggable-icon editor-draggable-rank"},null,8,["icon"])),e.isDelete?(o(),c(V,{key:1},[e.isDeleteConfirm&&!((v=e.deleteDisabledCallback)!=null&&v.call(e,s,l))?(o(),u(d,{key:0,title:e.deleteConfirmTitle,onConfirm:z=>k(s,l)},{reference:D(()=>[E(n,{type:"danger",underline:!1,title:"删除",icon:r(B),class:"editor-draggable-icon"},null,8,["icon"])]),_:2},1032,["title","onConfirm"])):(o(),u(n,{key:1,type:"danger",underline:!1,title:"删除",disabled:(h=e.deleteDisabledCallback)==null?void 0:h.call(e,s,l),icon:r(B),onClick:z=>k(s,l),class:"editor-draggable-icon"},null,8,["disabled","icon","onClick"]))],64)):g("",!0),b(e.$slots,"btn-after",{element:l,index:s},void 0,!0)])],2),e.$slots.son?(o(),c("div",{key:0,class:"editor-draggable-son"},[b(e.$slots,"son",{element:l,index:s},void 0,!0)])):g("",!0)])]}),_:3},16,["modelValue","list","style","item-key"]),e.isEmpty&&!((f=e.modelValue)!=null&&f.length)&&!((C=r(i))!=null&&C.length)?(o(),u(Q,{key:0,description:e.emptyText,class:"pb-0 w100"},null,8,["description"])):g("",!0)],64)}}});const W=q(G,[["__scopeId","data-v-56dff501"]]);export{W as E};
