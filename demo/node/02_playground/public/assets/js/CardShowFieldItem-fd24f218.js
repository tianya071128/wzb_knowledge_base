import{kw as C,c as F,kx as V,b_ as P,ia as z,g2 as p,dW as W,e1 as _,i8 as j,d as L,r as M,B as a,o as c,b as B,w as b,jC as q,f as h,h as y,i as w,ad as A,I as G,b1 as H,F as g,ib as X,L as T,l as D,_ as N,bX as x,a as J,ex as $,ew as R,g as K,a2 as O,k as v,j as Q}from"./index-b80d5ef5.js";function U(l){const{totalFields:i,LoadingDataRef:t,loadFields:r}=C(l),u=F(()=>(l.showField??[]).filter(n=>{const e=V(n.fieldId);return!(e&&!P(e,"isFormItem"))})),f=F(()=>{const n={formConfig:z(),fields:u.value.reduce((o,d)=>{const s=p(d.fieldId,i.value);if(!s)return o;const m={...s.field,options:{...s.field.options,span:l.span??24,label:d.alias||s.field.options.label,show:!0}};return"fields"in m&&(m.fields=(d.child??[]).reduce((k,S)=>{const I=p(S.fieldId,i.value);if(!I)return k;const E={...I.field,options:{...I.field.options,span:24,label:S.alias||I.field.options.label,show:!0}};return[...k,E]},[])),[...o,m]},[])},e={appId:"",entryId:l.entryId??"",mode:W.pureView,formData:n.fields.reduce((o,d)=>{var s;return{...o,[d.fieldId]:_({entryId:l.entryId,fieldId:d.fieldId,rowData:(s=l.tableData)==null?void 0:s[0],subformSeparate:j})}},{})};return{formDesigner:n,options:e}});return{LoadingDataRef:t,loadFields:r,fields:i,normlShowFields:u,formRenderProps:f}}const Y=L({__name:"FormShowField",props:{entryId:{},sourceId:{},showField:{},showNum:{},tableData:{},span:{}},setup(l,{expose:i}){const t=l,{LoadingDataRef:r,loadFields:u,fields:f,normlShowFields:n,formRenderProps:e}=U(t),o=M();return i({tableShowFieldRef:o}),(d,s)=>(d.entryId||d.sourceId)&&a(n).length?(c(),B(T,{key:0,load:a(u),ref_key:"LoadingDataRef",ref:r},{default:b(()=>[d.showNum===a(q).multiple?(c(),h(g,{key:0},[y(d.$slots,"operate",{},void 0,!0),w(H,G({ref_key:"tableShowFieldRef",ref:o,fields:a(f),showFields:a(n),data:d.tableData,sourceId:d.sourceId,"max-height":"500"},d.$attrs),A({_:2},[d.$slots["before-column"]?{name:"before-column",fn:b(()=>[y(d.$slots,"before-column",{},void 0,!0)]),key:"0"}:void 0,d.$slots.column?{name:"column",fn:b(()=>[y(d.$slots,"column",{},void 0,!0)]),key:"1"}:void 0]),1040,["fields","showFields","data","sourceId"])],64)):(c(),h(g,{key:1},[y(d.$slots,"operate",{},void 0,!0),w(a(X),{class:"link-query-form","form-designer":a(e).formDesigner,options:a(e).options},null,8,["form-designer","options"])],64))]),_:3},8,["load"])):D("",!0)}});const de=N(Y,[["__scopeId","data-v-67007d51"]]);function ae(l){const t=x(l.target).width,r=F(()=>{if(!t.value)return 0;let f=1;for(const[n,e]of l.numList)if(t.value<=n){f=e;break}return f}),u=F(()=>r.value===0?"0":`calc((100% - ${l.padding??"10px"} * ${r.value-1}) / ${r.value})`);return{num:r,width:t,itemWidth:u}}const Z=L({__name:"CardShowFieldItem",props:{rowData:{},headerFieldId:{},fields:{},entryId:{},sourceId:{},num:{default:2},showFields:{}},setup(l){const i=l,{totalFields:t,LoadingDataRef:r,loadFields:u}=C(i),f=F(()=>(i.showFields??[]).filter(e=>{const o=p(e.fieldId,t.value);return!(!o||o.field.type===J.subform)})),n=function(e){const o=p(e.fieldId,t.value);return e.alias||(o==null?void 0:o.field.options.label)||""};return(e,o)=>(c(),B(T,{load:a(u),ref_key:"LoadingDataRef",ref:r,class:"card_show-item",delay:300},{default:b(()=>{var d;return[e.headerFieldId?(c(),h("div",{key:0,class:"card_show-item-header"},[w($,{bubble:"",content:a(_)({rowData:e.rowData,fieldId:e.headerFieldId}),field:(d=a(p)(e.headerFieldId,a(t)))==null?void 0:d.field,emptyText:"-",isBold:"",mode:a(R).list},null,8,["content","field","mode"])])):D("",!0),f.value.length?(c(),h("div",{key:1,class:"item-content"},[(c(!0),h(g,null,K(f.value,s=>{var m;return c(),h("div",{class:"show-field",key:s.fieldId,style:O({width:`calc((100% - 10px * ${e.num-1}) / ${e.num})`})},[v("div",{class:"field-label"},[w(Q,{style:{"max-width":"100%"},content:n(s)},null,8,["content"])]),v("span",null,"ï¼š"),v("div",{class:"field-content"},[w($,{bubble:"",content:a(_)({rowData:e.rowData,fieldId:s.fieldId}),field:(m=a(p)(s.fieldId,a(t)))==null?void 0:m.field,emptyText:"-",mode:a(R).list},null,8,["content","field","mode"])])],4)}),128))])):D("",!0)]}),_:1},8,["load"]))}});const oe=N(Z,[["__scopeId","data-v-4f568fd2"]]);export{oe as C,de as F,ae as u};
