import{d as y,r as _,v as C,y as w,o as g,b as $,w as u,k as F,i as n,m as v,I as b,B as V,C as T,U as B,bn as x,_ as k,c as D,f as E,h as U,H as I,F as N,bm as R,t as W,p as z,eu as S,ae as A}from"./index-b80d5ef5.js";import{_ as H}from"./Formula.vue_vue_type_style_index_0_lang-ef444f24.js";const M=y({__name:"FormulaDialog",props:{visible:{type:Boolean},modelValue:{}},emits:["update:visible","update:modelValue"],setup(c,{emit:f}){const o=c,r=f,t=_(),s=C(o,"visible",r),d=_(o.modelValue??"");w([()=>o.modelValue,()=>o.visible],()=>{var e;o.visible&&(d.value=o.modelValue??"",(e=t.value)==null||e.resetFntip())});const a=async()=>{var e,l;await((e=t.value)==null?void 0:e.validate()),r("update:modelValue",((l=d.value)==null?void 0:l.trim())??""),s.value=!1};return(e,l)=>{const m=B,i=x;return g(),$(i,{modelValue:V(s),"onUpdate:modelValue":l[2]||(l[2]=p=>T(s)?s.value=p:null),title:"编辑函数",width:"950",class:"formula-dialog",appendToBody:"","close-on-click-modal":!1},{footer:u(()=>[F("span",{class:"dialog-footer"},[n(m,{onClick:l[1]||(l[1]=p=>s.value=!1)},{default:u(()=>[v("取消")]),_:1}),n(m,{type:"primary",onClick:a},{default:u(()=>[v("确定")]),_:1})])]),default:u(()=>[n(H,b({ref_key:"formulaRef",ref:t,modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=p=>d.value=p)},e.$attrs),null,16,["modelValue"])]),_:1},8,["modelValue"])}}});const P=k(M,[["__scopeId","data-v-2f670f05"]]),h=y({__name:"FormulaWrapper",props:{btnText:{default:"设置函数"},selectBtnText:{default:"已设置函数"},modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(c,{emit:f}){const o=c,r=f,t=D({get(){return o.modelValue??""},set(a){r("update:modelValue",a??"")}}),s=_(!1),d=()=>{o.disabled||(s.value=!0)};return(a,e)=>{const l=B,m=R;return g(),E(N,null,[F("div",b({class:"w100",style:{cursor:"pointer"}},a.$attrs,{onClick:d}),[U(a.$slots,"default",{},()=>[n(l,{class:z(["w100 formula-placeholder",{"is-set":t.value}]),icon:t.value?V(S):V(A),disabled:a.disabled,plain:""},{default:u(()=>[v(W(t.value?a.selectBtnText:a.btnText),1)]),_:1},8,["icon","disabled","class"])],!0)],16),n(m,null,{default:u(()=>[n(I,{"hide-label":""},{default:u(()=>[n(P,b({visible:s.value,"onUpdate:visible":e[0]||(e[0]=i=>s.value=i),modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=i=>t.value=i)},a.$attrs),null,16,["visible","modelValue"])]),_:1})]),_:1})],64)}}});const G=k(h,[["__scopeId","data-v-5c4bcf77"]]);export{G as F};
