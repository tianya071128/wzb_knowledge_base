import{iO as U,kg as b,pb as X,iQ as Z,d as j,iV as ee,iW as ae,gf as se,pc as te,r as c,c as u,pd as p,y as le,bx as re,o,f as d,h as E,k as V,t as ne,B as a,p as g,F as P,I as oe,l as m,b as ie,w as ce,a2 as ue,j1 as de,aT as fe,pe as ve,j3 as pe,pf as me,kA as $,pg as ye,ph as ge,j5 as we}from"./index-b80d5ef5.js";import{E as he}from"./el-image-viewer-e054799e.js";const Se=U({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:b([String,Object])},previewSrcList:{type:b(Array),default:()=>X([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:b(String)}}),Le={load:r=>r instanceof Event,error:r=>r instanceof Event,switch:r=>Z(r),close:()=>!0,show:()=>!0},ke=["src","loading","crossorigin"],ze={key:0},be=j({name:"ElImage",inheritAttrs:!1}),Ee=j({...be,props:Se,emits:Le,setup(r,{emit:f}){const s=r;let I="";const{t:M}=ee(),n=ae("image"),x=se(),F=te(),w=c(),v=c(!1),i=c(!0),h=c(!1),y=c(),l=c(),H=p&&"loading"in HTMLImageElement.prototype;let S,L;const _=u(()=>[n.e("inner"),k.value&&n.e("preview"),i.value&&n.is("loading")]),D=u(()=>x.style),K=u(()=>{const{fit:e}=s;return p&&e?{objectFit:e}:{}}),k=u(()=>{const{previewSrcList:e}=s;return Array.isArray(e)&&e.length>0}),R=u(()=>{const{previewSrcList:e,initialIndex:t}=s;let O=t;return t>e.length-1&&(O=0),O}),C=u(()=>s.loading==="eager"?!1:!H&&s.loading==="lazy"||s.lazy),z=()=>{p&&(i.value=!0,v.value=!1,w.value=s.src)};function W(e){i.value=!1,v.value=!1,f("load",e)}function Y(e){i.value=!1,v.value=!0,f("error",e)}function B(){ye(y.value,l.value)&&(z(),T())}const N=ge(B,200,!0);async function A(){var e;if(!p)return;await fe();const{scrollContainer:t}=s;ve(t)?l.value=t:pe(t)&&t!==""?l.value=(e=document.querySelector(t))!=null?e:void 0:y.value&&(l.value=me(y.value)),l.value&&(S=$(l,"scroll",N),setTimeout(()=>B(),100))}function T(){!p||!l.value||!N||(S==null||S(),l.value=void 0)}function q(e){if(e.ctrlKey){if(e.deltaY<0)return e.preventDefault(),!1;if(e.deltaY>0)return e.preventDefault(),!1}}function Q(){k.value&&(L=$("wheel",q,{passive:!1}),I=document.body.style.overflow,document.body.style.overflow="hidden",h.value=!0,f("show"))}function G(){L==null||L(),document.body.style.overflow=I,h.value=!1,f("close")}function J(e){f("switch",e)}return le(()=>s.src,()=>{C.value?(i.value=!0,v.value=!1,T(),A()):z()}),re(()=>{C.value?A():z()}),(e,t)=>(o(),d("div",{ref_key:"container",ref:y,class:g([a(n).b(),e.$attrs.class]),style:ue(a(D))},[v.value?E(e.$slots,"error",{key:0},()=>[V("div",{class:g(a(n).e("error"))},ne(a(M)("el.image.error")),3)]):(o(),d(P,{key:1},[w.value!==void 0?(o(),d("img",oe({key:0},a(F),{src:w.value,loading:e.loading,style:a(K),class:a(_),crossorigin:e.crossorigin,onClick:Q,onLoad:W,onError:Y}),null,16,ke)):m("v-if",!0),i.value?(o(),d("div",{key:1,class:g(a(n).e("wrapper"))},[E(e.$slots,"placeholder",{},()=>[V("div",{class:g(a(n).e("placeholder"))},null,2)])],2)):m("v-if",!0)],64)),a(k)?(o(),d(P,{key:2},[h.value?(o(),ie(a(he),{key:0,"z-index":e.zIndex,"initial-index":a(R),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:G,onSwitch:J},{default:ce(()=>[e.$slots.viewer?(o(),d("div",ze,[E(e.$slots,"viewer")])):m("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):m("v-if",!0)],64)):m("v-if",!0)],6))}});var Ie=de(Ee,[["__file","image.vue"]]);const Ne=we(Ie);export{Ne as E};
