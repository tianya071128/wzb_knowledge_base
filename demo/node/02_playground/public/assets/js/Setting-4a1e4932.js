import{d as z,gY as P,r as F,c as $,o as c,f as U,i as e,w as t,k as L,m as S,K as H,H as V,F as T,g as B,B as y,a3 as N,b as A,l as J,T as K,Y as D,a8 as O,a as m,i9 as M,ao as Y,ap as h,U as G,L as Q,eR as W,Ad as X,Ae as Z,hp as x,Ab as ee,t as le,h7 as oe,E as ie,ab as te}from"./index-b80d5ef5.js";import{_ as re}from"./FormFieldHeaderEditor.vue_vue_type_script_setup_true_lang-6c993e5c.js";import{E}from"./routePage-70460a50.js";import{B as q}from"./ButtonState-cb54910b.js";import{_ as de}from"./SelectForm.vue_vue_type_script_setup_true_lang-0170236d.js";import{C as ae}from"./ConditionWrapper-43da1676.js";import{A as ne}from"./AzInputNumber-d6212644.js";import{_ as ue}from"./SelectCascaderEntry.vue_vue_type_script_setup_true_lang-673c5dca.js";import{S as me}from"./SetFieldDefault-5fc1ae2a.js";import{_ as pe,a as se}from"./FieldOtherEditor.vue_vue_type_script_setup_true_lang-a2d4ed75.js";import{_ as fe}from"./FieldWidthEditor.vue_vue_type_script_setup_true_lang-3f895778.js";import"./useQueryTab-05fa7456.js";import"./useExtractQuery-f96f705c.js";import"./CardTabs-ca59b5e9.js";import"./EditItemTargetForm.vue_vue_type_script_setup_true_lang-199df786.js";import"./SelectEntryAndOther-76a65b2d.js";import"./FieldCondition-1c72aa9d.js";import"./Base.vue_vue_type_script_setup_true_lang-03820366.js";import"./useFieldMaxWidth-d82f063e.js";import"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import"./index-318b68f4.js";import"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import"./useMultipleVal-904406c1.js";import"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import"./el-dropdown-item-455a6589.js";import"./CardShowFieldItem-fd24f218.js";import"./LoadingData-195d0581.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./ComponentParamsSetWrapper-71afc840.js";import"./default-component-4c80201b.js";import"./SelectFieldByMultEntry-84abd0c3.js";import"./fieldDefaultComponent-58752d9c.js";import"./Base.vue_vue_type_script_setup_true_lang-4fbdbc85.js";import"./DaterangeBase.vue_vue_type_script_setup_true_lang-bec97540.js";import"./InputBase.vue_vue_type_script_setup_true_lang-ffcf63f1.js";import"./Base-9b7f3306.js";/* empty css                          */import"./index-f0ed738f.js";import"./NumberBase.vue_vue_type_script_setup_true_lang-745b39c5.js";import"./Base-c9aa1df0.js";/* empty css                        */import"./SliderBase.vue_vue_type_script_setup_true_lang-5d73415b.js";import"./el-input-number-c15b1cc7.js";import"./TextareaBase.vue_vue_type_script_setup_true_lang-7091b2cb.js";import"./TimeBase.vue_vue_type_script_setup_true_lang-ea537bf3.js";import"./TimerangeBase.vue_vue_type_script_setup_true_lang-0827c241.js";import"./UploadFileBase.vue_vue_type_script_setup_true_lang-0c253daa.js";import"./UploadImgBase.vue_vue_type_script_setup_true_lang-d23c1306.js";import"./CooperateEnterpriseBase.vue_vue_type_script_setup_true_lang-23720971.js";import"./CooperatePersonnelBase.vue_vue_type_script_setup_true_lang-adcd0db7.js";import"./Base.vue_vue_type_script_setup_true_lang-0e9a0e2c.js";import"./Base.vue_vue_type_script_setup_true_lang-aa25657d.js";import"./ParamsSet.vue_vue_type_script_setup_true_lang-37c252c5.js";import"./MessageRemindConfig-98484405.js";import"./utils-a7200637.js";import"./messageTemplate-8658e6b4.js";import"./routePage.vue_vue_type_script_setup_true_lang-efb79c93.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./CollageTable-791f0954.js";import"./index-617ab4b4.js";import"./FieldConditionView-ad1b057c.js";import"./SetAuth-50c8e12e.js";import"./usePublicRelease-2335b254.js";import"./Qrcode-850531ac.js";import"./html2canvas.esm-0543ed55.js";import"./DesignerDialog-22d70853.js";import"./Designer.vue_vue_type_script_setup_true_lang-3c7dafd1.js";import"./form-success-1777d0da.js";import"./keyBy-8fcfdd74.js";import"./_createAggregator-d66ed64c.js";import"./TableRender-bab4d661.js";import"./Resize-eb80395d.js";import"./FormShare-9773b44c.js";import"./dataShare-2d7ae3f7.js";import"./SelectDataSourece-70a968c3.js";import"./useTransformColor-38b5da33.js";import"./SetFieldAuth-3d0b80a0.js";import"./DesignerTabs-a9795edf.js";import"./Base-3571a39e.js";import"./AddFormDataBtnPlus-a775412e.js";import"./formDesigner-462b10d7.js";import"./Base.vue_vue_type_script_setup_true_lang-832ddae3.js";import"./useValidateError-9f6399dc.js";import"./AutoNumberBase.vue_vue_type_script_setup_true_lang-56f78b68.js";import"./PluginBase-56c4bf37.js";import"./RichTextBase-228f0924.js";import"./Base-11a86176.js";import"./UploadWrapper.vue_vue_type_script_setup_true_lang-4553cd48.js";import"./index-c89dfa90.js";import"./TemplateCustomEntry.vue_vue_type_script_setup_true_lang-346d01b1.js";import"./TextBase.vue_vue_type_script_setup_true_lang-09411e7a.js";import"./BtnDisplay.vue_vue_type_script_setup_true_lang-cbe1b7c6.js";import"./Base.vue_vue_type_script_setup_true_lang-392ceecd.js";import"./GridBase.vue_vue_type_script_setup_true_lang-f18077d3.js";import"./Base-16c93ea0.js";import"./TableBase-393fac1a.js";import"./TabsBase.vue_vue_type_style_index_0_lang-861f3fae.js";import"./DepartmentBase.vue_vue_type_script_setup_true_lang-6f309530.js";import"./MemberBase.vue_vue_type_script_setup_true_lang-77a28117.js";import"./AddOrEditValidate.vue_vue_type_style_index_0_lang-5bd5a73c.js";import"./Formula.vue_vue_type_style_index_0_lang-ef444f24.js";import"./index-8e050109.js";import"./DataSoureceWrapper-047a1c9d.js";import"./ComponentPostAction-12970ad1.js";import"./InternalComponentSelectPlus-00c8c38f.js";import"./app.vue_vue_type_script_setup_true_lang-59fd2507.js";import"./enum-7a2ae6a9.js";import"./index-20639231.js";import"./el-space-0d01b33a.js";import"./ButtonSelectField.vue_vue_type_script_setup_true_lang-aae15f71.js";import"./cloneDeep-dc1c677b.js";import"./isTypedArray-10beecc7.js";import"./el-collapse-transition-4ed993c7.js";import"./defaultValue-7c7c87ea.js";import"./EditorDraggable-a06dbc71.js";import"./typeof-7fd5df1e.js";import"./utils-052731c0.js";import"./designerRender.vue_vue_type_script_setup_true_lang-68b31d85.js";import"./FormulaWrapper-92a83208.js";function j(){return{expirationTime:7,numberType:0,numberNameFieldId:"",numberFieldId:"",numberEntryId:"",numberFilter:[]}}const ve=z({__name:"LegalReviewConfig",props:{field:{}},setup(_){const f=_,p=P(),I=F(),o=F(j()),g={numberEntryId:[{required:!0,message:"请选择",trigger:"change"}],numberFieldId:[{required:!0,message:"请选择",trigger:"change"}],numberNameFieldId:[{required:!0,message:"请选择",trigger:"change"}],numberFilter:[{required:!0,message:"请配置",trigger:"change"}]},l=F(!1),n=()=>{o.value=D(f.field.options.legalReviewconfig??j()),l.value=!0,setTimeout(()=>{var s,i,R,d;f.field.options.legalReviewconfig?(i=(s=I.value)==null?void 0:s.ruleFormRef)==null||i.validate():(d=(R=I.value)==null?void 0:R.ruleFormRef)==null||d.clearValidate()},40)},v=()=>{o.value.numberFieldId="",o.value.numberNameFieldId="",o.value.numberFilter=[]},w=$(()=>o.value.numberEntryId===p.entryId?void 0:o.value.numberEntryId),C=$(()=>o.value.numberEntryId===p.entryId?p.totalFields:void 0),k=s=>O(s,{blockFilter(i){return i.type===m.subform},excludeFilter(i){return![m.input,m.textarea,m.autoNumber,m.radio,m.multiple].includes(i.type)||i.source===M.system}}),r=async()=>{var s,i;await((i=(s=I.value)==null?void 0:s.ruleFormRef)==null?void 0:i.validate()),f.field.options.legalReviewconfig=o.value,l.value=!1};return(s,i)=>{const R=Y,d=h,a=G;return c(),U(T,null,[e(E,{label:"法审设置",id:`${s.field.fieldId}.legalReviewconfig`,required:""},{default:t(()=>[e(q,{text:"设置",onClick:n,isSet:!!s.field.options.legalReviewconfig},null,8,["isSet"])]),_:1},8,["id"]),e(K,{modelValue:l.value,"onUpdate:modelValue":i[7]||(i[7]=u=>l.value=u),"append-to-body":"",title:"设置","close-on-click-modal":!1,width:"500px"},{footer:t(()=>[L("span",{class:"dialog-footer"},[e(a,{onClick:i[6]||(i[6]=u=>l.value=!1)},{default:t(()=>[S("取消")]),_:1}),e(a,{type:"primary",onClick:r},{default:t(()=>[S("确定")]),_:1})])]),default:t(()=>[e(H,{ref_key:"azFormRef",ref:I,model:o.value,rules:g,"label-width":"120"},{default:t(()=>[e(V,{label:"法审过期时间"},{default:t(()=>[L("div",null,[e(ne,{modelValue:o.value.expirationTime,"onUpdate:modelValue":i[0]||(i[0]=u=>o.value.expirationTime=u),precision:0,placeholder:"过期时间","controls-position":"right",min:1,suffix:"天",max:180,controls:!1,valueOnClear:7},null,8,["modelValue"])])]),_:1}),e(V,{label:"审查类型编号",required:""},{default:t(()=>[e(d,{modelValue:o.value.numberType,"onUpdate:modelValue":i[1]||(i[1]=u=>o.value.numberType=u),placeholder:"请选择"},{default:t(()=>[(c(),U(T,null,B([{label:"表单字段",value:0}],(u,b)=>e(R,{key:b,label:u.label,value:u.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(V,{label:"类型编号表单",prop:"numberEntryId"},{default:t(()=>[e(de,{modelValue:o.value.numberEntryId,"onUpdate:modelValue":i[2]||(i[2]=u=>o.value.numberEntryId=u),placeholder:"请选择类型编号表单",appId:y(p).appId,currentEntryId:y(p).entryId,onChange:v},null,8,["modelValue","appId","currentEntryId"])]),_:1}),e(V,{label:"类型编号字段",prop:"numberFieldId"},{default:t(()=>[e(N,{modelValue:o.value.numberFieldId,"onUpdate:modelValue":i[3]||(i[3]=u=>o.value.numberFieldId=u),placeholder:"请选择类型编号字段",entryId:w.value,fields:C.value,filter:k,disabled:!o.value.numberEntryId},null,8,["modelValue","entryId","fields","disabled"])]),_:1}),e(V,{label:"类型名称字段",prop:"numberNameFieldId"},{default:t(()=>[e(N,{modelValue:o.value.numberNameFieldId,"onUpdate:modelValue":i[4]||(i[4]=u=>o.value.numberNameFieldId=u),placeholder:"请选择类型名称字段",entryId:w.value,fields:C.value,filter:k,disabled:!o.value.numberEntryId},null,8,["modelValue","entryId","fields","disabled"])]),_:1}),o.value.numberEntryId!==y(p).entryId?(c(),A(V,{key:0,label:"编号过滤",prop:"numberFilter"},{default:t(()=>[e(ae,{condition:o.value.numberFilter,"onUpdate:condition":i[5]||(i[5]=u=>o.value.numberFilter=u),validate:"",conditionPlaceholder:"选择来源表单控件",conditionForm:o.value.numberEntryId,compareFields:y(p).form.fields,disabled:!o.value.numberEntryId},null,8,["condition","conditionForm","compareFields","disabled"])]),_:1})):J("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}}),be=z({__name:"LegalReviewFill",props:{field:{}},setup(_){const f=_,p=P(),I={appId:"",entryId:""},o=F(D(I)),g=F(!1),l=F("record"),n=d=>{l.value=d,o.value=D((l.value==="record"?f.field.options.recordFill:f.field.options.detailsFill)??I),g.value=!0},v=F(),w=F(),C=F([]),k=F([]),r=d=>d.map(a=>({label:a.fieldName,value:a.fieldKey,children:a.children&&r(a.children),fieldType:a.type===1?m.radio:a.type===2?m.subform:a.type===3?m.date:m.input})),s=async()=>{if(l.value==="record"){const d=await X();C.value=r(d??[])}else{const d=await Z();k.value=r(d??[])}},i=$({get(){return{appId:o.value.appId,entryId:o.value.entryId}},set(d){o.value.appId=(d==null?void 0:d.appId)??"",o.value.entryId=(d==null?void 0:d.entryId)??"",o.value.fill=[]}}),R=async()=>{var d,a,u;await Promise.all([(a=(d=w.value)==null?void 0:d.ruleFormRef)==null?void 0:a.validate(),(u=v.value)==null?void 0:u.validate()]),l.value==="record"?f.field.options.recordFill=o.value:f.field.options.detailsFill=o.value,g.value=!1};return(d,a)=>{const u=G;return c(),U(T,null,[e(E,{label:"法审后审查记录填充到",id:`${d.field.fieldId}.recordFill`},{default:t(()=>[e(q,{text:"设置",onClick:a[0]||(a[0]=b=>n("record")),isSet:!!d.field.options.recordFill},null,8,["isSet"])]),_:1},8,["id"]),e(E,{label:"法审后审查明细填充到",id:`${d.field.fieldId}.detailsFill`},{default:t(()=>[e(q,{text:"设置",onClick:a[1]||(a[1]=b=>n("details")),isSet:!!d.field.options.detailsFill},null,8,["isSet"])]),_:1},8,["id"]),e(K,{modelValue:g.value,"onUpdate:modelValue":a[5]||(a[5]=b=>g.value=b),"append-to-body":"","destroy-on-close":"",title:l.value==="record"?"审查记录填充设置":"审查明细填充设置","close-on-click-modal":!1,width:"700px"},{footer:t(()=>[L("span",{class:"dialog-footer"},[e(u,{onClick:a[4]||(a[4]=b=>g.value=!1)},{default:t(()=>[S("取消")]),_:1}),e(u,{type:"primary",onClick:R,disabled:!o.value.entryId},{default:t(()=>[S(" 确定 ")]),_:1},8,["disabled"])])]),default:t(()=>[e(Q,{load:s},{default:t(()=>[e(H,{model:o.value},{default:t(()=>[e(V,{label:"填充到目标表单"},{default:t(()=>[e(ue,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=b=>i.value=b),appId:y(p).appId},null,8,["modelValue","appId"])]),_:1}),e(V,{label:"字段设置",style:{"margin-bottom":"5px"}}),e(me,{modelValue:o.value.fill,"onUpdate:modelValue":a[3]||(a[3]=b=>o.value.fill=b),ref_key:"setFieldDefaultRef",ref:v,isSubform:"",leftEntryId:o.value.entryId,customTypeList:[{label:"当前表单字段",value:y(W).currentField},{label:"审查结果字段",value:y(W).params,paramOptions:l.value==="record"?C.value:k.value}],rightFields:y(p).form.fields,maxHeight:null,leftFieldColumnName:"目标表单字段",rightFieldColumnName:"设置为",leftFieldColumnWidth:"150"},null,8,["modelValue","leftEntryId","customTypeList","rightFields"])]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue","title"])],64)}}}),$o=z({__name:"Setting",props:{field:{}},setup(_){const f=_,p=P(),I=$(()=>O(p.form.fields,{blockFilter(l){return l.type===m.subform},excludeFilter(l){return![m.uploadFile,m.templateFile].includes(l.type)}})),o=()=>{f.field.options.fileFillFieldId=f.field.options.fileFieleId},g=$(()=>{const l=p.matchField(f.field.options.fileFieleId),n=(l==null?void 0:l.field.type)===m.uploadFile?[m.uploadFile]:[m.uploadFile,m.templateFile];return O(p.form.fields,{blockFilter(v){return v.type===m.subform},excludeFilter(v){return!n.includes(v.type)}})});return(l,n)=>{const v=Y,w=h,C=ie,k=te;return c(),U(T,null,[e(re,{modelValue:l.field.options,"onUpdate:modelValue":n[0]||(n[0]=r=>l.field.options=r),id:l.field.fieldId},null,8,["modelValue","id"]),e(E,{label:"需法审文件",id:`${l.field.fieldId}.fileFieleId`,required:""},{default:t(()=>[e(N,{class:"w100",modelValue:l.field.options.fileFieleId,"onUpdate:modelValue":n[1]||(n[1]=r=>l.field.options.fileFieleId=r),onChange:o,fields:I.value,placeholder:"可选择附件控件、模板文件控件"},null,8,["modelValue","fields"])]),_:1},8,["id"]),e(ve,{field:l.field},null,8,["field"]),e(E,{label:"法审页面设置"},{default:t(()=>[e(w,{modelValue:l.field.options.jumpType,"onUpdate:modelValue":n[2]||(n[2]=r=>l.field.options.jumpType=r),placeholder:"请选择"},{default:t(()=>[(c(!0),U(T,null,B(y(x),(r,s)=>(c(),A(v,{key:s,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(E,{label:"法审后文件填充到",id:`${l.field.fieldId}.fileFillFieldId`},{default:t(()=>[e(N,{class:"w100",modelValue:l.field.options.fileFillFieldId,"onUpdate:modelValue":n[3]||(n[3]=r=>l.field.options.fileFillFieldId=r),fields:g.value,placeholder:"可选择附件控件、模板文件控件",clearable:""},null,8,["modelValue","fields"])]),_:1},8,["id"]),e(be,{field:l.field},null,8,["field"]),e(E,{label:"保留历史版本记录"},{default:t(()=>[e(k,{modelValue:l.field.options.version,"onUpdate:modelValue":n[4]||(n[4]=r=>l.field.options.version=r)},{default:t(()=>[(c(!0),U(T,null,B(y(ee),r=>(c(),A(C,{style:{width:"100%"},key:r.value,label:r.value},{default:t(()=>[S(le(r.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(E,{label:"按钮配置"},{default:t(()=>[e(oe,{modelValue:l.field.options.btnConfig,"onUpdate:modelValue":n[5]||(n[5]=r=>l.field.options.btnConfig=r)},null,8,["modelValue"])]),_:1}),e(pe,{modelValue:l.field.options,"onUpdate:modelValue":n[6]||(n[6]=r=>l.field.options=r),id:l.field.fieldId,hideEdit:""},null,8,["modelValue","id"]),e(fe,{modelValue:l.field.options,"onUpdate:modelValue":n[7]||(n[7]=r=>l.field.options=r),field:l.field},null,8,["modelValue","field"]),e(se,{field:l.field},null,8,["field"])],64)}}});export{$o as default};
