import{_ as I}from"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import{d as V,c as o,gS as A,V as _,x as v,eP as g,a1 as P,o as B,b as L}from"./index-b80d5ef5.js";const h=V({__name:"SelectCascaderEntry",props:{modelValue:{},multiple:{type:Boolean,default:!1},appId:{},isType:{type:Boolean,default:!1},hideCurrentAppId:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(i,{emit:m}){const t=i,n=m,s=o(()=>A(t.modelValue).filter(e=>!!(e!=null&&e.entryId))),u=o({get(){return t.multiple?s.value.map(e=>[e.appId,e.entryId]):s.value[0]?[s.value[0].appId,s.value[0].entryId]:null},set(e){const l=a=>a==null?void 0:a.some(r=>Array.isArray(r)),p=(!Array.isArray(e)||!e.length?[]:l(e)?e:[e]).map(a=>{const r={appId:a[0],entryId:a[1]};return t.isType&&(r.type=r.appId===t.appId?0:1),r});t.multiple?n("update:modelValue",[...p]):n("update:modelValue",{..._(t.modelValue)?t.modelValue:{},...p[0]??{appId:"",entryId:""}})}}),d=v(),{checkEntry:c}=g(),y=o(()=>s.value.filter(e=>c(e.entryId)===!1).map(e=>[e.appId,e.entryId])),f=o(()=>({lazy:!0,async lazyLoad({level:l,data:p}){return l===0?(await d.getApply()).filter(r=>!(t.hideCurrentAppId&&r.id===t.appId)).map(r=>({label:r.id===t.appId?"当前应用":r.name,value:r.id,leaf:!1})).sort(r=>r.value===t.appId?-1:0):l===1?(p!=null&&p.value?await d.getForm(p==null?void 0:p.value):[]).filter(r=>r.type===P.form).map(r=>({label:r.name,value:r.id,leaf:!0})):[]},multiple:t.multiple}));return(e,l)=>(B(),L(I,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=p=>u.value=p),props:f.value,removeOptions:y.value,removeText:"表单已删除/不可选择"},null,8,["modelValue","props","removeOptions"]))}});export{h as _};
