/* empty css              *//* empty css              */import"./index-34056eca.js";import"./index-30749bf5.js";import{s as L,P as y}from"./index-d380ed0a.js";import{lO as N,d as M,v as S,r as d,c as r,d8 as U,o as m,b as f,w as i,i as _,k as v,l as D,B as G,C as O,xk as w,wc as R,_ as T}from"./index-b80d5ef5.js";import"./use-id-d3187131.js";import"./use-route-c2b2b5be.js";const j=N(L),q=M({__name:"SelectProcess",props:{visible:{type:Boolean},flowList:{}},emits:["update:visible","submit"],setup(b,{emit:I}){const p=b,c=I,s=S(p,"visible",c),l=d([]),t=d([]),n=r(()=>{const o=t.value[0],e=p.flowList.find(u=>u.flowId===o);return(e==null?void 0:e.hasDeptManagerChain)??!1}),g=r(()=>n.value?["选择流程","选择部门"]:["选择流程"]),V=r(()=>(p.flowList??[]).map(o=>({text:o.flowName,value:o.flowId}))),x=r(()=>(U.value.userInfo.orgInfoList??[]).map(o=>({text:o.name,value:o.id}))),k=()=>{const o=t.value[0],e=l.value[0];if(!o)return w({message:"请选择需要的流程",position:"top"}),!1;if(!e&&n.value)return w({message:"请选择你的部门",position:"top"}),!1;n.value?c("submit",{flowId:o,orgId:e}):c("submit",{flowId:o}),s.value=!1},C=()=>{s.value=!1},P=()=>{l.value=[],t.value=[]};return(o,e)=>{const u=y,h=j,B=R;return m(),f(B,{onClosed:P,show:G(s),"onUpdate:show":e[2]||(e[2]=a=>O(s)?s.value=a:null),round:"",position:"bottom"},{default:i(()=>[_(h,{title:"操作确认",tabs:g.value,"next-step-text":"下一步",onConfirm:k,onCancel:C},{default:i(()=>[_(u,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value=a),title:"请选择需要的流程",columns:V.value},{"columns-top":i(()=>[v("span",{class:"depa-tip"}," 检测到满足多个流程的启动条件，请选择需要的流程 ")]),_:1},8,["modelValue","columns"]),n.value?(m(),f(u,{key:0,modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a),title:"选择审批部门",columns:x.value},{"columns-top":i(()=>[v("span",{class:"depa-tip"}," 你同时为多个部门的成员，请选择需要审批流程的部门 ")]),_:1},8,["modelValue","columns"])):D("",!0)]),_:1},8,["tabs"])]),_:1},8,["show"])}}});const W=T(q,[["__scopeId","data-v-39a4b547"]]);export{W as default};
