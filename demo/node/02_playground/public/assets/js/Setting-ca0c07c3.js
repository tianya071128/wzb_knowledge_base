import{d as B,gY as q,o as r,b as P,w as t,i as a,m as O,B as d,hY as u,v as Y,bi as Z,f as y,F as v,g as k,k as U,bt as w,H as z,a3 as G,hZ as R,a4 as H,l as N,a5 as J,aT as Q,Z as X,zB as x,ao as j,av as ee,_ as D,r as F,c as L,t as S,Y as A,bm as le,U as oe,bn as ae,eO as ie,ms as te,gc as W,y as E,M as re,z as pe,zC as de,aq as se,mP as ne,zD as me,E as ue,ab as fe,ds as ye}from"./index-b80d5ef5.js";import{E as c}from"./routePage-70460a50.js";import{_ as be}from"./FormFieldHeaderEditor.vue_vue_type_script_setup_true_lang-6c993e5c.js";import{_ as ce,a as ve}from"./FieldOtherEditor.vue_vue_type_script_setup_true_lang-a2d4ed75.js";import{B as Ve}from"./ButtonState-cb54910b.js";import{_ as ge}from"./ParamsSetWrapper.vue_vue_type_script_setup_true_lang-c3f6631f.js";import{A as Pe}from"./AzInputNumber-d6212644.js";import{B as Ie}from"./fieldDefaultComponent-58752d9c.js";import{_ as _e}from"./FieldWidthEditor.vue_vue_type_script_setup_true_lang-3f895778.js";import{_ as he}from"./FormFieldValidateEditor.vue_vue_type_script_setup_true_lang-670668c9.js";import{_ as ke}from"./FieldLengthEditor.vue_vue_type_script_setup_true_lang-b711d652.js";import{P as Ce}from"./PluginSelect-032e797b.js";import"./useQueryTab-05fa7456.js";import"./useExtractQuery-f96f705c.js";import"./CardTabs-ca59b5e9.js";import"./EditItemTargetForm.vue_vue_type_script_setup_true_lang-199df786.js";import"./SelectEntryAndOther-76a65b2d.js";import"./FieldCondition-1c72aa9d.js";import"./Base.vue_vue_type_script_setup_true_lang-03820366.js";import"./useFieldMaxWidth-d82f063e.js";import"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import"./index-318b68f4.js";import"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import"./useMultipleVal-904406c1.js";import"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import"./el-dropdown-item-455a6589.js";import"./CardShowFieldItem-fd24f218.js";import"./LoadingData-195d0581.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./ComponentParamsSetWrapper-71afc840.js";import"./default-component-4c80201b.js";import"./SelectFieldByMultEntry-84abd0c3.js";import"./SelectCascaderEntry.vue_vue_type_script_setup_true_lang-673c5dca.js";import"./SelectForm.vue_vue_type_script_setup_true_lang-0170236d.js";import"./ParamsSet.vue_vue_type_script_setup_true_lang-37c252c5.js";import"./MessageRemindConfig-98484405.js";/* empty css                          */import"./utils-a7200637.js";import"./messageTemplate-8658e6b4.js";import"./SetFieldDefault-5fc1ae2a.js";import"./ButtonSelectField.vue_vue_type_script_setup_true_lang-aae15f71.js";import"./FormulaWrapper-92a83208.js";import"./Formula.vue_vue_type_style_index_0_lang-ef444f24.js";import"./index-8e050109.js";import"./routePage.vue_vue_type_script_setup_true_lang-efb79c93.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./CollageTable-791f0954.js";import"./index-617ab4b4.js";import"./ConditionWrapper-43da1676.js";import"./FieldConditionView-ad1b057c.js";import"./SetAuth-50c8e12e.js";import"./usePublicRelease-2335b254.js";import"./Qrcode-850531ac.js";import"./html2canvas.esm-0543ed55.js";import"./DesignerDialog-22d70853.js";import"./Designer.vue_vue_type_script_setup_true_lang-3c7dafd1.js";import"./form-success-1777d0da.js";import"./keyBy-8fcfdd74.js";import"./_createAggregator-d66ed64c.js";import"./TableRender-bab4d661.js";import"./Resize-eb80395d.js";import"./FormShare-9773b44c.js";import"./dataShare-2d7ae3f7.js";import"./SelectDataSourece-70a968c3.js";import"./useTransformColor-38b5da33.js";import"./el-input-number-c15b1cc7.js";import"./SetFieldAuth-3d0b80a0.js";import"./DesignerTabs-a9795edf.js";import"./Base-3571a39e.js";import"./AddFormDataBtnPlus-a775412e.js";import"./formDesigner-462b10d7.js";import"./Base.vue_vue_type_script_setup_true_lang-832ddae3.js";import"./useValidateError-9f6399dc.js";import"./AutoNumberBase.vue_vue_type_script_setup_true_lang-56f78b68.js";import"./PluginBase-56c4bf37.js";import"./RichTextBase-228f0924.js";import"./Base-11a86176.js";import"./UploadWrapper.vue_vue_type_script_setup_true_lang-4553cd48.js";import"./index-c89dfa90.js";import"./TemplateCustomEntry.vue_vue_type_script_setup_true_lang-346d01b1.js";import"./Base.vue_vue_type_script_setup_true_lang-4fbdbc85.js";import"./DaterangeBase.vue_vue_type_script_setup_true_lang-bec97540.js";import"./InputBase.vue_vue_type_script_setup_true_lang-ffcf63f1.js";import"./Base-9b7f3306.js";import"./index-f0ed738f.js";import"./NumberBase.vue_vue_type_script_setup_true_lang-745b39c5.js";import"./Base-c9aa1df0.js";/* empty css                        */import"./SliderBase.vue_vue_type_script_setup_true_lang-5d73415b.js";import"./TextBase.vue_vue_type_script_setup_true_lang-09411e7a.js";import"./TextareaBase.vue_vue_type_script_setup_true_lang-7091b2cb.js";import"./TimeBase.vue_vue_type_script_setup_true_lang-ea537bf3.js";import"./TimerangeBase.vue_vue_type_script_setup_true_lang-0827c241.js";import"./UploadFileBase.vue_vue_type_script_setup_true_lang-0c253daa.js";import"./UploadImgBase.vue_vue_type_script_setup_true_lang-d23c1306.js";import"./BtnDisplay.vue_vue_type_script_setup_true_lang-cbe1b7c6.js";import"./Base.vue_vue_type_script_setup_true_lang-392ceecd.js";import"./GridBase.vue_vue_type_script_setup_true_lang-f18077d3.js";import"./Base-16c93ea0.js";import"./TableBase-393fac1a.js";import"./TabsBase.vue_vue_type_style_index_0_lang-861f3fae.js";import"./CooperateEnterpriseBase.vue_vue_type_script_setup_true_lang-23720971.js";import"./CooperatePersonnelBase.vue_vue_type_script_setup_true_lang-adcd0db7.js";import"./DepartmentBase.vue_vue_type_script_setup_true_lang-6f309530.js";import"./Base.vue_vue_type_script_setup_true_lang-0e9a0e2c.js";import"./MemberBase.vue_vue_type_script_setup_true_lang-77a28117.js";import"./Base.vue_vue_type_script_setup_true_lang-aa25657d.js";import"./AddOrEditValidate.vue_vue_type_style_index_0_lang-5bd5a73c.js";import"./DataSoureceWrapper-047a1c9d.js";import"./ComponentPostAction-12970ad1.js";import"./InternalComponentSelectPlus-00c8c38f.js";import"./app.vue_vue_type_script_setup_true_lang-59fd2507.js";import"./enum-7a2ae6a9.js";import"./index-20639231.js";import"./el-space-0d01b33a.js";import"./cloneDeep-dc1c677b.js";import"./isTypedArray-10beecc7.js";import"./el-collapse-transition-4ed993c7.js";import"./defaultValue-7c7c87ea.js";import"./EditorDraggable-a06dbc71.js";import"./typeof-7fd5df1e.js";import"./utils-052731c0.js";import"./designerRender.vue_vue_type_script_setup_true_lang-68b31d85.js";const Te=B({__name:"RequestParams",props:{field:{},pluginInfo:{}},setup(_){const i=_,f=q();return(s,m)=>(r(),P(ge,{modelValue:i.field.options.requestParmas,"onUpdate:modelValue":m[0]||(m[0]=I=>i.field.options.requestParmas=I),"plugin-id":s.pluginInfo.apiVO.id,search:s.field.options.displayType===d(u).searchDrop,fields:d(f).getFieldsByFieldId({fieldId:i.field.fieldId,excludeCrrentField:!0}),disabled:!s.pluginInfo},{default:t(()=>[a(c,{label:"请求参数配置",id:`${s.field.fieldId}.requestParmas`,"show-message":!1},{default:t(({error:I})=>[a(Ve,{"is-error":!!I,"is-set":"",disabled:!s.pluginInfo},{default:t(()=>[O(" 设置请求参数 ")]),_:2},1032,["is-error","disabled"])]),_:1},8,["id"])]),_:1},8,["modelValue","plugin-id","search","fields","disabled"]))}}),$e=B({__name:"ReturnParamsItem",props:{field:{},modelValue:{},outputParams:{},fatherParmas:{},propPrefix:{default:""}},emits:["update:modelValue"],setup(_,{emit:i}){const f=_,m=Y(f,"modelValue",i),I=q(),C=()=>{m.value||(m.value=[]),Q(()=>{var l,n;(n=m.value)==null||n.push({random:X((l=m.value)==null?void 0:l.map(V=>V.random)),fieldId:"",paramName:"",paramType:R.text})})},K=l=>{var n;l.fieldId="",l.paramType=((n=f.outputParams.find(V=>V.paramName===l.paramName))==null?void 0:n.paramType)??R.text,delete l.child},e=l=>{var n;return x(l.paramType,I.form.fields,{subformId:(n=f.fatherParmas)==null?void 0:n.fieldId,currentFieldId:f.field.fieldId})};return(l,n)=>{const V=j,T=ee,g=Z("ReturnParamsItem",!0);return r(),y("ul",null,[(r(!0),y(v,null,k(d(m),(o,p)=>{var $;return r(),y("li",{key:o.random},[U("div",{class:"params-item"},[a(z,{class:"mr-10",style:{width:"150px"},required:"","show-message":!1,prop:`${l.propPrefix}${p}.paramName`,"hide-label":""},{default:t(()=>[a(w,{modelValue:o.paramName,"onUpdate:modelValue":b=>o.paramName=b,isCheckRemove:"",removeText:"该返回参数不存在",placeholder:"选择返回参数",onChange:b=>K(o)},{default:t(()=>[(r(!0),y(v,null,k(l.outputParams,(b,h)=>(r(),P(V,{key:h,label:b.name,value:b.paramName},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["prop"]),U("span",null,"填充到"),a(z,{class:"params-value",required:"","show-message":!1,prop:`${l.propPrefix}${p}.fieldId`,"hide-label":""},{default:t(()=>{var b,h;return[a(G,{modelValue:o.fieldId,"onUpdate:modelValue":M=>o.fieldId=M,fields:e(o),"is-select-subform":o.paramType===d(R).arrayObject,clearable:"",disabled:l.fatherParmas&&!((b=l.fatherParmas)!=null&&b.fieldId)||!o.paramName,placeholder:l.fatherParmas&&!((h=l.fatherParmas)!=null&&h.fieldId)?"请先选择子表单控件":"请选择控件"},null,8,["modelValue","onUpdate:modelValue","fields","is-select-subform","disabled","placeholder"])]}),_:2},1032,["prop"]),a(T,{underline:!1,type:"danger",icon:d(H),class:"ml-10",onClick:b=>{var h;return(h=d(m))==null?void 0:h.splice(p,1)}},null,8,["icon","onClick"])]),o.paramType===d(R).arrayObject?(r(),y("div",{key:0,class:"params-son"},[a(g,{field:l.field,outputParams:(($=l.outputParams.find(b=>b.paramName===o.paramName))==null?void 0:$.subControls)??[],modelValue:o.child,"onUpdate:modelValue":b=>o.child=b,fatherParmas:o,propPrefix:`${l.propPrefix}${p}.child.`},null,8,["field","outputParams","modelValue","onUpdate:modelValue","fatherParmas","propPrefix"])])):N("",!0)])}),128)),U("li",null,[a(T,{type:"primary",underline:!1,icon:d(J),onClick:C},{default:t(()=>[O(" 添加填充规则 ")]),_:1},8,["icon"])])])}}});const Ne=D($e,[["__scopeId","data-v-7dd92c96"]]),Re=B({__name:"ReturnParams",props:{field:{},pluginInfo:{}},setup(_){const i=_,f=F(!1),s=F(),m=F([]),I=()=>{f.value=!0,m.value=A(i.field.options.returnParams??[])},C=async()=>{var e;await((e=s.value)==null?void 0:e.validate()),i.field.options.returnParams=A(m.value),f.value=!1},K=L(()=>{var e;return[u.drop,u.searchDrop].includes(i.field.options.displayType)?((e=i.pluginInfo.outputControls.find(l=>l.paramName===i.field.options.optionsKey))==null?void 0:e.subControls)??[]:i.pluginInfo.outputControls});return(e,l)=>{const n=le,V=oe,T=ae;return r(),y(v,null,[a(c,{label:"返回结果填充表单字段",id:`${e.field.fieldId}.returnParams`},{default:t(({error:g})=>{var o;return[a(Ie,{"is-error":!!g,"is-set":!!((o=e.field.options.returnParams)!=null&&o.length),disabled:!e.pluginInfo||[d(u).drop,d(u).searchDrop].includes(e.field.options.displayType)&&!e.field.options.optionsKey,onClick:I},{default:t(()=>{var p;return[O(S(((p=e.field.options.returnParams)==null?void 0:p.length)>0?"已设置填充":"设置填充"),1)]}),_:2},1032,["is-error","is-set","disabled"])]}),_:1},8,["id"]),a(T,{modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=g=>f.value=g),title:"填充设置",width:"600","destroy-on-close":"","close-on-click-modal":!1,"append-to-body":""},{footer:t(()=>[U("span",{class:"dialog-footer"},[a(V,{onClick:l[1]||(l[1]=g=>f.value=!1)},{default:t(()=>[O("取消")]),_:1}),a(V,{type:"primary",onClick:C},{default:t(()=>[O("确定")]),_:1})])]),default:t(()=>[a(n,{model:m.value,ref_key:"ruleFormRef",ref:s,class:"return_params-dialog"},{default:t(()=>[a(Ne,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=g=>m.value=g),field:e.field,"output-params":K.value},null,8,["modelValue","field","output-params"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});const Ue=D(Re,[["__scopeId","data-v-480240b1"]]),Ke=B({__name:"Setting",props:{field:{}},setup(_){const i=_,{getPluginInfo:f}=ie();q();const s=L(()=>{if(!i.field.options.pluginId)return null;const e=f(i.field.options.pluginId);return e&&!te({pluginInfo:e,scenario:W.FORM})?null:e}),m=e=>!s.value||s.value.outputControls.some(l=>l.paramType==R.arrayObject)?e:e.filter(l=>l.value===u.btn),I=L(()=>s.value?s.value.outputControls.filter(e=>e.paramType===R.arrayObject):[]),C=L(()=>{var l;if(!i.field.options.optionsKey)return[];const e=(l=s.value)==null?void 0:l.outputControls.find(n=>n.paramName===i.field.options.optionsKey);return e?e.subControls??[]:[]});E(()=>i.field.options.pluginId,()=>{i.field.options.displayType=u.btn,i.field.options.requestParmas=[],i.field.options.returnParams=[]}),E(()=>i.field.options.displayType,(e,l)=>{e===u.btn?(i.field.options.btnName="查询",i.field.options.returnParams=[],i.field.options.required=!1,i.field.options.noRepeat=!1,i.field.options.optionsKey=""):i.field.options.placeholder=e===u.drop?"请选择":"请输入关键字搜索",l===u.btn&&e&&(i.field.options.returnParams=[],i.field.options.optionsKey="")}),E(()=>i.field.options.optionsKey,()=>{i.field.options.returnParams=[],i.field.options.optionsLabelKey="",i.field.options.optionsOtherLabelKey=[]}),E(()=>i.field.options.optionsLabelKey,()=>{re(i.field.options.optionsOtherLabelKey,e=>e===i.field.options.optionsLabelKey)});const K=F();return pe(()=>console.log("选择项",K)),(e,l)=>{const n=j,V=ue,T=fe,g=ye;return r(),y(v,null,[a(be,{modelValue:e.field.options,"onUpdate:modelValue":l[0]||(l[0]=o=>e.field.options=o),id:e.field.fieldId,isPlaceholder:e.field.options.displayType!==d(u).btn},null,8,["modelValue","id","isPlaceholder"]),a(c,{label:"插件",required:"",id:`${e.field.fieldId}.pluginId`},{default:t(()=>[a(Ce,{class:"w100",modelValue:e.field.options,"onUpdate:modelValue":l[1]||(l[1]=o=>e.field.options=o),scenario:d(W).FORM},null,8,["modelValue","scenario"])]),_:1},8,["id"]),s.value?(r(),y(v,{key:0},[a(c,{label:"显示方式",id:`${e.field.fieldId}.displayType`},{default:t(()=>[a(w,{modelValue:e.field.options.displayType,"onUpdate:modelValue":l[2]||(l[2]=o=>e.field.options.displayType=o),class:"w100",placeholder:"选择显示方式",isCheckRemove:"",removeText:"该显示方式不可选择",load:d(de)},{default:t(({options:o})=>[(r(!0),y(v,null,k(m(o),(p,$)=>(r(),P(n,{key:$,label:p.label,value:p.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","load"])]),_:1},8,["id"]),e.field.options.displayType===d(u).btn?(r(),P(c,{key:0,label:"按钮名称"},{default:t(()=>[a(se,{modelValue:e.field.options.btnName,"onUpdate:modelValue":l[3]||(l[3]=o=>e.field.options.btnName=o),placeholder:"请输入按钮名称",isBlurCache:"",class:"w100"},null,8,["modelValue"])]),_:1})):N("",!0),e.field.options.displayType===d(u).searchDrop?(r(),y(v,{key:1},[a(c,{label:"搜索方式"},{default:t(()=>[a(ne,{load:d(me)},{default:t(({options:o})=>[a(T,{modelValue:e.field.options.searchWay,"onUpdate:modelValue":p=>e.field.options.searchWay=p},{default:t(()=>[(r(!0),y(v,null,k(o,(p,$)=>(r(),P(V,{class:"w100 plugin-setting-radio",key:$,label:p.value},{default:t(()=>[U("div",{class:"radio-content"},S(p.label),1),U("div",{class:"radio-tip"},S(p.tip),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["load"])]),_:1}),a(c,{label:"最少字数",tip:"输入最少数字时才搜索并显示选项"},{default:t(()=>[a(Pe,{modelValue:e.field.options.minNum,"onUpdate:modelValue":l[4]||(l[4]=o=>e.field.options.minNum=o),min:1,max:100,placeholder:"最少字数","controls-position":"right"},null,8,["modelValue"])]),_:1}),a(c,{label:"在搜索前先进行一次请求"},{titleRight:t(()=>[a(g,{modelValue:e.field.options.preload,"onUpdate:modelValue":l[5]||(l[5]=o=>e.field.options.preload=o)},null,8,["modelValue"])]),_:1})],64)):N("",!0),a(Te,{field:e.field,"plugin-info":s.value},null,8,["field","plugin-info"]),[d(u).drop,d(u).searchDrop].includes(e.field.options.displayType)?(r(),P(c,{key:2,label:"返回参数作为下拉框选项设置"},{default:t(()=>[a(c,{label:"选项列表",type:"secondary",labelWidth:"100px",id:`${e.field.fieldId}.optionsKey`,required:""},{default:t(()=>[a(w,{modelValue:e.field.options.optionsKey,"onUpdate:modelValue":l[6]||(l[6]=o=>e.field.options.optionsKey=o),class:"w100",placeholder:"选择选项列表",isCheckRemove:"",removeText:"返回参数中不存在该属性"},{default:t(()=>[(r(!0),y(v,null,k(I.value,(o,p)=>(r(),P(n,{key:p,label:o.name,value:o.paramName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["id"]),a(c,{label:"选项名",type:"secondary",labelWidth:"100px",id:`${e.field.fieldId}.optionsLabelKey`,required:""},{default:t(()=>[a(w,{modelValue:e.field.options.optionsLabelKey,"onUpdate:modelValue":l[7]||(l[7]=o=>e.field.options.optionsLabelKey=o),class:"w100",placeholder:"选择选项名",isCheckRemove:"",removeText:"返回参数中不存在该属性"},{default:t(()=>[(r(!0),y(v,null,k(C.value,(o,p)=>(r(),P(n,{key:p,label:o.name,value:o.paramName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["id"]),a(c,{label:"选项附加信息",type:"secondary",labelWidth:"100px",id:`${e.field.fieldId}.optionsOtherLabelKey`},{default:t(()=>[a(w,{modelValue:e.field.options.optionsOtherLabelKey,"onUpdate:modelValue":l[8]||(l[8]=o=>e.field.options.optionsOtherLabelKey=o),class:"w100",placeholder:"选填",multiple:"",isCheckRemove:"",removeText:"返回参数中不存在该属性"},{default:t(()=>[(r(!0),y(v,null,k(C.value.filter(o=>o.paramName!==e.field.options.optionsLabelKey),(o,p)=>(r(),P(n,{key:p,label:o.name,value:o.paramName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["id"])]),_:1})):N("",!0),a(Ue,{field:e.field,"plugin-info":s.value},null,8,["field","plugin-info"])],64)):N("",!0),[d(u).drop,d(u).searchDrop].includes(e.field.options.displayType)?(r(),P(he,{key:1,modelValue:e.field.options,"onUpdate:modelValue":l[9]||(l[9]=o=>e.field.options=o),id:e.field.fieldId,isRepeat:""},null,8,["modelValue","id"])):N("",!0),a(ce,{modelValue:e.field.options,"onUpdate:modelValue":l[10]||(l[10]=o=>e.field.options=o),id:e.field.fieldId},null,8,["modelValue","id"]),a(_e,{field:e.field,modelValue:e.field.options,"onUpdate:modelValue":l[11]||(l[11]=o=>e.field.options=o)},null,8,["field","modelValue"]),a(ke,{field:e.field},null,8,["field"]),a(ve,{field:e.field},null,8,["field"])],64)}}});const Jo=D(Ke,[["__scopeId","data-v-f2514fea"]]);export{Jo as default};
