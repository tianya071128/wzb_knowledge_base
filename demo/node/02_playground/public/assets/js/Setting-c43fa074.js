import{d as J,gY as M,y as D,r as k,z_ as X,c as u,z$ as V,a as s,oA as B,Z as x,b$ as ee,A0 as ie,o as n,f as c,i as t,b as f,w as p,m$ as oe,B as m,mY as le,mZ as te,m_ as pe,hR as se,i2 as ne,l as C,k as y,mp as A,F as _,g as L,A1 as me,t as w,m as S,aS as re,aq as ae,bz as de,c2 as fe,h7 as ue,ad as ye,aT as Ve,o8 as ce,q as ge,br as be,by as ve,Q as Fe,U as Te,_ as ke}from"./index-b80d5ef5.js";/* empty css                          */import{_ as Ce}from"./FieldWidthEditor.vue_vue_type_script_setup_true_lang-3f895778.js";import{_ as _e}from"./FormFieldHeaderEditor.vue_vue_type_script_setup_true_lang-6c993e5c.js";import{_ as we,a as Se}from"./FieldOtherEditor.vue_vue_type_script_setup_true_lang-a2d4ed75.js";import{_ as Ee}from"./FormFieldValidateEditor.vue_vue_type_script_setup_true_lang-670668c9.js";import{_ as Ie}from"./index.vue_vue_type_script_setup_true_lang-2e692a6b.js";import{E as r}from"./routePage-70460a50.js";import{A as $e}from"./AzInputNumber-d6212644.js";import{_ as he}from"./ButtonSelectField.vue_vue_type_script_setup_true_lang-aae15f71.js";import{c as Ue}from"./Base-16c93ea0.js";import{E as ze}from"./EditorDraggable-a06dbc71.js";import{u as De}from"./formDesigner-462b10d7.js";import{_ as Be,F as Ae}from"./FileThumbnailConfig-42dad0e2.js";/* empty css                        */import"./Base.vue_vue_type_script_setup_true_lang-832ddae3.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./keyBy-8fcfdd74.js";import"./_createAggregator-d66ed64c.js";import"./FormulaWrapper-92a83208.js";import"./Formula.vue_vue_type_style_index_0_lang-ef444f24.js";import"./index-8e050109.js";import"./fieldDefaultComponent-58752d9c.js";import"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import"./useFieldMaxWidth-d82f063e.js";import"./Base.vue_vue_type_script_setup_true_lang-4fbdbc85.js";import"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import"./index-318b68f4.js";import"./DaterangeBase.vue_vue_type_script_setup_true_lang-bec97540.js";import"./InputBase.vue_vue_type_script_setup_true_lang-ffcf63f1.js";import"./Base-9b7f3306.js";import"./index-f0ed738f.js";import"./NumberBase.vue_vue_type_script_setup_true_lang-745b39c5.js";import"./Base-c9aa1df0.js";import"./SliderBase.vue_vue_type_script_setup_true_lang-5d73415b.js";import"./el-input-number-c15b1cc7.js";import"./TextareaBase.vue_vue_type_script_setup_true_lang-7091b2cb.js";import"./TimeBase.vue_vue_type_script_setup_true_lang-ea537bf3.js";import"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import"./TimerangeBase.vue_vue_type_script_setup_true_lang-0827c241.js";import"./UploadFileBase.vue_vue_type_script_setup_true_lang-0c253daa.js";import"./UploadImgBase.vue_vue_type_script_setup_true_lang-d23c1306.js";import"./CooperateEnterpriseBase.vue_vue_type_script_setup_true_lang-23720971.js";import"./useMultipleVal-904406c1.js";import"./CooperatePersonnelBase.vue_vue_type_script_setup_true_lang-adcd0db7.js";import"./Base.vue_vue_type_script_setup_true_lang-0e9a0e2c.js";import"./Base.vue_vue_type_script_setup_true_lang-aa25657d.js";import"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import"./Base.vue_vue_type_script_setup_true_lang-03820366.js";import"./el-dropdown-item-455a6589.js";import"./CardShowFieldItem-fd24f218.js";import"./FieldCondition-1c72aa9d.js";import"./SelectEntryAndOther-76a65b2d.js";import"./DataSoureceWrapper-047a1c9d.js";import"./SelectDataSourece-70a968c3.js";import"./useQueryTab-05fa7456.js";import"./useExtractQuery-f96f705c.js";import"./CardTabs-ca59b5e9.js";import"./EditItemTargetForm.vue_vue_type_script_setup_true_lang-199df786.js";import"./LoadingData-195d0581.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./ComponentParamsSetWrapper-71afc840.js";import"./default-component-4c80201b.js";import"./ButtonState-cb54910b.js";import"./SelectFieldByMultEntry-84abd0c3.js";import"./SelectCascaderEntry.vue_vue_type_script_setup_true_lang-673c5dca.js";import"./SelectForm.vue_vue_type_script_setup_true_lang-0170236d.js";import"./ParamsSet.vue_vue_type_script_setup_true_lang-37c252c5.js";import"./MessageRemindConfig-98484405.js";import"./utils-a7200637.js";import"./messageTemplate-8658e6b4.js";import"./SetFieldDefault-5fc1ae2a.js";import"./routePage.vue_vue_type_script_setup_true_lang-efb79c93.js";import"./CollageTable-791f0954.js";import"./index-617ab4b4.js";import"./ConditionWrapper-43da1676.js";import"./FieldConditionView-ad1b057c.js";import"./SetAuth-50c8e12e.js";import"./usePublicRelease-2335b254.js";import"./Qrcode-850531ac.js";import"./html2canvas.esm-0543ed55.js";import"./DesignerDialog-22d70853.js";import"./Designer.vue_vue_type_script_setup_true_lang-3c7dafd1.js";import"./form-success-1777d0da.js";import"./TableRender-bab4d661.js";import"./Resize-eb80395d.js";import"./FormShare-9773b44c.js";import"./dataShare-2d7ae3f7.js";import"./useTransformColor-38b5da33.js";import"./SetFieldAuth-3d0b80a0.js";import"./DesignerTabs-a9795edf.js";import"./Base-3571a39e.js";import"./AddFormDataBtnPlus-a775412e.js";import"./useValidateError-9f6399dc.js";import"./AutoNumberBase.vue_vue_type_script_setup_true_lang-56f78b68.js";import"./PluginBase-56c4bf37.js";import"./RichTextBase-228f0924.js";import"./Base-11a86176.js";import"./UploadWrapper.vue_vue_type_script_setup_true_lang-4553cd48.js";import"./index-c89dfa90.js";import"./TemplateCustomEntry.vue_vue_type_script_setup_true_lang-346d01b1.js";import"./TextBase.vue_vue_type_script_setup_true_lang-09411e7a.js";import"./BtnDisplay.vue_vue_type_script_setup_true_lang-cbe1b7c6.js";import"./Base.vue_vue_type_script_setup_true_lang-392ceecd.js";import"./GridBase.vue_vue_type_script_setup_true_lang-f18077d3.js";import"./TableBase-393fac1a.js";import"./TabsBase.vue_vue_type_style_index_0_lang-861f3fae.js";import"./DepartmentBase.vue_vue_type_script_setup_true_lang-6f309530.js";import"./MemberBase.vue_vue_type_script_setup_true_lang-77a28117.js";import"./AddOrEditValidate.vue_vue_type_style_index_0_lang-5bd5a73c.js";import"./ComponentPostAction-12970ad1.js";import"./InternalComponentSelectPlus-00c8c38f.js";import"./app.vue_vue_type_script_setup_true_lang-59fd2507.js";import"./enum-7a2ae6a9.js";import"./index-20639231.js";import"./el-space-0d01b33a.js";import"./cloneDeep-dc1c677b.js";import"./isTypedArray-10beecc7.js";import"./el-collapse-transition-4ed993c7.js";import"./defaultValue-7c7c87ea.js";import"./typeof-7fd5df1e.js";import"./utils-052731c0.js";import"./designerRender.vue_vue_type_script_setup_true_lang-68b31d85.js";import"./TipTooltip-b2409537.js";const Le=J({__name:"Setting",props:{field:{}},setup(N){var U,z;const l=N,g=M();!((U=l.field.options.fileType)!=null&&U.length)&&!((z=l.field.options.customFileType)!=null&&z.length)&&(l.field.options.isFileType=!1),D(()=>l.field.options.isFileType,()=>{l.field.options.fileType=[],l.field.options.customFileType=[]});const a=k(""),b=k(!1),E=k(),O=e=>{l.field.options.customFileType.splice(l.field.options.customFileType.indexOf(e),1)},K=()=>{b.value=!0,Ve(()=>{var e,i;(i=(e=E.value)==null?void 0:e.input)==null||i.focus()})},I=()=>{a.value&&!l.field.options.customFileType.includes(a.value)&&l.field.options.customFileType.push(a.value),b.value=!1,a.value=""};X(l);const $=u({get(){return l.field.options.isLimit===!1?V:l.field.options.limit??V},set(e){l.field.options.isLimit===!1&&(l.field.options.isLimit=!0),l.field.options.limit=e}}),P=e=>{g.setSelectedField(e)},h=u({get(){return l.field.fields??[]},set(e){l.field.fields=e}}),R=({type:e})=>{var d;const i=B(e);i&&(l.field.fields||(l.field.fields=[]),"fileSource"in i.options&&(i.options.fileSource=l.field.fieldId),"btnConfig"in i.options&&i.options.btnConfig&&(i.options.btnConfig.style=ce.link),(d=l.field.fields)==null||d.push(Ue(i)))},W=u(()=>[s.fileEdit,s.fileDesign,s.fileEnter,s.fileView,s.fileComparison].map(e=>{const i=B(e);return i?(i.fieldId=x(),i.options.label=ee(e)??"",i):null}).filter(e=>!!e)),q=e=>({[s.fileDesign]:"实现PDF、OFD模板文件的在线设计",[s.fileEdit]:"实现word文档的在线编辑",[s.fileEnter]:"实现PDF、OFD模板文件的变量内容填写",[s.fileView]:"可查看PDF、OFD模板文件的设计效果",[s.fileComparison]:"可比对两个文件内容的差异"})[e],Y=De(),Z=({fieldId:e})=>{if(Y.checkError(`${g.id}.${e}`))return{msg:"配置存在异常"}},v=u({get(){return l.field.options.download??!0},set(e){l.field.options.download=e}});D(()=>l.field.options.show,e=>{e&&(v.value=!0)});const F=u({get(){return ie(l.field)},set(e){l.field.options.btnConfig=e}});return(e,i)=>{const d=ge,j=be,G=ve,Q=Fe,H=Te;return n(),c(_,null,[t(_e,{modelValue:e.field.options,"onUpdate:modelValue":i[0]||(i[0]=o=>e.field.options=o),id:e.field.fieldId},null,8,["modelValue","id"]),e.field.options.defaultValue?(n(),f(Ie,{key:0,modelValue:e.field.options.defaultValue,"onUpdate:modelValue":i[2]||(i[2]=o=>e.field.options.defaultValue=o),id:e.field.fieldId,type:[m(se),m(ne)],field:e.field},{default:p(()=>[t(oe,{class:"w100",modelValue:e.field.options.defaultValue.custom,"onUpdate:modelValue":i[1]||(i[1]=o=>e.field.options.defaultValue.custom=o),limit:m(le)(e.field.options),size:m(te)(e.field.options),showSizeTip:e.field.options.size!=null,type:"file",accept:m(pe)(e.field.options),btnConfig:F.value},null,8,["modelValue","limit","size","showSizeTip","accept","btnConfig"])]),_:1},8,["modelValue","id","type","field"])):C("",!0),t(r,{label:"限制文件数",tip:`单次最多上传 ${m(V)} 个`},{default:p(()=>[t($e,{modelValue:$.value,"onUpdate:modelValue":i[3]||(i[3]=o=>$.value=o),placeholder:"文件数",min:1,max:m(V),"controls-position":"right","value-on-clear":"min"},null,8,["modelValue","max"])]),_:1},8,["tip"]),t(Ee,{modelValue:e.field.options,"onUpdate:modelValue":i[7]||(i[7]=o=>e.field.options=o),id:e.field.fieldId},{default:p(()=>[t(Be,{field:e.field},null,8,["field"]),t(r,null,{default:p(()=>[y("div",{style:{width:"100%"}},[t(d,{modelValue:e.field.options.isFileType,"onUpdate:modelValue":i[4]||(i[4]=o=>e.field.options.isFileType=o)},{default:p(()=>[y("span",null,"限制文件类型"),t(A,{tip:"启用后，可以设定文件类型范围，上传除规定类型外的文件时会提示文件类型错误，无法上传"})]),_:1},8,["modelValue"])])]),_:1}),e.field.options.isFileType?(n(),f(r,{key:0,type:"secondary",class:"pl-20",labelWidth:"0px"},{default:p(()=>[t(j,{modelValue:e.field.options.fileType,"onUpdate:modelValue":i[5]||(i[5]=o=>e.field.options.fileType=o)},{default:p(()=>[(n(!0),c(_,null,L(m(me),(o,T)=>(n(),c("div",{style:{width:"100%"},key:T},[t(d,{label:o.value},{default:p(()=>[y("span",null,w(o.label),1),t(A,{tip:`包括以下类型：${o.type.join("、")}。`},null,8,["tip"])]),_:2},1032,["label"])]))),128))]),_:1},8,["modelValue"]),t(r,{class:"mt-5",label:"自定义",tip:"自定义的文件扩展名"},{default:p(()=>[(n(!0),c(_,null,L(e.field.options.customFileType,o=>(n(),f(G,{key:o,closable:"","disable-transitions":!1,onClose:T=>O(o),class:"ml-5 mr-5 mb-5"},{default:p(()=>[S(w(o),1)]),_:2},1032,["onClose"]))),128)),b.value?(n(),f(Q,{key:0,ref_key:"InputRef",ref:E,modelValue:a.value,"onUpdate:modelValue":i[6]||(i[6]=o=>a.value=o),class:"ml-5",style:{width:"82.34px",height:"24px"},size:"small",onKeyup:re(I,["enter"]),onBlur:I},null,8,["modelValue","onKeyup"])):(n(),f(H,{key:1,class:"ml-5",size:"small",onClick:K},{default:p(()=>[S(" + 添加类型 ")]),_:1}))]),_:1})]),_:1})):C("",!0)]),_:1},8,["modelValue","id"]),m(g).checkSonField(e.field.fieldId)?C("",!0):(n(),f(r,{key:1,label:"文件处理权限",tip:"支持对 word、pdf、ofd 文件在线操作"},{default:p(()=>[t(ze,{modelValue:h.value,"onUpdate:modelValue":i[8]||(i[8]=o=>h.value=o)},{default:p(({element:o})=>[t(r,{"custom-error":Z(o)},{default:p(()=>[t(ae,{"model-value":o.options.label,readonly:"",class:"subform-item",onClick:T=>P(o),title:o.options.label},{prefix:p(()=>[t(de,{"icon-class":m(fe)(o.type)},null,8,["icon-class"])]),_:2},1032,["model-value","onClick","title"])]),_:2},1032,["custom-error"])]),_:1},8,["modelValue"]),y("div",{class:"w100 mt-10",style:{"line-height":"initial"}},[t(he,{onClickField:R,fields:W.value,isSelect:!1,placeholder:"增加文件操作"},{fieldTip:p(({field:o})=>[S(w(q(o.type)),1)]),_:1},8,["fields"])])]),_:1})),t(r,{label:"按钮配置"},{default:p(()=>[t(ue,{modelValue:F.value,"onUpdate:modelValue":i[9]||(i[9]=o=>F.value=o)},null,8,["modelValue"])]),_:1}),t(we,{modelValue:e.field.options,"onUpdate:modelValue":i[11]||(i[11]=o=>e.field.options=o),id:e.field.fieldId},ye({_:2},[e.field.options.show?{name:"showAfter",fn:p(()=>[y("div",{class:"download_set"},[t(d,{modelValue:v.value,"onUpdate:modelValue":i[10]||(i[10]=o=>v.value=o),label:"可下载文件"},null,8,["modelValue"])])]),key:"0"}:void 0]),1032,["modelValue","id"]),t(Ce,{modelValue:e.field.options,"onUpdate:modelValue":i[12]||(i[12]=o=>e.field.options=o),field:e.field},null,8,["modelValue","field"]),t(Se,{field:e.field},{default:p(()=>[t(Ae,{field:e.field},null,8,["field"])]),_:1},8,["field"])],64)}}});const il=ke(Le,[["__scopeId","data-v-0749b603"]]);export{il as default};
