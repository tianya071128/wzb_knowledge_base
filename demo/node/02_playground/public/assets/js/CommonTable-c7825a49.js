import{d as B,AH as J,e as G,o as a,f as A,F as E,g as U,p as z,B as e,qD as h,k as f,t as H,l as w,bc as Q,i as x,w as K,m as P,j as Z,b as _,ew as L,e1 as V,ex as X,q as Y,c3 as W,ca as j,_ as N,c as D,dA as $,os as ee,qf as M,b_ as te,a as R,bK as se,eK as ae,a2 as q,AI as ie,r as le,bX as oe,dV as ne,dU as re,oy as de,z as ce,oF as T,C as S,b1 as pe,AJ as ue}from"./index-b80d5ef5.js";const me=B({__name:"SimplicityTable",props:{tableData:{},loading:{type:Boolean}},emits:["row-click"],setup(I,{emit:c}){const r=c,{render:t,listFields:y,getColumnLabel:v,hasCheck:d,switchCheck:s}=J(),i=l=>{s(l,!d(l))},k=l=>{r("row-click",l)};return(l,n)=>{var F;const p=Y,C=W,u=j;return G((a(),A("div",{class:"simple-table"},[(a(!0),A(E,null,U(l.tableData,(g,b)=>(a(),A("div",{class:z(["simple-table_item",{"bg-color":e(t).view.basis.settings.some(m=>m===e(h).discoloration)&&b%2!==0}]),key:b,onClick:m=>k(g)},[f("div",{class:"simple-table_sort"},[e(t).view.basis.settings.some(m=>m===e(h).number)?(a(),A("span",{key:0},H(b+1)+". ",1)):w("",!0)]),e(t).view.basis.settings.some(m=>m===e(h).check)?(a(),A("div",{key:0,class:"simple-table_check",onClick:n[0]||(n[0]=Q(()=>{},["stop"]))},[x(p,{onChange:m=>i(g),checked:e(d)(g),label:""},null,8,["onChange","checked"])])):w("",!0),f("div",{class:"simple-table_box"},[(a(!0),A(E,null,U(e(y),(m,o)=>(a(),A("div",{class:"simple-table_content az-ellipsis",key:o},[f("span",{class:"content-lable"},[x(Z,{class:"content-lable-text"},{default:K(()=>[P(H(e(v)(m)),1)]),_:2},1024),f("span",null,"：")]),e(t).matchField(m.fieldId)?(a(),_(X,{key:0,bubble:"",emptyText:"-",mode:e(L).list,content:e(V)({fieldId:m.fieldId,rowData:g}),field:e(t).matchField(m.fieldId).field},null,8,["mode","content","field"])):w("",!0)]))),128))])],10,["onClick"]))),128)),(F=l.tableData)!=null&&F.length?w("",!0):(a(),_(C,{key:0,description:"没有数据"}))])),[[u,l.loading]])}}});const Ae=N(me,[["__scopeId","data-v-f2d484d8"]]),be=B({__name:"CardTableItem",props:{showField:{},header:{type:Boolean},rowData:{},index:{}},setup(I){const c=I,{render:r,getColumnLabel:t,hasCheck:y,switchCheck:v}=J(),d=D({get(){return y(c.rowData)},set(s){v(c.rowData,s)}});return(s,i)=>{const k=Y;return a(),A("div",{class:"card_item"},[!s.header&&e(r).view.basis.cardShowTitle?(a(),_($,{key:0,class:"card_item-label","field-id":s.showField.fieldId,sourceId:e(r).sourceId,icon:!1},{default:K(()=>[f("span",null,H(e(t)(s.showField)),1)]),_:1},8,["field-id","sourceId"])):w("",!0),f("div",{class:z(["card_item-content",{"is-header":s.header}])},[s.header&&e(r).view.basis.settings.some(l=>[e(h).number,e(h).check].includes(l))?(a(),A("div",{key:0,class:"mr-5"},[e(r).view.basis.settings.some(l=>l===e(h).number)?(a(),A("span",{key:0,class:"mr-3"},H(s.index+1)+". ",1)):w("",!0),e(r).view.basis.settings.some(l=>l===e(h).check)?(a(),_(k,{key:1,onClick:i[0]||(i[0]=Q(()=>{},["stop"])),style:{height:"initial"},modelValue:d.value,"onUpdate:modelValue":i[1]||(i[1]=l=>d.value=l),label:""},null,8,["modelValue"])):w("",!0)])):w("",!0),f("div",{class:"content-wrapper"},[e(r).matchField(s.showField.fieldId)?(a(),_(X,{key:0,emptyText:"-",mode:e(L).list,content:e(V)({fieldId:s.showField.fieldId,rowData:s.rowData}),field:e(r).matchField(s.showField.fieldId).field,bubble:""},null,8,["mode","content","field"])):w("",!0)])],2)])}}});const ve=N(be,[["__scopeId","data-v-89212e34"]]),ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAQKADAAQAAAABAAAAQAAAAABGUUKwAAAD90lEQVR4Ae1bW3LaMBQVTCHMkJkk/cvQD4YNsIVuoxvJIrqQdhtsoQvgg+FhSIAwAfLkUR3a67pGsq5ADsjkznhkpGv5nmNL50pATkhbr9dfnp+fv8vTr/K4lkeWLZDgGqVS6SaXy3Vyf8H/kpWfs4xagW0sSajnnp6efsjGbwqHU6j6CQJ6EmnWX3vdwwxAwFrXegr1+VMAmYTxg4Akdk6h7eMNOIWnnITxU1JjvO3+/l7geHl52TSdnZ2Jq6urzRH39eUzSwbf3t5Et9sV8/lciatcLotKpSIKhYKy/ZgrWXNAEniAAzHw8dGMBOCV1z35KGD4wNc3YxHABZVJAmjC45Bg48vp7z18jG/AewRxyHsYCYDUcc3Gl9tn2n5GAqDzXLPx5faZth+LAOi8yeCTSQIAHElOEgmUCJlIOsZ2ViZIgUPmcNBsfzKpMBGQxdJqMXSsBIzHYyG39sTl5WXiUFXFbzUEVB0cuu729lbc3d2FYVSrVSsSjCoQ9nyEJ4+Pj/+BR4hYlC2XS3a03hIAkJ1OZwsolu69Hnb6eeYtAXjSAKuyh4cH9srUSwIw6U2nUxX2sC4IAvH6+hp+1p14RwBykH6/r8MT1svvPEW73cYXv2Gd6sQrArigCKj8xlsMBgP6qCy9IgBPnrJQJRpF5Wg0ErPZTNHyp8obAjDmMfZ3MUyYi8VCeakXBNCutBIBoxLgdZu2XhBgm9yoOMEwGA6HW01HTwDSXM6u9BYyRQXSZqwZonbUBCBYBO3KoCLIHlerVdhlagRg3EGCAEA3AYVRKE4QJHTctSE5QpJElspyGEy3Wi0BHYZhBq/VakL+KovuaywRpC7VNV5scJhMJuL8/FxcXFyIVN4APHkCj1g4CUk0ZgSII03Dgglvg3MCMNsi+YibKSEh//grSvWuSwwxqItTApL0FgCSEhICGJ+kqD6NEvsJTgnAa5U04aEtaa2OoROXqTSAR/t0RgBniYob61JaaL0qUYkGm8a5EwK4S1QCEF/UYHdHl6rSNWmVexNAyQVKrsWvAfi0JM8U0955QFzyTDekdpLGYrFo3N2ha9Io9yJAJ3ncQCGNNskRt18bv52HgEnyuEHYDB1unzZ+OxNgkjybIA7puxMBXMk7JDDuva0JsJU8biCH8rMiIC5fhwra5X2tCNhV8lwG7LovNgH7Sp7rwF31xyLAleS5CtplPywCsiJ5KuKMBGRJ8qwJyJrkWRGQRcnTEfBvjzjikUXJi8Cj0wBzQIM+UZlVySN8kbKx9edpSF6z2Uzc24t04PPpWP7Fp775pkKO9/Dv83J35hpvgGuz+eWW7t7YO8jnjcKlu5zqA9lPQ364qdfrnd/G8FX8/WBTDwAAAABJRU5ErkJggg==";function we(I){const c=ee();return{url:D(()=>{var t,y,v,d,s,i,k;if(((t=c.view.basis.coverOptions.appointCover)==null?void 0:t.type)===M.fix)return c.view.basis.coverOptions.appointCover.imgSrc??"./img/tableCard/01.png";if(((y=c.view.basis.coverOptions.appointCover)==null?void 0:y.type)===M.field&&c.view.basis.coverOptions.appointCover.coverFieldId){const l=c.view.basis.coverOptions.appointCover.coverFieldId,n=c.matchField(l);let p=null;const C=te(n==null?void 0:n.field.type,"getFormat");if(n&&C){const u=C(V({fieldId:l,rowData:I.item}),n.field);n.field.type===R.uploadImg?p=(v=u==null?void 0:u[0])==null?void 0:v.url:n.field.type===R.uploadFile?p=(s=(d=u==null?void 0:u[0])==null?void 0:d.thumbnail)==null?void 0:s.url:n.field.type===R.templateFile&&(p=(k=(i=u==null?void 0:u[0])==null?void 0:i.thumbnail)==null?void 0:k.url)}return p??ge}return null}),render:c}}const ye=B({__name:"CardTableImg",props:{item:{}},setup(I){const c=I,{url:r,render:t}=we(se({...ae(c)})),y=D(()=>{var s;const d={backgroundImage:`url(${r.value})`};return(s=t.view.basis.coverOptions.appointCover)!=null&&s.displayArea&&(d.height="initial",d.paddingTop=`${(t.view.basis.coverOptions.appointCover.displayArreaH??1)/(t.view.basis.coverOptions.appointCover.displayArreaW??1)*100}%`),d}),v=d=>{var s;r.value&&((s=t.view.basis.coverOptions.appointCover)!=null&&s.isViewCover)&&(ie({list:[r.value]}),d.stopPropagation())};return(d,s)=>e(r)?(a(),A("div",{key:0,class:"item-img",style:q(y.value),onClick:v},null,4)):w("",!0)}}),ke=B({__name:"CardTable",props:{tableData:{},loading:{type:Boolean}},emits:["row-click"],setup(I,{emit:c}){const r=c,{render:t,listFields:y}=J(),v=le(),{width:d}=oe(v),s=D(()=>{let i=1;for(;d.value>(i+1)*200+i*16;)i++;return i=i-t.view.basis.cardSize,i<1&&(i=1),i});return(i,k)=>{var p;const l=W,n=j;return G((a(),A("div",{class:"card_table",ref_key:"el",ref:v},[f("div",{class:"card_table-body",style:q({"grid-template-columns":`repeat(${s.value}, minmax(200px, 400px))`})},[(a(!0),A(E,null,U(i.tableData,(C,u)=>(a(),A("div",{onClick:F=>r("row-click",C),class:z(["card_table-item",[`card_table-size-${["small","default","large"][e(t).view.basis.cardSize]}`,e(t).view.basis.coverOptions.appointCover&&`card_table-position-${["top","left","right"][e(t).view.basis.coverOptions.appointCover.position]}`,e(t).view.basis.coverOptions.appointCover&&`card_table-way-${["fill","full"][e(t).view.basis.coverOptions.appointCover.coverWay]}`]]),key:e(ne)(C)},[x(ye,{item:C},null,8,["item"]),f("div",{class:"item-body"},[(a(!0),A(E,null,U(e(y),(F,g)=>(a(),_(ve,{index:u,key:F.fieldId,showField:F,header:g===0,rowData:C},null,8,["index","showField","header","rowData"]))),128))])],10,["onClick"]))),128))],4),(p=i.tableData)!=null&&p.length?w("",!0):(a(),_(l,{key:0,description:"没有数据"}))])),[[n,i.loading]])}}});const Ce=N(ke,[["__scopeId","data-v-5b774cc7"]]),_e=B({__name:"CommonTable",emits:["row-click"],setup(I,{emit:c}){const r=c,{render:t,listFields:y,selectItems:v,tableMode:d}=J(),s=D(()=>({sourceId:t.sourceId,params:{...t.getSearchParams()},disableRequest:t.disabledLoad||t.disabledLoadPlus,mode:"list",limit:t.limit})),{getData:i,tableData:k,loading:l,current:n,limit:p,total:C}=re(s);i(),t.on(de,({isReset:g})=>{i(g)});const u=g=>{r("row-click",g)},F=(g,b,m)=>{var o,O;(O=(o=t.options.tableProps)==null?void 0:o.onHeaderDragend)==null||O.call(o,g,b,m)};return ce(()=>{t.current=n.value,t.limit=p.value,t.tableData=k.value}),(g,b)=>{var m;return a(),A("div",{style:{height:"100%"}},[e(t).view.basis.style===e(T).plain?(a(),A("div",{key:0,style:{height:"calc(100% - 5px)"}},[x(pe,{selected:e(v),"onUpdate:selected":b[0]||(b[0]=o=>S(v)?v.value=o:null),current:e(n),"onUpdate:current":b[1]||(b[1]=o=>S(n)?n.value=o:null),limit:e(p),"onUpdate:limit":b[2]||(b[2]=o=>S(p)?p.value=o:null),total:e(C),isClick:"",multiple:"",tableMode:e(d),data:e(k),loading:e(l),fields:e(t).fields,showFields:e(y),isSelect:e(t).view.basis.settings.some(o=>o===e(h).check),stripe:e(t).view.basis.settings.some(o=>o===e(h).discoloration),isNumber:e(t).view.basis.settings.some(o=>o===e(h).number),border:"",onRowClick:u,onHeaderDragend:F,resizable:(m=e(t).options.tableProps)==null?void 0:m.resizable,autoHeight:"",oneLine:""},null,8,["selected","current","limit","total","tableMode","data","loading","fields","showFields","isSelect","stripe","isNumber","resizable"])])):e(t).view.basis.style===e(T).brief?(a(),_(Ae,{key:1,"table-data":e(k),loading:e(l),onRowClick:u},null,8,["table-data","loading"])):e(t).view.basis.style===e(T).card?(a(),_(Ce,{key:2,"table-data":e(k),loading:e(l),onRowClick:u},null,8,["table-data","loading"])):w("",!0),e(t).view.basis.style!==e(T).plain?(a(),_(ue,{key:3,limit:e(p),"onUpdate:limit":b[3]||(b[3]=o=>S(p)?p.value=o:null),current:e(n),"onUpdate:current":b[4]||(b[4]=o=>S(n)?n.value=o:null),total:e(C)},null,8,["limit","current","total"])):w("",!0)])}}});export{_e as default};
