import{d as b,r as n,bx as U,sc as q,c as E,sd as M,e as L,o as m,f,F as I,i as e,w as c,g as z,m as A,t as P,b as C,B as V,rC as N,bh as v,se as S,sf as $,sg as H,l as D,bT as j,bU as B,dC as F,dD as G,ca as J,_ as O,bi as y,cc as x,sh as W,bs as K,si as Q,cf as X,sj as Y,sk as Z,sl as ee,aV as te,ik as ae,aN as le,im as oe,sm as se,aT as ne,N as re,O as ie}from"./index-b80d5ef5.js";import{O as ue}from"./OrgDetails-14c28d8f.js";import{_ as w}from"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import{_ as de}from"./ViewMember.vue_vue_type_script_setup_true_lang-d1e066ac.js";import{P as pe,p as ce}from"./PosAddAndEdit-00e09967.js";import{G as me,g as _e}from"./GroupAddAndEdit-f668234f.js";import{O as fe}from"./OrgAddOrModifyForms-8e852a85.js";import{R as be}from"./RoleAddAndEdit-9b2fe5c2.js";import"./lodash-ae95bc60.js";import"./SelectOrg.vue_vue_type_script_setup_true_lang-3e503345.js";const ve=b({__name:"basic-info",props:{entId:{}},setup(_){const d=_,o=n(),u=n(!1),i=[{name:"企业名称",key:"corpName"},{name:"所在行业",key:"industry"},{name:"系统简称",key:"remarks"}];U(async()=>{u.value=!0,o.value=await q(d.entId),u.value=!1});const a=E(()=>o.value?o.value.syFlag===M?[{label:"系统管理员",key:"systemAdmin"},{label:"安全管理员",key:"securityAdmin"},{label:"审计管理员",key:"auditAdmin"}]:[{label:"系统管理员",key:"systemAdmin"}]:[]);return(s,t)=>{const l=j,r=B,p=F,h=G,k=J;return L((m(),f("div",{class:"ent_basic-info"},[o.value?(m(),f(I,{key:0},[e(r,{title:"企业信息",border:!0,column:2},{default:c(()=>[(m(),f(I,null,z(i,g=>e(l,{"label-class-name":"label_class",label:g.name,key:g.key},{default:c(()=>[A(P(o.value[g.key]||"-"),1)]),_:2},1032,["label"])),64)),e(l,{label:"LOGO图标"},{default:c(()=>[o.value.logo?(m(),f("img",{key:0,class:"basic-logo",src:o.value.logo,alt:""},null,8,["src"])):(m(),f("span",{key:1},"-"))]),_:1})]),_:1}),e(r,{style:{"margin-top":"30px"},title:"管理员信息",border:!0,column:1},{default:c(()=>[(m(!0),f(I,null,z(a.value,(g,R)=>(m(),C(l,{key:R,label:g.label},{default:c(()=>[e(h,{data:o.value[g.key]??[],border:"",style:{width:"100%"},"empty-text":"暂无管理员"},{default:c(()=>[e(p,{prop:"nickname",label:"名称"}),e(p,{prop:"username",label:"账号"}),e(p,{prop:"mobile",label:"手机号"},{default:c(({row:T})=>[A(P(V(N)(T.mobile)),1)]),_:1})]),_:2},1032,["data"])]),_:2},1032,["label"]))),128)),e(l,{label:"应用访问权限"},{default:c(()=>[e(v,{"model-value":o.value.isAuthBusiness,"active-value":V(S),"inactive-value":V($),"dict-key":V(H),disabled:""},null,8,["model-value","active-value","inactive-value","dict-key"])]),_:1})]),_:1})],64)):D("",!0)])),[[k,u.value]])}}});const ge=O(ve,[["__scopeId","data-v-74900aea"]]),ye=b({__name:"org-info",props:{entId:{}},setup(_){const d=_,o=n(!1),u=n(),i={query:{list:[{type:"input",label:"机构名称",prop:"name"},{type:"input",label:"机构主管",prop:"orgManagerName"},{type:"select",label:"状态",prop:"status",options:"status",isAll:!0,initValue:x}]},request:{api:W,transformParams:a=>(a.tenantId=d.entId,a)},table:{tableProps:{treeProps:{children:"children",hasChildren:"hasChildren"},rowKey:"id"},tableCols:[{type:"index",width:55,label:"序号"},{prop:"name",label:"机构名称",showOverflowTooltip:!0},{label:"机构性质",prop:"nature",slots:{default({row:a}){return e("span",null,[K(a.nature,Q)])}}},{prop:"orgManagerName",label:"机构主管"},{prop:"status",label:"状态",slots:{default({row:a}){return e(v,{modelValue:a.status,"onUpdate:modelValue":s=>a.status=s,disabled:!0},null)}}},{fixed:"right",width:180,label:"操作",slots:{default({row:a}){const t=[{type:"primary",onClick:async()=>{var l;await((l=u.value)==null?void 0:l.getDetails(a.id)),o.value=!0},text:"查看"}];return e(w,{num:3,rowId:a.id,list:t},null)}}}]},pagination:{hidePagination:!0}};return(a,s)=>{const t=y("az-page");return m(),f("div",null,[e(t,{config:i,maxHeight:"var(--az-layout-main-height) - 85px"}),e(ue,{ref_key:"viewRef",ref:u,"drawer-model":o.value,"onUpdate:drawerModel":s[0]||(s[0]=l=>o.value=l)},null,8,["drawer-model"])])}}});const we=O(ye,[["__scopeId","data-v-17c84b43"]]),he=b({__name:"member-info",props:{entId:{}},setup(_){const d=_,o={query:{list:[{type:"input",label:"账号",prop:"account"},{type:"input",label:"姓名",prop:"nickname"},{type:"select",label:"状态",prop:"status",options:X,isAll:!0,initValue:x}]},request:{api:Y,transformParams:a=>(a.tenantId=d.entId,a)},table:{tableCols:[{prop:"username",label:"账号",showOverflowTooltip:!0,width:200},{prop:"nickname",label:"姓名",width:150},{prop:"mobile",label:"手机",width:150,slots:{default({row:a}){return e("span",null,[N(a.mobile)])}}},{prop:"orgList",label:"所属组织",minWidth:200,showOverflowTooltip:!0,slots:{default({row:a}){return e("span",null,[(a.orgList??[]).map(s=>s==null?void 0:s.name).join("、")||"-"])}}},{prop:"status",label:"状态",width:100,showOverflowTooltip:!0,slots:{default({row:a}){return e(v,{modelValue:a.status,"onUpdate:modelValue":s=>a.status=s,disabled:!0},null)}}},{fixed:"right",label:"操作",minWidth:180,slots:{default({row:a}){const t=[{type:"primary",onClick:()=>{i.value=a,u.value=!0},text:"查看"}];return e(w,{rowId:a.memberId,list:t},null)}}}]}},u=n(!1),i=n();return(a,s)=>{const t=y("az-page");return m(),f("div",null,[e(t,{config:o,maxHeight:"var(--az-layout-main-height) - 85px"}),e(de,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=l=>u.value=l),view:i.value},null,8,["modelValue","view"])])}}}),xe=b({__name:"position-info",props:{entId:{}},setup(_){const d=_,o={query:{list:[{type:"input",label:"职位名称",prop:"positionName"},{type:"select",label:"状态",prop:"status",options:"status",isAll:!0,initValue:x}]},request:{api:ce,transformParams:t=>(t.tenantId=d.entId,t)},table:{tableCols:[{type:"index",width:55,label:"序号"},{prop:"positionName",label:"职位名称"},{prop:"status",label:"状态",slots:{default({row:t}){return e(v,{modelValue:t.status,"onUpdate:modelValue":l=>t.status=l,disabled:!0},null)}}},{fixed:"right",width:200,label:"操作",slots:{default({row:t}){const r=[{type:"primary",onClick:()=>{s.value={...t},a.value="view",i.value=!0},text:"查看"}];return e(w,{num:4,rowId:t.id,list:r},null)}}}]}},u=n(),i=n(!1),a=n("add"),s=n();return(t,l)=>{const r=y("az-page");return m(),f("div",null,[e(r,{ref_key:"azPageRef",ref:u,config:o,maxHeight:"var(--az-layout-main-height) - 85px"},null,512),e(pe,{"drawer-model":i.value,"onUpdate:drawerModel":l[0]||(l[0]=p=>i.value=p),"row-data":s.value,"com-state":a.value},null,8,["drawer-model","row-data","com-state"])])}}}),Ve=b({__name:"group-info",props:{entId:{}},setup(_){const d=_,o={query:{list:[{type:"input",label:"分组名称",prop:"groupName"},{type:"select",label:"状态",prop:"status",options:"status",isAll:!0,initValue:x}]},request:{api:_e,transformParams:t=>(t.tenantId=d.entId,t)},table:{tableCols:[{type:"index",width:55,label:"序号"},{prop:"groupName",label:"分组名称",showOverflowTooltip:!0},{prop:"status",label:"状态",slots:{default({row:t}){return e(v,{modelValue:t.status,"onUpdate:modelValue":l=>t.status=l,disabled:!0},null)}}},{fixed:"right",width:200,label:"操作",slots:{default({row:t}){const r=[{type:"primary",onClick:()=>{s.value={...t},a.value="view",i.value=!0},text:"查看"}];return e(w,{num:4,rowId:t.id,list:r},null)}}}]}},u=n(),i=n(!1),a=n("add"),s=n();return(t,l)=>{const r=y("az-page");return m(),f("div",null,[e(r,{ref_key:"azPageRef",ref:u,config:o,maxHeight:"var(--az-layout-main-height) - 85px"},null,512),e(me,{"drawer-model":i.value,"onUpdate:drawerModel":l[0]||(l[0]=p=>i.value=p),"row-data":s.value,"com-state":a.value},null,8,["drawer-model","row-data","com-state"])])}}}),ke=b({__name:"orgjob-info",props:{entId:{}},setup(_){const d=_,o=n({orgId:"",orgName:""}),u=n(!1),i=n("add"),a=n(),s=n(),t=n(),l={query:{list:[{type:"input",label:"岗位名称",prop:"jobName"},{type:"select",label:"状态",prop:"status",options:"status",isAll:!0,initValue:x}]},request:{api:Z,transformParams:r=>(r.tenantId=d.entId,r)},table:{tableCols:[{type:"index",width:55,label:"序号"},{prop:"jobName",label:"岗位名称"},{prop:"orgName",label:"所属部门"},{prop:"status",label:"状态",slots:{default({row:r}){return e(v,{modelValue:r.status,"onUpdate:modelValue":p=>r.status=p,disabled:!0},null)}}},{fixed:"right",width:180,label:"操作",slots:{default({row:r}){const h=[{type:"primary",onClick:()=>{t.value={...r},i.value="view",u.value=!0},text:"查看"}];return e(w,{num:3,rowId:r.id,list:h},null)}}}]}};return(r,p)=>{const h=y("az-page");return m(),f("div",{ref_key:"orgRef",ref:a},[e(h,{ref_key:"azPageRef",ref:s,config:l,maxHeight:"var(--az-layout-main-height) - 85px"},null,512),e(fe,{"row-data":t.value,"selected-org":o.value,"com-state":i.value,"drawer-model":u.value,"onUpdate:drawerModel":p[0]||(p[0]=k=>u.value=k)},null,8,["row-data","selected-org","com-state","drawer-model"])],512)}}}),Ie=b({__name:"role-info",props:{entId:{}},setup(_){const d=_,o={query:{list:[{type:"input",label:"角色名称",prop:"name"}]},request:{api:ee,transformParams:t=>(t.tenantId=d.entId,t)},table:{tableCols:[{prop:"name",label:"角色名称"},{prop:"status",label:"状态",slots:{default({row:t}){return e(v,{modelValue:t.status,"onUpdate:modelValue":l=>t.status=l,disabled:!0},null)}}},{fixed:"right",width:200,label:"操作",slots:{default({row:t}){const r=[{type:"primary",onClick:()=>{s.value={...t},a.value="view",i.value=!0},text:"查看"}];return e(w,{num:2,rowId:t.id,list:r},null)}}}]}},u=n(),i=n(!1),a=n("add"),s=n();return(t,l)=>{const r=y("az-page");return m(),f("div",null,[e(r,{ref_key:"azPageRef",ref:u,config:o,maxHeight:"var(--az-layout-main-height) - 85px"},null,512),e(be,{"drawer-model":i.value,"onUpdate:drawerModel":l[0]||(l[0]=p=>i.value=p),"row-data":s.value,"com-state":a.value},null,8,["drawer-model","row-data","com-state"])])}}}),ze={name:"Details"},Ee=b({...ze,setup(_){const d=te(),o=n(""),u=n("info"),i=n(!0),a=()=>{const{id:s}=d.query;typeof s!="string"?(le.error("请先选择你需要查看的企业详情"),d.meta.id&&oe.emit(se,d.meta.id)):s!==o.value&&(o.value=s,u.value="info",i.value=!1,ne(()=>{i.value=!0}))};return a(),ae(a),(s,t)=>{const l=re,r=ie;return m(),f("div",{class:"layout_box"},[i.value?(m(),C(r,{key:0,class:"az_tabs-custom",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=p=>u.value=p)},{default:c(()=>[e(l,{label:"基本信息",name:"info"},{default:c(()=>[e(ge,{"ent-id":o.value},null,8,["ent-id"])]),_:1}),e(l,{label:"机构信息",name:"org",lazy:""},{default:c(()=>[e(we,{"ent-id":o.value},null,8,["ent-id"])]),_:1}),e(l,{label:"成员信息",name:"member",lazy:""},{default:c(()=>[e(he,{"ent-id":o.value},null,8,["ent-id"])]),_:1}),e(l,{label:"角色信息",name:"role",lazy:""},{default:c(()=>[e(Ie,{"ent-id":o.value},null,8,["ent-id"])]),_:1}),e(l,{label:"岗位信息",name:"orgJob",lazy:""},{default:c(()=>[e(ke,{"ent-id":o.value},null,8,["ent-id"])]),_:1}),e(l,{label:"职位信息",name:"position",lazy:""},{default:c(()=>[e(xe,{"ent-id":o.value},null,8,["ent-id"])]),_:1}),e(l,{label:"分组信息",name:"group",lazy:""},{default:c(()=>[e(Ve,{"ent-id":o.value},null,8,["ent-id"])]),_:1})]),_:1},8,["modelValue"])):D("",!0)])}}});export{Ee as default};
