import{d as h,r as d,aV as k,e as B,B as l,o as n,f as c,h as C,k as D,t as V,b as q,w as _,m as w,l as p,i as v,p as N,aT as b,U as E,cr as K,ca as T,_ as F}from"./index-b80d5ef5.js";import{_ as R}from"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";var a=(t=>(t.middle="middle",t.loading="loading",t.success="success",t.fail="fail",t.exit="exit",t.danger="danger",t))(a||{});const $=h({__name:"LoadingData",props:{load:{type:Function},queryKeys:{},path:{type:[String,Function]}},setup(t,{expose:f}){var u;const r=t,o=d(""),s=d(a.loading),m=k();(u=r.queryKeys)!=null&&u.length&&r.queryKeys.some(e=>!m.query[e])&&(o.value="缺失必要参数",s.value=a.exit);const i=async()=>{if(s.value!==a.exit)try{s.value=a.loading,await r.load(),s.value=a.middle,b(()=>a.middle===s.value&&(s.value=a.success))}catch(e){(e==null?void 0:e.type)==="http"?o.value=(e==null?void 0:e.msg)??"请求异常，请稍后重试":(e==null?void 0:e.type)==="business"?o.value="请求异常，请稍后重试":(console.error(e),o.value=(e==null?void 0:e.msg)??"异常错误，请稍后重试"),s.value=e.loadState??a.fail}};return i(),f({reload(){i()}}),(e,z)=>{const y=E,g=K,x=T;return B((n(),c("div",{class:N(["loading_page",{"is-loading":s.value===l(a).loading}])},[s.value===l(a).success?C(e.$slots,"default",{key:0},void 0,!0):[l(a).fail,l(a).danger].includes(s.value)?(n(),c("div",{key:1,class:"loading_fail"},[D("span",null,V(o.value),1),s.value===l(a).fail?(n(),q(y,{key:0,type:"danger",onClick:i,class:"ml-5"},{default:_(()=>[w(" 刷新 ")]),_:1})):p("",!0)])):s.value===l(a).exit?(n(),c("div",{key:2,class:"error-result"},[v(g,{icon:"error",title:o.value},{extra:_(()=>[v(R,{path:e.path},null,8,["path"])]),_:1},8,["title"])])):p("",!0)],2)),[[x,s.value===l(a).loading]])}}});const U=F($,[["__scopeId","data-v-5f280393"]]);export{a as L,U as a};
