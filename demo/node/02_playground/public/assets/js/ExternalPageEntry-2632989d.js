import{d as _,r as f,cm as P,o as n,b as i,w as o,k as x,B as r,bD as E,m as I,l as k,i as h,L as C,f as v,cj as V,b4 as w,cY as B,a$ as l,cF as b,cK as O,U as j,_ as A}from"./index-b80d5ef5.js";import{P as D}from"./PageContainer-f97fee2b.js";import{u as L,a as N}from"./routePage-d8a1866d.js";import{g as S}from"./index-c26b8edc.js";import{e as U}from"./index-c4a56c4a.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./useExtractQuery-f96f705c.js";import"./TemplateIcon-2baf2fac.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./homePage-3523f56f.js";import"./SelectDataSourece-70a968c3.js";import"./SelectIcon-71b7daf2.js";import"./AppIconNew-704f70f4.js";import"./useTransformColor-38b5da33.js";import"./enum-baae9292.js";import"./LoadingData-195d0581.js";import"./useQueryTab-05fa7456.js";import"./store-3b56af45.js";import"./index-c8016e23.js";import"./appManage-8a2e3832.js";const F=_({__name:"ExternalPageEntry",props:{appId:{},entry:{}},setup(m){const e=m,c=L(),d=()=>{w(B,{query:{entryId:e.entry.id,appId:e.appId}})},s=f(),p=P(),u=async()=>{var t;if(!e.entry.includePageVO)return Promise.reject({msg:"参数异常",loadState:l.danger});if(((t=e.entry.includePageVO)==null?void 0:t.type)===b.in){const a=e.entry.includePageVO.internalPageId;if(a&&(p.value=S(a)),!p.value)return Promise.reject({msg:"配置异常，可由应用管理员重新配置",loadState:l.danger})}else{const a=await O({appId:e.appId,data:e.entry.includePageVO,entryId:e.entry.id});if(!a)return Promise.reject({msg:"跳转链接异常，可由应用管理员重新配置",loadState:l.danger});s.value=a}},g=()=>{var t;return((t=p.value)==null?void 0:t.component)??null};return(t,a)=>{const y=j;return n(),i(D,{entry:t.entry},{header:o(()=>[x("span",{style:{"margin-left":"auto"}},[r(c).getOperatingPremission(r(N).entryAuth,{entryAuthtype:r(U).writeable,entryId:e.entry.id})?(n(),i(y,{key:0,text:"",icon:r(E),type:"primary",onClick:d},{default:o(()=>[I(" 编辑 ")]),_:1},8,["icon"])):k("",!0)])]),default:o(()=>[h(C,{class:"external_page",load:u,"element-loading-background":"transparent",isFailImg:"",center:!1},{default:o(()=>[r(s)?(n(),v("iframe",{key:0,src:r(s),allow:"camera *;autoplay *;microphone *"},null,8,["src"])):(n(),i(V(g()),{key:1}))]),_:1})]),_:1},8,["entry"])}}});const oe=A(F,[["__scopeId","data-v-44cf420d"]]);export{oe as default};
