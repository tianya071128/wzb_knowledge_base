import{d as w,r as s,y as x,d5 as z,o as t,f as y,b as o,l as p,i as g,w as i,F as E,g as F,m as _,L as S,iE as U,b4 as f,iF as q,iD as B,iG as N,U as A,c3 as R,_ as G,N as J}from"./index-b80d5ef5.js";import{T as $}from"./Tabs-69fb071c.js";import{S as j,C as H,P as K,a as O}from"./routePage-63b4bd81.js";import{a as Q,M as W,b as X}from"./EditAuthInfo-e7e23191.js";import"./useQueryTab-05fa7456.js";import"./useExtractQuery-f96f705c.js";import"./el-image-ee5f9ae3.js";import"./el-image-viewer-e054799e.js";import"./AzConfirmSwitch-689fcef9.js";import"./AzPasswordFormItem-db212711.js";const Y=w({__name:"MyPlugin",setup(L){const d=s(),m=()=>{var e;(e=d.value)==null||e.reload()},r=s([]),u=s([]),c=s(0),I=()=>{f(q)},l=s({search:"",pluginTypeId:"",limit:10,current:1}),V=async e=>{f(B,{query:{applicationId:e.id,viewType:2,tenantAppId:e.tenantAppId}})},C=async e=>{await Q(e),m()},D=e=>{f(N,{query:{tenantAppId:e}})},v=s(!1),P=async()=>{const e=await W(l.value);u.value=e.records,c.value=+e.total,v.value=!0};(async()=>{const e=await X({limit:"",current:"",name:"",order:""});r.value=e.map(a=>({value:a.id,label:a.name}))})();const T=s({request:{api:P}});return x(l.value,z(()=>{m()},300),{deep:!0}),(e,a)=>{var b;const M=A,h=R;return t(),y("div",{class:"myPlugin"},[v.value?(t(),o(j,{key:0,class:"mb-20",modelValue:l.value.search,"onUpdate:modelValue":a[0]||(a[0]=n=>l.value.search=n)},null,8,["modelValue"])):p("",!0),(b=r.value)!=null&&b.length?(t(),o(H,{key:1,class:"mb-20",modelValue:l.value.pluginTypeId,"onUpdate:modelValue":a[1]||(a[1]=n=>l.value.pluginTypeId=n),"item-list":r.value},null,8,["modelValue","item-list"])):p("",!0),g(S,{load:P,ref_key:"loadingDataRef",ref:d},{default:i(()=>{var n;return[((n=u.value)==null?void 0:n.length)>0?(t(),y("div",{key:0,class:"az-grid"},[(t(!0),y(E,null,F(u.value,k=>(t(),o(K,{key:k.id,cardInfo:k,onGoDetail:D,onDeletePlugin:C,onViewLogs:V,onRefresh:m},null,8,["cardInfo"]))),128))])):(t(),o(h,{key:1},{default:i(()=>[_(" 暂无数据，可前往 "),g(M,{type:"primary",link:"",onClick:I},{default:i(()=>[_("插件市场")]),_:1}),_(" 安装 ")]),_:1}))]}),_:1},512),r.value.length?(t(),o(U,{key:2,currentPage:l.value.current,"onUpdate:currentPage":a[2]||(a[2]=n=>l.value.current=n),pageSize:l.value.limit,"onUpdate:pageSize":a[3]||(a[3]=n=>l.value.limit=n),total:c.value,config:T.value},null,8,["currentPage","pageSize","total","config"])):p("",!0)])}}});const Z=G(Y,[["__scopeId","data-v-0b72bb8f"]]),pe=w({__name:"routePage",setup(L){const d=["1","2","3"];return(m,r)=>{const u=J;return t(),o($,{tabs:d,"query-key":"myPlugin"},{default:i(({active:c})=>[g(u,{label:"我的插件",name:"1",lazy:""},{default:i(()=>[c==="1"?(t(),o(Z,{key:0})):p("",!0)]),_:2},1024),g(u,{label:"插件市场",name:"3",lazy:""},{default:i(()=>[c==="3"?(t(),o(O,{key:0,"is-route":!1})):p("",!0)]),_:2},1024)]),_:1})}}});export{pe as default};
