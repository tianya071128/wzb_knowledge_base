import{d as V,v as b,jG as D,y as f,c as l,ia as E,dW as F,r as B,Z as I,yH as _,cC as k,o as u,f as w,i as p,o4 as R,B as c,b as T,e as W,S as A,k as N,dy as S,l as $}from"./index-b80d5ef5.js";import{_ as z}from"./TemplateCustomEntry.vue_vue_type_script_setup_true_lang-346d01b1.js";import"./index-c89dfa90.js";const H=V({__name:"FileModeTemplateFile",props:{file:{},active:{type:Boolean}},emits:["update:file"],setup(v,{emit:g}){const r=v,s=b(r,"file",g),e=D();f(()=>r.active,()=>{r.active&&(e.isBusinessInfo=!0)},{immediate:!0});const y=l(()=>({...E(),size:e.formDesigner.formConfig.size,labelPosition:e.formDesigner.formConfig.labelPosition,labelWidth:e.formDesigner.formConfig.labelWidth})),C=l(()=>{var t,o;return(t=e.fileMode)!=null&&t.fieldId&&!e.getFieldAuth((o=e.fileMode)==null?void 0:o.fieldId,"entry_template")?F.view:e.mode}),a=B(),h=l(()=>{var t;return e.matchField(((t=e.fileMode)==null?void 0:t.fieldId)??"")}),n=l({get(){return s.value.customData},set(t){s.value={...s.value,customData:t}}});f([()=>e.fileModeCollapse,a],()=>{var t,o,i;(i=(o=(t=a.value)==null?void 0:t.formRender)==null?void 0:o.render)==null||i.setAllFieldSpan(e.fileModeCollapse?24:12)});const d=`file_${I()}`;return e.addValidate({id:d,validate(){var t,o;return(o=(t=a.value)==null?void 0:t.formRender)==null?void 0:o.validate({hideAlert:!0})},onError(){e.$bus.emit(_,{active:1})}}),k(()=>{e.removeValidate(d)}),(t,o)=>{var i,m;return u(),w("div",{style:{height:"100%"}},[p(R,{modelValue:!0,isEmbed:"",options:{list:[t.file]}},null,8,["options"]),c(e).fileModeTeleportElement?(u(),T(S,{key:0,to:c(e).fileModeTeleportElement},[W(N("div",{style:{height:"100%"}},[p(z,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=M=>n.value=M),ref_key:"templateCustomEntryRef",ref:a,"point-list":(m=(i=t.file)==null?void 0:i.options)==null?void 0:m.pointList,"entry-id":h.value.field.entryId,mode:C.value,formConfig:y.value},null,8,["modelValue","point-list","entry-id","mode","formConfig"])],512),[[A,t.active]])],8,["to"])):$("",!0)])}}});export{H as default};
