import{r as E,c as d,dW as c,pN as y}from"./index-b80d5ef5.js";import{N as n}from"./enum-7a2ae6a9.js";const I=()=>{const t=E(),m=async e=>{const r=await y(e);return t.value=r,r},i=d(()=>{var e;if((e=t.value)!=null&&e.form)try{return JSON.parse(t.value.form)}catch{return null}}),p=d(()=>{var u;const e=t.value,r=(u=t.value)==null?void 0:u.fileMode,a=e==null?void 0:e.flowNode,b=(e==null?void 0:e.flowNode.type)===n.EndEvent,f=(e==null?void 0:e.flowNode.type)===n.StartEvent,h=(e==null?void 0:e.writeable)??!1,v=e!=null&&e.writeable?c.edit:c.view,s=(e==null?void 0:e.formAuth)??{},o={appId:(e==null?void 0:e.appId)??"",entryId:(e==null?void 0:e.entryId)??"",formData:e==null?void 0:e.formData,mode:v,other:{hideLogApproval:!0,fileMode:r??{enable:!1},info:["comment","log","flowChart"],validateRules:a!=null&&a.isSubmitValidate?a==null?void 0:a.submitValidate:void 0}};if(!(e!=null&&e.formAuth))return o;const w=Object.values(s).some(l=>l.readable===!0||l.writeable===!0);return f&&!w?o:((b||!h)&&Object.keys(s).forEach(l=>{s[l].writeable=!1}),{...o,fieldAuth:{auth:s,authDefault:{readable:!1,writeable:!1},isRequire:!0}})});return{loadFlowData:m,flowTaskInfo:t,formDesigner:i,formOptions:p}};export{I as u};
