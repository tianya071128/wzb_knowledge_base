import{d as M,o as g,f as L,k as B,t as H,h as z,_ as R,v as P,r as v,bK as J,b as $,w as l,i as e,bu as D,B as c,C as U,n4 as O,n5 as N,aN as I,Q,ac as h,bm as W,bn as S,bi as X,bG as Y,m as V,n6 as Z,n7 as ee,E as oe,dC as le,av as q,dD as se,ab as ae,dH as te,dJ as F,aK as ne,l as de,U as ie,P as ue}from"./index-b80d5ef5.js";const re=M({__name:"CardItemBox",props:{label:{}},setup(C){return(m,p)=>(g(),L("div",{class:"code-form-item"},[B("div",{class:"label-flex"},[B("span",{class:"label-flex-name"},H(m.label)+"：",1),z(m.$slots,"btn",{},void 0,!0)]),z(m.$slots,"default",{},void 0,!0)]))}});const pe=R(re,[["__scopeId","data-v-b2bbb903"]]),ce=M({__name:"SaveCodeLib",props:{dialogModel:{type:Boolean},codeBlock:{},codeType:{},businessType:{}},emits:["update:dialogModel"],setup(C,{emit:m}){const p=m,t=C,n=P(t,"dialogModel",p),_=v({name:"",description:""}),i=J({name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:15,message:"长度应为2到15字符",trigger:"blur"}]}),E=()=>{n.value=!1},b=v(),x=async()=>{var f;return await((f=b.value)==null?void 0:f.validate(async s=>{s&&(await O({..._.value,codeBase:t.codeBlock,codeType:t.codeType,saveType:N.enterprise,businessType:t.businessType}),I.success("保存成功"))}))};return(f,s)=>{const y=Q,u=h,o=W,d=S;return g(),$(d,{modelValue:c(n),"onUpdate:modelValue":s[3]||(s[3]=a=>U(n)?n.value=a:null),title:"保存到代码库",class:"custom_az_dialog",onClose:E},{footer:l(()=>[e(D,{editMode:!0,onClose:s[2]||(s[2]=a=>n.value=!1),"on-submit":x})]),default:l(()=>[e(o,{ref_key:"ruleFormRef",ref:b,model:_.value,rules:i,"label-position":"right","label-width":"120px","label-suffix":":","status-icon":""},{default:l(()=>[e(u,{label:"标题",prop:"name"},{default:l(()=>[e(y,{modelValue:_.value.name,"onUpdate:modelValue":s[0]||(s[0]=a=>_.value.name=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"功能描述"},{default:l(()=>[e(y,{modelValue:_.value.description,"onUpdate:modelValue":s[1]||(s[1]=a=>_.value.description=a),rows:3,maxlength:200,"show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),me=M({__name:"CodeLib",props:{dialogModel:{type:Boolean},codeType:{},businessType:{}},emits:["update:dialogModel","confirm"],setup(C,{emit:m}){const p=m,t=C,n=P(t,"dialogModel",p),_=()=>{n.value=!1},i=async()=>{if(s.value)p("confirm",s.value.codeBase);else return I.error("请选择代码片段"),Promise.reject("请选择代码片段")},E={id:"lowcode_pluginCodebase",request:{api:()=>Z({saveType:N.enterprise,codeType:t.codeType,businessType:t.businessType})},operation:{hideTableOperation:!0},table:{tableCols:[],tableProps:{highlightCurrentRow:!0}}},b=v(),x=()=>{var o;(o=b.value)==null||o.refresh()},f=v(),s=v(),y=o=>{const d=o.find(a=>a.id===f.value);s.value=d},u=async o=>{await ee(o),I.success("删除成功"),x()};return(o,d)=>{const a=oe,T=le,r=q,G=se,K=ae,j=X("az-page"),A=S;return g(),$(A,{modelValue:c(n),"onUpdate:modelValue":d[2]||(d[2]=w=>U(n)?n.value=w:null),title:"选择代码",class:"custom_az_dialog",onClose:_},{footer:l(()=>[e(D,{editMode:!0,onClose:d[1]||(d[1]=w=>n.value=!1),"on-submit":i})]),default:l(()=>[e(j,{ref_key:"azPageRef",ref:b,config:E},{table:l(({tableData:w})=>[e(K,{modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=k=>f.value=k),style:{width:"100%"},onChange:k=>y(w)},{default:l(()=>[e(G,{data:w,style:{width:"100%"},"max-height":"300px"},{default:l(()=>[e(T,{label:"",width:55},{default:l(({row:k})=>[e(a,{label:k.id,size:"large"},null,8,["label"])]),_:1}),e(T,{prop:"name",label:"标题"}),e(T,{prop:"description",label:"功能描述"}),e(T,{label:"操作"},{default:l(({row:k})=>[e(Y,{title:"确定要删除当前代码片段吗?",confirm:()=>u(k.id)},{reference:l(()=>[e(r,{type:"danger",underline:!1},{default:l(()=>[V("删除")]),_:1})]),_:2},1032,["confirm"])]),_:1})]),_:2},1032,["data"])]),_:2},1032,["modelValue","onChange"])]),_:1},512)]),_:1},8,["modelValue"])}}});const _e=R(me,[["__scopeId","data-v-7bba2035"]]),be=M({__name:"CodeBlockEdit",props:{codeType:{},modelValue:{},businessType:{}},emits:["update:modelValue"],setup(C,{emit:m}){const p=v(!1),t=v(!1),i=P(C,"modelValue",m),E=u=>{i.value=i.value+(i.value?`
`:"")+u},b=v(null),{isFullscreen:x,enter:f,exit:s,toggle:y}=te(b);return(u,o)=>{const d=q,a=ie,T=ue;return g(),$(pe,{label:"代码块",prop:"name"},{btn:l(()=>[B("div",{class:"code-block-header"},[e(d,{type:"primary",underline:!1,onClick:o[0]||(o[0]=r=>t.value=!0)},{default:l(()=>[V(" 选择代码块 ")]),_:1}),B("span",{class:"tip",style:{flex:"1"}},"从代码库中选择常用的代码块"),B("div",null,[e(a,{onClick:o[1]||(o[1]=r=>p.value=!0)},{default:l(()=>[V("保存到代码库")]),_:1})])])]),default:l(()=>[B("div",{class:"code-editor",ref_key:"codeEditorRef",ref:b},[c(x)?(g(),L("div",{key:0,class:"full_opt-wrap"},[e(a,{icon:c(F),onClick:c(y)},{default:l(()=>[V("退出全屏")]),_:1},8,["icon","onClick"]),e(a,{type:"primary",onClick:o[2]||(o[2]=r=>t.value=!0)},{default:l(()=>[V(" 选择代码块 ")]),_:1}),e(a,{onClick:o[3]||(o[3]=r=>p.value=!0)},{default:l(()=>[V("保存到代码库")]),_:1})])):(g(),$(T,{key:1,class:"icon-full",onClick:c(y)},{default:l(()=>[e(c(F))]),_:1},8,["onClick"])),e(c(ne),{style:{width:"100%",height:"100%"},modelValue:c(i),"onUpdate:modelValue":o[4]||(o[4]=r=>U(i)?i.value=r:null)},null,8,["modelValue"]),t.value?(g(),$(_e,{key:2,"dialog-model":t.value,"onUpdate:dialogModel":o[5]||(o[5]=r=>t.value=r),codeType:u.codeType,businessType:u.businessType,onConfirm:E},null,8,["dialog-model","codeType","businessType"])):de("",!0),e(ce,{"dialog-model":p.value,"onUpdate:dialogModel":o[6]||(o[6]=r=>p.value=r),codeBlock:c(i),codeType:u.codeType,businessType:u.businessType},null,8,["dialog-model","codeBlock","codeType","businessType"])],512)]),_:1})}}});const ve=R(be,[["__scopeId","data-v-dac9ff67"]]);export{ve as C,pe as a};
