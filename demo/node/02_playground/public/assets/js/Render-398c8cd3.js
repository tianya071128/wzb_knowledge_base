import{d as F,jG as I,c as n,r as _,z as A,o as u,f as v,i as t,ad as w,w as s,l as h,wF as E,b as k,e as C,Q as R,ac as S,op as x,S as B,_ as D}from"./index-b80d5ef5.js";import{_ as N}from"./Base.vue_vue_type_script_setup_true_lang-832ddae3.js";import{F as V}from"./FormItemFieldWrapper-ec4d2a36.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./keyBy-8fcfdd74.js";import"./_createAggregator-d66ed64c.js";import"./useValidateError-9f6399dc.js";const W=F({__name:"Render",props:{field:{}},setup(b){const r=b,i=I(),p=n(()=>{var a;const e=i.matchFieldData((a=r.field.fields[0])==null?void 0:a.fieldId);return Array.isArray(e)?e:[]}),f=_([]);A(()=>{f.value=p.value.map((e,a)=>r.field.fields.map(d=>i.getFieldVal(d.fieldId,a)))});const g=n(()=>{const e=[];return i.getFieldAuth(r.field.fieldId,"required")&&e.push({trigger:"change",validator:(a,d,o)=>{var l;f.value.length?o():o(((l=r.field.options.requiredHint)==null?void 0:l.trim())||"请填写至少一条记录")}}),e}),m=n(()=>i.hasFieldLabelTop(r.field.fieldId)),c=_();return(e,a)=>{const d=R,o=S;return u(),v("div",{class:"subform_field"},[t(V,{field:e.field,class:"mb-0 subform_field-label","show-message":!1,prop:e.field.fieldId},w({default:s(()=>[t(N,{class:"subform-render",data:p.value,field:e.field,"is-render":"",labelAfterEl:c.value},{container:s(({index:l})=>[t(E,{fields:e.field.fields,index:l},null,8,["fields","index"])]),default:s(({index:l,item:y})=>[l>-1?(u(),k(x,{key:0,field:y,index:l,hidePadding:""},null,8,["field","index"])):h("",!0)]),_:1},8,["data","field","labelAfterEl"])]),_:2},[m.value?{name:"labelAfter",fn:s(()=>[m.value?(u(),v("div",{key:0,ref_key:"labelAfterEl",ref:c,style:{"max-width":"50%","margin-left":"10px"}},null,512)):h("",!0)]),key:"0"}:void 0]),1032,["field","prop"]),t(o,{class:"subform_field-content",rules:g.value,prop:e.field.fieldId},{default:s(()=>[C(t(d,{"model-value":JSON.stringify(f.value)},null,8,["model-value"]),[[B,!1]])]),_:1},8,["rules","prop"])])}}});const O=D(W,[["__scopeId","data-v-89390f8e"]]);export{O as default};
