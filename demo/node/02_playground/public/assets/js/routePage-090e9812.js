import{d as T,r as i,aV as U,bi as z,o as u,f as N,i as n,w as r,L as R,k as t,l as f,t as s,B as q,b as x,m as D,F as S,by as $,U as J,bC as K,b4 as O,iD as j,_ as G}from"./index-b80d5ef5.js";import{p as H,E as Q,g as W,m as X,f as Y,d as Z}from"./EditAuthInfo-e7e23191.js";import{A as ee}from"./AzConfirmSwitch-689fcef9.js";import{_ as ae}from"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./AzPasswordFormItem-db212711.js";const te=T({__name:"routePage",setup(ne,{expose:L}){const g=i(),a=i({name:"",iconUrl:"",serviceName:"",remark:"",authMethod:void 0,authUrl:"",basicAuthParam:{userName:"",nameCryptoFlag:!1,password:"",pwdCryptoFlag:!1},apiKeyAuthParamList:[],publicParamLst:[],apiList:[],pluginTypeName:"",authMethodName:"",id:""}),_=U(),v=typeof _.query.tenantAppId=="string"?_.query.tenantAppId:"",p=async()=>{const e=await W(v);return a.value=e,y.value=e,e.apiList},F=[{prop:"name",label:"API名称"},{prop:"remark",width:150,label:"描述"},{prop:"version",label:"版本号"},{prop:"apiStatus",label:"状态",slots:{default({row:e}){return n(ee,{modelValue:e.status,tip:"禁用后此API将不可用。确定要禁用？",updateFetch:async()=>{await Y((e==null?void 0:e.tenantApiId)||""),d()}},null)}}}],V=[{fixed:"right",width:200,label:"操作",slots:{default({row:e}){const m=[{type:"primary",onClick:()=>{O(j,{query:{apiId:e.id,viewType:2}})},text:"调用日志"},{type:"danger",text:"删除",popconfirmProps:{title:"删除后此API将不可恢复。确定要删除？",confirm:async()=>{await Z((e==null?void 0:e.tenantApiId)||""),d()}}}];return n(ae,{num:3,rowId:e.id||"",list:m},null)}}}],B={id:"lowcode_PluginDetail",request:{api:async()=>await X({tenantAppId:v})},pagination:{hidePagination:!0},table:{tableCols:[...F,...V]}},d=()=>{var e;(e=g.value)==null||e.refresh()},y=i(),c=i(!1);return L({getInfo:p,refreshTable:d}),(e,l)=>{const h=$,m=J,M=K,w=z("az-page");return u(),N(S,null,[n(M,null,{default:r(()=>[n(R,{class:"form_enter",ref:"loadingDataRef",load:p},{default:r(()=>{var o,b,P,A,I,k,C,E;return[t("div",{class:"card-header"},[t("div",{class:"info"},[(o=a.value)!=null&&o.iconUrl?(u(),N("img",{key:0,src:(b=a.value)==null?void 0:b.iconUrl,alt:"logo"},null,8,["src"])):f("",!0),t("span",null,s((P=a.value)==null?void 0:P.name),1),a.value.pmstatus===q(H).off?(u(),x(h,{key:1,class:"ml-10",type:"warning"},{default:r(()=>[D(" 已下架 ")]),_:1})):f("",!0)])]),t("div",{class:"card-body"},[t("p",null,s((A=a.value)==null?void 0:A.remark),1),t("div",{class:"items"},[t("span",null,"服务商："+s(((I=a.value)==null?void 0:I.serviceName)||"-"),1),t("span",null,"业务类型："+s(((k=a.value)==null?void 0:k.pluginTypeName)||"-"),1)]),t("div",null,[t("span",{class:"mr-15"},"鉴权认证："+s((C=a.value)==null?void 0:C.authMethodName),1),(E=a.value)!=null&&E.authMethod?(u(),x(m,{key:0,type:"primary",link:"",onClick:l[0]||(l[0]=le=>c.value=!0)},{default:r(()=>[D(" 配置 ")]),_:1})):f("",!0)])])]}),_:1},512)]),_:1}),n(w,{ref_key:"azPageRef",ref:g,config:B},null,512),n(Q,{data:y.value,isPluginMarket:1,visible:c.value,"onUpdate:visible":l[1]||(l[1]=o=>c.value=o),onRefresh:p},null,8,["data","visible"])],64)}}});const pe=G(te,[["__scopeId","data-v-99f18030"]]);export{pe as default};
