import{d as D,r as u,dH as I,c as x,o as n,b as r,w as o,k as m,B as a,oj as w,m as c,l as p,bD as E,b0 as A,dJ as P,a2 as B,dx as R,dw as L,b4 as J,cX as N,U as S,_ as V}from"./index-b80d5ef5.js";import{g as z}from"./dashboardDesigner-ce3c2e23.js";import M from"./render-bd995381.js";import{P as O}from"./PageContainer-f97fee2b.js";import{u as j,a as q}from"./routePage-d8a1866d.js";import{e as F}from"./index-c4a56c4a.js";import"./createDesigner-82222fc7.js";import"./enum-baae9292.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./useExtractQuery-f96f705c.js";import"./TemplateIcon-2baf2fac.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./homePage-3523f56f.js";import"./SelectDataSourece-70a968c3.js";import"./SelectIcon-71b7daf2.js";import"./AppIconNew-704f70f4.js";import"./useTransformColor-38b5da33.js";import"./LoadingData-195d0581.js";import"./useQueryTab-05fa7456.js";import"./store-3b56af45.js";import"./index-c8016e23.js";import"./appManage-8a2e3832.js";const H=D({__name:"PageEntry",props:{appId:{},entry:{}},setup(f){const d=f,_=j(),h=()=>{J(N,{query:{appEntryId:d.entry.id,appId:d.appId}})},t=u(),y=u();(async()=>{var e;t.value=await z(d.entry.id),y.value=(e=t.value)==null?void 0:e.pageeJson})();const s=u(),{toggle:k}=I(s),C=async()=>{var e;(e=s.value)==null||e.asyncRefreshAll()},b=x(()=>{var e;return((e=s.value)==null?void 0:e.moduleLinkMap.size)>=1}),v=()=>{var e;(e=s.value)==null||e.handleCancelLinkAll()};return(e,U)=>{const l=S;return n(),r(O,{entry:e.entry,class:"page_entry"},{header:o(()=>{var i,g;return[m("span",{style:{"margin-left":"auto"}},[a(b)?(n(),r(l,{key:0,class:"header-btn",text:"",icon:a(w),type:"primary",onClick:v},{default:o(()=>[c(" 取消联动 ")]),_:1},8,["icon"])):p("",!0),a(_).getOperatingPremission(a(q).entryAuth,{entryAuthtype:a(F).writeable,entryId:d.entry.id})?(n(),r(l,{key:1,class:"header-btn",text:"",icon:a(E),type:"primary",onClick:h},{default:o(()=>[c(" 编辑 ")]),_:1},8,["icon"])):p("",!0),(i=t.value)!=null&&i.pageeConfig.manualRefresh?(n(),r(l,{key:2,class:"header-btn",text:"",icon:a(A),type:"primary",onClick:C},{default:o(()=>[c(" 刷新 ")]),_:1},8,["icon"])):p("",!0),(g=t.value)!=null&&g.pageeConfig.fullScreen?(n(),r(l,{key:3,class:"header-btn",text:"",icon:a(P),type:"primary",onClick:a(k)},{default:o(()=>[c(" 全屏 ")]),_:1},8,["icon","onClick"])):p("",!0)])]}),default:o(()=>{var i;return[m("div",{class:"page_entry-body",style:B({backgroundColor:(i=t.value)==null?void 0:i.pageeConfig.pageBackground})},[m("div",{ref:"downloadRef",style:{height:"100%",width:"100%"}},[t.value?(n(),r(M,{key:0,ref_key:"dashboardRef",ref:s,pageDesigner:y.value,pageConfig:t.value.pageeConfig,scene:a(R).dashboard,style:{height:"100%"},mode:a(L).render,appId:e.appId,entryId:e.entry.id},null,8,["pageDesigner","pageConfig","scene","mode","appId","entryId"])):p("",!0)],512)],4)]}),_:1},8,["entry"])}}});const ye=V(H,[["__scopeId","data-v-7478c4cc"]]);export{ye as default};
