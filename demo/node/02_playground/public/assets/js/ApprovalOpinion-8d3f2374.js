import{d as N,r as p,AW as R,v as S,o as m,b as d,w as o,i as n,bu as U,bc as z,k as r,B as s,m as c,l as V,lF as O,d0 as $,C as I,aT as M,U as j,Q as D,ac as G,di as J,bm as P,bn as Q}from"./index-b80d5ef5.js";import{c as w}from"./enum-7a2ae6a9.js";const H=N({__name:"ApprovalOpinion",props:{visible:{type:Boolean},required:{type:Boolean},type:{}},emits:["update:visible","submit"],setup(x,{emit:k}){const f=x,_=k,t=p({opinions:"",attachment:[]}),v=l=>{t.value.opinions=l},b=p(),y=p(),C=()=>{var l;(l=y.value)==null||l.uploadFile()},{accept:h}=R(),i=S(f,"visible",_),q=()=>{t.value.opinions="",t.value.attachment=[]},B=async()=>{var e;f.required&&await((e=b.value)==null?void 0:e.validate()),await M(),_("submit",{comment:t.value.opinions,attachment:t.value.attachment.length>=1?JSON.stringify(t.value.attachment):""})};return(l,e)=>{const u=j,T=D,g=G,A=J,E=P,F=Q;return m(),d(F,{onClosed:q,modelValue:s(i),"onUpdate:modelValue":e[6]||(e[6]=a=>I(i)?i.value=a:null),title:"操作确认",width:"500px"},{footer:o(()=>[n(U,{editMode:"",onClose:e[5]||(e[5]=a=>i.value=!1),"on-submit":B,"submit-text":"确定"})]),default:o(()=>[n(E,{ref_key:"ruleFormRef",ref:b,model:t.value,"label-position":"left","label-width":"80px",onSubmit:e[4]||(e[4]=z(()=>{},["prevent"]))},{default:o(()=>[n(g,{required:l.required,rules:[{required:!0,message:"请输入审批意见",trigger:["blur","change"]},{min:2,max:2e3,message:"长度应为2-2000之间",trigger:["blur","change"]}],class:"formitem",label:"审批意见",prop:"opinions"},{default:o(()=>[r("div",{class:"quick"},[r("span",{class:"Gray_75"},"快捷输入："),l.type===s(w).pass?(m(),d(u,{key:0,onClick:e[0]||(e[0]=a=>v("同意")),type:"success",plain:"",size:"small"},{default:o(()=>[c(" 同意 ")]),_:1})):V("",!0),l.type===s(w).reject?(m(),d(u,{key:1,onClick:e[1]||(e[1]=a=>v("不同意")),type:"danger",plain:"",size:"small"},{default:o(()=>[c(" 不同意 ")]),_:1})):V("",!0)]),n(T,{modelValue:t.value.opinions,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.opinions=a),placeholder:"请输入审批意见",type:"textarea",autosize:{minRows:2,maxRows:3},"show-word-limit":"",maxlength:"2000"},null,8,["modelValue"])]),_:1},8,["required"]),n(g,null,{default:o(()=>[r("div",{class:"upload_wrapper"},[n(u,{type:"primary",icon:s(O),title:"上传附件",onClick:C},{default:o(()=>[c(" 上传附件 ")]),_:1},8,["icon"]),r("div",{style:{padding:"5px 0"}}),n(A,{"max-height":"300px"},{default:o(()=>[n($,{ref_key:"AzUploadRef",ref:y,limit:10,modelValue:t.value.attachment,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.attachment=a),type:"file",size:1024*50,isShowTrigger:!1,isShowTip:!1,"list-type":"picture",accept:s(h)},null,8,["modelValue","accept"])]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{H as default};
