import{d as $,r as v,c as S,aV as ge,o as _,f as F,i as l,w as y,h as Ge,cr as Xe,_ as B,bI as Ze,x as Oe,aW as Te,B as t,j as de,k,cs as et,m as U,C as j,l as M,F as Z,g as oe,bv as tt,ct as nt,aN as q,U as H,Q as ve,bz as z,b4 as X,b5 as at,b as x,cu as Me,cv as Ne,p as re,cw as _e,cx as ot,cy as Re,cz as me,cA as lt,cB as rt,cC as st,a1 as E,cD as we,cE as fe,bc as it,cF as W,cG as Be,a2 as se,aR as ct,cH as pt,c1 as dt,aU as ut,P as yt,y as G,aT as $e,cI as qe,L as je,cJ as ze,cK as _t,cL as mt,cM as ft,n as gt,cN as ie,cO as vt,cP as ht,bn as ee,bt as Ke,ao as Qe,ac as he,bm as Ie,bK as We,cQ as It,q as bt,bS as kt,ap as xt,cR as wt,cS as Ct,Y as Et,t as Ce,c3 as At,bC as Vt,cg as ne,ch as ae,cT as Dt,bb as Tt,cU as Ft,cV as Pt,cW as $t,cX as Lt,cY as St,aa as Ut,cZ as Ot,aY as Mt,bJ as Nt,a$ as Rt,c_ as Bt}from"./index-b80d5ef5.js";import{_ as qt}from"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import{u as Ee}from"./useExtractQuery-f96f705c.js";import{T as xe}from"./TemplateIcon-2baf2fac.js";import{_ as Fe}from"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import{a as He,e as pe}from"./index-c4a56c4a.js";import{r as Le,a as Se}from"./homePage-3523f56f.js";import{S as jt}from"./SelectDataSourece-70a968c3.js";import{S as Ae}from"./SelectIcon-71b7daf2.js";import{a as zt}from"./LoadingData-195d0581.js";import{u as Kt}from"./useQueryTab-05fa7456.js";import{u as Qt}from"./store-3b56af45.js";import{c as Wt,a as Ue}from"./index-c8016e23.js";import{c as Ht}from"./appManage-8a2e3832.js";const Jt=$({__name:"CheckErrorPage",props:{errorMsg:{},queryKeys:{},path:{type:[String,Function]}},setup(b){var o;const e=b,a=v(null),d=S(()=>a.value??e.errorMsg),n=ge();return(o=e.queryKeys)!=null&&o.length&&e.queryKeys.some(p=>!n.query[p])&&(a.value="缺失必要参数"),(p,c)=>{const f=Xe;return d.value?(_(),F("div",{key:0,class:"error-result"},[l(f,{icon:"error",title:d.value},{extra:y(()=>[l(qt,{path:p.path},null,8,["path"])]),_:1},8,["title"])])):Ge(p.$slots,"default",{key:1},void 0,!0)}}});const Yt=B(Jt,[["__scopeId","data-v-801c30de"]]),Je=Symbol();var R=(b=>(b.design="design",b.setting="setting",b.appAuth="appAuth",b.entryAuth="entryAuth",b))(R||{});function N(){return Ze(Je,void 0)}const Gt=$({inheritAttrs:!1,__name:"SwitchApp",setup(b){const e=N();Oe();const a=ge(),d=Te(),n=v([]),o=v(""),p=S(()=>n.value.filter(g=>g.applicationType==="1"&&(!o.value||g.name.includes(o.value)))),c=S(()=>n.value.filter(g=>g.applicationType==="2"&&(!o.value||g.name.includes(o.value)))),f=v(!1),I=()=>{f.value=!0,o.value=""},r=async()=>{n.value=await nt({appId:"",name:"",orgIds:[],manager:e.manager})},i=g=>{if(e.appId&&g.id===e.appId){q.warning("当前应用不需要切换");return}f.value=!1,d.replace({...a,query:{...a.query,appId:g.id,entryId:void 0}})};return(g,u)=>{const h=H,A=ve;return _(),F("div",{class:"switch_app",onClick:I},[l(xe,{"bg-color":t(e).appDetails.color,icon:t(e).appDetails.icon,type:"round",class:"switch_app-icon","is-gradient":""},null,8,["bg-color","icon"]),l(de,{content:t(e).appDetails.name,class:"switch_app-name"},null,8,["content"]),l(tt,{size:"300px",modelValue:t(f),"onUpdate:modelValue":u[1]||(u[1]=T=>j(f)?f.value=T:null),direction:"ltr",class:"switch_app-drawer","show-load":r,"append-to-body":""},{header:y(()=>[k("div",null,[l(h,{onClick:t(e).goBack,icon:t(et),plain:"",round:"",type:"primary"},{default:y(()=>[U(" 工作台 ")]),_:1},8,["onClick","icon"])])]),default:y(()=>{var T,V;return[k("div",{class:"switch_app-body"},[l(A,{modelValue:t(o),"onUpdate:modelValue":u[0]||(u[0]=D=>j(o)?o.value=D:null),style:{padding:"10px"},placeholder:"请输入应用名称",clearable:""},null,8,["modelValue"]),k("ul",{class:"switch_app-list"},[(T=t(p))!=null&&T.length?(_(),F("h4",{key:0},"我的应用")):M("",!0),(_(!0),F(Z,null,oe(t(p),D=>(_(),F("li",{key:D.id,onClick:K=>i(D)},[l(xe,{"bg-color":D.color,icon:D.icon,type:"round",class:"fs-16",style:{width:"25px",height:"25px","margin-right":"5px"},"is-gradient":""},null,8,["bg-color","icon"]),l(de,{class:"switch_app-name",content:D.name},null,8,["content"])],8,["onClick"]))),128)),(V=t(c))!=null&&V.length?(_(),F("h4",{key:1,style:{"margin-top":"10px"}}," 协作应用 ")):M("",!0),(_(!0),F(Z,null,oe(t(c),D=>(_(),F("li",{key:D.id,onClick:K=>i(D)},[l(xe,{"bg-color":D.color,icon:D.icon,type:"round",class:"fs-16",style:{width:"25px",height:"25px","margin-right":"5px"},"is-gradient":""},null,8,["bg-color","icon"]),l(de,{class:"switch_app-name",content:D.name},null,8,["content"])],8,["onClick"]))),128))])])]}),_:1},8,["modelValue"])])}}});const Xt=B(Gt,[["__scopeId","data-v-f23aeb6b"]]),Zt=$({__name:"AsideHeader",setup(b){const e=N(),a=l(z,{iconClass:"Tools"},null),d=S(()=>[{type:"primary",text:"设置",icon:a,onClick:()=>{X(at,{query:{appId:e.appId}})}}]);return(n,o)=>(_(),F("div",{class:"aside_header"},[l(Xt),t(e).getOperatingPremission(t(R).appAuth,{appAuthType:t(He).appSetting})?(_(),x(Fe,{key:0,class:"app_operate-icon",list:t(d),num:1,placement:"right",rowId:"index1",transition:"el-fade-in-linear"},null,8,["list"])):M("",!0)]))}});const en=B(Zt,[["__scopeId","data-v-e25453fa"]]),tn=$({__name:"TaskCenter",setup(b){const e=N(),a=v(0),d=async function(){const n=await ot({appId:e.appId,creator:"",current:1,limit:10,status:"",appName:""});a.value=Number(n.total)};return d(),Me(Ne,d),(n,o)=>{const p=Re;return _(),F("div",{class:"app_task"},[k("div",{class:re(["app_task-content",{"is-active":t(e).entryId===t(_e)}]),onClick:o[0]||(o[0]=c=>t(e).entryId=t(_e))},[k("div",{class:"app_task-icon"},[l(z,{"icon-class":"SystemManagement"})]),l(p,{class:"app_task-badge",value:a.value,hidden:a.value<=0},{default:y(()=>[U(" 我的任务 ")]),_:1},8,["value","hidden"])],2)])}}});const nn=B(tn,[["__scopeId","data-v-e510ef0b"]]),an=$({__name:"Drafts",setup(b){const e=N(),a=v(!1),d=async function(){};return d(),Me(Ne,d),(n,o)=>{const p=Re;return _(),F("div",{class:"app_drafts"},[k("div",{class:re(["app_drafts-content",{"is-active":t(e).entryId===t(me)}]),onClick:o[0]||(o[0]=c=>t(e).entryId=t(me))},[k("div",{class:"app_drafts-icon"},[l(z,{"icon-class":"MessageBox"})]),l(p,{class:"app_drafts-badge","is-dot":a.value},{default:y(()=>[U("草稿箱")]),_:1},8,["is-dot"])],2)])}}});const on=B(an,[["__scopeId","data-v-05f0c629"]]),Pe=Symbol("分组"),le=Symbol("表单模型选择"),ue=Symbol("修改应用条目"),ye=Symbol("迁移条目"),Ve=Symbol("复制表单"),be=Symbol("引入外部页面"),ke=Symbol("新增列表"),De=lt();function te(b,e){De.on(b,e),rt()&&st(()=>{De.off(b,e)})}const P=De,ln=$({__name:"AddPopover",setup(b){const e=N(),a=S(()=>[{type:"primary",text:"创建分组",onClick:()=>{P.emit(Pe)}},{type:"primary",text:"创建表单",onClick:()=>{P.emit(le)}},{type:"primary",text:"创建流程表单",onClick:()=>{P.emit(le,{hasFlow:1})}},{type:"primary",text:"创建列表",onClick:()=>{P.emit(ke)}},{type:"primary",text:"创建页面",onClick:()=>{e.createDashboard()}},{type:"primary",text:"引入页面",onClick:()=>{P.emit(be)}}]);return(d,n)=>{const o=H;return _(),x(Fe,{list:t(a),num:0,rowId:"index1",placement:"right",transition:"el-fade-in-linear"},{default:y(()=>[l(o,{type:"primary",class:"ml-5",style:{"padding-left":"10px","padding-right":"10px"}},{default:y(()=>[U(" 创建 ")]),_:1})]),_:1},8,["list"])}}}),rn=$({__name:"EntryPopover",props:{entryInfo:{}},setup(b){const e=b,a=N(),d=S(()=>{let p=[];return e.entryInfo.type===E.group?p=[{type:"primary",text:"修改分组",onClick:()=>{P.emit(ue,{...e.entryInfo})}},{type:"primary",text:"创建子分组",onClick:()=>{P.emit(Pe,{parentId:e.entryInfo.id})}},{type:"primary",text:"创建表单",onClick:()=>{P.emit(le,{parentId:e.entryInfo.id})}},{type:"primary",text:"创建流程表单",onClick:()=>{P.emit(le,{hasFlow:1,parentId:e.entryInfo.id})}},{type:"primary",text:"创建列表",onClick:()=>{P.emit(ke,{parentId:e.entryInfo.id})}},{type:"primary",text:"创建页面",onClick:()=>{a.createDashboard({parentId:e.entryInfo.id})}},{type:"primary",text:"引入页面",onClick:()=>{P.emit(be,{parentId:e.entryInfo.id})}},{type:"primary",text:"迁移",onClick:()=>{P.emit(ye,{movedId:e.entryInfo.id})}},{type:"danger",text:"删除",onClick:()=>{var f,I;if((I=(f=e.entryInfo)==null?void 0:f.children)!=null&&I.length){q.warning("非空分组不能删除!");return}const c=e.entryInfo.name;a.handleDelete(e.entryInfo.id,{title:`${c}`,tip:`"${c}"删除后将不可恢复，确定删除？`})}}]:e.entryInfo.type===E.sheet?p=[{type:"primary",text:"信息修改",onClick:()=>{P.emit(ue,{...e.entryInfo})}},{type:"primary",text:"复制",children:[{type:"primary",text:"当前应用",onClick:async()=>{await we({appId:"",entryId:e.entryInfo.id}),await a.queryEntryAuh(),a.refreshTree++,q.success("复制成功")}},{type:"primary",text:"其他应用",onClick:()=>{P.emit(Ve,{entryId:e.entryInfo.id})}}]},{type:"primary",text:"迁移",onClick:()=>{P.emit(ye,{movedId:e.entryInfo.id})}},{type:"primary",text:e.entryInfo.visible===1?"取消隐藏":"从导航中隐藏",onClick:async()=>{const c={id:e.entryInfo.id,visible:e.entryInfo.visible===1?0:1};await fe(c),a.refreshTree++}},{type:"primary",text:e.entryInfo.favoritesVO?"取消常用":"设为常用",onClick:async()=>{e.entryInfo.favoritesVO?await Le(e.entryInfo.favoritesVO.id):await Se({buId:e.entryInfo.id,type:2}),a.refreshTree++}},{type:"danger",text:"删除",onClick:()=>{const c=e.entryInfo.name;a.handleDelete(e.entryInfo.id,{title:`${c}`,tip:`"${c}"删除后将不可恢复，确定删除？`})}}]:(a.getOperatingPremission(R.entryAuth,{entryAuthtype:pe.writeable,entryId:e.entryInfo.id})&&p.push({type:"primary",text:"编辑",onClick:()=>{if(e.entryInfo.type===E.page){a.jumpDashboard(e.entryInfo.id);return}else e.entryInfo.type===E.form?a.jumpForm(e.entryInfo.id):e.entryInfo.type===E.includePage&&a.jumpExternalPage(e.entryInfo.id)}}),a.getOperatingPremission(R.entryAuth,{entryAuthtype:pe.writeable,entryId:e.entryInfo.id})&&p.push({type:"primary",text:"信息修改",onClick:()=>{P.emit(ue,{...e.entryInfo})}},{type:"primary",text:"复制",children:[{type:"primary",text:"当前应用",onClick:async()=>{await we({appId:"",entryId:e.entryInfo.id}),await a.queryEntryAuh(),a.refreshTree++,q.success("复制成功")}},{type:"primary",text:"其他应用",onClick:()=>{P.emit(Ve,{entryId:e.entryInfo.id})}}]},{type:"primary",text:"迁移",onClick:()=>{P.emit(ye,{movedId:e.entryInfo.id})}},{type:"primary",text:e.entryInfo.visible===1?"取消隐藏":"从导航中隐藏",onClick:async()=>{const c={id:e.entryInfo.id,visible:e.entryInfo.visible===1?0:1};await fe(c),a.refreshTree++}}),e.entryInfo.type===E.form&&a.getOperatingPremission(R.entryAuth,{entryAuthtype:pe.writeable,entryId:e.entryInfo.id})&&p.push({type:"primary",text:`切换${e.entryInfo.hasFlow===1?"表单":"流程表单"}`,onClick:()=>{const{hasFlow:c}=e.entryInfo,f=c===1?{color:"#EE943B",icon:"app_menu_32"}:{color:"#2975F4",icon:"app_menu_22"};a.handleFormChange({id:e.entryInfo.id,hasFlow:e.entryInfo.hasFlow===1?0:1,color:f.color,icon:f.icon})}}),p.push({type:"primary",text:e.entryInfo.favoritesVO?"取消常用":"设为常用",onClick:async()=>{e.entryInfo.favoritesVO?await Le(e.entryInfo.favoritesVO.id):await Se({buId:e.entryInfo.id,type:2}),a.refreshTree++}}),a.getOperatingPremission(R.entryAuth,{entryAuthtype:pe.delete,entryId:e.entryInfo.id})&&p.push({type:"danger",text:"删除",onClick:()=>{const c=e.entryInfo.name;a.handleDelete(e.entryInfo.id,{title:`${c}`,tip:`"${c}"删除后将不可恢复，确定删除？`})}})),p}),n=v(!1),o=p=>{n.value=p};return(p,c)=>(_(),x(Fe,{list:t(d),num:0,rowId:"index1",placement:"right",transition:"el-fade-in-linear",onVisibleChange:o},{default:y(()=>[k("div",{class:re(["entry-icon",{"is-visible":t(n)}]),onClick:c[0]||(c[0]=it(()=>{},["stop"]))},[p.entryInfo.type===t(E).group?(_(),x(z,{key:0,"icon-class":"Setting"})):(_(),x(z,{key:1,"icon-class":"MoreFilled"}))],2)]),_:1},8,["list"]))}});const sn=B(rn,[["__scopeId","data-v-fdb8463a"]]),cn=$({__name:"EntryTreeItem",props:{data:{},loading:{type:Boolean}},setup(b){const e=b,a=N(),d=S(()=>{var n,o;return(((n=e.data.includePageVO)==null?void 0:n.type)??W.out)===W.out&&((o=e.data.includePageVO)==null?void 0:o.pageOpenWay)===Be.blank});return(n,o)=>{const p=ut,c=yt;return _(),F("div",{class:"tree_item"},[k("div",{class:"tree_icon",style:se({color:n.data.color})},[l(z,{"icon-class":n.data.icon},null,8,["icon-class"])],4),k("div",{class:"el-tree-node__label entry_tree-content"},[l(de,{class:"content-label",content:n.data.name},null,8,["content"]),t(d)&&!n.loading?(_(),x(p,{key:0,effect:"dark",content:"新窗口打开",placement:"top"},{default:y(()=>[k("span",{style:{"margin-left":"6px"}},[l(z,{"icon-class":"externalLink"})])]),_:1})):M("",!0),n.loading?(_(),x(c,{key:1,class:"is-loading",style:{"margin-left":"6px"}},{default:y(()=>[l(t(ct))]),_:1})):M("",!0)]),n.data.visible===1&&t(a).getOperatingPremission(t(R).design)?(_(),x(c,{key:0,class:"tree_item-hide-icon"},{default:y(()=>[l(t(pt))]),_:1})):M("",!0),t(a).getOperatingPremission(t(R).design)?(_(),F("div",{key:1,class:"tree_item_set"},[l(sn,{entryInfo:n.data},null,8,["entryInfo"])])):M("",!0),n.data.type===t(E).group?(_(),F("div",{key:2,class:"tree_item-arrow"},[l(c,null,{default:y(()=>[l(t(dt))]),_:1})])):M("",!0)])}}});const pn=B(cn,[["__scopeId","data-v-d970b871"]]);function dn(){const b=navigator.userAgent,e=/(msie\s|trident.*rv:)([\w.]+)/,a=/(edg)\/([\w.]+)/,d=/(firefox)\/([\w.]+)/,n=/(opera).+version\/([\w.]+)/,o=/(chrome)\/([\w.]+)/,p=/version\/([\w.]+).*(safari)/,c=b.toLowerCase(),f=e.exec(c);if(f!==null)return{browser:"IE",version:f[2]||"0"};const I=a.exec(c);if(I!==null)return{browser:"Edge",version:I[2]||"0"};const r=d.exec(c);if(r!==null)return{browser:r[1]||"",version:r[2]||"0"};const i=n.exec(c);if(i!==null)return{browser:i[1]||"",version:i[2]||"0"};const g=o.exec(c);if(g!==null)return{browser:g[1]||"",version:g[2]||"0"};const u=p.exec(c);return u!==null?{browser:u[2]||"",version:u[1]||"0"}:{browser:"",version:"0"}}function un(){return dn()}const yn=$({__name:"EntryTree",setup(b){const e=N(),a=v(null),d=v(),n={children:"children",label:"name",class:s=>{let m="";return s.id===e.entryId&&(m+="is-active "),s.id===a.value&&(m+="is-hover"),m}},o=v(""),p=v();G(o,s=>{var m;(m=p.value)==null||m.filter(s)});const c=(s,m)=>s?m.name.includes(s):!0,f=s=>{var w;const m=(w=p.value)==null?void 0:w.getNode(s);if(m!=null&&m.parent&&Array.isArray(m.parent.data))return"0";if(m!=null&&m.parent)return m.parent.data.id},I=s=>{var w;const m=(w=p.value)==null?void 0:w.getNode(s);if(m!=null&&m.parent){const C=m.parent.childNodes,O=C.findIndex(Ye=>Ye.data.id===s);return O===0?"0":C[O-1].data.id}else return"0"},r=(s,m,w)=>{const C=[E.group];return w==="inner"?!!C.includes(m.data.type):!0},i=async(s,m,w)=>{const C=v({beforeEntryId:"0",parentId:"0",entryId:s.data.id});C.value.beforeEntryId=I(s.data.id),w==="inner"?(C.value.beforeEntryId="0",C.value.parentId=m.data.id):C.value.parentId=f(s.data.id),await ze(C.value),$e(()=>{e.refreshTree++})},g=v(new Set),u=async s=>{var m,w;if(s.type===E.includePage&&(((m=s.includePageVO)==null?void 0:m.type)??W.out)===W.out&&((w=s.includePageVO)==null?void 0:w.pageOpenWay)===Be.blank){if(g.value.has(s.id))return;g.value.add(s.id);try{const C=await _t({appId:e.appId,data:s.includePageVO,entryId:s.id});C?window.open(C,"_blank"):q.error("跳转链接异常")}finally{g.value.delete(s.id)}return}s.type!==E.group&&(e.entryId=s.id)},h=v(new Set),A=s=>{h.value.add(s.id)},T=(s,m)=>{const w=[s.id],C=[...m.childNodes??[]];let O;for(;O=C.shift();)O.isLeaf||w.push(O.data.id),O.childNodes&&C.push(...O.childNodes);w.forEach(Y=>h.value.delete(Y))};G([()=>e.entryId,()=>e.entryTree],()=>{if(e.entryId){let s=[];(function m(w,C=[]){var O;for(const Y of w)if(Y.id===e.entryId){s=C;break}else(O=Y.children)!=null&&O.length&&m(Y.children,[...C,Y.id])})(e.entryTree),h.value=new Set([...h.value,...s])}},{immediate:!0});const V=(s,m)=>{if(!(s&&s.length))return[];const w=[];for(const C of s)m(C)?(w.push(C),C.children=V(C.children,m)):w.push(...V(C.children,m));return w},D=s=>{const m=[];for(const w of s)w.children.length<1?m.push(w):m.push(...D(w.children));return m},K=async()=>{e.treeLoafinish=!1;const s=await mt(e.appId,e.manager||"0");e.entryTree=e.appAuth?s:V(s,m=>m.type===E.group?m.children.length>=1?!D(m.children).every(O=>O.type===E.group&&O.children.length<1):!1:!0),e.treeLoafinish=!0,ce()};G(()=>e.refreshTree,()=>{var s;(s=d.value)==null||s.reload()}),G(()=>{var s;return(s=p.value)==null?void 0:s.root.childNodes},s=>{$e(()=>{const m=[...s??[]];let w;for(;w=m.shift();)w.data.type===E.group&&w.isLeaf&&(w.isLeaf=!1),Array.isArray(w.childNodes)&&m.push(...w.childNodes)})},{immediate:!0});const L=S(()=>{const{browser:s,version:m}=un();return!(s==="firefox"&&m.startsWith("129."))}),Q=v(),J=(s,m)=>{m&&(Q.value=s)},ce=()=>{setTimeout(()=>{var s,m;(m=(s=Q.value)==null?void 0:s.scrollIntoView)==null||m.call(s,{block:"center"})},40)};return(s,m)=>{const w=ve;return _(),F("div",{class:"entry_tree"},[k("div",{class:"entry_tree-search"},[l(w,{modelValue:t(o),"onUpdate:modelValue":m[0]||(m[0]=C=>j(o)?o.value=C:null),placeholder:"请输入关键字",clearable:""},null,8,["modelValue"]),t(e).getOperatingPremission(t(R).design)?(_(),x(ln,{key:0})):M("",!0)]),l(je,{ref_key:"LoadingDataRef",ref:d,class:"entry_tree-body",load:K},{default:y(()=>[l(t(qe),{"allow-drop":r,onNodeDrop:i,onNodeClick:u,onNodeExpand:A,onNodeCollapse:T,ref_key:"treeRef",ref:p,"default-expanded-keys":[...t(h)],class:"entry_tree-tree",data:t(e).entryTree,props:n,draggable:!!(t(e).getOperatingPremission(t(R).design)&&t(L)),"filter-node-method":c,"node-key":"id",indent:15},{default:y(({data:C})=>[k("div",{ref:O=>J(O,C.id===t(e).entryId),style:{width:"100%"}},[l(pn,{loading:t(g).has(C.id),data:C,onMouseenter:O=>a.value=C.id,onMouseleave:m[1]||(m[1]=O=>a.value=null)},null,8,["loading","data","onMouseenter"])],512)]),_:1},8,["default-expanded-keys","data","draggable"])]),_:1},512)])}}});const _n=B(yn,[["__scopeId","data-v-525c4781"]]),mn=$({__name:"AppAside",setup(b){const e=v(!0);return(a,d)=>(_(),F("div",{class:"app_aside"},[k("div",{class:"app_aside-container",style:se({width:t(e)?void 0:"0px"})},[k("div",{class:"app_aside-wrapper"},[l(en),l(nn),l(on),l(_n)])],4),l(ft,{modelValue:t(e),"onUpdate:modelValue":d[0]||(d[0]=n=>j(e)?e.value=n:null)},null,8,["modelValue"])]))}});const fn=B(mn,[["__scopeId","data-v-d9bbf4f5"]]),gn=$({__name:"AddTableDialog",setup(b){const e=v(!1),a=N(),d=v(),n=(r,i)=>{d.value=gt(i)[0]},o={appId:"",hasFlow:0,name:"未命名列表",parentId:"0",type:E.sheet,icon:"app_menu_37",color:"#8084FD",sourceId:""},p=v({...o});te(ke,r=>{p.value={...o,appId:a.appId,...r??{}},e.value=!0,d.value=void 0});const f=v(!1),I=async()=>{var r,i,g;f.value=!0;try{const u=await ie({...p.value,name:(r=d.value)!=null&&r.name?`${(i=d.value)==null?void 0:i.name}_列表`:"未命名列表"}),A=(g=(await vt(u.id,a.manager)).views[0])==null?void 0:g.id;if(!A){q.error("数据异常，请稍后重试"),a.refreshTree++;return}await X(ht,{query:{appEntryId:u.id,appId:a.appId,viewId:A}})}finally{f.value=!1}};return(r,i)=>{const g=H,u=ee;return _(),x(u,{modelValue:e.value,"onUpdate:modelValue":i[2]||(i[2]=h=>e.value=h),title:"创建列表",width:"500","destroy-on-close":""},{footer:y(()=>[k("span",{class:"dialog-footer"},[l(g,{onClick:i[1]||(i[1]=h=>e.value=!1)},{default:y(()=>[U("取消")]),_:1}),l(g,{type:"primary",onClick:I,disabled:!p.value.sourceId,loading:f.value},{default:y(()=>[U(" 确定 ")]),_:1},8,["disabled","loading"])])]),default:y(()=>[l(jt,{modelValue:p.value.sourceId,"onUpdate:modelValue":i[0]||(i[0]=h=>p.value.sourceId=h),appId:t(a).appId??"",onChange:n},null,8,["modelValue","appId"])]),_:1},8,["modelValue"])}}}),vn=$({__name:"CopyEntryDialog",setup(b){const e=v(!1),a=v(""),d=v(""),n=N();te(Ve,r=>{a.value=r.entryId,e.value=!0,d.value=""});const p=Oe(),c=async()=>await p.getApply(),f=v(!1),I=async()=>{f.value=!0;try{await we({appId:d.value,entryId:a.value}),q.success("复制成功"),e.value=!1}finally{f.value=!1}};return(r,i)=>{const g=Qe,u=he,h=Ie,A=H,T=ee;return _(),x(T,{modelValue:t(e),"onUpdate:modelValue":i[2]||(i[2]=V=>j(e)?e.value=V:null),title:"复制到其他应用",width:"350"},{footer:y(()=>[k("span",{class:"dialog-footer"},[l(A,{onClick:i[1]||(i[1]=V=>e.value=!1)},{default:y(()=>[U("取消")]),_:1}),l(A,{type:"primary",onClick:I,disabled:!t(d),loading:t(f)},{default:y(()=>[U(" 确定 ")]),_:1},8,["disabled","loading"])])]),default:y(()=>[l(h,null,{default:y(()=>[l(u,{label:"请选择目标应用",prop:"name"},{default:y(()=>[l(Ke,{modelValue:t(d),"onUpdate:modelValue":i[0]||(i[0]=V=>j(d)?d.value=V:null),filterable:"",placeholder:"请选择应用",load:c},{default:y(({options:V})=>[(_(!0),F(Z,null,oe((V??[]).filter(D=>D.id!==t(n).appId),D=>(_(),x(g,{key:D.id,label:D.name,value:D.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),hn=$({__name:"EditEntryDialog",setup(b){const e=N(),a=v(!1),d={id:"",type:E.form,name:"",icon:"",color:"",mobileColor:"",mobileIcon:""},n=v({...d}),o=We({name:[{required:!0,message:"请输入名称",trigger:"blur"}],icon:[{required:!0,message:"请选择图标",trigger:"blur"}]}),p=S(()=>"type"in n.value&&n.value.type===E.group?"分组信息修改":"信息修改");te(ue,h=>{n.value={...h??{}},a.value=!0});const f=v(!1),I=v(),r=async()=>{var h;f.value=!0;try{await((h=I.value)==null?void 0:h.validate()),await fe(n.value),q.success(`${p.value}成功`),a.value=!1,e.refreshTree++}finally{f.value=!1}},i=h=>{n.value.mobileColor=h},g=h=>{n.value.mobileIcon=h},u=S({get(){return"icon"in n.value&&(n.value.isPcSame==0||!n.value.isPcSame)},set(h){"icon"in n.value&&(h?n.value.isPcSame=0:(n.value.isPcSame=1,n.value.mobileColor="#FFFFFF",n.value.mobileIcon||(n.value.mobileIcon="clue_pool")))}});return(h,A)=>{const T=ve,V=he,D=bt,K=Ie,L=H,Q=ee;return _(),x(Q,{modelValue:t(a),"onUpdate:modelValue":A[5]||(A[5]=J=>j(a)?a.value=J:null),title:t(p),width:"350px"},{footer:y(()=>[k("span",{class:"dialog-footer"},[l(L,{onClick:A[4]||(A[4]=J=>a.value=!1)},{default:y(()=>[U("取消")]),_:1}),l(L,{type:"primary",loading:t(f),onClick:r},{default:y(()=>[U(" 确定 ")]),_:1},8,["loading"])])]),default:y(()=>[l(K,{ref_key:"ruleFormRef",ref:I,model:t(n),rules:t(o),"label-width":"100px","status-icon":""},{default:y(()=>{var J,ce;return[l(V,{label:"名称",prop:"name"},{default:y(()=>["name"in t(n)?(_(),x(T,{key:0,modelValue:t(n).name,"onUpdate:modelValue":A[0]||(A[0]=s=>t(n).name=s)},null,8,["modelValue"])):M("",!0)]),_:1}),"icon"in t(n)&&((J=t(n))!=null&&J.icon)?(_(),x(V,{key:0,label:"图标",prop:"icon"},{default:y(()=>[l(Ae,{color:t(n).color,"onUpdate:color":A[1]||(A[1]=s=>t(n).color=s),icon:t(n).icon,"onUpdate:icon":A[2]||(A[2]=s=>t(n).icon=s)},null,8,["color","icon"])]),_:1})):M("",!0),"icon"in t(n)&&((ce=t(n))!=null&&ce.icon)?(_(),x(V,{key:1,label:"移动端图标",prop:"mobileIcon"},{default:y(()=>[k("div",{style:{display:"flex","flex-direction":"column"}},[l(D,{modelValue:t(u),"onUpdate:modelValue":A[3]||(A[3]=s=>j(u)?u.value=s:null)},{default:y(()=>[U("与pc端一致")]),_:1},8,["modelValue"]),t(u)?M("",!0):(_(),x(Ae,{key:0,types:[t(It).mobile],color:t(n).mobileColor??t(n).color,icon:t(n).mobileIcon??t(n).icon,"onUpdate:color":i,"onUpdate:icon":g},null,8,["types","color","icon"]))])]),_:1})):M("",!0)]}),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),In=$({__name:"FormDialog",setup(b){const e=v(1),a=[{label:"创建空白表单",value:1},{label:"按数据模型创建表单",value:2}],d=async()=>(await kt(c.value.appId,1)).map(u=>({label:u.name,value:u.id})),n=N(),o=v(!1),p={appId:"",hasFlow:0,name:"未命名表单",parentId:"0",type:E.form,color:"#EE943B",icon:"app_menu_32"},c=v({...p}),f=S(()=>c.value.hasFlow===1?"创建流程表单":"创建表单");te(le,g=>{c.value={...p,appId:n.appId,...g??{}},c.value.hasFlow===1&&(c.value.color="#2975F4",c.value.icon="app_menu_22"),c.value,o.value=!0,e.value=1});const r=v(!1),i=async()=>{try{r.value=!0;const g=await ie({...c.value});await n.jumpForm(g.id)}finally{r.value=!1}};return(g,u)=>{const h=Qe,A=xt,T=he,V=Ie,D=H,K=ee;return _(),x(K,{modelValue:t(o),"onUpdate:modelValue":u[4]||(u[4]=L=>j(o)?o.value=L:null),title:t(f),width:"398px",class:"az_dialog-footer-border"},{footer:y(()=>[k("span",{class:"dialog-footer"},[l(D,{onClick:u[3]||(u[3]=L=>o.value=!1)},{default:y(()=>[U("取消")]),_:1}),l(D,{type:"primary",onClick:i,loading:t(r),disabled:t(e)===2&&!t(c).modelId},{default:y(()=>[U(" 确定 ")]),_:1},8,["loading","disabled"])])]),default:y(()=>[l(V,{ref:"ruleFormRef",model:t(c),"label-width":"90px",class:"label-blod"},{default:y(()=>[l(T,{label:"表单类型"},{default:y(()=>[l(A,{modelValue:t(e),"onUpdate:modelValue":u[0]||(u[0]=L=>j(e)?e.value=L:null),placeholder:"请选择",onChange:u[1]||(u[1]=L=>t(c).modelId=void 0)},{default:y(()=>[(_(),F(Z,null,oe(a,(L,Q)=>l(h,{key:Q,label:L.label,value:L.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(e)===2?(_(),x(T,{key:0,label:"数据模型"},{default:y(()=>[l(Ke,{modelValue:t(c).modelId,"onUpdate:modelValue":u[2]||(u[2]=L=>t(c).modelId=L),style:{width:"100%"},load:d},{default:y(({options:L})=>[(_(!0),F(Z,null,oe(L,Q=>(_(),x(h,{key:Q.value,label:Q.label,value:Q.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):M("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),bn=$({__name:"SelectIcons",setup(b){return(e,a)=>(_(),x(Ae,wt(Ct(e.$attrs)),null,16))}}),kn=$({__name:"GroupDialog",setup(b){const e=N(),a=v(!1),d={appId:"",hasFlow:0,name:"",parentId:"0",type:E.group,icon:"FolderOpened",color:"#333333"},n=v(!1),o=v({...d}),p=S(()=>o.value.parentId==="0"?"新增分组":"新增子分组");te(Pe,I=>{o.value={...d,appId:e.appId,...I??{}},a.value=!0});const f=async()=>{n.value=!0;try{await ie(o.value),q.success(`${p.value}成功`),a.value=!1,e.refreshTree++}finally{n.value=!1}};return(I,r)=>{const i=ve,g=he,u=Ie,h=H,A=ee;return _(),x(A,{modelValue:t(a),"onUpdate:modelValue":r[4]||(r[4]=T=>j(a)?a.value=T:null),title:t(p),width:"350px"},{footer:y(()=>[k("span",{class:"dialog-footer"},[l(h,{onClick:r[3]||(r[3]=T=>a.value=!1)},{default:y(()=>[U("取消")]),_:1}),l(h,{type:"primary",disabled:!t(o).name||!t(o).icon,loading:t(n),onClick:f},{default:y(()=>[U(" 确定 ")]),_:1},8,["disabled","loading"])])]),default:y(()=>[l(u,{ref:"ruleFormRef",model:t(o),"label-width":"80px","status-icon":""},{default:y(()=>[l(g,{label:"分组名称",prop:"name"},{default:y(()=>[l(i,{modelValue:t(o).name,"onUpdate:modelValue":r[0]||(r[0]=T=>t(o).name=T),placeholder:"请输入分组名称"},null,8,["modelValue"])]),_:1}),t(o).color&&t(o).icon?(_(),x(g,{key:0,label:"图标",prop:"icon"},{default:y(()=>[l(bn,{color:t(o).color,"onUpdate:color":r[1]||(r[1]=T=>t(o).color=T),icon:t(o).icon,"onUpdate:icon":r[2]||(r[2]=T=>t(o).icon=T)},null,8,["color","icon"])]),_:1})):M("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),xn=$({__name:"LinkPageDialog",setup(b){const e=N(),a=v(!1),d={appId:"",name:"未命名页面",parentId:"0",type:E.includePage,icon:"app_menu_38",color:"#2975F4",includePageType:W.out},n=v(!1),o=v({...d}),p=S(()=>"引入页面");te(be,r=>{o.value={...d,appId:e.appId,...r??{}},a.value=!0});const f=async()=>{n.value=!0;try{const r=await ie(o.value);q.success(`${p.value}成功`),a.value=!1,await e.jumpExternalPage(r.id)}finally{n.value=!1}},I=S(()=>r=>r===o.value.includePageType);return(r,i)=>{const g=H,u=ee;return _(),x(u,{modelValue:t(a),"onUpdate:modelValue":i[3]||(i[3]=h=>j(a)?a.value=h:null),title:t(p),width:"600px"},{footer:y(()=>[k("span",{class:"dialog-footer"},[l(g,{onClick:i[2]||(i[2]=h=>a.value=!1)},{default:y(()=>[U("取消")]),_:1}),l(g,{type:"primary",disabled:t(o).includePageType===void 0,loading:t(n),onClick:f},{default:y(()=>[U(" 确定 ")]),_:1},8,["disabled","loading"])])]),default:y(()=>[k("div",{class:"page_type"},[k("div",{class:re(["page_type-item",{active:t(I)(t(W).out)}]),onClick:i[0]||(i[0]=h=>t(o).includePageType=t(W).out)},[l(z,{"icon-class":"link_page_out",class:"icon"}),k("span",null,"引入平台外已有的链接页面")],2),k("div",{class:re(["page_type-item",{active:t(I)(t(W).in)}]),onClick:i[1]||(i[1]=h=>t(o).includePageType=t(W).in)},[l(z,{"icon-class":"link_page_in",class:"icon"}),k("span",null,"引入平台内定制的复杂页面")],2)])]),_:1},8,["modelValue","title"])}}});const wn=B(xn,[["__scopeId","data-v-ab083d61"]]),Cn=$({__name:"MoveEntryDialog",setup(b){const e=N(),a={children:"children",label:"name"},d=v(""),n=v(!1),o=v("");te(ye,g=>{o.value=g.movedId,d.value="",n.value=!0});const c=g=>g.filter(u=>(u.children=c(u.children),u.type==="group"&&u.id!==o.value)),f=S(()=>c(Et(e.entryTree))),I=v(!1),r=async()=>{I.value=!0;try{await ze({beforeEntryId:"0",parentId:d.value,entryId:o.value}),e.refreshTree++,n.value=!1}finally{I.value=!1}},i=async g=>{d.value=g.id};return(g,u)=>{const h=qe,A=H,T=ee;return _(),x(T,{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=V=>n.value=V),title:"迁移",width:"650px"},{footer:y(()=>[k("span",{class:"dialog-footer"},[l(A,{onClick:u[0]||(u[0]=V=>n.value=!1)},{default:y(()=>[U("取消")]),_:1}),l(A,{type:"primary",onClick:r,loading:I.value},{default:y(()=>[U(" 确定 ")]),_:1},8,["loading"])])]),default:y(()=>[k("div",{class:"tip"},"请选择需要迁移到目标分组"),k("div",{style:{height:"400px",overflow:"auto"}},[l(h,{data:f.value,"highlight-current":!0,props:a,onNodeClick:i,"node-key":"id"},{default:y(({data:V})=>[k("div",{class:"tree_item"},[k("div",{class:"tree_icon",style:se({color:V.color})},[l(z,{"icon-class":V.icon},null,8,["icon-class"])],4),k("div",{class:"el-tree-node__label az-ellipsis",title:V.name},Ce(V.name),9,["title"]),k("div",{class:"tree_item_set",style:{color:"#2778ff"}},[d.value===V.id?(_(),x(z,{key:0,"icon-class":"SuccessFilled"})):M("",!0)])])]),_:1},8,["data"])])]),_:1},8,["modelValue"])}}});const En=B(Cn,[["__scopeId","data-v-d35ca0d9"]]),An=""+new URL("../png/dataList-bc167c8d.png",import.meta.url).href,Vn=""+new URL("../png/form-5eb3770d.png",import.meta.url).href,Dn=""+new URL("../png/includePage-291a8e9a.png",import.meta.url).href,Tn=""+new URL("../png/page-c2cf8744.png",import.meta.url).href,Fn=""+new URL("../png/processForm-9e540bca.png",import.meta.url).href,Pn=$({__name:"EmptyApp",setup(b){const e=N(),a=[{img:Vn,name:"表单",type:"form",bgColor:"#F0F0FF",tip:"适用于问卷调查、数据收集等业务，不含工作流程"},{img:Fn,name:"流程表单",type:"processForm",bgColor:"#E9F1FF",tip:"适用于有工作流程、需不同用户进行协作的业务"},{img:An,name:"数据列表",type:"dataList",bgColor:"#FFF4E9",tip:"适用于数据管理、查询等业务"},{img:Tn,name:"页面",type:"page",bgColor:"#E9F1FF",tip:"适用于门户、报表等业务页面"},{img:Dn,name:"引入页面",type:"includePage",bgColor:"#F0F0FF",tip:"引入平台外已有的链接页面，或内部定制的复杂页面"}],d=n=>{n===E.form||n==="processForm"?P.emit(le,n!=="processForm"?void 0:{hasFlow:1}):n===E.page?e.createDashboard():n===E.includePage?P.emit(be):P.emit(ke)};return(n,o)=>{const p=At,c=Vt;return _(),F("div",{style:{width:"100%",height:"100%",padding:"10px"}},[k("div",{class:"empty_app",style:se({paddingTop:t(e).getOperatingPremission(t(R).design)?"135px":"0"})},[t(e).getOperatingPremission(t(R).design)?(_(),F("div",{key:1,class:"card-wrap"},[(_(),F(Z,null,oe(a,f=>l(c,{class:"box-card",key:f.name,onClick:I=>d(f.type),"body-style":{padding:"8px"}},{default:y(()=>[k("div",{class:"app_img",style:se({backgroundColor:f.bgColor})},[k("img",{src:f.img,alt:f.name},null,8,["src","alt"])],4),k("div",{class:"title Black_0"},Ce(f.name),1),k("div",{class:"tip"},Ce(f.tip),1)]),_:2},1032,["onClick"])),64))])):(_(),x(p,{key:0}))],4)])}}});const $n=B(Pn,[["__scopeId","data-v-9f0748ca"]]),Ln=$({__name:"AppMain",setup(b){const e=N(),a=ne(()=>ae(()=>import("./MyTasks-3df27ed3.js"),["./MyTasks-3df27ed3.js","./myTask-e6b9bd93.js","./index-b80d5ef5.js","..\\css\\index-13cb634b.css","./el-space-0d01b33a.js","..\\css\\el-space-63c9a9a8.css","./useExtractQuery-f96f705c.js","./LoadingData-195d0581.js","./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js","..\\css\\LoadingData-c62058eb.css","./ConditionWrapper-43da1676.js","./FieldCondition-1c72aa9d.js","./SelectEntryAndOther-76a65b2d.js","..\\css\\SelectEntryAndOther-c49439e9.css","./Base.vue_vue_type_script_setup_true_lang-03820366.js","./useFieldMaxWidth-d82f063e.js","./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js","./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js","..\\css\\AzCascader-6c13ae3b.css","./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js","..\\css\\AzDatePicker-bc99fde3.css","./index-318b68f4.js","./AzInputNumber-d6212644.js","./el-input-number-c15b1cc7.js","..\\css\\el-input-number-3100e046.css","..\\css\\AzInputNumber-7eb04079.css","./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js","..\\css\\AzTimePicker-c7c3a174.css","./useMultipleVal-904406c1.js","./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js","..\\css\\CascaderBase-b08fbeae.css","./el-dropdown-item-455a6589.js","..\\css\\el-dropdown-item-ee6896fd.css","./CardShowFieldItem-fd24f218.js","..\\css\\CardShowFieldItem-2ebcfade.css","..\\css\\Base-0cce8938.css","..\\css\\FieldCondition-e31264a2.css","./ButtonState-cb54910b.js","..\\css\\ButtonState-a8d21f44.css","..\\css\\ConditionWrapper-8c47b3ca.css","./store-3b56af45.js","./GridItem-674e6ecc.js","./enum-baae9292.js","./AppIconNew-704f70f4.js","./useTransformColor-38b5da33.js","..\\css\\AppIconNew-db550dd8.css","..\\css\\GridItem-f790614f.css","./Tabs-69fb071c.js","./useQueryTab-05fa7456.js","..\\css\\Tabs-01b5f01e.css","./useFlowForm-df7c1aa0.js","./enum-7a2ae6a9.js","..\\css\\myTask-7dab8845.css","..\\css\\el-checkbox-group-987ef89c.css","./TemplateIcon-2baf2fac.js","..\\css\\TemplateIcon-350049f0.css","./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js","..\\css\\TableOperation-e7627c56.css","./index-c4a56c4a.js","./homePage-3523f56f.js","./SelectDataSourece-70a968c3.js","..\\css\\SelectDataSourece-382a9997.css","./SelectIcon-71b7daf2.js","..\\css\\SelectIcon-c884b753.css","./index-c8016e23.js","./appManage-8a2e3832.js"],import.meta.url)),d=ne(()=>ae(()=>import("./AppDraft-c14610a4.js"),["./AppDraft-c14610a4.js","./routePage-728c729e.js","./index-b80d5ef5.js","..\\css\\index-13cb634b.css","./EditDraft-5267672c.js","..\\css\\EditDraft-48401986.css","..\\css\\routePage-dcfab33e.css","./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js","./useExtractQuery-f96f705c.js","./TemplateIcon-2baf2fac.js","..\\css\\TemplateIcon-350049f0.css","./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js","..\\css\\TableOperation-e7627c56.css","./index-c4a56c4a.js","./homePage-3523f56f.js","./SelectDataSourece-70a968c3.js","..\\css\\SelectDataSourece-382a9997.css","./SelectIcon-71b7daf2.js","./AppIconNew-704f70f4.js","./useTransformColor-38b5da33.js","./enum-baae9292.js","..\\css\\AppIconNew-db550dd8.css","..\\css\\SelectIcon-c884b753.css","./LoadingData-195d0581.js","..\\css\\LoadingData-c62058eb.css","./useQueryTab-05fa7456.js","./store-3b56af45.js","./index-c8016e23.js","./appManage-8a2e3832.js"],import.meta.url)),n=ne(()=>ae(()=>import("./FormEntry-e4ec3f64.js"),["./FormEntry-e4ec3f64.js","./index-b80d5ef5.js","..\\css\\index-13cb634b.css","./form-success-1777d0da.js","./dataShare-2d7ae3f7.js","./Qrcode-850531ac.js","./html2canvas.esm-0543ed55.js","..\\css\\Qrcode-2cc2c49c.css","./usePublicRelease-2335b254.js","./FormDraft-2c526b4f.js","./EditDraft-5267672c.js","..\\css\\EditDraft-48401986.css","..\\css\\FormDraft-a738485e.css","./PageContainer-f97fee2b.js","..\\css\\PageContainer-ab946918.css","./index-c4a56c4a.js","./dashboardDesigner-ce3c2e23.js","./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js","./useExtractQuery-f96f705c.js","./TemplateIcon-2baf2fac.js","..\\css\\TemplateIcon-350049f0.css","./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js","..\\css\\TableOperation-e7627c56.css","./homePage-3523f56f.js","./SelectDataSourece-70a968c3.js","..\\css\\SelectDataSourece-382a9997.css","./SelectIcon-71b7daf2.js","./AppIconNew-704f70f4.js","./useTransformColor-38b5da33.js","./enum-baae9292.js","..\\css\\AppIconNew-db550dd8.css","..\\css\\SelectIcon-c884b753.css","./LoadingData-195d0581.js","..\\css\\LoadingData-c62058eb.css","./useQueryTab-05fa7456.js","./store-3b56af45.js","./index-c8016e23.js","./appManage-8a2e3832.js","..\\css\\FormEntry-10f18b96.css"],import.meta.url)),o=ne(()=>ae(()=>import("./ListEntry-2264b6e4.js"),["./ListEntry-2264b6e4.js","./index-b80d5ef5.js","..\\css\\index-13cb634b.css","./LoadingData-195d0581.js","./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js","..\\css\\LoadingData-c62058eb.css","./Designer.vue_vue_type_script_setup_true_lang-3c7dafd1.js","./usePublicRelease-2335b254.js","./form-success-1777d0da.js","./keyBy-8fcfdd74.js","./_createAggregator-d66ed64c.js","./el-dropdown-item-455a6589.js","..\\css\\el-dropdown-item-ee6896fd.css","./TableRender-bab4d661.js","./Resize-eb80395d.js","..\\css\\Resize-9e524632.css","./useQueryTab-05fa7456.js","./useExtractQuery-f96f705c.js","./FormShare-9773b44c.js","./dataShare-2d7ae3f7.js","..\\css\\FormShare-2b578c67.css","./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js","..\\css\\TableOperation-e7627c56.css","./Base.vue_vue_type_script_setup_true_lang-03820366.js","./useFieldMaxWidth-d82f063e.js","./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js","./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js","..\\css\\AzCascader-6c13ae3b.css","./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js","..\\css\\AzDatePicker-bc99fde3.css","./index-318b68f4.js","./AzInputNumber-d6212644.js","./el-input-number-c15b1cc7.js","..\\css\\el-input-number-3100e046.css","..\\css\\AzInputNumber-7eb04079.css","./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js","..\\css\\AzTimePicker-c7c3a174.css","./useMultipleVal-904406c1.js","./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js","..\\css\\CascaderBase-b08fbeae.css","./CardShowFieldItem-fd24f218.js","..\\css\\CardShowFieldItem-2ebcfade.css","..\\css\\Base-0cce8938.css","..\\css\\TableRender-b9a9ea87.css","./SelectDataSourece-70a968c3.js","..\\css\\SelectDataSourece-382a9997.css","./useTransformColor-38b5da33.js","..\\css\\Designer-471d4305.css","./Qrcode-850531ac.js","./html2canvas.esm-0543ed55.js","..\\css\\Qrcode-2cc2c49c.css","./DesignerDialog-22d70853.js","..\\css\\DesignerDialog-7f952da8.css","./CardTabs-ca59b5e9.js","..\\css\\CardTabs-474accad.css","./PageContainer-f97fee2b.js","..\\css\\PageContainer-ab946918.css","./index-c4a56c4a.js","./TemplateIcon-2baf2fac.js","..\\css\\TemplateIcon-350049f0.css","./homePage-3523f56f.js","./SelectIcon-71b7daf2.js","./AppIconNew-704f70f4.js","./enum-baae9292.js","..\\css\\AppIconNew-db550dd8.css","..\\css\\SelectIcon-c884b753.css","./store-3b56af45.js","./index-c8016e23.js","./appManage-8a2e3832.js","..\\css\\ListEntry-607a752b.css","..\\css\\el-checkbox-group-987ef89c.css"],import.meta.url)),p=ne(()=>ae(()=>import("./PageEntry-0629a8bc.js"),["./PageEntry-0629a8bc.js","./index-b80d5ef5.js","..\\css\\index-13cb634b.css","./dashboardDesigner-ce3c2e23.js","./render-bd995381.js","./createDesigner-82222fc7.js","./enum-baae9292.js","..\\css\\createDesigner-305fe05d.css","..\\css\\render-a1eee7d5.css","./PageContainer-f97fee2b.js","..\\css\\PageContainer-ab946918.css","./index-c4a56c4a.js","./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js","./useExtractQuery-f96f705c.js","./TemplateIcon-2baf2fac.js","..\\css\\TemplateIcon-350049f0.css","./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js","..\\css\\TableOperation-e7627c56.css","./homePage-3523f56f.js","./SelectDataSourece-70a968c3.js","..\\css\\SelectDataSourece-382a9997.css","./SelectIcon-71b7daf2.js","./AppIconNew-704f70f4.js","./useTransformColor-38b5da33.js","..\\css\\AppIconNew-db550dd8.css","..\\css\\SelectIcon-c884b753.css","./LoadingData-195d0581.js","..\\css\\LoadingData-c62058eb.css","./useQueryTab-05fa7456.js","./store-3b56af45.js","./index-c8016e23.js","./appManage-8a2e3832.js","..\\css\\PageEntry-2dad0d24.css"],import.meta.url)),c=ne(()=>ae(()=>import("./ExternalPageEntry-2632989d.js"),["./ExternalPageEntry-2632989d.js","./index-b80d5ef5.js","..\\css\\index-13cb634b.css","./PageContainer-f97fee2b.js","..\\css\\PageContainer-ab946918.css","./index-c26b8edc.js","./index-c4a56c4a.js","./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js","./useExtractQuery-f96f705c.js","./TemplateIcon-2baf2fac.js","..\\css\\TemplateIcon-350049f0.css","./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js","..\\css\\TableOperation-e7627c56.css","./homePage-3523f56f.js","./SelectDataSourece-70a968c3.js","..\\css\\SelectDataSourece-382a9997.css","./SelectIcon-71b7daf2.js","./AppIconNew-704f70f4.js","./useTransformColor-38b5da33.js","./enum-baae9292.js","..\\css\\AppIconNew-db550dd8.css","..\\css\\SelectIcon-c884b753.css","./LoadingData-195d0581.js","..\\css\\LoadingData-c62058eb.css","./useQueryTab-05fa7456.js","./store-3b56af45.js","./index-c8016e23.js","./appManage-8a2e3832.js","..\\css\\ExternalPageEntry-c70c36d8.css"],import.meta.url)),f=async()=>{var r;const I=(r=e.selectedEntry)==null?void 0:r.id;if(!I)return Promise.reject("数据异常");Dt(I)};return(I,r)=>{var i,g,u,h,A,T;return _(),F("div",{class:"app_main",key:(i=t(e).selectedEntry)==null?void 0:i.id},[!t(e).entryList.length&&t(e).treeLoafinish?(_(),x($n,{key:0})):t(e).entryId===t(_e)?(_(),x(t(a),{key:1})):t(e).entryId===t(me)?(_(),x(t(d),{key:2})):((g=t(e).selectedEntry)==null?void 0:g.type)===t(E).form||((u=t(e).selectedEntry)==null?void 0:u.type)===t(E).sheet||((h=t(e).selectedEntry)==null?void 0:h.type)===t(E).page||((A=t(e).selectedEntry)==null?void 0:A.type)===t(E).includePage?(_(),x(zt,{key:(T=t(e).selectedEntry)==null?void 0:T.id,load:f,style:{height:"100%"}},{default:y(()=>{var V,D,K,L;return[((V=t(e).selectedEntry)==null?void 0:V.type)===t(E).form?(_(),x(t(n),{key:0,entry:t(e).selectedEntry,appId:t(e).appId},null,8,["entry","appId"])):((D=t(e).selectedEntry)==null?void 0:D.type)===t(E).sheet?(_(),x(t(o),{key:1,entry:t(e).selectedEntry,appId:t(e).appId},null,8,["entry","appId"])):((K=t(e).selectedEntry)==null?void 0:K.type)===t(E).page?(_(),x(t(p),{key:2,entry:t(e).selectedEntry,appId:t(e).appId},null,8,["entry","appId"])):((L=t(e).selectedEntry)==null?void 0:L.type)===t(E).includePage?(_(),x(t(c),{key:3,entry:t(e).selectedEntry,appId:t(e).appId},null,8,["entry","appId"])):M("",!0)]}),_:1})):M("",!0)])}}});const Sn=B(Ln,[["__scopeId","data-v-24a0c5f0"]]),Un=()=>{const b=ge(),e=Te(),a=Qt();return{goBack:()=>{X(a.historyPath,{query:{...a.historyParams},replace:!0})},goDataModeling:()=>{const o=Tt("appId");X(Ft,{query:{appId:o}})},route:b,router:e}};function On(){const{goBack:b}=Un(),e=Ee("appId"),a=Ee("manager"),d=v([]),n=S(()=>{const r=[];return function i(g){for(const u of g)u.type!==E.group&&r.push(u),u.children.length&&i(u.children)}(d.value),r}),o=S(()=>{const r=n.value.map(i=>i.id);return r.length&&(r.push(_e),r.push(me)),r}),p=v(!1);G(e,()=>p.value=!1);const{activeTab:c}=Kt(o,{queryKey:"entryId",unNoCorrect:!0,isNoCorrect:S(()=>!p.value)}),f=S(()=>n.value.find(r=>r.id===c.value)),I=We({appId:e,manager:a,appDetails:{},appAuth:null,goBack:b,entryId:c,entryTree:d,entryList:n,selectedEntry:f,refreshTree:0,treeLoafinish:p,getOperatingPremission(r,i){var g,u;if(((g=I.appDetails)==null?void 0:g.isCurrentTenant)===!0)return!1;switch(r){case R.design:case R.setting:return this.appAuth&&Ue(this.appAuth.operAuth,He.manage);case R.appAuth:return this.appAuth&&(i==null?void 0:i.appAuthType)&&Ue(this.appAuth.operAuth,i.appAuthType);case R.entryAuth:return this.appAuth&&(i==null?void 0:i.entryAuthtype)&&Wt((u=this.appAuth)==null?void 0:u.appEntryRuleVos,i==null?void 0:i.entryAuthtype,{entryId:i.entryId,viewId:i.viewId});default:return Pt("workbench:app:setting")}},async queryEntryAuh(){return this.appAuth=await Ht(e.value??""),this.appAuth},async jumpForm(r){await X($t,{query:{appEntryId:r,appId:this.appId}})},async jumpDashboard(r){await X(Lt,{query:{appEntryId:r,appId:this.appId}})},async jumpExternalPage(r){await X(St,{query:{entryId:r,appId:this.appId}})},async createDashboard(r){const i=await ie({appId:this.appId,name:"未命名页面",parentId:"0",type:E.page,color:"#2975F4",icon:"app_menu_38",...r??{}});await this.jumpDashboard(i.id)},async handleDelete(r,i){Ut.confirm(i.tip,i.title,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:async(g,u,h)=>{if(g==="confirm"){u.confirmButtonLoading=!0;try{await Ot(r),h(),I.refreshTree++}finally{u.confirmButtonLoading=!1}}else h()}}).then(()=>{q.success("删除成功")})},async handleFormChange(r){"hasFlow"in r&&(await fe(r),q.success("切换成功"),I.refreshTree++)}});return I}const Mn=$({__name:"routePage",setup(b){Mt();const e=On(),a=v();Nt(Je,e);const d=v("200"),n=v(""),o=async()=>{if(!e.appId)return Promise.reject({msg:"缺少必要的参数!",loadState:Rt.exit});d.value="200";try{const[f]=await Promise.all([Bt({appId:e.appId,name:"",orgIds:[]}).catch(r=>{throw new Error("获取应用详情失败: "+r.message)}),e.manager&&e.queryEntryAuh()]),I=await f;if(!I)throw new Error("当前应用已删除或者无权限访问");e.appDetails=I}catch(f){d.value=f.code,n.value=f.msg}};G(()=>e.appId,()=>{var f;(f=a.value)==null||f.reload()});const p=Ee("dataId"),c=v(!1);return Te(),ge(),G(p,()=>{c.value=!!p.value},{immediate:!0}),(f,I)=>{const r=Yt;return _(),F(Z,null,[d.value==="200"?(_(),x(je,{key:0,ref_key:"LoadingDataRef",ref:a,class:"app_page",path:t(e).goBack,load:o,"element-loading-background":"transparent"},{default:y(()=>[l(fn),l(Sn)]),_:1},8,["path"])):(_(),x(r,{key:1,errorMsg:n.value},null,8,["errorMsg"])),l(kn),l(In),l(gn),l(hn),l(En),l(vn),l(wn)],64)}}});const Nn=B(Mn,[["__scopeId","data-v-fbc5b619"]]),ea=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"}));export{R as a,ea as r,N as u};
