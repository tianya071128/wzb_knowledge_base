import{d as Y,gY as K,r as m,Y as y,o as a,f as d,i as t,w as l,aq as B,zE as P,B as n,a as W,b as U,l as z,a5 as Z,m as u,F as C,g as F,k as p,t as j,zF as H,bv as J,gK as Q,zG as X,of as x,Z as ee,aN as oe,U as te,av as ie,gT as le,eB as re,bC as pe,ao as ae,ap as ne,bn as se,_ as me}from"./index-b80d5ef5.js";import{E as _,A as D}from"./routePage-70460a50.js";import{_ as de,a as ue}from"./FieldOtherEditor.vue_vue_type_script_setup_true_lang-a2d4ed75.js";import{B as fe}from"./ButtonState-cb54910b.js";import{F as ce}from"./FieldCondition-1c72aa9d.js";import{F as ve}from"./FieldConditionView-ad1b057c.js";import"./useQueryTab-05fa7456.js";import"./useExtractQuery-f96f705c.js";import"./CardTabs-ca59b5e9.js";import"./EditItemTargetForm.vue_vue_type_script_setup_true_lang-199df786.js";import"./SelectEntryAndOther-76a65b2d.js";import"./LoadingData-195d0581.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./ComponentParamsSetWrapper-71afc840.js";import"./default-component-4c80201b.js";import"./SelectFieldByMultEntry-84abd0c3.js";import"./fieldDefaultComponent-58752d9c.js";import"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import"./useFieldMaxWidth-d82f063e.js";import"./Base.vue_vue_type_script_setup_true_lang-4fbdbc85.js";import"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import"./index-318b68f4.js";import"./DaterangeBase.vue_vue_type_script_setup_true_lang-bec97540.js";import"./InputBase.vue_vue_type_script_setup_true_lang-ffcf63f1.js";import"./Base-9b7f3306.js";/* empty css                          */import"./index-f0ed738f.js";import"./NumberBase.vue_vue_type_script_setup_true_lang-745b39c5.js";import"./AzInputNumber-d6212644.js";import"./el-input-number-c15b1cc7.js";import"./Base-c9aa1df0.js";/* empty css                        */import"./SliderBase.vue_vue_type_script_setup_true_lang-5d73415b.js";import"./TextareaBase.vue_vue_type_script_setup_true_lang-7091b2cb.js";import"./TimeBase.vue_vue_type_script_setup_true_lang-ea537bf3.js";import"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import"./TimerangeBase.vue_vue_type_script_setup_true_lang-0827c241.js";import"./UploadFileBase.vue_vue_type_script_setup_true_lang-0c253daa.js";import"./UploadImgBase.vue_vue_type_script_setup_true_lang-d23c1306.js";import"./CooperateEnterpriseBase.vue_vue_type_script_setup_true_lang-23720971.js";import"./useMultipleVal-904406c1.js";import"./CooperatePersonnelBase.vue_vue_type_script_setup_true_lang-adcd0db7.js";import"./Base.vue_vue_type_script_setup_true_lang-0e9a0e2c.js";import"./Base.vue_vue_type_script_setup_true_lang-aa25657d.js";import"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import"./Base.vue_vue_type_script_setup_true_lang-03820366.js";import"./el-dropdown-item-455a6589.js";import"./CardShowFieldItem-fd24f218.js";import"./SelectCascaderEntry.vue_vue_type_script_setup_true_lang-673c5dca.js";import"./SelectForm.vue_vue_type_script_setup_true_lang-0170236d.js";import"./ParamsSet.vue_vue_type_script_setup_true_lang-37c252c5.js";import"./MessageRemindConfig-98484405.js";import"./utils-a7200637.js";import"./messageTemplate-8658e6b4.js";import"./SetFieldDefault-5fc1ae2a.js";import"./ButtonSelectField.vue_vue_type_script_setup_true_lang-aae15f71.js";import"./FormulaWrapper-92a83208.js";import"./Formula.vue_vue_type_style_index_0_lang-ef444f24.js";import"./index-8e050109.js";import"./routePage.vue_vue_type_script_setup_true_lang-efb79c93.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./CollageTable-791f0954.js";import"./index-617ab4b4.js";import"./ConditionWrapper-43da1676.js";import"./SetAuth-50c8e12e.js";import"./usePublicRelease-2335b254.js";import"./Qrcode-850531ac.js";import"./html2canvas.esm-0543ed55.js";import"./DesignerDialog-22d70853.js";import"./Designer.vue_vue_type_script_setup_true_lang-3c7dafd1.js";import"./form-success-1777d0da.js";import"./keyBy-8fcfdd74.js";import"./_createAggregator-d66ed64c.js";import"./TableRender-bab4d661.js";import"./Resize-eb80395d.js";import"./FormShare-9773b44c.js";import"./dataShare-2d7ae3f7.js";import"./SelectDataSourece-70a968c3.js";import"./useTransformColor-38b5da33.js";import"./SetFieldAuth-3d0b80a0.js";import"./DesignerTabs-a9795edf.js";import"./Base-3571a39e.js";import"./AddFormDataBtnPlus-a775412e.js";import"./formDesigner-462b10d7.js";import"./Base.vue_vue_type_script_setup_true_lang-832ddae3.js";import"./useValidateError-9f6399dc.js";import"./AutoNumberBase.vue_vue_type_script_setup_true_lang-56f78b68.js";import"./PluginBase-56c4bf37.js";import"./RichTextBase-228f0924.js";import"./Base-11a86176.js";import"./UploadWrapper.vue_vue_type_script_setup_true_lang-4553cd48.js";import"./index-c89dfa90.js";import"./TemplateCustomEntry.vue_vue_type_script_setup_true_lang-346d01b1.js";import"./TextBase.vue_vue_type_script_setup_true_lang-09411e7a.js";import"./BtnDisplay.vue_vue_type_script_setup_true_lang-cbe1b7c6.js";import"./Base.vue_vue_type_script_setup_true_lang-392ceecd.js";import"./GridBase.vue_vue_type_script_setup_true_lang-f18077d3.js";import"./Base-16c93ea0.js";import"./TableBase-393fac1a.js";import"./TabsBase.vue_vue_type_style_index_0_lang-861f3fae.js";import"./DepartmentBase.vue_vue_type_script_setup_true_lang-6f309530.js";import"./MemberBase.vue_vue_type_script_setup_true_lang-77a28117.js";import"./AddOrEditValidate.vue_vue_type_style_index_0_lang-5bd5a73c.js";import"./DataSoureceWrapper-047a1c9d.js";import"./ComponentPostAction-12970ad1.js";import"./InternalComponentSelectPlus-00c8c38f.js";import"./app.vue_vue_type_script_setup_true_lang-59fd2507.js";import"./enum-7a2ae6a9.js";import"./index-20639231.js";import"./el-space-0d01b33a.js";import"./cloneDeep-dc1c677b.js";import"./isTypedArray-10beecc7.js";import"./el-collapse-transition-4ed993c7.js";import"./defaultValue-7c7c87ea.js";import"./EditorDraggable-a06dbc71.js";import"./typeof-7fd5df1e.js";import"./utils-052731c0.js";import"./designerRender.vue_vue_type_script_setup_true_lang-68b31d85.js";const _e=Y({__name:"Setting",props:{field:{}},setup(I){const f=I,k=K(),g=m(!1),s=m(!1),c=m(null),E=m(),w=()=>({condition:[],state:x.wait,id:ee(f.field.options.rules.map(e=>e.id))}),r=m(y(w())),$=()=>{g.value=!0},A=()=>{c.value=null,r.value=y(w()),s.value=!0},N=e=>{c.value=e,r.value=y(f.field.options.rules[e]),s.value=!0},R=async()=>{var e;if(await((e=E.value)==null?void 0:e.validate()),r.value.condition.length===0)return oe.error("请至少设置一个条件");s.value=!1,c.value==null?f.field.options.rules.push(r.value):f.field.options.rules[c.value]=r.value};return(e,i)=>{const V=te,S=ie,h=le,T=re,L=pe,q=ae,G=ne,M=se;return a(),d(C,null,[t(_,{label:"标题"},{default:l(()=>[t(B,{modelValue:e.field.options.label,"onUpdate:modelValue":i[0]||(i[0]=o=>e.field.options.label=o),isBlurCache:"",placeholder:"请输入标题","show-word-limit":"",maxlength:"15"},null,8,["modelValue"])]),_:1}),t(_,{label:"描述"},{default:l(()=>[t(B,{modelValue:e.field.options.description,"onUpdate:modelValue":i[1]||(i[1]=o=>e.field.options.description=o),resize:"none",rows:2,type:"textarea",placeholder:"请输入描述","show-word-limit":"",maxlength:"30"},null,8,["modelValue"])]),_:1}),t(_,{label:"图标"},{default:l(()=>[t(P,{modelValue:e.field.options.icon,"onUpdate:modelValue":i[2]||(i[2]=o=>e.field.options.icon=o),placeholder:"自定义图标"},null,8,["modelValue"])]),_:1}),e.field.type===n(W).stepTwo?(a(),U(_,{key:0,label:"状态",required:"",id:`${e.field.fieldId}.rules`},{default:l(({error:o})=>[t(fe,{onClick:$,text:"设置状态规则","is-set":!!e.field.options.rules.length,"is-error":!!o},null,8,["is-set","is-error"])]),_:1},8,["id"])):z("",!0),t(de,{modelValue:e.field.options,"onUpdate:modelValue":i[3]||(i[3]=o=>e.field.options=o),id:e.field.fieldId,hideEdit:""},null,8,["modelValue","id"]),t(ue,{field:e.field},null,8,["field"]),t(J,{modelValue:g.value,"onUpdate:modelValue":i[4]||(i[4]=o=>g.value=o),"destroy-on-close":"",title:"设置规则",size:"90%","append-to-body":"",direction:"btt",class:"rule-setting"},{default:l(()=>[t(L,{class:"rule-card"},{header:l(()=>[t(V,{type:"primary",icon:n(Z),onClick:A},{default:l(()=>[u(" 添加规则 ")]),_:1},8,["icon"])]),default:l(()=>{var o;return[(a(!0),d(C,null,F(e.field.options.rules,(v,b)=>(a(),d("div",{key:b,class:"rule-item"},[p("div",{class:"rule-describe"},[p("div",{class:"mb-5"},"满足以下条件："),p("div",{class:"pl-10"},[t(ve,{fields:n(k).form.fields,condition:v.condition},null,8,["fields","condition"])]),p("div",{class:"mt-5 mb-5"},"当前步骤状态为："),p("div",{class:"rule-action bold"},j(n(H)(v.state)),1)]),p("div",{class:"rule-operate"},[t(S,{type:"primary",underline:!1,onClick:O=>N(b)},{default:l(()=>[u(" 编辑 ")]),_:2},1032,["onClick"]),t(h,{direction:"vertical"}),t(T,{title:"确定要删除该规则?",onConfirm:O=>e.field.options.rules.splice(b,1)},{reference:l(()=>[t(S,{type:"danger",underline:!1},{default:l(()=>[u("删除")]),_:1})]),_:2},1032,["onConfirm"])])]))),128)),(o=e.field.options.rules)!=null&&o.length?z("",!0):(a(),d("div",{key:0,class:"rule-empty"}," 让步骤条在特定条件成立时，显示对应状态 "))]}),_:1})]),_:1},8,["modelValue"]),t(M,{modelValue:s.value,"onUpdate:modelValue":i[8]||(i[8]=o=>s.value=o),title:"设置规则",width:"70%","destroy-on-close":"","close-on-click-modal":!1,"append-to-body":""},{footer:l(()=>[p("span",{class:"dialog-footer"},[t(V,{onClick:i[7]||(i[7]=o=>s.value=!1)},{default:l(()=>[u("取消")]),_:1}),t(V,{type:"primary",onClick:R},{default:l(()=>[u("确定")]),_:1})])]),default:l(()=>[p("div",{class:"step_setting-rule"},[t(D,{name:"筛选条件",class:"mb-20"},{default:l(()=>[t(ce,{condition:r.value.condition,"onUpdate:condition":i[5]||(i[5]=o=>r.value.condition=o),ref_key:"fieldConditionRef",ref:E,fields:n(k).form.fields,mode:n(Q).rule},null,8,["condition","fields","mode"])]),_:1}),t(D,{name:"步骤状态"},{default:l(()=>[t(G,{class:"w100",modelValue:r.value.state,"onUpdate:modelValue":i[6]||(i[6]=o=>r.value.state=o),placeholder:"请选择步骤状态"},{default:l(()=>[(a(!0),d(C,null,F(n(X),(o,v)=>(a(),U(q,{key:v,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["modelValue"])],64)}}});const Ft=me(_e,[["__scopeId","data-v-06e52748"]]);export{Ft as default};
