import{d as D,o as p,f as N,i as a,w as l,m,t as b,bT as T,by as q,bU as $,nH as h,r as S,c as w,v as P,bK as z,y as G,b as V,ad as H,bu as K,e as Q,S as j,l as R,B as J,C as L,bv as O,sq as W,aN as C,sr as X,Q as Y,ac as Z,E as ee,ab as ae,bm as le,_ as te}from"./index-b80d5ef5.js";const oe=D({__name:"role-details",props:{details:{}},setup(y){return(i,g)=>{const r=T,c=q,d=$;return p(),N("div",null,[a(d,{class:"user_center-desciptions",border:!0,column:2},{default:l(()=>[a(r,{label:"角色名称"},{default:l(()=>[m(b(i.details.name||"-"),1)]),_:1}),a(r,{label:"角色类型"},{default:l(()=>[a(c,{type:"success"},{default:l(()=>[m(b(i.details.internal?"所有企业的通用角色":"本企业的私有角色"),1)]),_:1})]),_:1}),a(r,{label:"说明",span:2},{default:l(()=>[m(b(i.details.remark||"-"),1)]),_:1})]),_:1})])}}}),se=D({__name:"RoleAddAndEdit",props:{drawerModel:{type:Boolean},rowData:{},comState:{}},emits:["update:drawerModel","refresh"],setup(y,{emit:i}){const g=h(),r=S(),c=i,d=y,E=w(()=>g.isPlatformAdmin),u=P(d,"drawerModel",c),F=()=>{var o;u.value=!1,(o=r.value)==null||o.resetFields()},M=z({name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],internal:[{required:!0,message:"请选择角色类型",trigger:"blur"}]}),_={internal:!!E.value,name:"",remark:"",status:0},e=S({..._});G(u,()=>{u.value&&(d.rowData,e.value=s("add")?{..._}:{...d.rowData},setTimeout(()=>{var o;(o=r.value)==null||o.clearValidate()},500))});const f=w(()=>d.comState==="view"),s=o=>d.comState===o,U=w(()=>s("add")?"新增角色":s("edit")?"编辑角色":s("view")?"查看角色":""),x=async o=>{var t;await((t=r.value)==null?void 0:t.validate()),s("edit")?(await W(e.value),C.success("修改角色成功")):(await X(e.value),C.success("新增角色成功")),o==="submitContinue"&&(e.value={..._}),c("refresh")};return(o,t)=>{const k=Y,v=Z,A=ee,I=ae,B=le;return p(),V(O,{modelValue:J(u),"onUpdate:modelValue":t[4]||(t[4]=n=>L(u)?u.value=n:null),title:U.value,onClose:F},H({default:l(()=>[f.value?R("",!0):(p(),V(B,{key:0,ref_key:"ruleFormRef",ref:r,rules:M,model:e.value,"label-width":"100px","label-position":"left"},{default:l(()=>[a(v,{label:"角色名称",prop:"name"},{default:l(()=>[a(k,{modelValue:e.value.name,"onUpdate:modelValue":t[0]||(t[0]=n=>e.value.name=n),placeholder:"请输入角色名称",disabled:s("edit")&&(e.value.type==2||e.value.type==4)},null,8,["modelValue","disabled"])]),_:1}),Q(a(v,{label:"角色类型",prop:"internal"},{default:l(()=>[a(I,{modelValue:e.value.internal,"onUpdate:modelValue":t[1]||(t[1]=n=>e.value.internal=n),disabled:s("edit")},{default:l(()=>[a(A,{label:!1,border:""},{default:l(()=>[m("本企业的私有角色")]),_:1}),a(A,{label:!0,border:""},{default:l(()=>[m("所有企业的通用角色")]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1},512),[[j,E.value]]),a(v,{label:"说明"},{default:l(()=>[a(k,{type:"textarea",disabled:s("edit")&&(e.value.type==2||e.value.type==4),modelValue:e.value.remark,"onUpdate:modelValue":t[2]||(t[2]=n=>e.value.remark=n),placeholder:"请输入说明"},null,8,["disabled","modelValue"])]),_:1})]),_:1},8,["rules","model"])),f.value?(p(),V(oe,{key:1,details:e.value},null,8,["details"])):R("",!0)]),_:2},[f.value?void 0:{name:"footer",fn:l(()=>[a(K,{editMode:s("edit"),onClose:t[3]||(t[3]=n=>u.value=!1),"on-submit":x},null,8,["editMode"])]),key:"0"}]),1032,["modelValue","title"])}}});const ne=te(se,[["__scopeId","data-v-8ee1ec3f"]]);export{ne as R};
