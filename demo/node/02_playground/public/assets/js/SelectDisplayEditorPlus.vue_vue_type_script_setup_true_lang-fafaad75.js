import{d as T,r as z,y as L,aT as Q,o as d,f as h,k as u,i as a,l as g,w as s,b as O,m as _,F as C,ds as H,Q as I,lr as J,av as X,gT as Y,U as Z,bn as x,_ as oo,g as M,B as b,zT as eo,t as B,fu as S,e as lo,S as to,zU as ao,c5 as N,ab as F,zR as so,zO as no,zS as io,mM as po,q as uo}from"./index-b80d5ef5.js";/* empty css                        */import{E as V}from"./FieldValidateEditorPlus.vue_vue_type_script_setup_true_lang-afaa3bca.js";import{_ as ro}from"./SelectDict.vue_vue_type_script_setup_true_lang-83251d28.js";import{E as fo}from"./EditorDraggable-a06dbc71.js";import{_ as mo}from"./TipTooltip-b2409537.js";const co=T({__name:"CustomDataOptionsPlus",props:{field:{}},setup(E){const e=E,p=["#fa5353","#f5c13c","#2fcd6e","#3f8cff","#d144f4","#ff9d8d","#a5c71c","#00c7c7","#656565"],y=o=>!!o.isOther,i=z(new Map),m=(o,l)=>{o?i.value.set(l,o):i.value.delete(l)},k=()=>{i.value.forEach(o=>{var l;(l=o.azFormItemRef)==null||l.validate()})},v=(o,l=!1)=>[{validator:()=>e.field.options.dataOptions.custom.isValue&&!l&&e.field.options.dataOptions.custom.options.filter(f=>f.value===o.value).length>1?new Error("不允许重复选项"):!e.field.options.dataOptions.custom.isValue&&l&&e.field.options.dataOptions.custom.options.filter(f=>f.label===o.label).length>1?new Error("不允许重复选项"):!0,trigger:"change"}],t=z(!1),r=z(""),K=()=>{t.value=!0,r.value=e.field.options.dataOptions.custom.options.filter(o=>!o.isOther).map(o=>o.label).join(`
`)},W=()=>{const o=e.field.options.dataOptions.custom.options.find(l=>l.isOther);e.field.options.dataOptions.custom.options=r.value.split(`
`).filter(l=>!!l).map((l,f)=>({label:l,value:l,isDefault:!1,color:$(f)})),o&&e.field.options.dataOptions.custom.options.push(o),t.value=!1},$=o=>p[o%p.length],A=()=>{const o=e.field.options.dataOptions.custom.options.some(f=>f.isOther),l=e.field.options.dataOptions.custom.options.length-Number(o);e.field.options.dataOptions.custom.options.splice(l,0,{label:"选项"+(l+1),value:"选项"+(l+1),color:$(l)})},j=()=>{e.field.options.dataOptions.custom.options.push({label:"其他",value:"其他",color:"#f0f1f4",isOther:!0})};return L([()=>e.field.options.dataOptions.custom.isValue,()=>e.field.options.dataOptions.custom.options.map(o=>`${o.label}_${o.value}`)],()=>{e.field.options.dataOptions.custom.isValue||e.field.options.dataOptions.custom.options.forEach(o=>o.value=o.label),Q(()=>k())}),(o,l)=>{const f=H,w=I,q=J,D=X,P=Y,R=Z,G=x;return d(),h(C,null,[u("div",{class:"w100 tr"},[u("span",{class:"mr-5"},"彩色"),a(f,{modelValue:o.field.options.dataOptions.custom.isColor,"onUpdate:modelValue":l[0]||(l[0]=n=>o.field.options.dataOptions.custom.isColor=n),size:"small",class:"mr-10"},null,8,["modelValue"]),u("span",{class:"mr-5"},"选项赋值"),a(f,{modelValue:o.field.options.dataOptions.custom.isValue,"onUpdate:modelValue":l[1]||(l[1]=n=>o.field.options.dataOptions.custom.isValue=n),size:"small"},null,8,["modelValue"])]),o.field.options.dataOptions.custom.isValue?(d(),h("div",{key:0,class:"custom-options-header"},[u("span",null,"显示值"),u("span",null,"唯一标识")])):g("",!0),a(fo,{"model-value":o.field.options.dataOptions.custom.options,itemKey:"id",rankCallback:y},{default:s(({element:n,index:U})=>[a(V,{prop:`options.dataOptions.custom.options.${U}.label`,rules:v(n,!0),ref:c=>m(c,`label_${U}`)},{default:s(()=>[a(w,{modelValue:n.label,"onUpdate:modelValue":c=>n.label=c,placeholder:"显示值"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"]),o.field.options.dataOptions.custom.isValue?(d(),O(V,{key:0,prop:`options.dataOptions.custom.options.${U}.value`,rules:v(n),ref:c=>m(c,`value_${U}`)},{default:s(()=>[a(w,{modelValue:n.value,"onUpdate:modelValue":c=>n.value=c,placeholder:"唯一标识"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):g("",!0),o.field.options.dataOptions.custom.isColor?(d(),O(q,{key:1,modelValue:n.color,"onUpdate:modelValue":c=>n.color=c,size:"small","popper-class":"az-color-clear",predefine:p},null,8,["modelValue","onUpdate:modelValue"])):g("",!0)]),_:1},8,["model-value"]),u("div",{class:"w100 tc"},[a(D,{type:"primary",underline:!1,onClick:A},{default:s(()=>[_(" 添加选项 ")]),_:1}),a(P,{direction:"vertical"}),a(D,{type:"primary",underline:!1,onClick:j,disabled:o.field.options.dataOptions.custom.options.some(n=>n.isOther)},{default:s(()=>[_(" 添加其他选项 ")]),_:1},8,["disabled"]),a(P,{direction:"vertical"}),a(D,{type:"primary",underline:!1,onClick:K},{default:s(()=>[_(" 批量编辑 ")]),_:1})]),a(G,{modelValue:t.value,"onUpdate:modelValue":l[4]||(l[4]=n=>t.value=n),title:"批量编辑",width:"700px","append-to-body":""},{footer:s(()=>[u("span",{class:"dialog-footer"},[a(R,{onClick:l[3]||(l[3]=n=>t.value=!1)},{default:s(()=>[_("取消")]),_:1}),a(R,{type:"primary",onClick:W},{default:s(()=>[_("确定")]),_:1})])]),default:s(()=>[u("div",{class:"color2 mb-5"},[_(" 每行对应一个选项, "),u("span",{class:"color3"},"点击确定后，逻辑表单和选项颜色的设置将失效")]),a(w,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=n=>r.value=n),type:"textarea",rows:15,resize:"none"},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}});const _o=oo(co,[["__scopeId","data-v-d6b82a2b"]]),go=T({__name:"DataOptionsEditorPlus",props:{field:{}},setup(E){const e=E,p=()=>{e.field.options.dataOptions={...e.field.options.dataOptions,...ao(e.field.options.dataOptions.type)}},y=()=>{var i;((i=e.field.options.defaultValue)==null?void 0:i.custom)!=null&&(e.field.options.defaultValue.custom=null)};return(i,m)=>{const k=N,v=F;return d(),O(V,{label:"选项"},{default:s(()=>[u("div",{class:"w100 tc"},[a(v,{modelValue:i.field.options.dataOptions.type,"onUpdate:modelValue":m[0]||(m[0]=t=>i.field.options.dataOptions.type=t),onChange:p},{default:s(()=>[(d(!0),h(C,null,M(b(eo),(t,r)=>(d(),O(k,{key:r,label:t.value},{default:s(()=>[_(B(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),i.field.options.dataOptions.type===b(S).custom?(d(),O(_o,{key:0,field:i.field},null,8,["field"])):g("",!0),lo(a(V,{type:"secondary",class:"mt-10","label-width":"0"},{default:s(()=>[a(ro,{modelValue:i.field.options.dataOptions.dict.dictKey,"onUpdate:modelValue":m[1]||(m[1]=t=>i.field.options.dataOptions.dict.dictKey=t),class:"w100",onChange:y},null,8,["modelValue"])]),_:1},512),[[to,i.field.options.dataOptions.type===b(S).dict]])]),_:1})}}}),ko=T({__name:"SelectDisplayEditorPlus",props:{field:{}},setup(E){return(e,p)=>{const y=N,i=F,m=mo,k=uo,v=I;return d(),O(V,{label:"展示",class:"mb-5"},{default:s(()=>[a(V,{label:"显示方式",type:"secondary"},{default:s(()=>[a(i,{modelValue:e.field.options.displayMode,"onUpdate:modelValue":p[0]||(p[0]=t=>e.field.options.displayMode=t)},{default:s(()=>[(d(!0),h(C,null,M(b(so),(t,r)=>(d(),O(y,{key:r,label:t.value},{default:s(()=>[_(B(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e.field.options.displayMode===b(no)?(d(),h(C,{key:0},[a(V,{label:"排列方式",type:"secondary"},{default:s(()=>[a(i,{modelValue:e.field.options.distributionMode,"onUpdate:modelValue":p[1]||(p[1]=t=>e.field.options.distributionMode=t)},{default:s(()=>[(d(!0),h(C,null,M(b(io),(t,r)=>(d(),O(y,{key:r,label:t.value},{default:s(()=>[_(B(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(V,{type:"secondary",labelWidth:"0"},{default:s(()=>[a(k,{modelValue:e.field.options.isBorder,"onUpdate:modelValue":p[2]||(p[2]=t=>e.field.options.isBorder=t),style:{height:"18px"}},{default:s(()=>[u("span",null,"边框选项"),a(m,{tip:"启用后，渲染为带有边框的选项"})]),_:1},8,["modelValue"])]),_:1})],64)):g("",!0),e.field.options.displayMode===b(po)?(d(),O(V,{key:1,label:"提示文字",type:"secondary"},{default:s(()=>[a(v,{modelValue:e.field.options.placeholder,"onUpdate:modelValue":p[3]||(p[3]=t=>e.field.options.placeholder=t),placeholder:"请输入提示文字"},null,8,["modelValue"])]),_:1})):g("",!0)]),_:1})}}});export{go as _,ko as a};
