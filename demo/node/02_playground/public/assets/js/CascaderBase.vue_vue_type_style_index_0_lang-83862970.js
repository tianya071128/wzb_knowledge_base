import{_ as N}from"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import{x as O,jG as L,c as F,n as P,aT as j,a as m,jC as I,kt as v,jL as k,d as z,g$ as A,r as E,eK as K,ku as $,bK as G,hQ as U,o as f,b as M,ad as Q,w as q,k as w,t as g,f as h,g as H,F as V,I as J,B as n,C as W,e1 as b,l as X}from"./index-b80d5ef5.js";function Y(e,p){const a=O(),c=L(),i=F({get(){return e.modelValue},set(t){p("update:modelValue",t??null),_(P(t))}}),_=(t=[])=>{j(async()=>{var u;if(!(!e.isRender||e.field.type===m.parent||!((u=e.field.options.fillFields)!=null&&u.length)))if(e.field.options.showNum===I.single){const s=t[0];if(!s)return;const o=await a.getFormItemData(v(e.field,s),s,e.field.options.cascaderData.sourceId);if(!o)return;const l=await k(e.field.options.fillFields,{dataSystem:a,formData:o});c.fillVal(l,{fieldId:e.field.fieldId,index:e.index})}else{const s=await Promise.all(t.map(l=>a.getFormItemData(v(e.field,l),l,e.field.type===m.parent?"":e.field.options.cascaderData.sourceId))),o=await k(e.field.options.fillFields,{dataSystem:a,formDatas:s.filter(l=>!!l),isMultiple:!0});c.fillVal(o,{fieldId:e.field.fieldId,index:e.index,sonUseDefault:!0})}})};return{val:i}}const ae=z({inheritAttrs:!1,__name:"CascaderBase",props:{modelValue:{},field:{},blockValues:{},multiple:{type:[Boolean,null],default:null},checkStrictly:{type:[Boolean,null],default:null},isRender:{type:Boolean},index:{}},emits:["update:modelValue"],setup(e,{emit:p}){const a=e,c=p,{val:i}=Y(a,c),{key:_,reload:t}=A(),u=E(),{blockValues:s,isRender:o,index:l}=K(a),{getData:x,removeOptions:B,dataType:C,showAllLevels:S,customOptions:R}=$(a.field,G({modelValue:i,blockValues:s,isRender:o,index:l,refresh(){t()}})),T=F(()=>({value:"__value__",label:"__label__",leaf:"__leaf__",children:"__children__",lazy:!0,lazyLoad:async()=>C.value===U.custom?R.value:await x(),checkStrictly:typeof a.checkStrictly=="boolean"?a.checkStrictly:a.field.type===m.parent?!0:!a.field.options.leaf,emitPath:!1,multiple:typeof a.multiple=="boolean"?a.multiple:a.field.type===m.parent?!1:a.field.options.showNum===I.multiple}));return(r,D)=>(f(),M(N,J({modelValue:n(i),"onUpdate:modelValue":D[0]||(D[0]=d=>W(i)?i.value=d:null),key:n(_),ref_key:"azCascaderRef",ref:u,placeholder:r.field.options.placeholder,props:T.value,"show-all-levels":n(S),"popper-class":"cascader_field-popper",removeOptions:n(B),"remove-text":"选项已被删除/不可选择",class:"w100",filterable:"",clearable:""},r.$attrs),Q({_:2},[r.field.options.showOtherFieldIds.length?{name:"default",fn:q(({data:d})=>[w("div",null,[w("div",null,g(d.__label__),1),(f(!0),h(V,null,H(r.field.options.showOtherFieldIds,y=>(f(),h(V,{key:y},[n(b)({rowData:d,fieldId:y})?(f(),h("div",{key:0,class:"cascader_field-tip"},g(n(b)({rowData:d,fieldId:y})),1)):X("",!0)],64))),128))])]),key:"0"}:void 0]),1040,["modelValue","placeholder","props","show-all-levels","removeOptions"]))}});export{ae as _};
