import{d as z,r as v,o as A,b as L,B as n,C as S,dk as F,dl as pe,dj as U,rJ as fe,aN as G,c as D,ad as ye,w as m,i as p,bu as me,H as oe,bv as he,rK as se,rL as _e,Q as Z,bm as ve,y as re,k as P,a2 as ue,bz as de,l as W,j as ee,m as M,t as te,P as ae,cI as ie,_ as J,a1 as q,R as ge,x as be,nn as Ie,dA as Ce,f as $,F as Q,g as ke,hB as Ae,M as Ve,g2 as we,N as xe,q as Ke,br as Ee,eh as Be,O as Re,v as Le,rM as Te,rN as De,U as ce,bn as Se,gV as Pe,bi as Ue,ae as $e,fs as Fe,cf as Me,rO as ze,rP as Ne,bh as Oe,as as je,rQ as qe,rR as Ge}from"./index-b80d5ef5.js";import{a as Y}from"./LoadingData-195d0581.js";import{g as We,a as He}from"./appManageGroup-aefc6879.js";/* empty css                          */import{S as Qe}from"./SetFieldAuth-3d0b80a0.js";import{C as Je}from"./ConditionWrapper-43da1676.js";import{F as Ye}from"./FieldConditionView-ad1b057c.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./el-dropdown-item-455a6589.js";import"./FieldCondition-1c72aa9d.js";import"./SelectEntryAndOther-76a65b2d.js";import"./Base.vue_vue_type_script_setup_true_lang-03820366.js";import"./useFieldMaxWidth-d82f063e.js";import"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import"./index-318b68f4.js";import"./AzInputNumber-d6212644.js";import"./el-input-number-c15b1cc7.js";import"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import"./useMultipleVal-904406c1.js";import"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import"./CardShowFieldItem-fd24f218.js";import"./ButtonState-cb54910b.js";function Xe(I){for(var b=-1,h=I==null?0:I.length,C=0,l=[];++b<h;){var u=I[b];u&&(l[C++]=u)}return l}const Ze=z({__name:"SetMember",emits:["refresh"],setup(I,{expose:b,emit:h}){const C=h,l=v(!1),u=v(""),f=v([]),i=async g=>{const y=g.map(_=>(_==null?void 0:_.id)===F.allCooperateEnterprise?{id:"-1",type:U.corpCooperation}:(_==null?void 0:_.id)===F.allCooperatePersonnel?{id:"-1",type:U.userCooperation}:_)??[];await fe({id:u.value,memberSelect:{selectedList:y}}),G.success("设置成功"),C("refresh")};return b({open:async(g,y=[])=>{u.value=g,f.value=y.map(_=>_.id==="-1"?_.type===U.corpCooperation?{id:F.allCooperateEnterprise,type:U.dynamic}:_.type===U.userCooperation?{id:F.allCooperatePersonnel,type:U.dynamic}:_:_)??[],l.value=!0}}),(g,y)=>(A(),L(pe,{modelValue:n(f),"onUpdate:modelValue":y[0]||(y[0]=_=>S(f)?f.value=_:null),visible:n(l),"onUpdate:visible":y[1]||(y[1]=_=>S(l)?l.value=_:null),dynamic:[n(F).allCooperateEnterprise,n(F).allCooperatePersonnel],isCooperation:"",multiple:"",customStrictly:"",confirmBefore:i},null,8,["modelValue","visible","dynamic"]))}}),et=z({__name:"AddAuth",emits:["refresh"],setup(I,{expose:b,emit:h}){const C=h,l=v(!1),u=v(""),f={name:"",description:""},i=v({...f}),B=v(),g=v(!1),y=D(()=>!!u.value),_=D(()=>g.value?"查看权限组":y.value?"编辑权限组":"新增权限组"),V=async()=>{if(y.value){const{name:e,description:a,id:t}=await se(u.value);i.value={name:e,description:a,id:t}}},c=async()=>{var e;await((e=B.value)==null?void 0:e.validate()),await _e(i.value),G.success(y.value?"编辑成功":"新增成功"),C("refresh")};return b({open:(e="",a=!1)=>{e||(i.value={...f}),u.value=e,l.value=!0,g.value=a}}),(e,a)=>{const t=Z,o=ve;return A(),L(he,{modelValue:n(l),"onUpdate:modelValue":a[3]||(a[3]=d=>S(l)?l.value=d:null),title:n(_),"show-load":V},ye({default:m(()=>[p(o,{model:n(i),ref_key:"formRef",ref:B,"label-width":"120px","label-suffix":"：",disabled:n(g)},{default:m(()=>[p(oe,{label:"权限组名称",prop:"name",rules:[{required:!0,message:"请输入权限组名称",trigger:"blur"}]},{default:m(()=>[p(t,{modelValue:n(i).name,"onUpdate:modelValue":a[0]||(a[0]=d=>n(i).name=d),placeholder:"请输入权限组名称"},null,8,["modelValue"])]),_:1}),p(oe,{label:"描述",prop:"description"},{default:m(()=>[p(t,{modelValue:n(i).description,"onUpdate:modelValue":a[1]||(a[1]=d=>n(i).description=d),placeholder:"请输入描述",type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model","disabled"])]),_:2},[n(g)?void 0:{name:"footer",fn:m(()=>[p(me,{"edit-mode":!!n(u),onClose:a[2]||(a[2]=d=>l.value=!1),"on-submit":c},null,8,["edit-mode"])]),key:"0"}]),1032,["modelValue","title"])}}}),tt=z({__name:"AppTree",props:{modelValue:{},defaultCheckedKeys:{},readonly:{type:Boolean}},emits:["update:modelValue","checkChange"],setup(I,{expose:b,emit:h}){const C=I,l=h,u={label:"name",children:"childs",isLeaf:"leaf"},f=v(),i=async()=>{const e=await We();f.value=(e==null?void 0:e.map(a=>({...a,disabled:C.readonly})))??[]},B=v(),g=v(""),y=(e,a)=>{var t;return e?a.id==="0"?!1:(t=a.name)==null?void 0:t.includes(e):!0};re(g,e=>{var a;(a=B.value)==null||a.filter(e)});const _=e=>{l("update:modelValue",e)},V=(e,a)=>{l("checkChange",e,a)};return b({checkedByKey:(e,a=!0)=>{var t;(t=B.value)==null||t.setChecked(e,a,!0)},selectByKey:e=>{var a;(a=B.value)==null||a.setCurrentKey(e)},getAppData:()=>f.value}),(e,a)=>{const t=Z,o=ae,d=ie,K=Y;return A(),L(K,{load:i,class:"tree-wrapper"},{default:m(()=>[p(t,{placeholder:"输入应用名称查询",modelValue:n(g),"onUpdate:modelValue":a[0]||(a[0]=s=>S(g)?g.value=s:null),class:"mb-5"},null,8,["modelValue"]),p(d,{ref_key:"treeRef",ref:B,data:n(f),"show-checkbox":"",props:u,"highlight-current":"","default-expand-all":"","filter-node-method":y,style:{"overflow-y":"auto"},"node-key":"id","default-checked-keys":e.defaultCheckedKeys,"expand-on-click-node":!1,onCurrentChange:_,onCheckChange:V},{default:m(({node:s,data:r})=>[P("div",{class:"node-item"},[r.icon?(A(),L(o,{key:0,class:"icon",style:ue({color:r.color})},{default:m(()=>[p(de,{"icon-class":r.icon},null,8,["icon-class"])]),_:2},1032,["style"])):W("",!0),p(ee,{class:"label-content"},{default:m(()=>[M(te(s.label),1)]),_:2},1024)])]),_:1},8,["data","default-checked-keys"])]),_:1})}}});const at=J(tt,[["__scopeId","data-v-c8b83d67"]]);function X(I){return![q.sheet,q.group,"app"].includes(I.type)&&I.nodeKey!=="0"}function lt(I,b){return function h(C){return C.map(l=>{var u;return{...l,nodeKey:`${l.type}_${l.type==="view"?l.viewId:l.entryId}`,disabled:b||!X(l)&&!((u=l.childs)!=null&&u.length),childs:l.childs&&h(l.childs)}})}(I)}function nt(I){return`${I.type}_${I.type==="view"?I.viewId:I.entryId}`}const ot=z({__name:"EntryTree",props:{appId:{},modelValue:{},defaultCheckedKeys:{},readonly:{type:Boolean}},emits:["update:modelValue","checkChange"],setup(I,{expose:b,emit:h}){const C=I,l=h,f={label:"name",children:"childs",isLeaf:"leaf",class:(e,a)=>{var t;return e.isSelectAll?(t=e.childs)!=null&&t.some(o=>{var d;return!!((d=o.childs)!=null&&d.length)})?"is-select_all__tree":"is-select_all__list":""}},i=v([]),B=async()=>{l("update:modelValue",null);const e=await He(C.appId);e&&(i.value=[{name:"全选",disabled:C.readonly,isSelectAll:!0,nodeKey:"0",childs:lt(e,C.readonly)}],setTimeout(()=>{var t,o,d;const a=(t=g.value)==null?void 0:t.getCheckedNodes();a!=null&&a.length||((o=g.value)==null||o.setChecked("0",!0,!0),l("checkChange",{name:"全选",nodeKey:"0"},{checkedNodes:(d=g.value)==null?void 0:d.getCheckedNodes()}))}))},g=v(),y=v(""),_=(e,a)=>{var t;return e?a.nodeKey==="0"?!1:(t=a.name)==null?void 0:t.includes(e):!0};re(y,e=>{var a;(a=g.value)==null||a.filter(e)});const V=e=>{l("update:modelValue",e)},c=(e,a)=>{l("checkChange",e,a)};return b({checkedByKey:(e,a=!0)=>{var t;(t=g.value)==null||t.setChecked(e,a,!0)}}),(e,a)=>{const t=Z,o=ae,d=ie,K=Y;return A(),L(K,{load:B,class:"tree-wrapper"},{default:m(()=>[p(t,{placeholder:"输入条目或视图名称查询",modelValue:n(y),"onUpdate:modelValue":a[0]||(a[0]=s=>S(y)?y.value=s:null),class:"mb-5"},null,8,["modelValue"]),p(d,{ref_key:"treeRef",ref:g,data:n(i),"show-checkbox":"",props:f,"highlight-current":"","default-expand-all":"","filter-node-method":_,style:{"overflow-y":"auto"},"node-key":"nodeKey","default-checked-keys":e.defaultCheckedKeys,"expand-on-click-node":!1,onCurrentChange:V,onCheck:c},{default:m(({node:s,data:r})=>[P("div",{class:"node-item"},[r.icon?(A(),L(o,{key:0,class:"icon",style:ue({color:r.color})},{default:m(()=>[p(de,{"icon-class":r.icon},null,8,["icon-class"])]),_:2},1032,["style"])):W("",!0),p(ee,{class:"label-content"},{default:m(()=>[M(te(s.label),1)]),_:2},1024)])]),_:1},8,["data","default-checked-keys"])]),_:1})}}});const st=J(ot,[["__scopeId","data-v-f22e7dcc"]]),rt=z({__name:"ViewConfigs",props:{viewId:{},appId:{},viewConfig:{}},emits:["update:viewConfig"],setup(I,{emit:b}){const h=I,l=ge(h,"viewConfig",b),u=v(),f=be(),i=v(),B=D(()=>{var t;return Ie(((t=i.value)==null?void 0:t.fields)??[])}),g=async()=>{u.value=await Ae(h.viewId),i.value=await f.getSoureceData(u.value.basis.sourceId),_(),c()},y=D(()=>{var o;const t=((o=i.value)==null?void 0:o.forms.map(d=>d.entryId))??[];return t.length<2?t[0]:t}),_=()=>{(function t(o){var d;for(const K of o)(d=l.value.columnAuth)!=null&&d.some(s=>s.fieldId===K.fieldId)||(l.value.columnAuth||(l.value.columnAuth=[]),l.value.columnAuth.push({entryId:K.fieldId.split(".").shift()??"",fieldId:K.fieldId,readable:!0,writeable:!1,required:!1})),"fields"in K&&t(K.fields)})(B.value),Ve(l.value.columnAuth,t=>{var o;return!we(t.fieldId,((o=i.value)==null?void 0:o.fields)??[])})},V=D(()=>{var t,o,d,K;return[...((o=(t=u.value)==null?void 0:t.operate)==null?void 0:o.eventBtns)??[],...((K=(d=u.value)==null?void 0:d.operate)==null?void 0:K.operateBtns)??[]]}),c=()=>{l.value.operAuth=V.value.map(t=>{var d;return((d=l.value.operAuth)==null?void 0:d.find(K=>K.btnId===t.btnId))??{btnId:t.btnId,checked:!0,name:t.name,position:t.position,type:t.type}})},w=D({get(){var t;return!!((t=l.value.operAuth)!=null&&t.every(o=>o.checked))},set(t){var o;(o=l.value.operAuth)==null||o.forEach(d=>d.checked=t)}}),e=D(()=>{var t;return!!((t=l.value.operAuth)!=null&&t.length&&!w.value&&l.value.operAuth.some(o=>o.checked))}),a=D({get(){var t,o;return((o=(t=l.value.operAuth)==null?void 0:t.filter(d=>d.checked))==null?void 0:o.map(d=>d.btnId))??[]},set(t){var o;(o=l.value.operAuth)==null||o.forEach(d=>{d.checked=t.includes(d.btnId)})}});return(t,o)=>{const d=xe,K=Ke,s=Ee,r=Be,E=Re,R=Y;return A(),L(R,{load:g,style:{height:"100%"}},{default:m(()=>[p(E,{style:{height:"100%"}},{default:m(()=>[p(d,{label:"字段权限"},{default:m(()=>[p(Qe,{height:"100%",modelValue:n(l).columnAuth,"onUpdate:modelValue":o[0]||(o[0]=x=>n(l).columnAuth=x),fields:n(B),firstLabelWidth:222,isDownload:"",auth:{isTemplate:!0}},{fieldLabel:m(({field:x})=>{var k;return[x.fieldId?(A(),L(Ce,{key:0,fieldId:x.fieldId,sourceId:(k=n(i))==null?void 0:k.sourceId},null,8,["fieldId","sourceId"])):W("",!0)]}),_:1},8,["modelValue","fields"])]),_:1}),p(d,{label:"操作权限"},{default:m(()=>{var x;return[(x=n(V))!=null&&x.length?(A(),$(Q,{key:0},[p(K,{modelValue:n(w),"onUpdate:modelValue":o[1]||(o[1]=k=>S(w)?w.value=k:null),class:"w100",indeterminate:n(e)},{default:m(()=>[M(" 全选 ")]),_:1},8,["modelValue","indeterminate"]),p(s,{modelValue:n(a),"onUpdate:modelValue":o[2]||(o[2]=k=>S(a)?a.value=k:null)},{default:m(()=>[(A(!0),$(Q,null,ke(n(V),k=>(A(),L(K,{key:k.btnId,label:k.btnId},{default:m(()=>[M(te(k.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])],64)):(A(),$("span",{key:1},"暂无操作权限"))]}),_:1}),p(d,{label:"数据筛选"},{default:m(()=>[p(r,{title:"筛选出符合以下条件的数据",type:"success",closable:!1}),p(Je,{condition:n(l).dataAuth,"onUpdate:condition":o[3]||(o[3]=x=>n(l).dataAuth=x),class:"mt-10",conditionForm:n(y),btnText:"设置筛选条件",appId:t.appId},{default:m(()=>{var x;return[(x=t.viewConfig.dataAuth)!=null&&x.length?(A(),L(Ye,{key:0,class:"w100",condition:t.viewConfig.dataAuth,"app-id":t.appId,isConditionForm:Array.isArray(n(y))},null,8,["condition","app-id","isConditionForm"])):(A(),$("div",{key:1,class:"condition-empty"},"点击此区域筛选数据"))]}),_:1},8,["condition","conditionForm","appId"])]),_:1})]),_:1})]),_:1})}}});const ut=J(rt,[["__scopeId","data-v-33e30b95"]]),dt=I=>{const b=v(new Map),h=v(!1),C=D(()=>Array.from(b.value.keys()).filter(u=>u!=="0")),l=D({get(){return[...new Set(Array.from(b.value.values()).map(u=>u.appId))]},set(u){b.value.forEach((f,i)=>{(u??[]).includes(f.appId)||b.value.delete(i)})}});return{authMap:b,isLoaded:h,appIds:l,entryTreeDefaultKeys:C}},it=dt,ct=z({__name:"SetEntryAuth",props:{modelValue:{type:Boolean},readonly:{type:Boolean},authId:{},title:{}},emits:["update:modelValue"],setup(I,{emit:b}){const h=I,l=Le(h,"modelValue",b),u=v(null),f=v(null),{authMap:i,entryTreeDefaultKeys:B,isLoaded:g,appIds:y}=it(h.authId),_=async()=>{var r;i.value.clear(),(r=(await Te(h.authId)).authRuleVos)==null||r.forEach(E=>{i.value.set(nt(E),E)}),g.value=!0},V=v(),c=v(),w=(s,r)=>{var E,R;r?(y.value.push(s.id),(E=V.value)==null||E.selectByKey(s.id)):(y.value=y.value.filter(x=>x!==s.id),(R=V.value)==null||R.selectByKey())},e=s=>{var r;h.readonly||s&&!y.value.includes(s==null?void 0:s.id)&&((r=V.value)==null||r.checkedByKey(s.id))},a=s=>{var r,E,R,x,k;h.readonly||(s==null?void 0:s.nodeKey)!=="0"&&s&&!i.value.has(s==null?void 0:s.nodeKey)&&X(s)&&((r=c.value)==null||r.checkedByKey(s.nodeKey),i.value.set(s.nodeKey,{appId:s.appId,type:s.type,entryId:s.entryId,viewId:s.viewId,selectorId:h.authId,columnAuth:[]}),y.value.includes(((E=u.value)==null?void 0:E.id)??"")||(y.value.push(((R=u.value)==null?void 0:R.id)??""),(k=V.value)==null||k.checkedByKey(((x=u.value)==null?void 0:x.id)??"")))},t=(s,{checkedNodes:r})=>{var E,R,x,k;i.value.forEach((T,N)=>{var O;T.appId===((O=u.value)==null?void 0:O.id)&&!r.some(H=>H.nodeKey===N)&&i.value.delete(N)}),r!=null&&r.length&&(r.forEach(T=>{X(T)&&!i.value.has(T.nodeKey)&&i.value.set(T.nodeKey,{appId:T.appId,type:T.type,entryId:T.entryId,viewId:T.viewId,selectorId:h.authId,columnAuth:[]})}),y.value.includes(((E=u.value)==null?void 0:E.id)??"")||(y.value.push(((R=u.value)==null?void 0:R.id)??""),(k=V.value)==null||k.checkedByKey(((x=u.value)==null?void 0:x.id)??"")))},o=D({get(){var s;return i.value.get(((s=f.value)==null?void 0:s.nodeKey)??"")},set(s){var r,E;!s||!((r=f.value)!=null&&r.nodeKey)||i.value.set((E=f.value)==null?void 0:E.nodeKey,s)}}),d=v(!1),K=async(s=!0)=>{const r=Array.from(i.value.values());try{d.value=!0,await De({authRuleVos:r,id:h.authId}),G.success("保存成功")}finally{d.value=!1}s&&(l.value=!1)};return(s,r)=>{const E=Y,R=ce,x=Se;return A(),L(x,{width:"1200px",modelValue:n(l),"onUpdate:modelValue":r[6]||(r[6]=k=>S(l)?l.value=k:null),title:`授权应用-${s.title}`,"append-to-body":""},{footer:m(()=>[p(R,{onClick:r[3]||(r[3]=k=>l.value=!1)},{default:m(()=>[M("取消")]),_:1}),s.readonly?W("",!0):(A(),$(Q,{key:0},[p(R,{type:"primary",onClick:r[4]||(r[4]=k=>K(!1)),loading:n(d)},{default:m(()=>[M(" 保存 ")]),_:1},8,["loading"]),p(R,{type:"primary",onClick:r[5]||(r[5]=k=>K()),loading:n(d)},{default:m(()=>[M(" 保存并关闭 ")]),_:1},8,["loading"])],64))]),default:m(()=>[p(E,{class:"config_wrapper",load:_},{default:m(()=>{var k,T,N,O,H,le,ne;return[P("div",{class:"app_wrapper"},[P("div",{class:"sub_title"},"选择应用"),P("div",{class:"content"},[p(at,{ref_key:"appTreeRef",ref:V,defaultCheckedKeys:n(y)??[],modelValue:n(u),"onUpdate:modelValue":[r[0]||(r[0]=j=>S(u)?u.value=j:null),e],readonly:s.readonly,onCheckChange:w},null,8,["defaultCheckedKeys","modelValue","readonly"])])]),P("div",{class:"entry_wrapper"},[P("div",{class:"sub_title"},"权限对象"),P("div",{class:"content"},[(k=n(u))!=null&&k.id?(A(),L(st,{ref_key:"entryTreeRef",ref:c,modelValue:n(f),"onUpdate:modelValue":[r[1]||(r[1]=j=>S(f)?f.value=j:null),a],readonly:s.readonly,defaultCheckedKeys:n(B),"app-id":(T=n(u))==null?void 0:T.id,key:(N=n(u))==null?void 0:N.id,onCheckChange:t},null,8,["modelValue","readonly","defaultCheckedKeys","app-id"])):(A(),$("span",{key:1},"请先选择授权应用"))])]),P("div",{class:"auth_wrapper"},[P("div",{class:"sub_title"},"权限说明"),P("div",{class:"content"},[n(o)&&((O=n(f))==null?void 0:O.type)==="view"?(A(),L(ut,{key:n(f).viewId,viewConfig:n(o),"onUpdate:viewConfig":r[2]||(r[2]=j=>S(o)?o.value=j:null),"view-id":n(f).viewId,"app-id":n(f).appId},null,8,["viewConfig","view-id","app-id"])):((H=n(f))==null?void 0:H.type)===n(q).form?(A(),$("span",{key:1}," 权限组内成员可使用此表单添加数据，成员登录后可访问 ")):((le=n(f))==null?void 0:le.type)===n(q).page||((ne=n(f))==null?void 0:ne.type)===n(q).includePage?(A(),$("span",{key:2}," 权限组内成员可查看此页面内容，成员登录后可访问 ")):(A(),$("span",{key:3},"请先选择权限设置对象"))])])]}),_:1})]),_:1},8,["modelValue","title"])}}});const pt=J(ct,[["__scopeId","data-v-6364b3b6"]]),Ut=z({__name:"routePage",setup(I){const b=v(),h=v(),C=v(!1),l=v(""),u=v(!1),f=v(""),i=Pe(),B=D(()=>c=>{if(!c.length)return"-";const w=c.map(e=>{let a=e;e.id==="-1"&&(e.type===U.corpCooperation?a={id:F.allCooperateEnterprise,type:U.dynamic}:e.type===U.userCooperation&&(a={id:F.allCooperatePersonnel,type:U.dynamic}));const{__label__:t}=i(a);return t});return Xe(w).join(",")||"-"}),g={query:{list:[{type:"input",label:"权限组名称",prop:"name"},{type:"select",label:"授权应用",prop:"appId",options:async()=>(await Fe({appId:"",name:"",orgIds:[]})).map(w=>({label:w.name,value:w.id}))},{type:"select",label:"状态",prop:"status",options:Me,extraOptions:[{label:"全部",value:""}]}]},request:{api:ze},table:{tableCols:[{label:"权限组名称",prop:"name"},{label:"描述",prop:"description"},{prop:"status",label:"状态",slots:{default({row:c}){return p(Oe,{modelValue:c.status,"onUpdate:modelValue":w=>c.status=w,updateFetch:()=>Ne({id:c.id,status:c.status==1?0:1})},null)}}},{prop:"member",label:"成员",minWidth:"200px",slots:{default({row:c}){var e;const w=((e=c.memberSelect)==null?void 0:e.selectedList)??[];return p(ee,{content:B.value(w),style:"max-width:100%"},null)}}},{fixed:"right",width:200,label:"操作",slots:{default({row:c}){return p(je,{num:3,list:[{id:"setMember",type:"primary",onClick:async()=>{var a;const{memberSelect:e}=await se(c.id);(a=b.value)==null||a.open(c.id,e==null?void 0:e.selectedList)},text:"设置成员"},{id:"auth",type:"primary",onClick:()=>{u.value=!1,l.value=c.id,f.value=c.name,C.value=!0},text:"权限"},{id:"edit",type:"primary",onClick:()=>{var e;(e=h.value)==null||e.open(c.id)},text:"编辑"},{id:"del",type:"danger",popconfirmProps:{title:"您确定要删除该权限组吗?",confirm:async()=>{await qe(c.id),G.success("删除成功"),V()}},text:"删除"},{id:"viewAuthGroup",type:"primary",onClick:()=>{var e;(e=h.value)==null||e.open(c.id,!0)},text:"查看权限组"},{id:"viewAuth",type:"primary",onClick:()=>{u.value=!0,l.value=c.id,C.value=!0},text:"查看权限"},{id:"copy",type:"primary",onClick:async()=>{await Ge(c.id),G.success("复制成功"),V()},text:"复制"}]},null)}}}]}},y=()=>{var c;(c=h.value)==null||c.open()},_=v(),V=()=>{var c;(c=_.value)==null||c.refresh()};return(c,w)=>{const e=ae,a=ce,t=Ue("az-page");return A(),$(Q,null,[p(t,{class:"layout_box",ref_key:"azPageRef",ref:_,config:g,maxHeight:"var(--az-layout-main-height) - 40px"},{operation:m(()=>[p(a,{type:"primary",onClick:y},{default:m(()=>[p(e,{size:16,style:{"margin-right":"8px"}},{default:m(()=>[p(n($e))]),_:1}),M(" 新增权限组 ")]),_:1})]),_:1},512),p(Ze,{ref_key:"setMemberRef",ref:b,onRefresh:V},null,512),p(et,{ref_key:"addAuthRef",ref:h,onRefresh:V},null,512),n(C)?(A(),L(pt,{key:0,modelValue:n(C),"onUpdate:modelValue":w[0]||(w[0]=o=>S(C)?C.value=o:null),authId:n(l),readonly:n(u),title:n(f),onRefresh:V},null,8,["modelValue","authId","readonly","title"])):W("",!0)],64)}}});export{Ut as default};
