import{f,e as p,p as d,h as m,D as u}from"./createDesigner-82222fc7.js";import{d as _,dw as h,dx as y,bJ as A,o as C,b as x,_ as i}from"./index-b80d5ef5.js";import"./enum-baae9292.js";const g=e=>{const l=async()=>new Promise((s,a)=>{const t=Array.from(e.moduleContextMap.values());Promise.all([...t.map(o=>{var n;return(n=o==null?void 0:o.refresh)==null?void 0:n.call(o)})]).then(()=>{s(!0)})}),r=s=>{(s?e.getModuleContextByType(s):e.moduleContextMap).forEach((t,o)=>{var n;(n=t==null?void 0:t.refresh)==null||n.call(t)})};return(()=>{var s;if(e!=null&&e.pageConfig){const a=((s=e==null?void 0:e.pageConfig)==null?void 0:s.autoRefresh)*1e3;a>=1&&setInterval(()=>{r()},a)}})(),{asyncRefreshAll:l,refreshAll:r}},D=_({__name:"render",props:{mode:{default:h.render},scene:{default:y.homePage},pageDesigner:{},pageConfig:{},appId:{default:""},entryId:{default:""},dataId:{default:""}},setup(e,{expose:l}){const r=e;f();const c=p({...r}),{asyncRefreshAll:s,refreshAll:a}=g(c);A(d,c);const{handleCancelAll:t,moduleLinkMap:o}=m(c);return l({asyncRefreshAll:s,refreshAll:a,download:async()=>{},handleCancelLinkAll:t,moduleLinkMap:o}),(R,k)=>(C(),x(u,{class:"render"}))}});const w=i(D,[["__scopeId","data-v-4fa495ac"]]);export{w as default};
