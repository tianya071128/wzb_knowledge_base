import{d as B,r as J,o as d,f as v,i as e,w as l,B as n,m as x,bF as G,b as k,b0 as K,l as C,nJ as Q,dW as X,fo as Y,aa as Z,dN as F,Q as j,aU as ee,U as M,dt as le,_ as R,v as z,k as b,bz as te,a9 as ne,d9 as L,F as A,g as N,a2 as oe,nK as T,ac as ae,P as se,bA as ie,bB as de,bm as ue,N as ce,O as pe,bH as I,C as S,cn as re,cp as _e,co as me,cq as fe,bn as ve}from"./index-b80d5ef5.js";import{u as O,d as D}from"./usePublicRelease-2335b254.js";import{_ as P}from"./Designer.vue_vue_type_script_setup_true_lang-3c7dafd1.js";const be=B({__name:"LinkInput",props:{isRefresh:{type:Boolean,default:!1}},setup(E){const c=O(),p=J(!1),U=()=>{Y(`${c.link}`)},t=async()=>{Z.confirm(F("div",null,[F("p",null,"确定要生成新链接？"),F("p",null,"生成新链接后，旧链接将不可再用。")]),"Warning",{title:"操作确认",confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{c.refreshURL()})};return(u,r)=>{const o=j,g=ee,m=M,_=le;return d(),v("div",{class:"link"},[e(g,{effect:"dark",content:n(c).link,placement:"top-start"},{default:l(()=>[e(o,{class:"link-input",readonly:"","model-value":n(c).link},null,8,["model-value"])]),_:1},8,["content"]),e(m,{onClick:U,type:"primary",plain:"",icon:n(G)},{default:l(()=>[x(" 复制 ")]),_:1},8,["icon"]),u.isRefresh?(d(),k(m,{key:0,onClick:t,type:"primary",plain:"",icon:n(K)},{default:l(()=>[x(" 刷新 ")]),_:1},8,["icon"])):C("",!0),e(m,{onClick:r[0]||(r[0]=a=>p.value=!0),type:"primary",plain:"",icon:n(Q)},{default:l(()=>[x(" 预览 ")]),_:1},8,["icon"]),e(_,{modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=a=>p.value=a),direction:"btt",size:"90%"},{default:l(()=>[e(P,{mode:n(X).preview},null,8,["mode"])]),_:1},8,["modelValue"])])}}});const we=R(be,[["__scopeId","data-v-453eb2a1"]]),ge=B({__name:"header",props:{visible:{type:Boolean},saveFn:{type:Function}},emits:["update:visible"],setup(E,{emit:c}){const p=E,t=z(p,"visible",c),u=async()=>{p.saveFn()};return(r,o)=>{const g=M;return d(),v("div",{class:"header"},[b("div",{style:{display:"flex"}},[b("div",{class:"cup fs-22",onClick:o[0]||(o[0]=m=>t.value=!1)},[e(te,{"icon-class":"ArrowLeftBold"})]),b("div",null,[b("span",{class:"fs-22"},"外观设置")])]),b("div",null,[e(g,{type:"primary",onClick:u},{default:l(()=>[x("保存")]),_:1})])])}}});const ye=R(ge,[["__scopeId","data-v-437de9fd"]]),Ee=B({__name:"left-aside",props:{formEditJson:{}},emits:["update:formEditJson"],setup(E,{emit:c}){const p=E,t=z(p,"formEditJson",c,{deep:!0,clone:!0,passive:!0,shouldEmit(a){return!ne(a,p.formEditJson)}}),u=J("0"),r=["#fd982e","#d81029","#f21b65","#fc532e","#3a16af","#9d26b0","#8e481b","#4051b6","#d98936","#21710f","#2296f3","#7db421"],o=J(["/img/publicRelease/public-bg01.png","/img/publicRelease/public-bg02.png","/img/publicRelease/public-bg03.png","/img/publicRelease/public-bg04.png","/img/publicRelease/public-bg05.png"]),g=(a,i)=>{i.url&&(o.value.push(i.url),t.value.bgImgUrl=i.url)},m=a=>{t.value.bgImgUrl=a},_=a=>{t.value.themeColors=a};return(a,i)=>{const w=j,y=ae,V=se,h=ie,f=de,H=ue,W=ce,q=pe;return d(),v("div",{class:"left-aside"},[e(q,{modelValue:u.value,"onUpdate:modelValue":i[3]||(i[3]=s=>u.value=s)},{default:l(()=>[e(W,{label:"属性",name:"0"},{default:l(()=>[e(H,{"label-position":"top"},{default:l(()=>[e(y,{label:"表单名称"},{default:l(()=>[e(w,{modelValue:n(t).name,"onUpdate:modelValue":i[0]||(i[0]=s=>n(t).name=s),placeholder:"请输入表单名称"},null,8,["modelValue"])]),_:1}),e(y,{label:"描述"},{default:l(()=>[e(w,{modelValue:n(t).desc,"onUpdate:modelValue":i[1]||(i[1]=s=>n(t).desc=s),type:"textarea",placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),e(y,{label:"LOGO"},{default:l(()=>[e(L,{ref:"AzUploadRef",limit:1,modelValue:n(t).logoUrl,"onUpdate:modelValue":i[2]||(i[2]=s=>n(t).logoUrl=s),type:"file",size:500,accept:["jpg","jpeg","bmp","png"],style:{"max-width":"100%"}},null,8,["modelValue"])]),_:1}),e(y,{label:"主题背景色"},{default:l(()=>[e(f,{gutter:20,class:"mt-10"},{default:l(()=>[(d(),v(A,null,N(r,(s,$)=>e(h,{span:4,class:"mb-10",key:$},{default:l(()=>[b("div",{class:"color-cell",onClick:he=>_(s),style:oe({"background-color":s})},[n(t).themeColors===s?(d(),k(V,{key:0},{default:l(()=>[e(n(T))]),_:1})):(d(),v(A,{key:1},[x("  ")],64))],12,["onClick"])]),_:2},1024)),64))]),_:1})]),_:1}),e(y,{label:"背景图片"},{default:l(()=>[e(f,{gutter:20},{default:l(()=>[e(h,{span:8},{default:l(()=>[e(L,{style:{"--az-img-width":"120px"},ref:"AzUploadRef","model-value":"",limit:1,onUploadFinish:g,size:500,"is-show-tip":!1,accept:["jpg","jpeg","bmp","png"]},null,512)]),_:1}),(d(!0),v(A,null,N(o.value,s=>(d(),k(h,{span:8,class:"img-cell",style:{"margin-bottom":"10px"},key:s},{default:l(()=>[b("div",{onClick:$=>m(s),class:"img-box",style:{}},[b("img",{style:{width:"100%",height:"100%"},src:s,alt:""},null,8,["src"]),s===n(t).bgImgUrl?(d(),v("div",{key:0,class:"is-active"},[e(V,null,{default:l(()=>[e(n(T))]),_:1})])):C("",!0)],8,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const ke=R(Ee,[["__scopeId","data-v-cbd7a400"]]),Ve=B({__name:"DesignerDialog",props:{visible:{type:Boolean}},emits:["update:visible"],setup(E,{emit:c}){const t=z(E,"visible",c),u=O(),r=async()=>{if(!o.value)return null;const _={...u.details,formEditJson:o.value};return u.details&&(u.details.formEditJson=I(o.value)),t.value=!1,_},o=J(I(D)),g=()=>{var _;o.value=I(((_=u.details)==null?void 0:_.formEditJson)??D)},m=()=>{o.value=I(D)};return(_,a)=>{const i=re,w=_e,y=me,V=fe,h=ve;return d(),v("div",{class:"design-page"},[e(h,{modelValue:n(t),"onUpdate:modelValue":a[2]||(a[2]=f=>S(t)?t.value=f:null),fullscreen:"",center:"","show-close":!1,onOpen:g,onClose:m},{default:l(()=>[n(t)?(d(),k(V,{key:0,class:"design-layout"},{default:l(()=>[e(i,{style:{height:"48px",border:"1px solid #eee"}},{default:l(()=>[e(ye,{visible:n(t),"onUpdate:visible":a[0]||(a[0]=f=>S(t)?t.value=f:null),"save-fn":r},null,8,["visible"])]),_:1}),e(V,{class:"design-main"},{default:l(()=>[e(w,{class:"design-core"},{default:l(()=>[o.value?(d(),k(P,{key:0,mode:"design",formEditJson:o.value},null,8,["formEditJson"])):C("",!0)]),_:1}),e(y,{width:"420px",class:"right-aside"},{default:l(()=>[o.value?(d(),k(ke,{key:0,formEditJson:o.value,"onUpdate:formEditJson":a[1]||(a[1]=f=>o.value=f)},null,8,["formEditJson"])):C("",!0)]),_:1})]),_:1})]),_:1})):C("",!0)]),_:1},8,["modelValue"])])}}});const Ie=R(Ve,[["__scopeId","data-v-04bd44c0"]]);export{Ie as D,we as L};
