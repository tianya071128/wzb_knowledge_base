import{os as v,c,r as u,oy as w,dW as _,xe as g,d as h,o as p,b as f,w as V,k as y,B as s,ij as D,f as I,F as O,i as b,ou as S,C as k,L as R,_ as x}from"./index-b80d5ef5.js";import{_ as E}from"./TableRender-bab4d661.js";import"./Resize-eb80395d.js";import"./useQueryTab-05fa7456.js";import"./useExtractQuery-f96f705c.js";import"./FormShare-9773b44c.js";import"./dataShare-2d7ae3f7.js";import"./LoadingData-195d0581.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./Base.vue_vue_type_script_setup_true_lang-03820366.js";import"./useFieldMaxWidth-d82f063e.js";import"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import"./index-318b68f4.js";import"./AzInputNumber-d6212644.js";import"./el-input-number-c15b1cc7.js";import"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import"./useMultipleVal-904406c1.js";import"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import"./el-dropdown-item-455a6589.js";import"./CardShowFieldItem-fd24f218.js";function L(){const e=v(),d=c({get(){return e.isEdit},set(t){!t&&(e.isEdit=!1)}}),r=u(),o=u("add"),n=c(()=>({sourceId:e.sourceId,params:e.getSearchParams(),disableRequest:e.disabledLoad||e.disabledLoadPlus,mode:"list"})),i=async()=>{const t=await g(n,1,1);t.records.length?(e.detailsItem=t.records[0],o.value="view"):(e.closeDetailsMode(),o.value="add")},a=()=>{var t;(t=r.value)==null||t.reload()};e.on(w,()=>{a()});const m=c(()=>{var t;return{entryId:((t=e.soureceInfo)==null?void 0:t.entryIds[0].entryId)??"",mode:e.preview?_.preview:_.enter}});return{refresh:a,handleLoad:i,mode:o,render:e,renderOptions:m,handleSuccess:()=>{e.runSearch({})},loadingDataRef:r,detailsVisible:d}}const B=h({__name:"AddOrViewTable",setup(e){const{handleLoad:d,mode:r,renderOptions:o,handleSuccess:n,loadingDataRef:i,detailsVisible:a}=L();return(m,l)=>(p(),f(R,{ref_key:"loadingDataRef",ref:i,class:"addview_table",load:s(d)},{default:V(()=>[y("div",{class:"addview_table-wrapper"},[s(r)==="add"?(p(),f(D,{key:0,class:"addview_table-form",renderOptions:s(o),btnPosition:"right",onSuccess:s(n)},null,8,["renderOptions","onSuccess"])):(p(),I(O,{key:1},[b(S,{oneHideTab:"",notEdit:"",notUpdateData:""}),b(E,{modelValue:s(a),"onUpdate:modelValue":l[0]||(l[0]=t=>k(a)?a.value=t:null),notUpdateData:""},null,8,["modelValue"])],64))])]),_:1},8,["load"]))}});const ae=x(B,[["__scopeId","data-v-28687d70"]]);export{ae as default};
