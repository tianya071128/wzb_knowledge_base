import{d as y,x,r as u,y as F,o as _,b as m,w as S,f as I,g,F as P,bt as b,iJ as k,a9 as v,h as E,i as w,ao as R,_ as C,c as $,ad as z,a1 as A}from"./index-b80d5ef5.js";const B=y({__name:"SelectEntryPlus",props:{appId:{},entryList:{},filter:{type:Function},drag:{}},setup(p,{expose:f}){const r=p,l=x(),c=e=>{var s;return(s=e==null?void 0:e.every)==null?void 0:s.call(e,n=>typeof n=="string")},t=async()=>{let e=r.entryList;return e||(r.appId&&(e=await l.getForm(r.appId)),e||(e=[])),c(e)&&(e=(await Promise.all(e.map(n=>l.getFormInfo(n)))).filter(n=>n!==k)),e},a=u([]),d=e=>{let s=e;return r.filter&&(s=r.filter(s)),a.value=s,s},o=u();return F([()=>r.entryList,()=>r.appId],(e,s)=>{var n;v(e,s)||(n=o.value)==null||n.reload()}),f({list:a}),(e,s)=>{const n=R;return _(),m(b,{load:t,filterable:"",isCheckRemove:"",removeText:"条目已删除/条目不可选择",class:"select_entry",ref_key:"azSelectRef",ref:o},{default:S(({options:h})=>[(_(!0),I(P,null,g(d(h),i=>E(e.$slots,"option",{key:i.id,item:i},()=>[w(n,{label:i.name,value:i.id},null,8,["label","value"])],!0)),128))]),_:3},512)}}});const L=C(B,[["__scopeId","data-v-a9749c8b"]]),D=y({__name:"SelectForm",props:{filter:{type:Function},currentEntryId:{}},setup(p,{expose:f}){const r=p,l=t=>(t=t.filter(a=>a.type===A.form).map(a=>a.id===r.currentEntryId?{...a,name:"当前表单"}:a),r.filter&&(t=r.filter(t)),t),c=u();return f({list:$(()=>{var t;return((t=c.value)==null?void 0:t.list)??[]})}),(t,a)=>(_(),m(L,{ref_key:"selectEntryPlusRef",ref:c,filter:l,removeText:"表单已删除/表单不可选择"},z({_:2},[g(t.$slots||{},(d,o,e)=>({name:o,fn:S(()=>[E(t.$slots,o)])}))]),1536))}});export{D as _};
