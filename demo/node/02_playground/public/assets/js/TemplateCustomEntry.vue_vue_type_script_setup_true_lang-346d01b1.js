import{r as f,ia as C,y as s,c as y,a9 as c,dW as V,d as D,B as l,o as R,b as _,ib as k,l as I}from"./index-b80d5ef5.js";import{d as h}from"./index-c89dfa90.js";function B(e,u){const r=f(),o=f(),m=f({fields:[],formConfig:C()});s([()=>e.pointList??[],()=>e.mode],(t,n)=>{c(t,n)||(m.value={fields:h({pointList:e.pointList??[]}),formConfig:e.formConfig??C()},r.value={mode:e.mode??V.enter,useDefault:!0,appId:"",entryId:e.entryId??"",formData:e==null?void 0:e.modelValue,showEmpty:!0})},{immediate:!0});const d=()=>{var i;const t=(i=o.value)==null?void 0:i.getFormData({isParse:!0});return(t==null?void 0:t.reduce((v,g)=>({...v,[g.fieldId]:g.value}),{}))??{}},a=y(()=>d());return s(a,()=>{o.value&&!c(a.value,e.modelValue)&&u("update:modelValue",{...a.value})}),s(()=>e.modelValue,()=>{var t,n;o.value&&!c(a.value,e.modelValue)&&((n=(t=o.value)==null?void 0:t.render)==null||n.reset(e.modelValue))}),{formRenderRef:o,renderOptions:r,formConfig:m}}const L=D({__name:"TemplateCustomEntry",props:{modelValue:{},pointList:{},entryId:{},mode:{},formConfig:{}},emits:["update:modelValue"],setup(e,{expose:u,emit:r}){const o=e,m=r,{renderOptions:d,formConfig:a,formRenderRef:t}=B(o,m);return u({formRender:t}),(n,i)=>l(d)?(R(),_(l(k),{key:0,ref_key:"formRenderRef",ref:t,"form-designer":l(a),options:l(d)},null,8,["form-designer","options"])):I("",!0)}});export{L as _};
