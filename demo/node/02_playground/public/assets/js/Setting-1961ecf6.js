import{d as te,gY as ae,r as u,c as de,A2 as re,o as n,f as b,i as e,B as a,A3 as pe,w as i,bt as se,A4 as me,F as U,g as D,b as T,k as E,m as f,A5 as ne,dA as w,n as $,t as fe,eu as ue,a4 as K,a5 as _e,l as R,a3 as ce,Y as j,a as ve,mx as ye,ao as be,dC as Ve,P as ke,dD as ge,U as Ce,bn as Ie,ac as Fe,av as Ee,Q as $e,bm as Ae,eh as Ue,E as Te,ab as we,_ as Be}from"./index-b80d5ef5.js";import{B as z}from"./ButtonState-cb54910b.js";import{_ as Se}from"./ButtonSelectField.vue_vue_type_script_setup_true_lang-aae15f71.js";import{_ as he,a as Me}from"./FieldOtherEditor.vue_vue_type_script_setup_true_lang-a2d4ed75.js";import{_ as Ne}from"./FieldWidthEditor.vue_vue_type_script_setup_true_lang-3f895778.js";import{E as B}from"./routePage-70460a50.js";import{_ as Le}from"./FormFieldHeaderEditor.vue_vue_type_script_setup_true_lang-6c993e5c.js";import{_ as xe}from"./BtnSetting.vue_vue_type_script_setup_true_lang-3de9e244.js";import{_ as De}from"./FileSourceEditor.vue_vue_type_script_setup_true_lang-8f90a483.js";/* empty css                        */import"./AzInputNumber-d6212644.js";import"./el-input-number-c15b1cc7.js";import"./Base.vue_vue_type_script_setup_true_lang-832ddae3.js";import"./TableOperation.vue_vue_type_script_setup_true_lang-4afbb2cb.js";import"./keyBy-8fcfdd74.js";import"./_createAggregator-d66ed64c.js";import"./useQueryTab-05fa7456.js";import"./useExtractQuery-f96f705c.js";import"./CardTabs-ca59b5e9.js";import"./EditItemTargetForm.vue_vue_type_script_setup_true_lang-199df786.js";import"./SelectEntryAndOther-76a65b2d.js";import"./FieldCondition-1c72aa9d.js";import"./Base.vue_vue_type_script_setup_true_lang-03820366.js";import"./useFieldMaxWidth-d82f063e.js";import"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import"./AzCascader.vue_vue_type_style_index_0_lang-adc6a4ab.js";import"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import"./index-318b68f4.js";import"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import"./useMultipleVal-904406c1.js";import"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import"./el-dropdown-item-455a6589.js";import"./CardShowFieldItem-fd24f218.js";import"./LoadingData-195d0581.js";import"./AutoJump.vue_vue_type_script_setup_true_lang-a3aa2601.js";import"./ComponentParamsSetWrapper-71afc840.js";import"./default-component-4c80201b.js";import"./SelectFieldByMultEntry-84abd0c3.js";import"./fieldDefaultComponent-58752d9c.js";import"./Base.vue_vue_type_script_setup_true_lang-4fbdbc85.js";import"./DaterangeBase.vue_vue_type_script_setup_true_lang-bec97540.js";import"./InputBase.vue_vue_type_script_setup_true_lang-ffcf63f1.js";import"./Base-9b7f3306.js";/* empty css                          */import"./index-f0ed738f.js";import"./NumberBase.vue_vue_type_script_setup_true_lang-745b39c5.js";import"./Base-c9aa1df0.js";import"./SliderBase.vue_vue_type_script_setup_true_lang-5d73415b.js";import"./TextareaBase.vue_vue_type_script_setup_true_lang-7091b2cb.js";import"./TimeBase.vue_vue_type_script_setup_true_lang-ea537bf3.js";import"./TimerangeBase.vue_vue_type_script_setup_true_lang-0827c241.js";import"./UploadFileBase.vue_vue_type_script_setup_true_lang-0c253daa.js";import"./UploadImgBase.vue_vue_type_script_setup_true_lang-d23c1306.js";import"./CooperateEnterpriseBase.vue_vue_type_script_setup_true_lang-23720971.js";import"./CooperatePersonnelBase.vue_vue_type_script_setup_true_lang-adcd0db7.js";import"./Base.vue_vue_type_script_setup_true_lang-0e9a0e2c.js";import"./Base.vue_vue_type_script_setup_true_lang-aa25657d.js";import"./SelectCascaderEntry.vue_vue_type_script_setup_true_lang-673c5dca.js";import"./SelectForm.vue_vue_type_script_setup_true_lang-0170236d.js";import"./ParamsSet.vue_vue_type_script_setup_true_lang-37c252c5.js";import"./MessageRemindConfig-98484405.js";import"./utils-a7200637.js";import"./messageTemplate-8658e6b4.js";import"./SetFieldDefault-5fc1ae2a.js";import"./FormulaWrapper-92a83208.js";import"./Formula.vue_vue_type_style_index_0_lang-ef444f24.js";import"./index-8e050109.js";import"./routePage.vue_vue_type_script_setup_true_lang-efb79c93.js";import"./CollageTable-791f0954.js";import"./index-617ab4b4.js";import"./ConditionWrapper-43da1676.js";import"./FieldConditionView-ad1b057c.js";import"./SetAuth-50c8e12e.js";import"./usePublicRelease-2335b254.js";import"./Qrcode-850531ac.js";import"./html2canvas.esm-0543ed55.js";import"./DesignerDialog-22d70853.js";import"./Designer.vue_vue_type_script_setup_true_lang-3c7dafd1.js";import"./form-success-1777d0da.js";import"./TableRender-bab4d661.js";import"./Resize-eb80395d.js";import"./FormShare-9773b44c.js";import"./dataShare-2d7ae3f7.js";import"./SelectDataSourece-70a968c3.js";import"./useTransformColor-38b5da33.js";import"./SetFieldAuth-3d0b80a0.js";import"./DesignerTabs-a9795edf.js";import"./Base-3571a39e.js";import"./AddFormDataBtnPlus-a775412e.js";import"./formDesigner-462b10d7.js";import"./useValidateError-9f6399dc.js";import"./AutoNumberBase.vue_vue_type_script_setup_true_lang-56f78b68.js";import"./PluginBase-56c4bf37.js";import"./RichTextBase-228f0924.js";import"./Base-11a86176.js";import"./UploadWrapper.vue_vue_type_script_setup_true_lang-4553cd48.js";import"./index-c89dfa90.js";import"./TemplateCustomEntry.vue_vue_type_script_setup_true_lang-346d01b1.js";import"./TextBase.vue_vue_type_script_setup_true_lang-09411e7a.js";import"./BtnDisplay.vue_vue_type_script_setup_true_lang-cbe1b7c6.js";import"./Base.vue_vue_type_script_setup_true_lang-392ceecd.js";import"./GridBase.vue_vue_type_script_setup_true_lang-f18077d3.js";import"./Base-16c93ea0.js";import"./TableBase-393fac1a.js";import"./TabsBase.vue_vue_type_style_index_0_lang-861f3fae.js";import"./DepartmentBase.vue_vue_type_script_setup_true_lang-6f309530.js";import"./MemberBase.vue_vue_type_script_setup_true_lang-77a28117.js";import"./AddOrEditValidate.vue_vue_type_style_index_0_lang-5bd5a73c.js";import"./DataSoureceWrapper-047a1c9d.js";import"./ComponentPostAction-12970ad1.js";import"./InternalComponentSelectPlus-00c8c38f.js";import"./app.vue_vue_type_script_setup_true_lang-59fd2507.js";import"./enum-7a2ae6a9.js";import"./index-20639231.js";import"./el-space-0d01b33a.js";import"./cloneDeep-dc1c677b.js";import"./isTypedArray-10beecc7.js";import"./el-collapse-transition-4ed993c7.js";import"./defaultValue-7c7c87ea.js";import"./EditorDraggable-a06dbc71.js";import"./typeof-7fd5df1e.js";import"./utils-052731c0.js";import"./designerRender.vue_vue_type_script_setup_true_lang-68b31d85.js";const Ke=te({__name:"Setting",props:{field:{}},setup(P){var M;const d=P,_=ae(),V=u(!1),m=u(d.field.options.keyFields),W=()=>{V.value=!0,m.value=j(d.field.options.keyFields)},Y=o=>{m.value.splice(o,1)},G=()=>{d.field.options.keyFields=m.value,V.value=!1},k=u(!1),S=u(0),r=u((M=m.value)==null?void 0:M[0]),O=o=>{k.value=!0,S.value=o,r.value=m.value[o],r.value.alias=$(r.value.alias)},Q=()=>{m.value[S.value]={...r.value,alias:$(r.value.alias)},k.value=!1},g=u(!1),v=u(d.field.options.fillMode),C=u(d.field.options.fills),q=()=>{g.value=!0,C.value=d.field.options.keyFields.filter(o=>!!_.fields.get(o.fieldId)).map(o=>d.field.options.fills.find(t=>t.fieldId===o.fieldId)??{fieldId:o.fieldId,fillFieldId:o.fieldId,fieldType:o.fieldType}),v.value=d.field.options.fillMode},H=()=>{v.value===0&&(C.value=C.value.map(o=>({fieldId:o.fieldId,fillFieldId:o.fieldId,fieldType:o.fieldType})))},J=()=>{d.field.options.fills=C.value,d.field.options.fillMode=v.value,g.value=!1},X=o=>{const t=_.matchField(o.fieldId);let I=_.form.fields;const p=t==null?void 0:t.parentField;return(p==null?void 0:p.type)===ve.subform&&(I=j(p.fields).map(c=>(c.options.label=`${p.options.label}.${c.options.label}`,c))),ye(I,o.fieldType)},h=de({get(){return d.field.options.promptCode??re},set(o){d.field.options.promptCode=o}});return(o,t)=>{const I=be,p=Ve,c=ke,N=ge,y=Ce,A=Ie,L=Fe,Z=Ee,ee=$e,le=Ae,oe=Ue,x=Te,ie=we;return n(),b(U,null,[e(Le,{modelValue:o.field.options,"onUpdate:modelValue":t[0]||(t[0]=l=>o.field.options=l),id:o.field.fieldId},null,8,["modelValue","id"]),e(De,{field:o.field,tip:`支持 ${a(pe).join("、")} 格式`},null,8,["field","tip"]),e(B,{label:"提取模型编码",tip:"根据业务类型选择对应的AI模型"},{default:i(()=>[e(se,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=l=>h.value=l),load:a(me),placeholder:"AI模型"},{default:i(({options:l})=>[(n(!0),b(U,null,D(l,(s,F)=>(n(),T(I,{key:F,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","load"])]),_:1}),e(B,{id:`${o.field.fieldId}.keyFields`,label:"提取关键字"},{default:i(({error:l})=>[e(z,{onClick:W,text:"设置关键字","is-set":!!o.field.options.keyFields.length,"is-error":!!l},null,8,["is-set","is-error"])]),_:1},8,["id"]),e(B,{id:`${o.field.fieldId}.fills`,label:"提取结果回填"},{default:i(({error:l})=>[e(z,{onClick:q,text:"设置回填规则","is-error":!!l},null,8,["is-error"])]),_:1},8,["id"]),e(xe,{field:o.field},null,8,["field"]),e(he,{modelValue:o.field.options,"onUpdate:modelValue":t[2]||(t[2]=l=>o.field.options=l),id:o.field.fieldId,hideEdit:""},null,8,["modelValue","id"]),e(Ne,{modelValue:o.field.options,"onUpdate:modelValue":t[3]||(t[3]=l=>o.field.options=l),field:o.field},null,8,["modelValue","field"]),e(Me,{field:o.field},null,8,["field"]),e(A,{modelValue:V.value,"onUpdate:modelValue":t[6]||(t[6]=l=>V.value=l),title:"选择关键字",width:"600","destroy-on-close":""},{footer:i(()=>[E("div",{class:"dialog-footer"},[e(y,{onClick:t[5]||(t[5]=l=>V.value=!1)},{default:i(()=>[f("取消")]),_:1}),e(y,{type:"primary",onClick:G},{default:i(()=>[f("确定")]),_:1})])]),default:i(()=>[e(Se,{modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=l=>m.value=l),class:"w50",ref:"buttonSelectFieldRef",placeholder:"选择作为关键字的控件",fields:a(_).form.fields,filter:a(ne),prop:{fieldId:"fieldId",fieldType:"fieldType"},multiple:""},null,8,["modelValue","fields","filter"]),e(N,{stripe:"",data:m.value,border:"",style:{width:"100%","margin-top":"10px"}},{default:i(()=>[e(p,{prop:"date",label:"字段名称",width:"180"},{default:i(({row:l})=>[e(w,{"field-id":l.fieldId,fields:a(_).form.fields,class:"color-text"},null,8,["field-id","fields"])]),_:1}),e(p,{prop:"name",label:"关键字别名"},{default:i(({row:l})=>[a($)(l.alias).length?(n(),b("span",{key:0},fe(a($)(l.alias).join(",")),1)):(n(),b("span",{key:1,style:{opacity:"0.5"}},"暂未设置"))]),_:1}),e(p,{prop:"name",width:"80",label:"操作"},{default:i(({$index:l})=>[E("div",{style:{"font-size":"16px"}},[e(c,{style:{color:"var(--el-color-primary)",cursor:"pointer","margin-right":"5px"},onClick:s=>O(l)},{default:i(()=>[e(a(ue))]),_:2},1032,["onClick"]),e(c,{style:{color:"var(--el-color-danger)",cursor:"pointer"},onClick:s=>Y(l)},{default:i(()=>[e(a(K))]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),e(A,{modelValue:k.value,"onUpdate:modelValue":t[9]||(t[9]=l=>k.value=l),title:"关键字别名设置",width:"500","destroy-on-close":"","append-to-body":""},{footer:i(()=>[E("div",{class:"dialog-footer"},[e(y,{onClick:t[8]||(t[8]=l=>k.value=!1)},{default:i(()=>[f("取消")]),_:1}),e(y,{type:"primary",onClick:Q},{default:i(()=>[f("确定")]),_:1})])]),default:i(()=>[e(le,{position:"left","label-width":"120px","label-suffix":"："},{default:i(()=>[e(L,{label:"字段名称"},{default:i(()=>[e(w,{"field-id":r.value.fieldId,fields:a(_).form.fields,class:"color-text"},null,8,["field-id","fields"])]),_:1}),Array.isArray(r.value.alias)?(n(),T(L,{key:0,label:"关键字别名"},{default:i(()=>[e(Z,{icon:a(_e),type:"primary",underline:!1,onClick:t[7]||(t[7]=l=>r.value.alias.push(""))},{default:i(()=>[f(" 添加 ")]),_:1},8,["icon"]),(n(!0),b(U,null,D(r.value.alias,(l,s)=>(n(),b("div",{class:"alias_set-item",key:s},[e(ee,{modelValue:r.value.alias[s],"onUpdate:modelValue":F=>r.value.alias[s]=F,placeholder:"请输入",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),e(c,{class:"item-icon",onClick:F=>r.value.alias.splice(s,1)},{default:i(()=>[e(a(K))]),_:2},1032,["onClick"])]))),128))]),_:1})):R("",!0)]),_:1})]),_:1},8,["modelValue"]),e(A,{modelValue:g.value,"onUpdate:modelValue":t[12]||(t[12]=l=>g.value=l),title:"识别结果回填规则",width:"500","destroy-on-close":""},{footer:i(()=>[E("div",{class:"dialog-footer"},[e(y,{onClick:t[11]||(t[11]=l=>g.value=!1)},{default:i(()=>[f("取消")]),_:1}),e(y,{type:"primary",onClick:J},{default:i(()=>[f("确定")]),_:1})])]),default:i(()=>[e(oe,{title:"识别结果将按一下规则填充到表单字段",type:"info",closable:!1}),e(ie,{modelValue:v.value,"onUpdate:modelValue":t[10]||(t[10]=l=>v.value=l),class:"mt-10",onChange:H},{default:i(()=>[e(x,{label:0},{default:i(()=>[f("回填到关键字来源字段")]),_:1}),e(x,{label:1},{default:i(()=>[f("回填到表单字段")]),_:1})]),_:1},8,["modelValue"]),v.value===1?(n(),T(N,{key:0,data:C.value,stripe:"",border:"","empty-text":"没有可设置的关键字字段",style:{width:"100%","margin-top":"10px"}},{default:i(()=>[e(p,{prop:"date",label:"关键字字段",width:"180"},{default:i(({row:l})=>[e(w,{"field-id":l.fieldId,fields:a(_).form.fields,includeSubFormLabel:"",class:"color-text"},null,8,["field-id","fields"])]),_:1}),e(p,{prop:"name",label:"回填到表单字段"},{default:i(({row:l})=>[e(ce,{modelValue:l.fillFieldId,"onUpdate:modelValue":s=>l.fillFieldId=s,placeholder:"选择回填表单字段",fields:X(l),"is-select-subform":""},null,8,["modelValue","onUpdate:modelValue","fields"])]),_:1})]),_:1},8,["data"])):R("",!0)]),_:1},8,["modelValue"])],64)}}});const oi=Be(Ke,[["__scopeId","data-v-d06a6c56"]]);export{oi as default};
