import{bI as Ao,bK as fr,c as _e,bJ as Lo,bX as Pp,r as et,du as Ed,aT as Ua,n8 as Cp,n9 as Fp,n as ar,dj as oa,gv as Dl,d as We,o as W,f as Ce,i as j,I as ko,bz as Dp,v as sn,k as Pe,p as wa,l as dt,t as en,B as E,C as cn,e as Sa,S as Ho,h as zn,ds as Wi,_ as Ft,gk as Mp,bs as Ml,gj as El,y as Wn,w as H,m as st,F as St,g as Ut,at as Hi,K as Yu,av as Gi,U as Hn,bn as Go,bv as Td,q as Os,br as Ju,aW as Ep,b as Ee,a_ as Tp,bu as Op,id as Rp,Q as Tl,ac as Na,bm as Yo,bc as Dr,bD as jp,P as za,ba as Xu,as as Bp,eJ as Od,eb as Rs,ek as Rd,bH as An,g2 as Ui,eo as Nl,na as jd,a as zt,d_ as Vc,dF as ml,a5 as Ku,nb as Vp,aS as Up,aU as Yi,es as Al,nc as qp,gn as zp,a2 as Ji,nd as Bd,lD as $p,aN as Gr,cj as qi,eA as Vd,ne as Ud,ad as Wp,e9 as qd,hM as zd,is as Nn,er as Hp,a8 as va,eI as Ll,a3 as $d,eh as Zu,bx as Qu,mu as Gp,dl as Yp,R as js,bt as Ei,ao as Aa,ap as Bs,z as Jp,dQ as Xp,a9 as ku,c5 as Kp,ab as Ol,E as Xi,eU as Zp,d8 as xa,aa as vo,N as Rl,O as jl,ga as Qp,cR as eh,cS as th,nf as nh,bC as rh,j as ah,ng as Uc,Z as oh,g$ as ih,x as sh,h1 as Wd,i9 as mu,gS as qc,V as zc,nh as lh,dA as $c,ni as Hd,b_ as uh,e0 as ch,ez as dh,nj as fh,ch as Iu,ef as ph,nk as hh,ii as mh,nl as gh,dN as Si,cA as vh,ca as yh}from"./index-b80d5ef5.js";import{D as Ti,F as Pu,N as nt,A as an,S as Ii,a as Sn,b as Xn,c as gt,P as Pi,d as Oi,e as xi,M as ga,C as Is}from"./enum-7a2ae6a9.js";/* empty css                          */import{F as bh,_ as _h}from"./AddOrEditValidate.vue_vue_type_style_index_0_lang-5bd5a73c.js";import{u as ec}from"./utils-a7200637.js";import{M as Bl}from"./MessageRemindConfig-98484405.js";import{g as dr,a as $o,m as wh}from"./index-20639231.js";import{F as Gd}from"./FieldConditionView-ad1b057c.js";import{E as Yd}from"./el-space-0d01b33a.js";import{_ as Sh}from"./ButtonSelectField.vue_vue_type_script_setup_true_lang-aae15f71.js";import{d as gu}from"./cloneDeep-dc1c677b.js";/* empty css                        */import{S as Cu}from"./SetFieldAuth-3d0b80a0.js";import"./el-collapse-transition-4ed993c7.js";import{F as Jd}from"./FieldCondition-1c72aa9d.js";import{t as Wc}from"./defaultValue-7c7c87ea.js";import{k as Fu}from"./keyBy-8fcfdd74.js";import{I as xh}from"./InternalComponentSelectPlus-00c8c38f.js";import{C as Nh}from"./ComponentParamsSetWrapper-71afc840.js";import{u as Hc}from"./useExtractQuery-f96f705c.js";import{E as Ah}from"./SliderBase.vue_vue_type_script_setup_true_lang-5d73415b.js";import"./el-input-number-c15b1cc7.js";import{B as Lh}from"./ButtonState-cb54910b.js";import{E as kh}from"./EditorDraggable-a06dbc71.js";import{_ as dn}from"./typeof-7fd5df1e.js";const Gc=Symbol("工作流节.点状态管理"),Yc=Symbol("工作流节点.选中功能"),Jc=Symbol("工作流节点.窗口缩放"),Xc=Symbol("工作流节点.面板.添加节点"),Kc=Symbol("工作流.条目列表管理"),Xd=Symbol("工作流.数据面板.修改功能"),Kd=Symbol("workflow.designer"),Mt=()=>Ao(Kd,void 0),Ih=()=>{const n=Mt(),e=fr({saveLoading:!1,releaseLoading:!1,releaseDisable:_e(()=>n.flowDesigner.state===2)});async function t(){e.saveLoading=!0;try{const o=await n.save()}finally{e.saveLoading=!1}}async function r(){e.releaseLoading=!0;try{await n.beforeRelease()}finally{e.releaseLoading=!1}}return{state:e,save:t,release:r}},Ph=n=>{const{width:e,height:t}=Pp(n),r=et(100),o=_e(()=>{const u=t.value*((r.value-100)/100),h=e.value*((r.value-100)/100);return{"padding-top":u>0?`${u}px`:50,"padding-left":h>0?`${h}px`:50,transform:`scale(${r.value/100})`}});function a(){r.value<180&&(r.value+=10)}function s(){r.value>20&&(r.value-=10)}function l(u){u.ctrlKey&&(u.preventDefault(),u.deltaY>0?s():a())}return window.addEventListener("mousewheel",l,{passive:!1}),Ed(()=>{window.removeEventListener("mousewheel",l)}),{windowZoom:l,zoomOut:s,zoomIn:a,scale:r,scaleStyle:o}},Zd=n=>{const e=Ao(Jc,void 0);if(e)return e;{const t=Ph(n);return Lo(Jc,t),t}};var So=(n=>(n.SAME_SPONSOR="0",n.SAME_PREVIOUS="1",n.SAME_ANY="2",n))(So||{}),wt=(n=>(n.creator="creator",n.memberWidget="memberWidget",n.memberSingleWidget="memberSingleWidget",n.departmentWidget="departmentWidget",n.departmentSingleWidget="departmentSingleWidget",n.userCooperationWidget="userCooperationWidget",n.corpCooperationWidget="corpCooperationWidget",n.orgManager="orgManager",n.leader="leader",n.custom="custom",n))(wt||{}),bo=(n=>(n[n.orSign=1]="orSign",n[n.countersign=2]="countersign",n[n.countersignPercentage=3]="countersignPercentage",n[n.levelApproval=4]="levelApproval",n))(bo||{});const Yr=()=>{const n=Mt(),e=_e(()=>n.mode===Ti.Design),t=_e(()=>n.mode===Ti.Preview),r=_e(()=>n.mode===Ti.Select),o=_e(()=>n.scene===Pu.FixedForm),a=_e(()=>n.scene===Pu.Default);return{isEdit:e,isSelect:r,isPreview:t,isFixedFormScene:o,isDefaultScene:a}},Ch=()=>{const n=fr({nodeStatus:{},setNodeStatus(e){n.nodeStatus=e},getNodeStatus(e,t){if(e==="Preview"||e==="Select"){const r={2:"finishing",1:"processing",0:e==="Preview"?"notStarted":"selectBan"},o=n.nodeStatus[t];return o?r[o]:r[0]}else return""},verifySelectedNode(e){return n.nodeStatus[e]===2}});return n},Qd=n=>{const e=Ao(Gc,void 0);if(e)return e;{const t=Ch();return t.setNodeStatus(n??{}),Lo(Gc,t),t}},Fh=()=>{const n=fr({selectIds:[],isCheck(e){return n.selectIds.includes(e)},setSelectNode(e){n.selectIds=[e]},setIds(e){n.selectIds=e},deleteNode(e){n.selectIds=n.selectIds.filter(t=>t!==e)},clearAll(){n.selectIds=[]}});return n},Dh=()=>{const n=Ao(Yc,void 0);if(n)return n;{const e=Fh();return Lo(Yc,e),e}};function Mh(){const n=et(!1),e=et(),t=et();return{closePop:()=>{n.value=!1},visiblePop:n,insertRef:e,parentData:t,showPop:(a,s)=>{const l=a;e.value&&(n.value=!1),Ua(()=>{t.value=s,e.value=l.currentTarget,n.value=!0})}}}function ef(){const n=Ao(Xc,void 0);if(n)return n;{const e=Mh();return Lo(Xc,fr(e)),e}}function Eh(n){const e={header_show:!0,body_show:!0,add_show:!0};return n?{...e,...n}:{...e}}function Th(n){return n||{[nt.StartEvent]:{showRelatedForm:!0}}}function Oh(n){const e=[{label:"审批节点",type:nt.Approval,icon:"approval"},{label:"条件网关",type:nt.Gateway,icon:"gateway"},{label:"并行网关",type:nt.ParallelGateway,icon:"parallelGateway"},{label:"子流程",type:nt.SubProcess,icon:"subProcess"},{label:"抄送",type:nt.CC,icon:"subProcess"}];return n?[...n]:[...e]}function Rh(n){const e=fr({layout:Eh(n==null?void 0:n.layout),insertPanels:Oh(n==null?void 0:n.insertPanels),dataPanels:Th(n==null?void 0:n.dataPanels),getDataPanelsByStartNodeType(){var t;return(t=e.dataPanels)==null?void 0:t[nt.StartEvent]}});return e}const jh=()=>{const n=Mt(),e=fr({entryList:[],flowList:[],async load(){const t=n.formModel.appId;if(!t)return;e.entryList=await Cp({appId:t,name:""});const r=await Fp({appId:t});e.flowList=ar(r)},normData(t){const r=t.reduce((o,a)=>((o[a.entryId]=o[a.entryId]||[]).push(a),o),{});return Object.values(r).map(o=>({label:o[0].entryName,value:o[0].entryId,children:o}))},getFlowNameById(t){return e.flowList.find(o=>o.flowId===t)},getNameById(t){if(Array.isArray(t)){const r=new Set(t);return e.entryList.filter(o=>r.has(o.id))}return e.entryList.find(r=>r.id===t)}});return e},Vl=()=>{const n=Ao(Kc,void 0);if(n)return n;{const e=jh();return Lo(Kc,e),e}},Bh={icon:"allowRemind",title:"催办",hint:"允许发起人在后续节点未完成时对负责人进行催办"},Vh={icon:"allowRevoke",title:"取回重办",hint:"允许发起人/审批人在下一节点未审批时取回重新处理"},Uh={icon:"allowCancel",title:"撤销",hint:"允许发起人在流程未完成时撤销流程，撤销后流程中止"},qh={icon:"voice",title:"流程处理结果提醒",hint:"流程状态变更为正常完成、拒绝时，发送消息提醒流程发起人或已处理人"},zh={icon:"autoApproval",title:"自动审批通过规则",hint:"所有节点根据此规则进行自动审批通过"},$h={icon:"formOpenMode",title:"表单的打开模式",hint:"未勾选时，使用标准的表单模式"},_o={toDoMessageNotifier:[{id:"charger",type:oa.dynamic}],toDoMessages:[{title:"待办通知",content:"您有一条新的待办，请及时处理",notice:Dl.mail}]},Ci={errUserNotifier:[],errUserMessages:[{title:"审批人异常提醒",content:"【$msg-taskName$】审批人异常，请及时排查并调整流程",notice:Dl.mail}]},Fi={timeoutNotifier:[{id:"charger",type:oa.dynamic}],timeoutMessages:[{title:"审批超时通知",content:"您有一条待办超时未完成，请及时处理",notice:Dl.mail}]},ya={procResultNotifier:[{id:"creator",type:oa.dynamic}],procResultMessages:[{title:"流程结果通知",content:"您有审批流程已完成，请及时处理",notice:Dl.mail}]},Wh=n=>{var r,o;return!(((r=n.toDoMessageNotifier)==null?void 0:r.length)!==_o.toDoMessageNotifier.length||((o=n.toDoMessages)==null?void 0:o.length)!==_o.toDoMessages.length||!_o.toDoMessageNotifier.every(a=>n.toDoMessageNotifier.some(s=>s.id===a.id&&s.type===a.type))||!_o.toDoMessages.every(a=>n.toDoMessages.some(s=>s.title===a.title&&s.content===a.content&&s.notice==a.notice)))},Hh=n=>{var r,o;return!(((r=n.errUserNotifier)==null?void 0:r.length)!==Ci.errUserNotifier.length||((o=n.errUserMessages)==null?void 0:o.length)!==Ci.errUserMessages.length||!Ci.errUserNotifier.every(a=>n.errUserNotifier.some(s=>s.id===a.id&&s.type===a.type))||!Ci.errUserMessages.every(a=>n.errUserMessages.some(s=>s.title===a.title&&s.content===a.content&&s.notice==a.notice)))},Gh=n=>{var r,o;return!(((r=n.timeoutNotifier)==null?void 0:r.length)!==Fi.timeoutNotifier.length||((o=n.timeoutMessages)==null?void 0:o.length)!==Fi.timeoutMessages.length||!Fi.timeoutNotifier.every(a=>n.timeoutNotifier.some(s=>s.id===a.id&&s.type===a.type))||!Fi.timeoutMessages.every(a=>n.timeoutMessages.some(s=>s.title===a.title&&s.content===a.content&&s.notice==a.notice)))},Yh=n=>{var r,o;return!(((r=n.procResultNotifier)==null?void 0:r.length)!==ya.procResultNotifier.length||((o=n.procResultMessages)==null?void 0:o.length)!==ya.procResultMessages.length||!ya.procResultNotifier.every(a=>n.procResultNotifier.some(s=>s.id===a.id&&s.type===a.type))||!ya.procResultMessages.every(a=>n.procResultMessages.some(s=>s.title===a.title&&s.content===a.content&&s.notice==a.notice)))},Rn=We({__name:"SvgIcon",props:{iconClass:{}},setup(n){return(e,t)=>(W(),Ce("i",null,[j(Dp,ko(e.$attrs,{"icon-class":e.iconClass}),null,16,["icon-class"])]))}}),Jh=We({__name:"setting-item",props:{info:{},modelValue:{type:Boolean},disable:{type:Boolean,default:!1},hideSwitch:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const o=sn(n,"modelValue",e);return(a,s)=>{const l=Wi;return W(),Ce("div",{class:wa(["advanced_item",{"advanced_item--disable":a.disable}])},[a.info.icon?(W(),Ce("div",{key:0,class:"item_img_box"},[Pe("div",{class:wa(["img",a.info.icon])},[j(Rn,{"icon-class":a.info.icon},null,8,["icon-class"])],2)])):dt("",!0),Pe("div",{class:"item_config"},[Pe("div",{class:"item_info_box"},[Pe("div",{class:"info"},[Pe("div",{class:"title"},en(a.info.title),1),Pe("div",{class:"hint"},en(a.info.hint),1)]),a.hideSwitch?dt("",!0):(W(),Ce("div",{key:0},[j(l,{"inline-prompt":"",modelValue:E(o),"onUpdate:modelValue":s[0]||(s[0]=u=>cn(o)?o.value=u:null),disabled:a.disable,"inactive-text":"关","active-text":"开"},null,8,["modelValue","disabled"])]))]),Sa(Pe("div",{class:"item_default"},[zn(a.$slots,"default",{},void 0,!0)],512),[[Ho,E(o)||a.hideSwitch]]),Pe("div",{class:"hr"})])],2)}}});const Hr=Ft(Jh,[["__scopeId","data-v-ac9e7dd0"]]),Ul=We({__name:"Desc",props:{member:{},dynamicOptions:{}},setup(n){const e=n,{label:t}=Mp({type:e.member.type,id:e.member.id,dynamicOptions:e.dynamicOptions});return(r,o)=>en(E(t))}}),Xh=We({__name:"ProcResultSendMessageConfig",props:{form:{},entryId:{}},emits:["update:form"],setup(n,{emit:e}){const t=n,r=e,o=et(!1),a=et({procResultNotifier:[],procResultMessages:[]}),s=et(),l=et(),u=async()=>{var m,g,S;await Promise.all([(g=(m=s.value)==null?void 0:m.ruleFormRef)==null?void 0:g.validate(),(S=l.value)==null?void 0:S.validate()]),r("update:form",{...t.form,...a.value}),o.value=!1},h=[{id:"creator",name:"流程发起人",children:[{id:"creator",name:"流程发起人"}]}],{dynamicOptions:y}=ec({entryId:t.entryId,extraDynamicOptions:h}),v=_e(()=>{if(!t.form.procResultMessages)return"";const m={procResultNotifier:t.form.procResultNotifier.map(A=>({id:A.id,type:A.type})),procResultMessages:t.form.procResultMessages};let g="";const S=Yh(m);g+=S?"默认消息内容，发送":"自定义消息内容，发送";const w=t.form.procResultMessages.map(A=>`【${Ml(Number(A.notice),El)}】`);return g+=w.join("、"),g+"给 "}),b=_e({get(){const m=a.value.procResultMessages.map(g=>({channel:Number(g.notice),title:g.title,rawContent:g.content}));return{selectors:a.value.procResultNotifier,msgBase:m}},set(m){a.value.procResultMessages=m.msgBase.map(g=>({notice:g.channel,title:g.title,content:g.rawContent})),a.value.procResultNotifier=m.selectors??[]}});Wn(()=>o.value,m=>{m&&(a.value.procResultNotifier=t.form.procResultNotifier,a.value.procResultMessages=t.form.procResultMessages)},{immediate:!0});const f=m=>m<t.form.procResultNotifier.length-1?" 、":"";return(m,g)=>{const S=Gi,w=Hn,A=Go;return W(),Ce("div",null,[zn(m.$slots,"default",{visible:o.value},()=>[j(S,{onClick:g[0]||(g[0]=T=>o.value=!0),icon:E(Hi),type:"primary",underline:!1},{default:H(()=>[st(en(v.value)+" ",1),(W(!0),Ce(St,null,Ut(m.form.procResultNotifier,(T,G)=>(W(),Ce(St,{key:G},[j(Ul,{member:T,dynamicOptions:[{id:"creator",name:"流程发起人 | 流程发起人"},...E(y)]},null,8,["member","dynamicOptions"]),st(" "+en(f(G)),1)],64))),128))]),_:1},8,["icon"])],!0),j(A,{title:"消息设置-流程处理结果通知",modelValue:o.value,"onUpdate:modelValue":g[3]||(g[3]=T=>o.value=T),width:"640px"},{footer:H(()=>[j(w,{onClick:g[2]||(g[2]=T=>o.value=!1)},{default:H(()=>[st("取 消")]),_:1}),j(w,{type:"primary",onClick:u},{default:H(()=>[st("确 定")]),_:1})]),default:H(()=>[j(Yu,{model:a.value,ref_key:"formRef",ref:s},{default:H(()=>[j(Bl,{modelValue:b.value,"onUpdate:modelValue":g[1]||(g[1]=T=>b.value=T),ref_key:"messageRemindConfigRef",ref:l,entryId:m.entryId,"extra-dynamic-options":h},null,8,["modelValue","entryId"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const Kh=Ft(Xh,[["__scopeId","data-v-4b4917a5"]]),Zh=We({__name:"ProcessSetting",setup(n){const e=et(!1),t=Mt(),r=_e(()=>t.formModel.appEntryId),o=_e(()=>t.formModel.fields??[]),a=_e({get(){return t.config.autoApproveType?t.config.autoApproveType.split(","):[]},set(s){t.config.autoApproveType=(s==null?void 0:s.join(","))??""}});return Wn(()=>t.config.procResultSendMessage,s=>{e.value&&s&&(t.config.procResultNotifier=ya.procResultNotifier,t.config.procResultMessages=ya.procResultMessages)}),(s,l)=>{const u=Os,h=Ju,y=Hn;return W(),Ce(St,null,[j(Td,{size:500,modelValue:e.value,"onUpdate:modelValue":l[7]||(l[7]=v=>e.value=v),title:"流程设置"},{default:H(()=>[E(t).config?(W(),Ce("div",{key:0,class:"advance-wrapper"},[j(Hr,{modelValue:E(t).config.allowRemind,"onUpdate:modelValue":l[0]||(l[0]=v=>E(t).config.allowRemind=v),info:E(Bh)},null,8,["modelValue","info"]),j(Hr,{modelValue:E(t).config.allowRevoke,"onUpdate:modelValue":l[1]||(l[1]=v=>E(t).config.allowRevoke=v),info:E(Vh)},null,8,["modelValue","info"]),j(Hr,{modelValue:E(t).config.allowCancel,"onUpdate:modelValue":l[2]||(l[2]=v=>E(t).config.allowCancel=v),info:E(Uh)},null,8,["modelValue","info"]),j(Hr,{modelValue:E(t).config.procResultSendMessage,"onUpdate:modelValue":l[4]||(l[4]=v=>E(t).config.procResultSendMessage=v),info:E(qh)},{default:H(()=>[j(Kh,{form:E(t).config,"onUpdate:form":l[3]||(l[3]=v=>E(t).config=v),entryId:r.value},null,8,["form","entryId"])]),_:1},8,["modelValue","info"]),j(Hr,{info:E(zh),"hide-switch":""},{default:H(()=>[j(h,{modelValue:a.value,"onUpdate:modelValue":l[5]||(l[5]=v=>a.value=v)},{default:H(()=>[j(u,{label:E(So).SAME_SPONSOR},{default:H(()=>[st(" 审批人与发起人相同时，自动审批通过 ")]),_:1},8,["label"]),j(u,{label:E(So).SAME_PREVIOUS},{default:H(()=>[st(" 与上一节点审批人相同时，自动审批通过 ")]),_:1},8,["label"]),j(u,{label:E(So).SAME_ANY},{default:H(()=>[st(" 与前面任一节点审批人节点相同时，自动审批通过 ")]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["info"]),j(Hr,{info:E($h),"hide-switch":""},{default:H(()=>[j(bh,{modelValue:E(t).config.fileMode,"onUpdate:modelValue":l[6]||(l[6]=v=>E(t).config.fileMode=v),fields:o.value},null,8,["modelValue","fields"])]),_:1},8,["info"])])):dt("",!0)]),_:1},8,["modelValue"]),j(y,{type:"primary",onClick:l[8]||(l[8]=v=>e.value=!0),plain:""},{default:H(()=>[st(" 流程设置 ")]),_:1})],64)}}});const Qh=Ft(Zh,[["__scopeId","data-v-24b42cf3"]]),e1=We({__name:"Back",setup(n){const e=Ep(),t=Mt(),r=async()=>{t.beforeLeave().then(()=>{e.go(-1)})};return(o,a)=>{const s=Hn;return W(),Ee(s,{style:{"font-size":"22px"},icon:E(Tp),link:"",onClick:r},null,8,["icon"])}}}),t1=We({__name:"EditProcessName",props:{editInfo:{}},emits:["update:editInfo","refresh","close"],setup(n,{expose:e,emit:t}){const r=n,o=t,a=et({id:"",title:"",remark:""}),s=_e(()=>r.editInfo??a.value),l=et(),u=fr({title:[{required:!0,message:"请输入流程名称",trigger:"blur"},{min:3,max:15,message:"名称长度3~15个字符",trigger:"blur"}],remark:[{min:3,max:200,message:"名称长度3~200个字符",trigger:"blur"}]}),h=()=>{o("close")},y=async()=>{var v;await((v=l.value)==null?void 0:v.validate()),s.value.id&&await Rp.editFlowInfo(s.value),o("update:editInfo",s.value),h()};return e({submitForm:y,validate:async()=>{var v;return(v=l.value)==null?void 0:v.validate()}}),(v,b)=>{const f=Tl,m=Na,g=Yo;return W(),Ee(g,{ref_key:"ruleFormRef",ref:l,model:s.value,rules:u,"label-width":"100px"},{default:H(()=>[j(m,{label:"流程名称",prop:"title"},{default:H(()=>[j(f,{modelValue:s.value.title,"onUpdate:modelValue":b[0]||(b[0]=S=>s.value.title=S)},null,8,["modelValue"])]),_:1}),j(m,{label:"说明",prop:"remark"},{default:H(()=>[j(f,{modelValue:s.value.remark,"onUpdate:modelValue":b[1]||(b[1]=S=>s.value.remark=S),rows:5,type:"textarea",placeholder:"请输入说明"},null,8,["modelValue"])]),_:1}),j(Op,{editMode:!0,onClose:h,"on-submit":y})]),_:1},8,["model","rules"])}}}),n1=We({__name:"EditProcessNamePopover",setup(n){const e=Mt(),t=et(),r=_e(()=>{var u;return((u=e==null?void 0:e.flowDesigner)==null?void 0:u.title)??""}),o=()=>{const{flowDesigner:u}=e;t.value={id:u.id,title:u.title,remark:u.remark}},a=et(!1),s=u=>{e.flowDesigner={...e.flowDesigner,id:u.id,title:u.title,remark:u.remark},l()},l=()=>{a.value=!1};return(u,h)=>{const y=Gi,v=za,b=Xu;return W(),Ee(b,{visible:a.value,"onUpdate:visible":h[0]||(h[0]=f=>a.value=f),title:"编辑",trigger:"click",width:400,placement:"bottom-start"},{reference:H(()=>[Pe("div",{onClick:Dr(o,["stop"]),class:"edit-name-btn"},[j(y,{plain:"",link:""},{default:H(()=>[st(en(r.value),1)]),_:1}),j(v,{style:{margin:"0 5px"}},{default:H(()=>[j(E(jp))]),_:1})],8,["onClick"])]),default:H(()=>[j(t1,{ref:"EditProcessNameRef","edit-info":t.value,"onUpdate:editInfo":s,onClose:l},null,8,["edit-info"])]),_:1},8,["visible"])}}});const r1=Ft(n1,[["__scopeId","data-v-5bb86840"]]);var or=(n=>(n.click="node:click",n.select="node:select",n.selectCondition="node:selectCondition",n.addApprovalBranch="node:addApprovalBranch",n.processSetting="node:processSetting",n.save="node:save",n.release="node:release",n.callbackRelease="node:callbackRelease",n.exportFile="node:exportFile",n.callbackSave="node:callbackSave",n))(or||{});const a1=We({__name:"ExpandButtons",setup(n){const e=Mt(),a=[{id:"1",type:"primary",text:"导出",children:[{id:"2",type:"primary",onClick:()=>{e.eventMitt.emit(or.exportFile,"png")},text:"PNG"},{id:"3",type:"primary",onClick:()=>{e.eventMitt.emit(or.exportFile,"jpeg")},text:"JPEG"},{id:"4",type:"primary",onClick:()=>{e.eventMitt.emit(or.exportFile,"pdf")},text:"PDF"}]}];return(s,l)=>(W(),Ee(Bp,{num:0,list:a}))}}),o1=We({__name:"Header",setup(n){const{state:e,save:t,release:r}=Ih(),o=Mt(),{isDefaultScene:a}=Yr(),s=()=>{t()},l=()=>{r()};return(u,h)=>{var b;const y=Od,v=Hn;return W(),Ce("div",{class:"wf-header wf-header__box"},[Pe("div",null,[E(a)?(W(),Ee(e1,{key:0})):dt("",!0),E(a)?(W(),Ee(r1,{key:1})):(W(),Ee(y,{key:2},{default:H(()=>[st(en(E(o).flowDesigner.title),1)]),_:1}))]),Pe("div",{style:{flex:"1"}}),Pe("div",null,[(b=E(o))!=null&&b.config?(W(),Ee(Qh,{key:0})):dt("",!0),j(v,{loading:E(e).saveLoading,disabled:E(e).releaseLoading,type:"primary",onClick:s,class:"save"},{default:H(()=>[st(" 保存 ")]),_:1},8,["loading","disabled"]),j(v,{loading:E(e).releaseLoading,type:"warning",disabled:E(e).releaseDisable||E(e).saveLoading,onClick:l,class:wa(E(e).releaseDisable||E(e).saveLoading?"":"release")},{default:H(()=>[st(" 发布 ")]),_:1},8,["loading","disabled","class"]),Pe("div",{style:{"margin-left":"12px"}},[j(a1)])])])}}});const i1=Ft(o1,[["__scopeId","data-v-092bd15d"]]),tc=et(),s1=n=>{tc.value=n},Zc=()=>tc.value,l1=()=>{tc.value=void 0},u1=[nt.Approval,nt.CC,nt.SubProcess],c1=n=>u1.includes(n.type)?"true":"false",d1={entryId:{type:"string",required:!0,validator:(n,e,t,r)=>{r.entryId?t():t("请选择条目")},message:"请选择条目"}},f1=new Rs(d1),p1={},h1=new Rs(p1),tf=n=>({limit:{type:"string",required:!0,validator:(e,t,r,o)=>{o=n||o,o.enabled?parseInt(t)>=0?r():r("请输入正确的处理截止时间"):r()},message:"请输入正确的处理截止时间"}}),nf=n=>({errUser:{required:!0,type:"array",message:"请选择转交指定人员",validator:(e,t,r,o)=>{o=n||o,o.errType==="3"&&!t?r("请选择转交指定人员"):r()}}}),rf=n=>({approvers:{required:!0,message:"请选择审批人",validator:(e,t,r,o)=>{o=n||o,(o.approvalMethod??an.custom)===an.custom&&Array.isArray(t)&&t.length<1?r("请选择审批人"):r()}}}),af={countersignType:[{required:!0,message:"请选择审批方式"}],...rf(),...nf(),timeout:{type:"object",required:!0,fields:{...tf()}}},m1=new Rs(af),g1={condition:{type:"array",validator:(n,e,t,r)=>{"approveResult"in r&&Rd(r.approveResult)||r.parentId.includes("InclusiveGateway")?t():!r.isElse&&Array.isArray(e)&&e.length<=0?t("请设置条件"):t()}}},v1=new Rs(g1),of={subFlowFormId:{type:"string",required:!0,message:"请选择流程表单"}},y1=new Rs(of);function b1(n,e){return e={exports:{}},n(e,e.exports),e.exports}var _1=b1(function(n){var e=n.exports=function(t,r){if(r||(r=16),t===void 0&&(t=128),t<=0)return"0";for(var o=Math.log(Math.pow(2,t))/Math.log(r),a=2;o===1/0;a*=2)o=Math.log(Math.pow(2,t/a))/Math.log(r)*a;for(var s=o-Math.floor(o),l="",a=0;a<Math.floor(o);a++){var u=Math.floor(Math.random()*r).toString(r);l=u+l}if(s){var h=Math.pow(r,s),u=Math.floor(Math.random()*h).toString(r);l=u+l}var y=parseInt(l,r);return y!==1/0&&y>=Math.pow(2,t)?e(t,r):l};e.rack=function(t,r,o){var a=function(l){var u=0;do{if(u++>10)if(o)t+=o;else throw new Error("too many ID collisions, use more bits");var h=e(t,r)}while(Object.hasOwnProperty.call(s,h));return s[h]=l,h},s=a.hats={};return a.get=function(l){return a.hats[l]},a.set=function(l,u){return a.hats[l]=u,a},a.bits=t||128,a.base=r||16,a}});function qa(n){if(!(this instanceof qa))return new qa(n);n=n||[128,36,1],this._seed=n.length?_1.rack(n[0],n[1],n[2]):n}qa.prototype.next=function(n){return this._seed(n||!0)};qa.prototype.nextPrefixed=function(n,e){var t;do t=n+this.next(!0);while(this.assigned(t));return this.claim(t,e),t};qa.prototype.claim=function(n,e){this._seed.set(n,e||!0)};qa.prototype.assigned=function(n){return this._seed.get(n)||!1};qa.prototype.unclaim=function(n){delete this._seed.hats[n]};qa.prototype.clear=function(){var n=this._seed.hats,e;for(e in n)this.unclaim(e)};const Qc=new qa([32,32,1]);function kl(n){return n?n+"_"+Qc.next():Qc.next()}const Km=n=>({id:"",enabled:!1,modify:!1,state:1,remark:"",version:0,title:"未命名流程",...n,nodes:(n==null?void 0:n.nodes)??sf(),config:(n==null?void 0:n.config)??Du(),appId:(n==null?void 0:n.appId)??"",entryId:(n==null?void 0:n.entryId)??""}),Du=()=>({allowCancel:!1,allowRemind:!0,allowRevoke:!0,sumSync:!1,procResultSendMessage:!0,procResultNotifier:ya.procResultNotifier,procResultMessages:ya.procResultMessages,autoApproveType:""}),w1={StartEvent:{name:"起始节点",actions:[],startConf:{assignFields:[],enabled:!1,operateCondition:[],triggerType:Ii.add}},Approval:{name:"审批节点",countersignType:1,approvalMethod:an.custom,countersignRatio:"50",actions:[{afterSubmit:Sn.close,text:Xn[gt.pass],type:gt.pass},{afterSubmit:Sn.close,text:Xn[gt.reject],type:gt.reject},{afterSubmit:"",text:Xn[gt.next],type:gt.next}],comment:{enabled:!0,required:[]},readPass:!1,batchPass:!1,batchExamine:!1,errType:"2",timeout:{enabled:!1,content:"您有待办未完成，请及时处理。",handleType:"1",limit:"0",notice:[],notifier:[],unit:"D"}},Gateway:{name:"网关"},CC:{name:"抄送节点",actions:[{afterSubmit:Sn.close,text:Xn[gt.print],type:gt.print}]},InclusiveGateway:{name:"并行网关"},Condition:{name:"条件",isElse:!1},SubProcess:{name:"子流程",subFlowAutoSubmit:!0},EndEvent:{name:"结束"}},Ba=n=>{const e={levelId:"",api:!1,flowId:"",nodeId:kl(n),type:n,parentId:"",gatewayId:"",name:"NodeName",fields:[],sign:!1,signature:!1,cc:!1,isElse:!1,startConf:null,condition:[],actions:[],countersignType:bo.orSign,countersignRatio:"50",approvalMethod:an.custom,usePcSummary:!1,leaderChain:{startPointValue:"creator",startValueType:"creator",endPointType:1,endPointValue:0},managerChain:{startPointValue:"creator",startValueType:"creator",endPointType:1,endPointValue:0},comment:{enabled:!0,required:[]},readPass:!1,batchPass:!1,batchExamine:!1,errType:"2",ccUsers:[],errUser:null,transfer:!1,candidates:[],approvers:[],hasDeptCascade:{approverHasDeptCascade:!1,candidateHasDeptCascade:!1,signHasDeptCascade:!1,ccHasDeptCascade:!1},timeout:{enabled:!1,content:"您有待办未完成，请及时处理。",handleType:"1",limit:"0",notice:[],notifier:[],unit:"D"},completeAsync:!1,subFlowFormId:"",subFlowAppId:"",subFlowFlowId:"",subFlowFormName:"",subFlowAutoSubmit:!0,children:[],subFlowVariables:[],signRule:"3",signUsers:[],toDoSendMessage:!0,toDoMessageNotifier:_o.toDoMessageNotifier,toDoMessages:_o.toDoMessages,errUserSendMessage:!1,errUserMessages:[],errUserNotifier:[],timeoutNotifier:[],timeoutMessages:[],autoApproveType:"",submitValidate:[],isSubmitValidate:!1,componentSetting:{componentId:"",reqJson:[]}};return An({...e,...w1[n]})},sf=()=>{const n=Ba(nt.StartEvent),e=Ba(nt.Approval),t=Ba(nt.EndEvent),r=[{...n,parentId:Pi.parentId,levelId:Pi.parentId},{...e,parentId:n.nodeId,levelId:Pi.parentId}];return r.push({...t,parentId:r[r.length-1].nodeId,levelId:Pi.parentId}),r},lf=n=>(n.type===nt.Approval&&(n.approvalMethod||(n.approvalMethod=an.custom),n.hasDeptCascade||(n.hasDeptCascade={approverHasDeptCascade:!1,candidateHasDeptCascade:!1,signHasDeptCascade:!1,ccHasDeptCascade:!1}),n.signRule||(n.signRule="3",n.signUsers=[]),n.leaderChain||(n.leaderChain=Di()),n.managerChain||(n.managerChain=Di())),n),Di=()=>({startPointValue:"creator",startValueType:"creator",endPointType:1,endPointValue:0}),Va=(n,e)=>{let t;return function r(o,a){for(let s=0;s<a.length;s++){const l=a[s];if(o===l.nodeId){t={parentList:a,node:l,nodeIndex:s};break}l.children.length>=1&&r(o,l.children)}}(n,e),t},S1=(n,e)=>{const t=[],r=Va(n,e),o=(r==null?void 0:r.node.children)??[];return function a(s){for(let l=0;l<s.length;l++)if(s[l].children.length>=1){const u=s[l].children[s[l].children.length-1];u.children.length>=1?a(u.children):t.push(u)}else t.push(s[l])}(o),t},Ds=n=>{const e=[],t="0",r=n;return function o(a,s){var l,u;for(let h=0;h<a.length;h++){const{nodeId:y,gatewayId:v,type:b,...f}=a[h];let m=null;v&&(m=S1(v,r).map(w=>w.nodeId).join(","));const g=b===nt.StartEvent?"0":b===nt.Condition||h===0?s:a[h-1].nodeId;e.push({...lf({...f,type:b}),levelId:s,nodeId:y,parentId:m||g,gatewayId:m?v:"",children:[]}),((u=(l=a[h])==null?void 0:l.children)==null?void 0:u.length)>=1&&(a[h].type!=="Condition"&&a[h+1]&&(a[h+1].gatewayId=y),o(a[h].children,a[h].nodeId))}}(n,t),e},Ms=n=>{const e=[],t=new Map;for(const r of n){const o=r.nodeId,a=r.levelId??Pi.parentId,{nodeId:s,parentId:l,gatewayId:u,...h}=r,y={...lf({...h,children:[]}),nodeId:s,parentId:l,gatewayId:u};t.set(o,y);const v=t.get(o);if(a===Pi.parentId)v&&e.push(v);else{const b=t.get(a);v&&(b==null||b.children.push(v))}}return e};function x1(n){const e=[];function t(r){e.push({...r}),r.children&&r.children.length>0&&r.children.forEach(o=>{t(o)})}return t(n),e}function uf(n,e){const t=Ds(n),r=Ms(t);let o=[];const a=t.find(s=>s.nodeId===e);return a&&(o=t.reduceRight((s,l)=>{const u=s[s.length-1];if(u.parentId.indexOf(",")>0){const h=Va(u.gatewayId,r),y=h?x1(h.node).reverse():[];return[...s,...y]}else if(u.parentId===l.nodeId)return[...s,l];return s},[a])),o}const cf=(n,e)=>{var a;const{field:t,helper:r}=n,o=Ui(t.fieldId,e);return!(r!=null&&r.isFormItem)||t.source===Nl.system||jd.includes(t.type)||((a=o==null?void 0:o.parentField)==null?void 0:a.type)===zt.subform},df=(n,e)=>{const{field:t,helper:r}=n,o=t.fieldId,a=e.find(s=>s.id===o);return a&&!dr(a).summary?e.map(l=>dr(l).summary).reduce((l,u)=>u?l+1:l+0,0)>8:!1},ff={label:"摘要",prop:"summary",limitation:["readable"]},Il=Symbol("审批方式"),pf=Symbol("审批异常"),hf=Symbol("审批意见"),mf=Symbol("审批超时"),gf=Symbol("处理方式"),N1=Symbol("通知方式"),nc=Symbol("审批人选项");var go=(n=>(n[n.OrSign=1]="OrSign",n[n.Ratio=3]="Ratio",n[n.Sequence=4]="Sequence",n))(go||{});const ql={[Il]:[{label:"或签（仅一人通过即可）",value:1},{label:"会签（需所有人员通过）",value:2},{label:"会签（按比例通过）",value:3},{label:"依次审批",value:4}],[pf]:[{label:"跳过至下一节点",value:"2"},{label:"转交指定人员",value:"3"}],[mf]:[{label:"天",value:"D"},{label:"小时",value:"H"},{label:"分钟",value:"M"}],[gf]:[{label:"自动提交为通过",value:"1"},{label:"发送通知提醒",value:"3"}],[N1]:[{label:"平台内消息",value:"msg"},{label:"短信",value:"sms"},{label:"邮件",value:"email"}],[hf]:[{label:"通过必填",value:Oi.agree},{label:"拒绝必填",value:Oi.reject},{label:"退回必填",value:Oi.back}],[nc]:[{label:"常规审批",value:an.custom},{label:"按部门主管逐级审批",value:an.departmentLeader},{label:"按直属主管逐级审批",value:an.leader},{label:"自定义",value:an.component}]},vu=(n,e)=>{const r=ql[e].find(o=>o.value===n);return(r==null?void 0:r.label)??""},vf=n=>ar(n).map(e=>{const t=ar(e.conditionSets).map(r=>{const{leftFieldName:o,value:a,dataType:s,type:l}=r;return{field:o??"",value:a??[],type:s,method:l}});return{rel:e.cn,cond:[...t]}}),Pl=(n,e)=>ar(n).map(t=>({cn:Vc.or,conditionSets:t.cond.map(r=>({cn:Vc.and,leftTableName:e,leftFieldName:r.field,type:r.method,dataType:r.type,value:r.value}))})),A1=We({__name:"DropArea",props:{nodeData:{}},setup(n){const e=et(),t=n,r=Mt(),o=et(!1);ml(e,"drop",function(){const u=Zc();u&&l(t.nodeData,u)&&s(t.nodeData,u),o.value=!1}),ml(e,"dragover",u=>{u.preventDefault()}),ml(e,"dragenter",u=>{const h=Zc();h&&(l(t.nodeData,h)!==!0?u.preventDefault():o.value=!0)}),ml(e,"dragleave",u=>{var h;(h=e.value)!=null&&h.contains(u.relatedTarget)||(o.value=!1)});const a=u=>{const h=An(u);return{...h,nodeId:kl(h.type),parentId:""}};function s(u,h){const y=r.nodes,v=u.nodeId,b={...a(h),parentId:v,actions:h.actions.filter(m=>m.type!==gt.back),backRule:"1",backNodes:[],backFlowType:"1"},f=Va(v,y);if(f.node.type===nt.Condition){f.node.children.unshift(b);const g=0+1;f.node.children[g]&&(f.node.children[g].parentId=b.nodeId,f.node.children[g].gatewayId="")}else{const m=f.nodeIndex+1;f.parentList.splice(m,0,b);const g=m+1;f.parentList[g]&&(f.parentList[g].parentId=b.nodeId,f.parentList[g].gatewayId="")}r.deleteNode(h)}function l(u,h){return!(u.nodeId===h.nodeId||u.nodeId===h.parentId)}return(u,h)=>(W(),Ce("div",{ref_key:"dropRef",ref:e},[o.value?(W(),Ce(St,{key:0},[Pe("div",{class:"wf_line"}),Pe("div",{class:"drag_placeholder"})],64)):zn(u.$slots,"default",{key:1},void 0,!0)],512))}});const L1=Ft(A1,[["__scopeId","data-v-bc9e61aa"]]),k1=We({__name:"InsertButton",props:{nodeData:{},status:{type:Boolean,default:!0}},setup(n){const{showPop:e,closePop:t}=ef(),{isEdit:r}=Yr(),o=Mt(),a=_e(()=>{var s;return((s=o.viewConfig.layout)==null?void 0:s.add_show)??!0});return(s,l)=>{const u=Hn;return W(),Ee(L1,{class:"wf-footer wf_draggable",nodeData:s.nodeData},{default:H(()=>[Pe("div",{class:"wf_line"}),E(r)&&s.status&&a.value?Sa((W(),Ee(u,{key:0,icon:E(Ku),circle:"",type:"primary",class:"wf-footer_btn",onClick:l[0]||(l[0]=Dr(h=>E(e)(h,s.nodeData),["stop"]))},null,8,["icon"])),[[E(Vp),E(t)]]):dt("",!0)]),_:1},8,["nodeData"])}}});const yf=Ft(k1,[["__scopeId","data-v-3d9de02e"]]),I1=We({__name:"EditName",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const r=et(!1),o=n,a=t,s=et(),l=sn(o,"modelValue",a),u=()=>{o.disabled||(r.value=!0,Ua(()=>{var h;(h=s.value)==null||h.focus()}))};return e({openInput:u}),(h,y)=>{const v=Tl;return r.value?(W(),Ee(v,{key:1,class:"ml-8",ref_key:"inputFocusRef",ref:s,modelValue:E(l),"onUpdate:modelValue":y[0]||(y[0]=b=>cn(l)?l.value=b:null),onKeyup:y[1]||(y[1]=Up(b=>r.value=!1,["enter"])),placeholder:"请输入流程节点名称",onBlur:y[2]||(y[2]=b=>r.value=!1)},null,8,["modelValue"])):(W(),Ce("div",{key:0,class:"ellipsis ml-8"},[Pe("span",{title:E(l),style:{"font-size":"14px"},onClick:Dr(u,["stop"])},en(E(l)),9,["title","onClick"]),h.disabled?(W(),Ce("div",{key:0,class:"title_mask"})):dt("",!0)]))}}});const rc=Ft(I1,[["__scopeId","data-v-0534cce5"]]),P1=We({__name:"index",props:{errorMessage:{}},setup(n){return(e,t)=>{const r=Yi;return W(),Ce("div",{class:"error_tip"},[j(r,{effect:"dark",placement:"bottom-start"},{content:H(()=>[(W(!0),Ce(St,null,Ut(e.errorMessage,(o,a)=>(W(),Ce("p",{key:a},en(o),1))),128))]),default:H(()=>[Pe("div",{class:"node_error_tip"},[j(Rn,{"icon-class":"Warning"})])]),_:1})])}}});const C1=Ft(P1,[["__scopeId","data-v-ea60cf01"]]),ed=Symbol("批量设置选中节点的字段配置"),F1=n=>{const e=Mt(),t=l=>Al(o.getFormFields()).map(h=>{const y=l.find(v=>v.id===h.fieldId);return y||{id:h.fieldId,name:"",property:"0"}}),r=(l,u)=>{const h=u.map(b=>[...t(b).filter(g=>g.id===l).map(g=>dr(g))]).flat(),y=dr({id:l,name:"",property:"0"}),v=h[0];for(const b in v){const f=v[b];h.every(g=>g[b]===f)?y[b]=f:y[b]=void 0}return y},o=fr({initPosition:{x:0,y:0},visible:!1,nodeTypes:[nt.Approval],selected:[],setSelected(l){o.hasBeenSelected(l)?o.selected=o.selected.filter(u=>u!==l):o.selected.push(l),o.selected.length>=1?o.visible=!0:o.visible=!1},hasBeenSelected(l){return o.selected.includes(l)},getFormFields(){return e.formModel.fields??[]},getProcessFields(){const u=Ds(e.nodes).filter(v=>o.selected.includes(v.nodeId)).map(v=>v.fields);return Al(o.getFormFields()).map(v=>r(v.fieldId,u))},setProcessFields(l){const u=Ds(e.nodes);u.forEach(y=>{if(o.selected.includes(y.nodeId)){const v=t(y.fields);y.fields=v.map(b=>{const f=l.find(m=>m.fieldId===b.id);if(f){const m={...dr(b),...f};return{...b,property:$o(m)}}else return b})}});const h=Ms(u);e.nodes=h},clearAll(){o.selected=[],o.visible=!1}}),{y:a,width:s}=qp(n);return Wn(()=>[a.value,s.value],()=>{const l=s.value-665;o.initPosition.x=l-10,o.initPosition.y=a.value+10}),o},zl=n=>{const e=Ao(ed,void 0);if(e)return e;{const t=F1(n);return Lo(ed,t),t}},D1=We({__name:"BatchFieldButton",props:{nodeData:{}},setup(n){const e=n,t=zl(),r=()=>{t.setSelected(e.nodeData.nodeId)},o=_e(()=>t.hasBeenSelected(e.nodeData.nodeId)),a=_e(()=>o.value?{color:"var(--el-color-primary)",opacity:"1 !important"}:{});return(s,l)=>{const u=za;return W(),Ce("div",{class:"wf-node__select",style:Ji(a.value),onClick:Dr(r,["stop"])},[j(u,{class:"icon"},{default:H(()=>[j(E(zp))]),_:1})],12,["onClick"])}}}),M1=We({__name:"CopyNodeButton",props:{nodeData:{}},setup(n){const e=n,t=Mt(),{isEdit:r}=Yr(),o=_e(()=>{const s=[nt.Approval,nt.Condition];return e.nodeData.type===nt.Condition?!e.nodeData.isElse:s.includes(e.nodeData.type)}),a=()=>{t.copyNode(e.nodeData)};return(s,l)=>o.value&&E(r)?(W(),Ce("div",{key:0,class:"wf-node__copy",onClick:Dr(a,["stop"])},[j(Rn,{"icon-class":"copy",style:{color:"#fff"}})],8,["onClick"])):dt("",!0)}}),E1=We({__name:"DeleteNodeButton",props:{nodeData:{}},setup(n){const e=n,t=Mt(),{isEdit:r}=Yr(),o=_e(()=>!r.value),a=()=>{o.value||t.deleteNode(e.nodeData)};return(s,l)=>{const u=za;return W(),Ce("div",{class:"wf-node__close",onClick:Dr(a,["stop"])},[j(u,null,{default:H(()=>[j(E(Bd))]),_:1})],8,["onClick"])}}}),T1=We({__name:"DragArea",props:{nodeData:{}},setup(n){const e=n,t=()=>{s1(e.nodeData)},r=()=>{l1()},o=_e(()=>c1(e.nodeData));return(a,s)=>(W(),Ce("div",{draggable:o.value,onDragstart:t,onDragend:r},[zn(a.$slots,"default")],40,["draggable"]))}}),O1=We({__name:"NodeTemplate",props:{nodeData:{},isDelete:{type:Boolean,default:!1}},setup(n){const e=n,t=Mt(),{isEdit:r,isSelect:o}=Yr(),{getNodeStatus:a,verifySelectedNode:s}=Qd(),{isCheck:l,setSelectNode:u}=Dh(),h=_e(()=>!r.value),y=_e(()=>r.value?e.isDelete:!1),v=_e({get(){return e.nodeData.name},set(ye){const ie=e.nodeData;ie.name=ye}}),b=_e(()=>{var R;const ye=t.errorModel.errorMap,ie=e.nodeData.nodeId;return Object.values(((R=ye.get(ie))==null?void 0:R.fields)??{})??[]}),f=()=>{if(G.value)return Gr.warning("请先关闭批量设置"),!1;o.value&&s(e.nodeData.nodeId)&&u(e.nodeData.nodeId),!h.value&&t.select(e.nodeData)},m=_e(()=>{const{type:ye,children:ie}=e.nodeData;return!(ye===nt.Approval&&ie.length>=1)}),g=_e(()=>a(t.mode,e.nodeData.nodeId)),S=_e(()=>l(e.nodeData.nodeId)),{hasBeenSelected:w,nodeTypes:A}=zl(),T=_e(()=>r.value&&A.includes(e.nodeData.type)),G=_e(()=>w(e.nodeData.nodeId)),ae=_e(()=>G.value?{border:"1px solid var(--el-color-primary)"}:{});return(ye,ie)=>{const R=za;return W(),Ce("div",{class:wa(["flow_editor wf_draggable",b.value.length>=1?"node_error":""])},[zn(ye.$slots,"node",{},()=>[j(T1,{nodeData:ye.nodeData},{default:H(()=>[Pe("div",{class:"wf-node",style:Ji({...ae.value}),onClick:Dr(f,["stop"])},[Pe("div",{class:wa(["wf-node__header flex-row",g.value])},[zn(ye.$slots,"icon",{},()=>[j(Rn,{"icon-class":"approval"})],!0),j(rc,{class:"flex1",modelValue:v.value,"onUpdate:modelValue":ie[0]||(ie[0]=Z=>v.value=Z),disabled:h.value},null,8,["modelValue","disabled"]),zn(ye.$slots,"header-right",{},void 0,!0),y.value?(W(),Ee(E1,{key:0,"node-data":ye.nodeData},null,8,["node-data"])):dt("",!0),S.value?(W(),Ce("div",{key:1,class:"wf-node__check"},[j(R,{class:"icon"},{default:H(()=>[j(E($p))]),_:1})])):dt("",!0),T.value?(W(),Ee(D1,{key:2,"node-data":ye.nodeData},null,8,["node-data"])):dt("",!0),j(M1,{nodeData:ye.nodeData},null,8,["nodeData"])],2),Pe("div",{class:"wf-node__footer fs_12"},[zn(ye.$slots,"desc",{},()=>[st("desc")],!0)])],12,["onClick"])]),_:3},8,["nodeData"])],!0),b.value.length>=1?(W(),Ee(C1,{key:0,errorMessage:b.value},null,8,["errorMessage"])):dt("",!0),j(yf,{status:m.value,nodeData:ye.nodeData},null,8,["status","nodeData"])],2)}}});const Ki=Ft(O1,[["__scopeId","data-v-9fe3d70e"]]),ac=We({__name:"Branch",props:{nodeData:{}},setup(n){const e=n,t=_e(()=>e.nodeData.children),{isEdit:r}=Yr(),o=_e(()=>e.nodeData.type===nt.ParallelGateway);return(a,s)=>(W(),Ce("div",{class:"wf-route wf_draggable"},[zn(a.$slots,"addBtn"),j(E(Vd),{list:t.value,animation:"300","ghost-class":"editor-draggable-ghost-item",chosenClass:"editor-draggable-ghost-item",handle:".ConditionClass",class:"wf-route__box wf_draggable","item-key":"nodeId",disabled:!E(r)||o.value},{item:H(({element:l,index:u})=>{var h;return[Pe("div",{class:"wf-route__item wf_draggable"},[u===0||u===t.value.length-1?(W(),Ce("div",{key:0,class:"branch_line_mask"})):dt("",!0),Pe("div",{class:"wf_line",style:{top:"0"}}),(W(),Ee(qi(E(Tu)(E(nt).Condition)),ko({nodeData:l,parentType:a.nodeData.type},!o.value&&{sort:u,isLast:u===((h=t.value)==null?void 0:h.length)-1}),null,16,["nodeData","parentType"])),(W(!0),Ce(St,null,Ut(l.children,(y,v)=>(W(),Ee(qi(E(Tu)(y.type)),{key:v,nodeData:y},null,8,["nodeData"]))),128)),u===0||u===t.value.length-1?(W(),Ce("div",{key:1,class:"branch_line_mask"})):dt("",!0)])]}),_:1},8,["list","disabled"]),j(yf,{nodeData:a.nodeData},null,8,["nodeData"])]))}}),Mu=We({__name:"Approver",props:{approvers:{}},setup(n){const e=n,t=Mt(),r=_e(()=>t.getDynamicOptions()),o=_e(()=>{const a=e.approvers.filter(s=>s.id.indexOf("custom@support")===-1);return ar(a).map(s=>t.memberModel.convertToSelector(s))});return(a,s)=>{const l=Od;return W(!0),Ce(St,null,Ut(o.value,(u,h)=>(W(),Ce("span",{key:h},[j(l,{type:"primary"},{default:H(()=>[j(Ud,{"dynamic-options":r.value,id:u.id,"is-icon":!1,type:u.type},null,8,["dynamic-options","id","type"])]),_:2},1024),st(" "+en(h<o.value.length-1?"、":""),1)]))),128)}}}),R1=We({__name:"Details",props:{nodeData:{}},setup(n){const e=n,t=_e(()=>{const a=e.nodeData.countersignType,s=e.nodeData.countersignRatio;return a===bo.countersignPercentage?[`${vu(a,Il)}（${s}%通过）`]:[`${vu(a,Il)}`]}),r=_e(()=>e.nodeData.approvalMethod===an.custom),o=_e(()=>vu(e.nodeData.approvalMethod,nc));return(a,s)=>(W(),Ce("div",null,[r.value?(W(),Ce("div",{key:0},[Pe("span",{class:"Gray_75"},"负责人："),j(Mu,{approvers:a.nodeData.approvers},null,8,["approvers"])])):(W(),Ce("div",{key:1},[Pe("span",null,en(o.value),1)])),(W(!0),Ce(St,null,Ut(t.value,(l,u)=>(W(),Ce("div",{class:"az-ellipsis workflow_content_info",key:u},en(l),1))),128)),a.nodeData.ccUsers&&a.nodeData.ccUsers.length>=1?(W(),Ce("div",{key:2},[Pe("span",{class:"Gray_75"},"抄送："),j(Mu,{approvers:a.nodeData.ccUsers},null,8,["approvers"])])):dt("",!0)]))}});const j1=Ft(R1,[["__scopeId","data-v-9897c816"]]),B1=We({__name:"node",props:{nodeData:{}},setup(n){const e=n,t=_e(()=>{if(e.nodeData.approvalMethod!==an.custom)return!0;const r=e.nodeData.approvers;return Array.isArray(r)&&r.length>=1});return(r,o)=>{var a,s;return W(),Ce(St,null,[j(Ki,{"is-delete":"","node-data":r.nodeData,class:"approvalClass"},{icon:H(()=>[j(Rn,{"icon-class":"approval"})]),desc:H(()=>[t.value?(W(),Ee(j1,{key:0,class:"ptb_5",nodeData:r.nodeData},null,8,["nodeData"])):(W(),Ce("div",{key:1,class:"ptb_5",style:{color:"var(--azt-workflow-text-color)"}}," 请设置审批人 "))]),_:1},8,["node-data"]),((s=(a=r.nodeData)==null?void 0:a.children)==null?void 0:s.length)>=2?(W(),Ee(ac,{key:0,nodeData:r.nodeData,"node-type":E(nt).Condition},null,8,["nodeData","node-type"])):dt("",!0)],64)}}}),V1=Object.freeze(Object.defineProperty({__proto__:null,default:B1},Symbol.toStringTag,{value:"Module"})),U1=We({__name:"node",props:{nodeData:{}},setup(n){return(e,t)=>(W(),Ee(Ki,{"is-delete":"","node-data":e.nodeData,class:"CCClass"},{icon:H(()=>[j(Rn,{"icon-class":"cc",style:{"font-size":"18px"}})]),desc:H(()=>[e.nodeData.ccUsers.length>=1?(W(),Ce("div",{key:1,class:"ptb_5"},[Pe("span",{class:"Gray_75"},"抄送人："),j(Mu,{approvers:e.nodeData.ccUsers},null,8,["approvers"])])):(W(),Ce("div",{key:0,class:"ptb_5",style:{color:"var(--wf-node-font-color29)"}}," 请设置抄送人 "))]),_:1},8,["node-data"]))}}),q1=Object.freeze(Object.defineProperty({__proto__:null,default:U1},Symbol.toStringTag,{value:"Module"})),z1=We({__name:"BooleanCondition",props:{status:{type:Boolean},nodeData:{}},setup(n){const e=n,t=Mt(),{isEdit:r}=Yr(),o=()=>{t.deleteNode(e.nodeData)};return(a,s)=>{const l=za;return W(),Ee(Ki,{nodeData:a.nodeData},{node:H(()=>[Pe("div",{class:"wf-node"},[Pe("div",{class:"wf-node__boolean"},[Pe("span",{class:wa(a.status?"node_success":"node_error")},en(a.nodeData.name),3),E(r)?(W(),Ce("div",{key:0,class:"wf-node__close",onClick:Dr(o,["stop"])},[j(l,null,{default:H(()=>[j(E(Bd))]),_:1})],8,["onClick"])):dt("",!0)])])]),_:1},8,["nodeData"])}}});const $1=Ft(z1,[["__scopeId","data-v-3e570176"]]),W1=We({__name:"node",props:{nodeData:{},sort:{},isLast:{type:Boolean},parentType:{}},setup(n){const e=n,t=Mt(),r=_e(()=>{const o=t.formModel.appEntryId;return Pl(e.nodeData.condition,o)});return Yr(),(o,a)=>E(Rd)(o.nodeData.approveResult)?(W(),Ee($1,{key:0,status:o.nodeData.approveResult,nodeData:o.nodeData},null,8,["status","nodeData"])):(W(),Ee(Ki,{key:1,"is-delete":"","node-data":o.nodeData,class:"ConditionClass"},Wp({icon:H(()=>[j(Rn,{"icon-class":"condition"})]),desc:H(()=>[Pe("div",{class:"bor-top"}),e.nodeData.isElse?(W(),Ce("div",{key:0,class:"ptb_5 Blue_29"}," 当数据不满足同级的其他流转条件时，进入这条连接线下的节点。 ")):!e.nodeData.isElse&&r.value.length>=1?(W(),Ee(Gd,{key:1,class:"ptb_5 Blue_29",condition:r.value},null,8,["condition"])):(W(),Ce("div",{key:2,class:"ptb_5 Blue_29"},en(o.parentType===E(nt).Gateway?"请设置条件":"所有数据可进入该分支"),1)),(W(!0),Ce(St,null,Ut(o.nodeData.approvers,(s,l)=>(W(),Ee(Ud,{class:"ptb_5 Blue_29",key:s.id+l,type:s.type,id:s.id},null,8,["type","id"]))),128))]),_:2},[o.parentType===E(nt).Gateway?{name:"header-right",fn:H(()=>[Pe("span",{class:"sort"},"优先级："+en((o.sort??0)+1),1)]),key:"0"}:void 0]),1032,["node-data"]))}});const H1=Ft(W1,[["__scopeId","data-v-af52dfd9"]]),G1=Object.freeze(Object.defineProperty({__proto__:null,default:H1},Symbol.toStringTag,{value:"Module"})),Y1=We({__name:"node",setup(n){const e=Qd(),t=_e(()=>{const r=e.nodeStatus;return Object.values(r).includes(1)?"#999":"#2778ff"});return(r,o)=>(W(),Ce("div",{class:"flow_node_end",style:Ji([{margin:"0 auto"},{color:t.value}])}," 结束 ",4))}});const J1=Ft(Y1,[["__scopeId","data-v-21048126"]]),X1=Object.freeze(Object.defineProperty({__proto__:null,default:J1},Symbol.toStringTag,{value:"Module"})),K1=We({__name:"node",props:{nodeData:{}},setup(n){const e=Mt(),t=n,r=()=>{e.addBranchNode(t.nodeData)},{isEdit:o}=Yr(),a=_e(()=>o.value);return(s,l)=>(W(),Ee(ac,{"node-data":s.nodeData},{addBtn:H(()=>[a.value?(W(),Ce("div",{key:0,class:"wf-add_branch",onClick:Dr(r,["stop"])},[j(Rn,{"icon-class":"add_branch"})],8,["onClick"])):dt("",!0)]),_:1},8,["node-data"]))}}),Z1=Object.freeze(Object.defineProperty({__proto__:null,default:K1},Symbol.toStringTag,{value:"Module"})),Q1=We({__name:"node",props:{nodeData:{}},setup(n){const e=Mt(),t=n,r=()=>{e.addBranchNode(t.nodeData)},{isEdit:o}=Yr(),a=_e(()=>o.value);return(s,l)=>(W(),Ee(ac,{"node-data":s.nodeData},{addBtn:H(()=>[a.value?(W(),Ce("div",{key:0,class:"wf-add_branch",onClick:Dr(r,["stop"])},[j(Rn,{"icon-class":"add_parallel_branch"})],8,["onClick"])):dt("",!0)]),_:1},8,["node-data"]))}});const e2=Ft(Q1,[["__scopeId","data-v-41c3198d"]]),t2=Object.freeze(Object.defineProperty({__proto__:null,default:e2},Symbol.toStringTag,{value:"Module"})),n2=We({__name:"node",props:{nodeData:{}},setup(n){return(e,t)=>(W(),Ee(Ki,{"node-data":e.nodeData,class:"startClass"},{icon:H(()=>[j(Rn,{"icon-class":"startEvent"})]),desc:H(()=>[Pe("div",{class:"ptb_5"},[Pe("span",{class:"Gray_75"},"发起人："),Pe("span",null,"由表单发布控制")])]),_:1},8,["node-data"]))}}),r2=Object.freeze(Object.defineProperty({__proto__:null,default:n2},Symbol.toStringTag,{value:"Module"})),a2=We({__name:"node",props:{nodeData:{}},setup(n){const e=n,{getFlowNameById:t}=Vl(),r=_e(()=>{const o=e.nodeData,a=t(o.subFlowFlowId);if(a)return`${a==null?void 0:a.title}`});return(o,a)=>(W(),Ee(Ki,{"is-delete":"","node-data":o.nodeData,class:"subProcessClass"},{icon:H(()=>[j(Rn,{"icon-class":"subProcess"})]),desc:H(()=>[o.nodeData.subFlowFormId?(W(),Ce("div",{key:1,class:"ptb_5"},[Pe("span",{class:"Gray_75"},"子流程："),r.value?(W(),Ce("span",{key:0},en(r.value),1)):(W(),Ce("span",{key:1,style:{color:"red"}},"表单已删除/表单不可选择"))])):(W(),Ce("div",{key:0,class:"ptb_5",style:{color:"var(--wf-node-font-color29)"}}," 请设置子流程 "))]),_:1},8,["node-data"]))}}),o2=Object.freeze(Object.defineProperty({__proto__:null,default:a2},Symbol.toStringTag,{value:"Module"})),Eu={},i2=Object.assign({"./Approval/node.vue":V1,"./CC/node.vue":q1,"./Condition/node.vue":G1,"./EndEvent/node.vue":X1,"./Gateway/node.vue":Z1,"./InclusiveGateway/node.vue":t2,"./StartEvent/node.vue":r2,"./SubProcess/node.vue":o2});Object.entries(i2).forEach(([n,e])=>{const t=n.split(qd.sep),r=t[t.length-2];Eu[r]=e});function Tu(n){var t;let e=((t=Eu[n])==null?void 0:t.default)??Eu[n]??null;return zd(e)==="module"&&(e=e==null?void 0:e.default),e||console.error(`你需要查找控件类型为${n}的配置组件, 但是并没有找到, 请检查一下是否存在该类型, 或者组件路径存在问题`),e}const s2={mounted(n){n.onmousedown=function(e){const t="wf_draggable";if(e.target.classList.value.indexOf(t)!==-1){const s=e.clientX,l=e.clientY,u=n.scrollLeft,h=n.scrollTop,y=n.style.scrollBehavior,v=n.style.pointerEvents;n.style.scrollBehavior="auto",n.style.cursor="grabbing",document.onmousemove=function(b){b.preventDefault();const f=b.clientX-s,m=b.clientY-l;n.scrollTo(u-f,h-m),n.style.pointerEvents="none",document.body.style.cursor="grabbing",n.style.cursor="grabbing"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,n.style.scrollBehavior=y,n.style.pointerEvents=v,n.style.cursor="grab",document.body.style.cursor="default"}}}}},l2=[{key:2,label:"已完成",value:"#307AF7"},{key:1,label:"处理中",value:"#EE8217"},{key:0,label:"未完成",value:"#DCDCDC"}],u2=[{key:1,label:"当前所在位置",value:"#EE8217"},{key:2,label:"可选择",value:"#307AF7"},{key:0,label:"不可选",value:"#DCDCDC"}],c2=[gt.submit,gt.submit_add,gt.save,gt.reset],d2=[gt.pass,gt.save,gt.reject,gt.print,gt.next,gt.back,gt.transfer],f2=[gt.print],oc=[{afterSubmit:Sn.close,text:Xn[gt.submit],type:gt.submit,disable:!0,tips:"点击此按钮，将保存用户在此节点中更改的数据，并流转至后续节点。",afterSubmitOptions:[{label:xi[Sn.close],value:Sn.close}]},{afterSubmit:Sn.reset,tips:"点击此按钮，将保存用户在此节点中更改的数据，并触发流程的开始。其后打开新页继续添加下一条数据。",text:Xn[gt.submit_add],type:gt.submit_add,afterSubmitOptions:[{label:xi[Sn.save_last_submit],value:Sn.save_last_submit},{label:xi[Sn.reset],value:Sn.reset}]},{afterSubmit:Sn.close,text:Xn[gt.pass],type:gt.pass,disable:!0,tips:"点击此按钮，将保存用户在此节点中更改的数据，并流转至后续节点。",afterSubmitOptions:[{label:xi[Sn.close],value:Sn.close}]},{afterSubmit:Sn.close,text:Xn[gt.reject],type:gt.reject,tips:"点击此按钮，将保存用户在此节点中更改的数据，流程结束，状态为已拒绝。",afterSubmitOptions:[{label:xi[Sn.close],value:Sn.close}]},{afterSubmit:"",text:Xn[gt.transfer],type:gt.transfer,tips:"待办事项可转交给他人处理，流程停留在此节点。",afterSubmitOptions:[],selector:[],selectorConfig:{label:"转交人员",placeholder:"点击设置转交接收人员",dialogTitle:"转交人员",multiple:!0,tabs:[Nn.org,Nn.memberByOrg,Nn.role,Nn.jobByOrg,Nn.position]}},{afterSubmit:Sn.close,text:Xn[gt.save],type:gt.save,tips:"点击此按钮，将保存用户在此节点中更改的数据，流程停留在此节点。",afterSubmitOptions:[{label:xi[Sn.close],value:Sn.close}]},{afterSubmit:"",text:Xn[gt.back],type:gt.back,tips:"点击此按钮,将保存用户在此节点中更改的数据，流程回退到指定节点。",afterSubmitOptions:[]},{afterSubmit:"",text:Xn[gt.reset],type:gt.reset,tips:"点击此按钮，将重置当前填报内容。",afterSubmitOptions:[]},{afterSubmit:"",text:Xn[gt.next],type:gt.next,tips:"点击【${text}】，跳转到下一条待办数据，本条待办数据不作处理。",afterSubmitOptions:[]},{afterSubmit:"",text:Xn[gt.print],type:gt.print,tips:"点击此按钮，将保存用户在此节点中要更改的数据,引用打印模板进行打印。",afterSubmitOptions:[]}];Oi.agree,Oi.reject,Oi.back;const p2=[{label:"直属主管",value:"0"},{label:"上1级直属主管",value:"1"},{label:"上2级直属主管",value:"2"},{label:"上3级直属主管",value:"3"},{label:"上4级直属主管",value:"4"},{label:"上5级直属主管",value:"5"},{label:"上6级直属主管",value:"6"},{label:"上7级直属主管",value:"7"},{label:"上8级直属主管",value:"8"},{label:"上9级直属主管",value:"9"},{label:"上10级直属主管",value:"10"}],h2=[{label:"直接部门主管",value:"0"},{label:"上1级部门主管",value:"1"},{label:"上2级部门主管",value:"2"},{label:"上3级部门主管",value:"3"},{label:"上4级部门主管",value:"4"},{label:"上5级部门主管",value:"5"},{label:"上6级部门主管",value:"6"},{label:"上7级部门主管",value:"7"},{label:"上8级部门主管",value:"8"},{label:"最高级部门主管",value:"9"}],m2=[{label:"最高级部门主管",value:"0"},{label:"二级部门主管",value:"1"},{label:"三级部门主管",value:"2"},{label:"四级部门主管",value:"3"},{label:"五级部门主管",value:"4"},{label:"六级部门主管",value:"5"},{label:"七级部门主管",value:"6"},{label:"八级部门主管",value:"7"},{label:"九级部门主管",value:"8"},{label:"十级部门主管",value:"9"}];const g2={};function v2(n,e){return W(),Ce("div",{class:"azt_affix"},[zn(n.$slots,"default",{},void 0,!0)])}const bf=Ft(g2,[["render",v2],["__scopeId","data-v-a9048d01"]]),y2=We({__name:"NodeResize",setup(n){const{scale:e,zoomIn:t,zoomOut:r}=Zd();return(o,a)=>{const s=Yd;return W(),Ee(bf,{class:"fixed"},{default:H(()=>[j(s,{wrap:"",spacer:"|"},{default:H(()=>[Pe("div",{class:"affix_item affix_icon"},[j(Rn,{title:"放大","icon-class":"Plus",size:18,onClick:E(t)},null,8,["onClick"]),Pe("span",{class:"ml-10 mr-10",style:{"user-select":"none",width:"30px","text-align":"center"}},en(E(e))+"% ",1),j(Rn,{"icon-class":"Minus",size:18,title:"缩小",onClick:E(r)},null,8,["onClick"])])]),_:1})]),_:1})}}});const b2=Ft(y2,[["__scopeId","data-v-9974e23f"]]),_2=We({__name:"NodeStatus",props:{list:{}},setup(n){return(e,t)=>{const r=Yd;return W(),Ee(bf,{class:"fixed"},{default:H(()=>[j(r,{wrap:"",size:23},{default:H(()=>[Pe("span",{class:"preview_title"},"流程图"),(W(!0),Ce(St,null,Ut(e.list,o=>(W(),Ce("div",{class:"status_cell",key:o.value},[Pe("div",{class:"color",style:Ji({background:o.value})},null,4),Pe("span",{class:"text"},en(o.label),1)]))),128))]),_:1})]),_:1})}}});const td=Ft(_2,[["__scopeId","data-v-4e579be2"]]),w2=We({__name:"FlowTips",setup(n){const e=Mt(),t=_e(()=>e.flowDesigner.enabled??!0);return(r,o)=>t.value?(W(),Ce("span",{key:0,style:{position:"absolute",top:"20px",left:"20px"}}," 流程已发布，如需增删改节点，请修改后重新发布流程。 ")):dt("",!0)}}),S2=We({__name:"Popover",props:{visible:{type:Boolean},insertRef:{},parentData:{}},emits:["update:visible"],setup(n,{emit:e}){const t=n,o=sn(t,"visible",e),a=Mt(),s=[nt.Condition,nt.Gateway,nt.ParallelGateway],l=_e(()=>{var y;let h=((y=a.viewConfig)==null?void 0:y.insertPanels)??[];return a.formModel.appId||(h=h.filter(v=>v.type!==nt.SubProcess)),a.formModel.appEntryId||(h=h.filter(v=>!s.includes(v.type))),h}),u=({type:h})=>{if(t.parentData){const y=t.parentData.type;h===nt.Gateway&&y===nt.Approval?a.addApprovalBranch({type:h,data:t.parentData}):a.beforeInsertNode(h,t.parentData)}else console.error("parentData=>",t.parentData)};return(h,y)=>{const v=Xu;return W(),Ee(v,{visible:E(o),"virtual-ref":h.insertRef,"virtual-triggering":"",placement:"right",trigger:"click"},{default:H(()=>[Pe("div",{class:"popper_add_btn"},[Pe("div",{class:"pop_title"},"添加任务节点"),Pe("div",{class:"pop_body"},[(W(!0),Ce(St,null,Ut(l.value,(b,f)=>(W(),Ce("div",{class:"btn",onClick:m=>u(b),key:f},[j(Rn,{class:"btn_icon","icon-class":b.icon},null,8,["icon-class"]),Pe("span",null,en(b.label),1)],8,["onClick"]))),128))])])]),_:1},8,["visible","virtual-ref"])}}});const x2=Ft(S2,[["__scopeId","data-v-f2c19dfd"]]),$n=We({__name:"form-item",props:{display:{default:"flex"}},setup(n){const e=n,t=_e(()=>({display:e.display}));return(r,o)=>{const a=Na;return W(),Ee(a,ko(r.$attrs,{style:t.value}),{label:H(()=>[zn(r.$slots,"item-label")]),default:H(()=>[zn(r.$slots,"default")]),_:3},16,["style"])}}});function N2(n,e){return uf(n,e??"").filter(o=>(o.type===nt.Approval||o.type===nt.StartEvent)&&o.nodeId!==e).map(o=>({label:o.name,value:o.nodeId}))}function A2(n){return n.sort((e,t)=>t.checked===!1&&e.checked===!0?-1:e.checked===!1&&t.checked===!0?1:0)}const L2=We({__name:"select-tab",props:{active:{},list:{}},emits:["update:active","clickActive"],setup(n,{emit:e}){const t=n,r=e,o=sn(t,"active",r),a=async s=>{o.value=s.__id__,r("clickActive",s)};return(s,l)=>(W(),Ce("div",{class:"select-tab-content right-border select-padding"},[Pe("ul",{class:"dynamic-type"},[(W(!0),Ce(St,null,Ut(s.list,u=>(W(),Ce("li",{class:wa({"dynamic--active":E(o)===u.__id__}),onClick:h=>a(u),key:u.__id__},en(u.__label__),11,["onClick"]))),128))])]))}});const k2=Ft(L2,[["__scopeId","data-v-67b1622c"]]),Ou=(n,e)=>{const t=e??"直属主管";return[{__id__:`${n}@zero`,__label__:t},{__id__:`${n}@first`,__label__:`上一级${t}`},{__id__:`${n}@second`,__label__:`上二级${t}`},{__id__:`${n}@third`,__label__:`上三级${t}`},{__id__:`${n}@fourth`,__label__:`上四级${t}`},{__id__:`${n}@fifth`,__label__:`上五级${t}`}]},I2=(n,e,t)=>t.filter(o=>o.type===n).map(o=>{const a=`${e}@${o.fieldId}`,s=Ou(a,"部门主管");return s[0].__label__="直接"+s[0].__label__,{__label__:o.options.label,__id__:a,isLeaf:!0,children:[...s]}});var yo=(n=>(n.approver="approver",n.support="support",n))(yo||{});const nd=n=>{const e={menuType:wt.custom,dataType:"approver",fieldType:"",fieldId:"",subformType:"",subformId:""};if(!n)return e;const t=n.split("@"),r=t[2];if(r==="subform"){const o=t[3].split("-");e.fieldType="",e.subformType=r,e.subformId=o[0],e.fieldId=o[1]}else e.fieldType=r,e.fieldId=t[3];return e},rd=n=>{if(!n)return;const e=`${n.menuType}@${n.dataType}`;return n.subformId?e+`@subform@${n.subformId}-${n.fieldId}`:e+`@${n.fieldType}@${n.fieldId}`},ad=n=>{const e=`${wt.custom}@support`;return n.indexOf(e)===-1},P2=We({__name:"SingleChoiceLeader",props:{modelValue:{},dynamicList:{},hiddenParams:{}},emits:["update:modelValue","update:hiddenParams"],setup(n,{emit:e}){const t=n,r=e,o=Mt(),{getFieldInfo:a}=Hp(),s=_e(()=>{const b=[zt.input,zt.subform];return va(o.formModel.fields??[],{excludeFilter(f,m){return!b.includes(f.type)}})}),l=wt.custom,u=(b,f)=>b.indexOf(l)!==-1&&b.indexOf(f)!==-1,h=_e({get(){const b=t.modelValue.find(f=>u(f,yo.approver));return nd(b)},set(b){const m=[...t.modelValue.filter(g=>!u(g,yo.approver))].concat(ar(rd(b)));r("update:modelValue",[...m])}}),y=_e(()=>{const b=a(h.value.fieldId,{fields:s.value});return(b==null?void 0:b.field.options.label)??"选择"}),v=_e({get(){const f=t.hiddenParams.map(m=>m.id).filter(m=>u(m,yo.support)).map(m=>nd(m));return ar(f)},set(b){const g=[...t.modelValue.filter(S=>!u(S,yo.support))].concat([...ar(b.map(S=>rd(S?{...S,menuType:l,dataType:yo.support}:void 0)))]).map(S=>({id:S,type:oa.dynamic}));r("update:hiddenParams",g)}});return(b,f)=>{const m=Zu,g=za,S=Yi,w=Na;return W(),Ce("div",null,[j(m,{title:"自定义表单字段（非成员类字段）作为负责人，可用于外部系统协作处理任务",type:"info",center:"","show-icon":"",closable:!1}),Pe("div",{style:{padding:"10px"}},[j(w,{label:"负责人：","label-width":"100px"},{label:H(()=>[st(" 负责人 "),j(S,{effect:"dark",content:"指定负责人字段，建议选择能准确识别负责人身份的字段，如：无重复值的字段",placement:"top-start"},{default:H(()=>[Pe("span",{style:{color:"var(--el-color-primary)","padding-top":"3px"}},[j(g,null,{default:H(()=>[j(E(Ll))]),_:1})])]),_:1})]),default:H(()=>[Pe("div",null,[Pe("p",{class:"Gray_75"},"指定负责人字段，用于分配任务给对应负责人"),j(Sh,{style:{width:"300px"},modelValue:h.value,"onUpdate:modelValue":f[0]||(f[0]=A=>h.value=A),fields:s.value,placeholder:y.value,prop:{fieldId:"fieldId",fieldType:"fieldType",subformId:"subformId"}},null,8,["modelValue","fields","placeholder"])])]),_:1}),j(w,{label:"辅助信息：","label-width":"100px"},{label:H(()=>[st(" 辅助信息 "),j(S,{effect:"dark",content:"选择负责人的辅助信息字段，如：姓名等",placement:"top-start"},{default:H(()=>[Pe("span",{style:{color:"var(--el-color-primary)","padding-top":"3px"}},[j(g,null,{default:H(()=>[j(E(Ll))]),_:1})])]),_:1})]),default:H(()=>[Pe("div",null,[Pe("p",{class:"Gray_75"},"用于补充负责人信息，方便流程跟踪"),j($d,{style:{width:"300px"},modelValue:v.value,"onUpdate:modelValue":f[1]||(f[1]=A=>v.value=A),fields:s.value,placeholder:"选择辅助信息",checkStrictly:"",multiple:"",prop:{fieldId:"fieldId",fieldType:"fieldType",subformId:"subformId"}},null,8,["modelValue","fields"])])]),_:1})])])}}}),C2=We({__name:"MemberSelectorDynamic",props:{dynamicList:{},modelValue:{},hiddenParams:{}},emits:["update:modelValue","update:hiddenParams"],setup(n,{emit:e}){const t=n,r=e,o=sn(t,"modelValue",r),a=sn(t,"hiddenParams",r),s=et(),l=et(""),u=et(!0);Qu(()=>{l.value=t.dynamicList[0].__id__;const m=t.dynamicList.find(g=>g.__id__===l.value);s.value=m});const h=et(),y=m=>{s.value=m,u.value=!1,Ua(()=>{u.value=!0})},v=async()=>{var g;return{records:[...((g=s.value)==null?void 0:g.children)??[]],total:1}},b=_e(()=>{var m,g;return((m=s.value)==null?void 0:m.__id__)===wt.leader?"指定直属主管级别":((g=s.value)==null?void 0:g.__id__)===wt.orgManager?"指定部门主管级别":""}),f=(m,g)=>m.panelType===g;return(m,g)=>{const S=Zu;return W(),Ce("div",{class:"dynamic"},[j(k2,{class:"dynamicTabOptions",active:l.value,"onUpdate:active":g[0]||(g[0]=w=>l.value=w),onClickActive:y,list:m.dynamicList},null,8,["active","list"]),u.value?(W(),Ce("div",{key:0,class:"dynamicContent"},[s.value?(W(),Ce(St,{key:0},[f(s.value,E(ga).secondaryMenu)?(W(),Ce(St,{key:0},[b.value?(W(),Ee(S,{key:0,style:{"flex-shrink":"0"},title:b.value,type:"info",center:"","show-icon":"",closable:!1},null,8,["title"])):dt("",!0),j(_f,{modelValue:E(o),"onUpdate:modelValue":g[1]||(g[1]=w=>cn(o)?o.value=w:null),"hidden-params":E(a),"onUpdate:hiddenParams":g[2]||(g[2]=w=>cn(a)?a.value=w:null),"dynamic-list":s.value.children},null,8,["modelValue","hidden-params","dynamic-list"])],64)):f(s.value,E(ga).singleChoiceLeader)?(W(),Ee(P2,{key:1,modelValue:E(o),"onUpdate:modelValue":g[3]||(g[3]=w=>cn(o)?o.value=w:null),hiddenParams:E(a),"onUpdate:hiddenParams":g[4]||(g[4]=w=>cn(a)?a.value=w:null),dynamicList:s.value.children},null,8,["modelValue","hiddenParams","dynamicList"])):(W(),Ee(Gp,{key:2,modelValue:E(o),"onUpdate:modelValue":g[5]||(g[5]=w=>cn(o)?o.value=w:null),type:E(oa).dynamic,ref_key:"TabPaneWrapperRef",ref:h,class:"select-tab-content",multiple:"",load:v},null,8,["modelValue","type"]))],64)):dt("",!0)])):dt("",!0)])}}});const _f=Ft(C2,[["__scopeId","data-v-7b233873"]]),F2=We({__name:"MemberSelector",props:{selectedValue:{},isDynamic:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},emits:["update:selectedValue","update:visible"],setup(n,{emit:e}){const t=n,r=e,o=Mt(),a=_e(()=>t.isDynamic?o.getDynamicOptions():[]),s=_e(()=>o.memberModel.getDynamicTree(o.formModel.dynamicFields)),l=b=>{r("update:visible",b)},u=_e(()=>{const f=ar(t.selectedValue).filter(m=>ad(m.id)).map(m=>o.memberModel.convertToSelector(m));return t.multiple?f:f[0]??""}),h=b=>{const f=[...ar(b),...ar(y.value)],m=ar(f).map(g=>o.memberModel.convertToProcessMember(g));r("update:selectedValue",t.multiple?m:m[0]??"")},y=_e(()=>ar(t.selectedValue).filter(m=>!ad(m.id)).map(m=>o.memberModel.convertToSelector(m))),v=b=>{const f=[...ar(b),...ar(u.value)],m=ar(f).map(g=>o.memberModel.convertToProcessMember(g));r("update:selectedValue",t.multiple?m:m[0]??"")};return(b,f)=>(W(),Ee(Yp,ko(b.$attrs,{dynamicOptions:a.value,"model-value":u.value,"onUpdate:modelValue":h,"onUpdate:visible":l,multiple:b.multiple,drag:"",class:"w100"}),{dynamic:H(({modelValue:m,updateValue:g})=>[j(_f,{dynamicList:s.value,modelValue:m,hiddenParams:y.value,"onUpdate:hiddenParams":v,"onUpdate:modelValue":S=>g(S)},null,8,["dynamicList","modelValue","hiddenParams","onUpdate:modelValue"])]),_:1},16,["dynamicOptions","model-value","multiple"]))}});const zi=Ft(F2,[["__scopeId","data-v-8b6ad97d"]]),D2=()=>{const n=Mt(),e=fr({visible:!1,node:null,setNode(t){e.node=An(t),e.visible=!0},updateCurrentNode(t){e.node=An(t)},close(){e.node=null,e.visible=!1},updateNode(t){(function r(o,a){for(let s=0;s<a.length;s++){const l=a[s];if(o===l.nodeId){a[s]=An(t);break}l.children.length>=1&&r(o,l.children)}})(t.nodeId,n.nodes)}});return n.on(or.select,t=>e.setNode(t)),e},ic=()=>Ao(Xd,void 0),M2=We({__name:"BackSetting",props:{form:{}},emits:["update:form","visibleChange"],setup(n,{emit:e}){const t=n,r=e,o=Mt(),a=ic(),s=js(t,"form",r),l=[{label:"之前的所有节点",value:"1"},{label:"指定节点",value:"2"}],u=[{label:"重新执行流程",value:"1"},{label:"直达当前节点",value:"2"}];function h(){var b;return uf(o.nodes,((b=a.node)==null?void 0:b.nodeId)??"").filter(f=>{var m;return(f.type===nt.Approval||f.type===nt.StartEvent)&&f.nodeId!==((m=a.node)==null?void 0:m.nodeId)}).map(f=>({label:f.name,value:f.nodeId}))}return Wn(()=>s.value.backRule,y=>{y==="2"&&(s.value.backNodes=[])},{immediate:!0}),(y,v)=>{const b=Aa,f=Na;return W(),Ce(St,null,[j(f,{label:"允许回退的范围",prop:"backRule",style:{"margin-bottom":"4px"}},{default:H(()=>[j(Ei,{modelValue:E(s).backRule,"onUpdate:modelValue":v[0]||(v[0]=m=>E(s).backRule=m),load:l,onVisibleChange:v[1]||(v[1]=m=>r("visibleChange",m))},{default:H(({options:m})=>[(W(!0),Ce(St,null,Ut(m,g=>(W(),Ee(b,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),E(s).backRule==="2"?(W(),Ee(f,{key:0,prop:"backNodes",rules:[{required:!0,message:"请选择指定范围",trigger:"blur"}]},{default:H(()=>[j(Ei,{modelValue:E(s).backNodes,"onUpdate:modelValue":v[2]||(v[2]=m=>E(s).backNodes=m),load:h,multiple:"",onVisibleChange:v[3]||(v[3]=m=>r("visibleChange",m))},{default:H(({options:m})=>[(W(!0),Ce(St,null,Ut(m,g=>(W(),Ee(b,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):dt("",!0),j(f,{label:"回退的数据重新提交后",prop:"text"},{default:H(()=>[j(Ei,{modelValue:E(s).backFlowType,"onUpdate:modelValue":v[4]||(v[4]=m=>E(s).backFlowType=m),load:u,onVisibleChange:v[5]||(v[5]=m=>r("visibleChange",m))},{default:H(({options:m})=>[(W(!0),Ce(St,null,Ut(m,g=>(W(),Ee(b,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})],64)}}});const E2=Ft(M2,[["__scopeId","data-v-83635f0a"]]),T2=We({__name:"checkbox-popover",props:{checkData:{},afterSubmitOptions:{},selectorConfig:{}},emits:["updateCheckData"],setup(n,{emit:e}){const t=n,r=e,o=et(),a=g=>{Ua(()=>{g==="cancel"&&r("updateCheckData",l.value,"cancel"),u.value=!1})},s=async()=>{var g;await((g=o.value)==null?void 0:g.validate()),u.value=!1,r("updateCheckData",l.value,"save")},l=et({...t.checkData}),u=_e({get(){return h.value},set(g){b.value||y.value||(h.value=g)}}),h=et(!1);Wn(h,()=>{h.value&&(l.value={...t.checkData})});const y=et(!1),v=g=>{g?y.value=g:setTimeout(()=>{y.value=g},300)},b=et(!1),f=g=>{g?b.value=g:setTimeout(()=>{b.value=!1},300)},m=_e(()=>{var g;return(g=l.value.tips)==null?void 0:g.replaceAll(/\$\{text\}/g,l.value.text)});return(g,S)=>{const w=Hn,A=Zu,T=Tl,G=Na,ae=Aa,ye=Bs,ie=Yo,R=Xu;return W(),Ce("div",{class:"set_checkbox"},[zn(g.$slots,"Checkbox",{},void 0,!0),j(R,{placement:"bottom",width:340,visible:u.value,"onUpdate:visible":S[5]||(S[5]=Z=>u.value=Z),trigger:"click"},{reference:H(()=>[j(w,{title:"设置",link:"",icon:E(Hi)},null,8,["icon"])]),default:H(()=>[Pe("div",{class:"azt_flex title"},[Pe("span",null,"设置"),j(Rn,{onClick:a,"icon-class":"Close"})]),j(ie,{model:l.value,"label-width":"100px",ref_key:"ruleFormRef",ref:o,"label-position":"top"},{default:H(()=>[l.value.tips?(W(),Ee(A,{key:0,title:m.value,type:"info",style:{"margin-bottom":"20px"},closable:!1},null,8,["title"])):dt("",!0),l.value.type===E(gt).back?(W(),Ee(E2,{key:1,form:l.value,"onUpdate:form":S[0]||(S[0]=Z=>l.value=Z),onVisibleChange:f},null,8,["form"])):dt("",!0),j(G,{label:"按钮名称",prop:"text",rules:[{required:!0,message:"请输入按钮名称",trigger:"blur"}]},{default:H(()=>[j(T,{modelValue:l.value.text,"onUpdate:modelValue":S[1]||(S[1]=Z=>l.value.text=Z),maxlength:6},null,8,["modelValue"])]),_:1}),g.afterSubmitOptions.length>=1?(W(),Ee(G,{key:2,label:"提交后的动作"},{default:H(()=>[j(ye,{modelValue:l.value.afterSubmit,"onUpdate:modelValue":S[2]||(S[2]=Z=>l.value.afterSubmit=Z),onVisibleChange:f},{default:H(()=>[(W(!0),Ce(St,null,Ut(g.afterSubmitOptions,(Z,pe)=>(W(),Ee(ae,{key:pe,label:Z.label,value:Z.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):dt("",!0),g.selectorConfig&&l.value.selector?(W(),Ee(G,{key:3,label:g.selectorConfig.label},{default:H(()=>[j(zi,ko({selectedValue:l.value.selector,"onUpdate:selectedValue":S[3]||(S[3]=Z=>l.value.selector=Z)},g.selectorConfig,{isDynamic:!1,tabs:[E(Nn).memberByOrg],"onUpdate:visible":v}),null,16,["selectedValue","tabs"])]),_:1},8,["label"])):dt("",!0),Pe("div",{style:{"text-align":"right"}},[g.checkData.disable?dt("",!0):(W(),Ee(w,{key:0,onClick:S[4]||(S[4]=Z=>a("cancel"))},{default:H(()=>[st(" 取消 ")]),_:1})),j(w,{type:"primary",onClick:s},{default:H(()=>[st("确定")]),_:1})])]),_:1},8,["model"])]),_:1},8,["visible"])])}}});const O2=Ft(T2,[["__scopeId","data-v-e39dae9e"]]),R2=We({__name:"sortActions",props:{backRule:{},backFlowType:{},backNodes:{},defaultActions:{},actions:{},candidates:{},isEdit:{type:Boolean,default:!0}},emits:["update:actions","update:candidates","update:backRule","update:backFlowType","update:backNodes"],setup(n,{emit:e}){const t=n,r=e,o=sn(t,"actions",r),a=ic(),s=Mt(),l=_e(()=>{var m;const b=((m=a.node)==null?void 0:m.nodeId)??"",f=s.nodes;return N2(f,b).map(g=>g.value)}),h=et([...(()=>{const b=t.actions.map(g=>g.type);return gu(t.defaultActions).sort((g,S)=>{const w=b.indexOf(g.type),A=b.indexOf(S.type),T=w===-1?b.length:w,G=A===-1?b.length:A;return T-G}).map(g=>{const S=t.actions.find(w=>w.type===g.type);return S?(g.text=S.text,g.afterSubmit=S.afterSubmit,S.type===gt.back&&(g.backRule=t.backRule||"1",g.backFlowType=t.backFlowType||"1",g.backNodes=t.backNodes||[...l.value]),S.type===gt.transfer&&(g.selector=t.candidates)):g.type===gt.back&&(g.backRule="1",g.backFlowType="1",g.backNodes=[...l.value]),{...g,checked:!!S}})})()]),y=(b,f)=>{const{type:m,afterSubmit:g,text:S,selector:w,backRule:A,backFlowType:T,backNodes:G}=b;if(f==="save"){const ae=o.value.findIndex(ye=>ye.type===m);switch(ae>=0?o.value.splice(ae,1,{type:m,afterSubmit:g,text:S}):o.value.push({type:m,afterSubmit:g,text:S}),h.value=h.value.map(ye=>ye.type===m?{...b,checked:!0}:ye),m){case gt.transfer:r("update:candidates",w??[]);break;case gt.back:r("update:backRule",A??"1"),r("update:backFlowType",T??"1"),r("update:backNodes",G??[]);break}}else o.value=o.value.filter(ae=>ae.type!==m)},v=()=>{const b=gu(h.value).filter(m=>m.checked),f=b.map(m=>{const{type:g,afterSubmit:S,text:w}=m;return{type:g,afterSubmit:S,text:w}});o.value=gu(f),b.forEach(m=>{const{type:g}=m;g===gt.back&&(r("update:backRule",t.backRule??"1"),r("update:backFlowType",t.backFlowType??"1"),m.backRule=="1"&&r("update:backNodes",[...l.value]))})};return Jp(()=>{A2(h.value)}),(b,f)=>{const m=Os,g=Hn;return W(),Ee(E(Vd),{class:"actions_group",modelValue:h.value,"onUpdate:modelValue":f[1]||(f[1]=S=>h.value=S),"item-key":"type",animation:"500",handle:".actionDrag",filter:".forbid",onUpdate:v},{item:H(({element:S})=>[Pe("div",{class:wa(["action-button",S.checked?"":"forbid"])},[j(m,{style:{width:"106px"},modelValue:S.checked,"onUpdate:modelValue":w=>S.checked=w,label:S.text,disabled:S.disable,onChange:v},null,8,["modelValue","onUpdate:modelValue","label","disabled"]),b.isEdit?(W(),Ee(O2,{key:0,checkData:S,selectorConfig:S.selectorConfig,afterSubmitOptions:S.afterSubmitOptions??[],onUpdateCheckData:f[0]||(f[0]=(w,A)=>y(w,A))},null,8,["checkData","selectorConfig","afterSubmitOptions"])):dt("",!0),S.checked&&b.defaultActions.length>1&&b.isEdit?(W(),Ee(g,{key:1,style:{"margin-left":"8px"},title:"拖动排序",icon:E(Xp),link:"",class:"actionDrag"},null,8,["icon"])):dt("",!0)],2)]),_:1},8,["modelValue"])}}});const sc=Ft(R2,[["__scopeId","data-v-cb706f81"]]),j2=We({__name:"start-actions",props:{actions:{}},emits:["update:actions"],setup(n,{emit:e}){const t=n,r=e,o=_e({get(){return t.actions},set(l){r("update:actions",l)}}),a=_e(()=>oc.filter(u=>c2.includes(u.type)).map(u=>({disable:!0,...u}))),s=_e(()=>o.value.length>=2);return(l,u)=>{const h=Yi;return s.value?(W(),Ee($n,{key:0,label:"操作设置",prop:"actions"},{default:H(()=>[j(h,{class:"box-item",effect:"dark",content:"请前往拓展功能设置操作按钮",placement:"top-start"},{default:H(()=>[Pe("div",null,[j(sc,{actions:o.value,"onUpdate:actions":u[0]||(u[0]=y=>o.value=y),"default-actions":a.value,isEdit:!1},null,8,["actions","default-actions"])])]),_:1})]),_:1})):dt("",!0)}}}),B2={name:"fields"},V2=We({...B2,props:{fieldsValue:{},usePcSummary:{type:Boolean},hideEdit:{type:Boolean,default:!1},hideRequired:{type:Boolean,default:!0},hideDownload:{type:Boolean,default:!0},hideReadable:{type:Boolean,default:!1}},emits:["update:fieldsValue","update:usePcSummary","change"],setup(n,{emit:e}){const t=n,r=e,o=Mt(),a=_e(()=>o.formModel.fields??[]),s=et("pc"),l=[{label:"与电脑端显示一致",value:!0},{label:"自定义",value:!1}],u=sn(t,"usePcSummary",r);Wn(()=>u.value,m=>{m==null&&(u.value=!0)},{immediate:!0});const h=_e(()=>{const m=new Map;return function g(S){let w=0;const A=S.length;for(w;w<A;w++){const T=S[w];m.set(T.fieldId,T.options.label),"fields"in T&&Array.isArray(T.fields)&&T.fields.length>=1&&g(T.fields)}}(a.value),m}),y=_e({get(){return t.fieldsValue.map(m=>dr(m))},set(m){const g=t.fieldsValue.map(G=>dr(G)[s.value==="pc"?"summary":"summary_h5"]),S=m.map(G=>G[s.value==="pc"?"summary":"summary_h5"]);ku(S,g)||r("change",m);let w=0,A=0;const T=m.map(G=>(w>9&&(G.summary=!1),A>9&&(G.summary_h5=!1),G.summary&&w++,G.summary_h5&&A++,{id:G.fieldId,name:h.value.get(G.fieldId)??"",property:$o(G)}));r("update:fieldsValue",T)}}),v=[{...ff,disable(m,g){return df({field:m,helper:g},t.fieldsValue)},ignoreFieldAuth:(m,g)=>cf({field:m,helper:g},a.value)}],b=[{label:"摘要",prop:"summary_h5",ignoreFieldAuth(m,g){var w;const S=Ui(m.fieldId,a.value);return!(g!=null&&g.isFormItem)||m.source===Nl.system||jd.includes(m.type)||((w=S==null?void 0:S.parentField)==null?void 0:w.type)===zt.subform},disable(m,g){const S=m.fieldId,w=t.fieldsValue.find(A=>A.id===S);return w&&!dr(w).summary_h5?t.fieldsValue.map(T=>dr(T).summary_h5).reduce((T,G)=>G?T+1:T+0,0)>8:!1},limitation:["readable"]}],f=_e(()=>{var g;const m=(g=y.value.filter(S=>S.readable))==null?void 0:g.map(S=>S.fieldId);return a.value.filter(S=>S.type!=="subform"&&m.includes(S.fieldId))});return(m,g)=>{const S=Kp,w=Ol,A=Aa,T=Na,G=Yo;return W(),Ce("div",null,[j(w,{modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=ae=>s.value=ae),class:"mb-8"},{default:H(()=>[j(S,{label:"pc",value:"pc"},{default:H(()=>[st("电脑端")]),_:1}),j(S,{label:"h5",value:"h5"},{default:H(()=>[st("移动端")]),_:1})]),_:1},8,["modelValue"]),s.value==="pc"?(W(),Ee(Cu,{key:0,modelValue:y.value,"onUpdate:modelValue":g[1]||(g[1]=ae=>y.value=ae),fields:a.value,isRequired:m.hideRequired,hideReadable:m.hideReadable,firstLabelWidth:189,auths:v,isDownload:m.hideDownload,hideEdit:m.hideEdit,auth:{isTemplate:!0}},null,8,["modelValue","fields","isRequired","hideReadable","isDownload","hideEdit"])):(W(),Ce(St,{key:1},[j(G,null,{default:H(()=>[j(T,{label:"移动端摘要"},{default:H(()=>[j(Ei,{modelValue:E(u),"onUpdate:modelValue":g[2]||(g[2]=ae=>cn(u)?u.value=ae:null),placeholder:"请选择",class:"w100",load:l},{default:H(({options:ae})=>[(W(!0),Ce(St,null,Ut(ae,(ye,ie)=>(W(),Ee(A,{key:ie,label:ye.label,value:ye.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),m.usePcSummary?dt("",!0):(W(),Ee(Cu,{key:0,modelValue:y.value,"onUpdate:modelValue":g[3]||(g[3]=ae=>y.value=ae),fields:f.value,firstLabelWidth:189,auths:b,hideReadable:m.hideReadable,hideEdit:m.hideEdit,isDownload:m.hideDownload,auth:{isTemplate:!0}},null,8,["modelValue","fields","hideReadable","hideEdit","isDownload"]))],64))])}}});const Es=Ft(V2,[["__scopeId","data-v-41784aa5"]]),U2=We({__name:"start-syncSummary",emits:["change"],setup(n,{emit:e}){const t=e,r=Mt(),o=_e({get(){return r.config.sumSync??!1},set(a){r.config.sumSync=a,t("change",a)}});return(a,s)=>{const l=za,u=Yi,h=Wi;return W(),Ce("div",{class:"set-summary"},[Pe("span",{class:"name"},"统一摘要"),j(u,{effect:"dark",content:"打开时其他节点的摘要同起始节点，如需更改，可在各节点设置",placement:"top"},{default:H(()=>[Pe("span",{class:"icon"},[j(l,null,{default:H(()=>[j(E(Ll))]),_:1})])]),_:1}),j(h,{style:{"margin-left":"20px"},modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=y=>o.value=y),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])])}}});const q2=Ft(U2,[["__scopeId","data-v-c109b49d"]]),z2={name:"triggerCondition"},$2=We({...z2,props:{modelValue:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,o=Mt(),a=_e(()=>o.formModel.fields??[]),s=_e(()=>o.formModel.appEntryId),l={enabled:!1,triggerType:Ii.add,assignFields:[],operateCondition:[]},u=_e(()=>t.modelValue??An(l)),h=_e({get(){return u.value},set(A){A.enabled?r("update:modelValue",A):r("update:modelValue",An(l))}}),y=_e({get(){return h.value.enabled},set(A){h.value={...h.value,enabled:A}}}),v=A=>{h.value.assignFields=[]},b=_e(()=>Pl(u.value.operateCondition,s.value)),f=et([]),m=et(!1),g=et(),S=async()=>{var A;await((A=g.value)==null?void 0:A.validate()),f.value.length<1?h.value.operateCondition=[]:h.value.operateCondition=vf(f.value)??[],m.value=!1},w=()=>{var A;f.value=Pl(((A=h.value)==null?void 0:A.operateCondition)??[],s.value)??[],m.value=!0};return(A,T)=>{const G=za,ae=Yi,ye=Wi,ie=Xi,R=Zp,Z=Hn,pe=Go;return h.value?(W(),Ce("div",{key:0},[j($n,{label:"条件启动"},{"item-label":H(()=>[Pe("div",{style:{display:"flex","justify-content":"left","align-items":"center"}},[st(" 条件启动 "),j(ae,{effect:"dark",content:"根据条件启动流程",placement:"top-start"},{default:H(()=>[j(G,{style:{color:"var(--el-color-primary)"}},{default:H(()=>[j(E(Ll))]),_:1})]),_:1})])]),default:H(()=>[Pe("div",{style:{"min-width":"500px"}},[j(ye,{modelValue:y.value,"onUpdate:modelValue":T[0]||(T[0]=D=>y.value=D),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"]),j(R,null,{default:H(()=>[Sa(Pe("div",null,[Pe("div",{class:"fs-14"},[Pe("b",null,"触发方式")]),Pe("div",{class:"Gray_75 fs-12"},"满足以下条件的数据进入该流程"),Pe("div",null,[j(ie,{modelValue:h.value.triggerType,"onUpdate:modelValue":T[1]||(T[1]=D=>h.value.triggerType=D),label:E(Ii).add,onChange:v,size:"large"},{default:H(()=>[st(" 新增数据时 ")]),_:1},8,["modelValue","label"])]),Pe("div",null,[j(ie,{modelValue:h.value.triggerType,"onUpdate:modelValue":T[2]||(T[2]=D=>h.value.triggerType=D),label:E(Ii).update,size:"large"},{default:H(()=>[st(" 更新数据时 ")]),_:1},8,["modelValue","label"]),j(R,null,{default:H(()=>[Sa(Pe("div",null,[Pe("div",{class:"Gray_75 fs-12 pl-22"}," 指定的字段有更新时启动流程；未指定时更新任一字段都启动流程 "),j($d,{style:{width:"100%"},class:"pl-22",modelValue:h.value.assignFields,"onUpdate:modelValue":T[3]||(T[3]=D=>h.value.assignFields=D),fields:a.value,placeholder:"选择触发字段",checkStrictly:"",multiple:""},null,8,["modelValue","fields"])],512),[[Ho,h.value.triggerType===E(Ii).update]])]),_:1})]),Pe("div",{class:"fs-14 mt-10"},[Pe("b",null,"触发条件")]),j(Z,{icon:E(Ku),onClick:w},{default:H(()=>[st("设置筛选条件")]),_:1},8,["icon"]),b.value.length>=1?(W(),Ee(Gd,{key:0,class:"mt-10",style:{width:"100%",color:"var(--el-color-primary)"},condition:b.value},null,8,["condition"])):dt("",!0)],512),[[Ho,y.value]])]),_:1})])]),_:1}),j(pe,{modelValue:m.value,"onUpdate:modelValue":T[6]||(T[6]=D=>m.value=D),title:"筛选条件",width:"800px"},{footer:H(()=>[Pe("span",{class:"dialog-footer"},[j(Z,{onClick:T[5]||(T[5]=D=>m.value=!1)},{default:H(()=>[st("取消")]),_:1}),j(Z,{type:"primary",onClick:S},{default:H(()=>[st("确定")]),_:1})])]),default:H(()=>[m.value?(W(),Ee(Jd,{key:0,condition:f.value,"onUpdate:condition":T[4]||(T[4]=D=>f.value=D),conditionForm:s.value,isDataType:"",ref_key:"fieldConditionRef",ref:g},null,8,["condition","conditionForm"])):dt("",!0)]),_:1},8,["modelValue"])])):dt("",!0)}}});const W2=Ft($2,[["__scopeId","data-v-f03e8d0b"]]),po={type:nt.Approval,approvers:[],transfer:!1,candidates:[],ccUsers:[],errUser:null,autoApproveType:So.SAME_SPONSOR,countersignType:bo.orSign,signUsers:[],toDoSendMessage:!0,toDoMessageNotifier:Wc.toDoMessageNotifier,toDoMessages:Wc.toDoMessages,errUserSendMessage:!1,errUserMessages:[],errUserNotifier:[],timeoutNotifier:[],timeoutMessages:[],signRule:"3",cc:!1,sign:!1,nodeId:"",fields:[],parentId:"",name:"审批节点",approvalMethod:an.custom,countersignRatio:"50",actions:[{afterSubmit:Sn.close,text:Xn[gt.pass],type:gt.pass},{afterSubmit:Sn.close,text:Xn[gt.reject],type:gt.reject},{afterSubmit:"",text:Xn[gt.next],type:gt.next}],comment:{enabled:!0,required:[]},batchExamine:!1,usePcSummary:!1,errType:"2",timeout:{enabled:!1,content:"您有待办未完成，请及时处理。",handleType:"1",limit:"0",notice:[],notifier:[],unit:"D"},leaderChain:{startPointValue:"creator",startValueType:"creator",endPointType:1,endPointValue:0},managerChain:{startPointValue:"creator",startValueType:"creator",endPointType:1,endPointValue:0},hasDeptCascade:{approverHasDeptCascade:!1,candidateHasDeptCascade:!1,signHasDeptCascade:!1,ccHasDeptCascade:!1},children:[]},H2={resetEntry(n){return{...n,fields:[],timeout:po.timeout,timeoutNotifier:po.timeoutNotifier,timeoutMessages:po.timeoutMessages,toDoMessageNotifier:po.toDoMessageNotifier,toDoMessages:po.toDoMessages,errUserNotifier:po.errUserNotifier,errUserMessages:po.errUserMessages,errUserSendMessage:po.errUserSendMessage}}},G2=Object.freeze(Object.defineProperty({__proto__:null,default:H2},Symbol.toStringTag,{value:"Module"})),Y2={resetEntry(n){return{...n,fields:[]}}},J2=Object.freeze(Object.defineProperty({__proto__:null,default:Y2},Symbol.toStringTag,{value:"Module"})),X2={resetEntry(n){return{...n,condition:[]}}},K2=Object.freeze(Object.defineProperty({__proto__:null,default:X2},Symbol.toStringTag,{value:"Module"})),Z2={resetEntry(n){return n}},Q2=Object.freeze(Object.defineProperty({__proto__:null,default:Z2},Symbol.toStringTag,{value:"Module"})),e5={resetEntry(n){return n}},t5=Object.freeze(Object.defineProperty({__proto__:null,default:e5},Symbol.toStringTag,{value:"Module"})),n5={resetEntry(n){return n}},r5=Object.freeze(Object.defineProperty({__proto__:null,default:n5},Symbol.toStringTag,{value:"Module"})),a5={type:nt.StartEvent,nodeId:"",fields:[],parentId:"",name:"起始节点",actions:[],startConf:{assignFields:[],enabled:!1,operateCondition:[],triggerType:Ii.add},usePcSummary:!1,api:!1,children:[]},o5={resetEntry(n){const{nodeId:e,parentId:t,name:r}=n;return{...a5,nodeId:e,parentId:t,name:r}}},i5=Object.freeze(Object.defineProperty({__proto__:null,default:o5},Symbol.toStringTag,{value:"Module"})),s5={resetEntry(n){return{...n,subFlowVariables:[],subFlowFormId:""}}},l5=Object.freeze(Object.defineProperty({__proto__:null,default:s5},Symbol.toStringTag,{value:"Module"})),wf={},u5=Object.assign({"../../nodeControls/nodes/Approval/helper.ts":G2,"../../nodeControls/nodes/CC/helper.ts":J2,"../../nodeControls/nodes/Condition/helper.ts":K2,"../../nodeControls/nodes/EndEvent/helper.ts":Q2,"../../nodeControls/nodes/Gateway/helper.ts":t5,"../../nodeControls/nodes/InclusiveGateway/helper.ts":r5,"../../nodeControls/nodes/StartEvent/helper.ts":i5,"../../nodeControls/nodes/SubProcess/helper.ts":l5});Object.entries(u5).forEach(([n,e])=>{const t=n.split(qd.sep);t.pop();const r=t.pop();let o=e;o=o.default||o,wf[r]=o});function c5(n){let e=wf[n]??null;return zd(e)==="module"&&(e=e==null?void 0:e.default),e||console.error(`你需要查找控件类型为${n}的配置组件, 但是并没有找到, 请检查一下是否存在该类型, 或者组件路径存在问题`),e}const d5=n=>xa.value.request.post(`${xa.value.SYSTEMURL}/workflow/save`,n),Zm=n=>xa.value.request.get(`${xa.value.SYSTEMURL}/workflow/getById`,{params:n}),f5=n=>xa.value.request.post(`${xa.value.SYSTEMURL}/workflow/publish`,n),Qm=n=>xa.value.request.get(`${xa.value.SYSTEMURL}/workflow/list`,{params:n}),p5=n=>xa.value.request.get(`${xa.value.SYSTEMURL}/flowPage/checkFlowHasRun`,{params:{flowId:n}}),h5=We({__name:"AssociationForm",props:{entryId:{}},emits:["update:entryId"],setup(n,{emit:e}){const t=n,r=e,o=Mt(),a=ic(),s=_e({get(){return t.entryId},set(u){t.entryId?vo.confirm("更换表单，与表单相关的配置将失效!","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p5(o.flowDesigner.flowId).then(h=>{if(h)Gr.error("该流程已投入使用，不可更换表单");else{const v=Ds(o.nodes).map(f=>{var S;const m=c5(f.type),g=(S=m==null?void 0:m.resetEntry)==null?void 0:S.call(m,An(f));return An(g??f)}),b=Ms(v);a.updateCurrentNode(v[0]),o.resetNodeByEntry(b),o.resetProcessConfigByEntry(),r("update:entryId",u)}})}):r("update:entryId",u)}}),l=Vl();return(u,h)=>{const y=Aa,v=Bs,b=Na;return W(),Ee(b,{label:"关联表单",required:""},{default:H(()=>[j(v,{modelValue:s.value,"onUpdate:modelValue":h[0]||(h[0]=f=>s.value=f),filterable:"",placeholder:"请选择关联表单",style:{width:"240px"}},{default:H(()=>[(W(!0),Ce(St,null,Ut(E(l).entryList,f=>(W(),Ee(y,{key:f.id,label:f.name,value:f.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})}}}),m5={name:"startEvent"},g5=We({...m5,props:{processData:{}},emits:["update:processData"],setup(n,{emit:e}){const t=n,r=e,o=et(),a=sn(t,"processData",r),s=et("basic"),l=Mt(),u=_e(()=>l.config.sumSync),h=_e(()=>{var m;return((m=l.viewConfig.getDataPanelsByStartNodeType())==null?void 0:m.showRelatedForm)??!1}),y=_e({get(){return l.formModel.appEntryId},set(m){l.formModel.renderEntry(m)}}),v=m=>{if(m){const g=a.value.fields.map(S=>dr(S));b(g)}},b=m=>{if(u.value){const g=Fu(m,"fieldId"),S=l.formModel.fieldsVisible.map(w=>({id:w.fieldId,name:w.options.label,property:g[w.fieldId]?$o(g[w.fieldId]):"0"}));(function w(A){const T=A.length;for(let G=0;G<T;G++){const ae=A[G];if([nt.Approval].includes(ae.type)){ae.usePcSummary=A==null?void 0:A[0].usePcSummary;const ie=Fu(ae.fields,"id"),R=S.map(Z=>{const pe=dr(Z),D=ie[pe.fieldId];if(D){const M=dr(D);return M.summary=pe?pe.summary:!1,M.summary_h5=pe?pe.summary_h5:!1,M.summary&&(M.readable=!0),{id:M.fieldId,name:Z.name,property:$o(M)}}else{const M={fieldId:pe.fieldId,readable:pe.summary,writeable:!1,required:!1,summary:pe.summary,summary_h5:pe.summary_h5};return{id:pe.fieldId,name:Z.name,property:$o(M)}}});ae.fields=R}ae.children.length>=1&&w(ae.children)}})(l.nodes),Gr.success("摘要同步成功")}},f=_e(()=>{const m=t.processData.fields.map(S=>dr(S));return Object.values(m).some(S=>S.readable===!0||S.writeable===!0)});return(m,g)=>{const S=Rl,w=jl,A=Yo;return W(),Ee(A,{ref_key:"ruleFormRef",ref:o,"label-position":"left",model:E(a),"label-width":"100px"},{default:H(()=>[j(w,{modelValue:s.value,"onUpdate:modelValue":g[7]||(g[7]=T=>s.value=T)},{default:H(()=>[j(S,{label:"基础设置",name:"basic"},{default:H(()=>[h.value?(W(),Ee(h5,{key:0,"entry-id":y.value,"onUpdate:entryId":g[0]||(g[0]=T=>y.value=T)},null,8,["entry-id"])):dt("",!0),j(W2,{modelValue:E(a).startConf,"onUpdate:modelValue":g[1]||(g[1]=T=>E(a).startConf=T)},null,8,["modelValue"]),j(j2,{actions:E(a).actions,"onUpdate:actions":g[2]||(g[2]=T=>E(a).actions=T)},null,8,["actions"])]),_:1}),j(S,{label:"表单权限",name:"form",lazy:""},{default:H(()=>[j(q2,{onChange:v}),f.value?(W(),Ee(Es,{key:0,"fields-value":E(a).fields,"onUpdate:fieldsValue":g[3]||(g[3]=T=>E(a).fields=T),usePcSummary:E(a).usePcSummary,"onUpdate:usePcSummary":g[4]||(g[4]=T=>E(a).usePcSummary=T),onChange:b},null,8,["fields-value","usePcSummary"])):(W(),Ee(Es,{key:1,"fields-value":E(a).fields,"onUpdate:fieldsValue":g[5]||(g[5]=T=>E(a).fields=T),usePcSummary:E(a).usePcSummary,"onUpdate:usePcSummary":g[6]||(g[6]=T=>E(a).usePcSummary=T),onChange:b,hideEdit:!0,hideRequired:!1,hideDownload:!1,hideReadable:!0},null,8,["fields-value","usePcSummary"]))]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])}}}),v5={name:"actions"},od=We({...v5,props:{backRule:{},backFlowType:{},backNodes:{},actions:{},candidates:{}},emits:["update:actions","update:candidates","update:backRule","update:backFlowType","update:backNodes"],setup(n,{emit:e}){const t=n,r=e,o=_e({get(){return t.actions},set(y){r("update:actions",y)}}),a=sn(t,"backRule",r),s=sn(t,"backFlowType",r),l=sn(t,"backNodes",r),u=sn(t,"candidates",r),h=_e(()=>oc.filter(y=>d2.includes(y.type)));return(y,v)=>(W(),Ee($n,{label:"操作设置"},{default:H(()=>[j(sc,{actions:o.value,"onUpdate:actions":v[0]||(v[0]=b=>o.value=b),candidates:E(u),"onUpdate:candidates":v[1]||(v[1]=b=>cn(u)?u.value=b:null),backRule:E(a),"onUpdate:backRule":v[2]||(v[2]=b=>cn(a)?a.value=b:null),backFlowType:E(s),"onUpdate:backFlowType":v[3]||(v[3]=b=>cn(s)?s.value=b:null),backNodes:E(l),"onUpdate:backNodes":v[4]||(v[4]=b=>cn(l)?l.value=b:null),"default-actions":h.value},null,8,["actions","candidates","backRule","backFlowType","backNodes","default-actions"])]),_:1}))}}),lc=We({__name:"dict-radio-item",props:{modelValue:{},dictKey:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=sn(t,"modelValue",e),a=_e(()=>ql[t.dictKey]);return(s,l)=>{const u=Xi,h=Ol;return W(),Ee(h,ko({modelValue:E(o),"onUpdate:modelValue":l[0]||(l[0]=y=>cn(o)?o.value=y:null)},s.$attrs),{default:H(()=>[(W(!0),Ce(St,null,Ut(a.value,y=>(W(),Ee(u,{key:y.label,label:y.value},{default:H(()=>[st(en(y.label),1)]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue"])}}}),y5="creator@creator",b5=We({__name:"leader",props:{modelValue:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,o=_e(()=>t.modelValue??{startPointValue:"creator",startValueType:"creator",endPointType:1,endPointValue:0}),a=Mt(),{getProcessSelectType:s}=a.memberModel,l=_e(()=>{var m;const y=[{label:"发起人",value:y5}],v=[zt.member,zt.memberSingle],b=((m=a.formModel)==null?void 0:m.fields)??[],f=va(b,{excludeFilter(g,S){return!v.includes(g.type)}}).map(g=>{const S=s(g.type)??g.type;return{label:g.options.label,value:`${S}@${g.fieldId}`}});return y.concat(f)}),u=_e({get(){const{startValueType:y,startPointValue:v}=o.value;return`${y}@${v}`},set(y){const v=y.split("@");v&&v.length>=2&&(o.value.startValueType=v[0],o.value.startPointValue=v[1],r("update:modelValue",{...o.value}))}}),h=_e({get(){return o.value.endPointValue},set(y){o.value.endPointValue=y,r("update:modelValue",{...o.value})}});return(y,v)=>{const b=Aa,f=Bs;return W(),Ce(St,null,[j($n,{label:"审批起点",required:""},{default:H(()=>[j(f,{style:{width:"255px"},modelValue:u.value,"onUpdate:modelValue":v[0]||(v[0]=m=>u.value=m),placeholder:"请选择审批起点"},{default:H(()=>[(W(!0),Ce(St,null,Ut(l.value,m=>(W(),Ee(b,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Pe("span",{class:"ml-10"},"的直属主管")]),_:1}),j($n,{label:"审批终点",required:""},{default:H(()=>[Pe("span",{class:"mr-10"},"从起点逐级往上到"),j(f,{style:{width:"255px"},modelValue:h.value,"onUpdate:modelValue":v[1]||(v[1]=m=>h.value=m),placeholder:"请选择审批终点"},{default:H(()=>[(W(!0),Ce(St,null,Ut(E(p2),m=>(W(),Ee(b,{key:m.value,label:m.label,value:Number(m.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})],64)}}});const _5=Ft(b5,[["__scopeId","data-v-94e6c0eb"]]),w5="creator@creator",S5=We({__name:"departmentLeader",props:{modelValue:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,o=_e(()=>t.modelValue??{startPointValue:"creator",startValueType:"creator",endPointType:1,endPointValue:0});Qu(()=>{const f=o.value,m=(f.endPointValue??0).toString();f.endPointType===1?y.value=m:v.value=m});const a=Mt(),{getProcessSelectType:s}=a.memberModel,l=_e(()=>{const f=[{label:"发起人",value:w5}],m=[zt.member,zt.department,zt.memberSingle,zt.departmentSingle],g=a.formModel.fields??[],S=va(g,{excludeFilter(w,A){return!m.includes(w.type)}}).map(w=>{const A=s(w.type)??w.type;return{label:w.options.label,value:`${A}@${w.fieldId}`}});return f.concat(S)}),u=_e({get(){const{startValueType:f,startPointValue:m}=o.value;return`${f}@${m}`},set(f){const m=f.split("@");m&&m.length>=2&&(o.value.startValueType=m[0],o.value.startPointValue=m[1],r("update:modelValue",{...o.value}))}}),h=_e({get(){return o.value.endPointType},set(f){const m=f===1?y.value:v.value;r("update:modelValue",{...o.value,endPointType:f,endPointValue:Number(m)})}}),y=et("0"),v=et("0"),b=f=>{r("update:modelValue",{...o.value,endPointValue:Number(f)})};return(f,m)=>{const g=Aa,S=Bs,w=Xi;return W(),Ce("div",null,[j($n,{label:"审批起点",required:""},{default:H(()=>[j(S,{style:{width:"255px"},modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=A=>u.value=A),placeholder:"请选择审批起点"},{default:H(()=>[(W(!0),Ce(St,null,Ut(l.value,A=>(W(),Ee(g,{key:A.value,label:A.label,value:A.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Pe("span",{class:"ml-10"},"的直接部门主管")]),_:1}),j($n,{label:"审批终点",required:""},{default:H(()=>[Pe("div",{class:"approval-flex"},[j(w,{class:"reset-radio",modelValue:h.value,"onUpdate:modelValue":m[1]||(m[1]=A=>h.value=A),label:1},{default:H(()=>[Pe("span",{class:"mr-10"},"从起点逐级往上到")]),_:1},8,["modelValue"]),j(S,{modelValue:y.value,"onUpdate:modelValue":m[2]||(m[2]=A=>y.value=A),disabled:h.value!==1,onChange:b,style:{width:"255px"},placeholder:"请选择审批终点"},{default:H(()=>[(W(!0),Ce(St,null,Ut(E(h2),A=>(W(),Ee(g,{key:A.value,label:A.label,value:A.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),Pe("div",{class:"approval-flex"},[j(w,{class:"reset-radio",modelValue:h.value,"onUpdate:modelValue":m[3]||(m[3]=A=>h.value=A),label:2},{default:H(()=>[Pe("span",{class:"mr-10"},"通讯录的")]),_:1},8,["modelValue"]),j(S,{modelValue:v.value,"onUpdate:modelValue":m[4]||(m[4]=A=>v.value=A),disabled:h.value!==2,onChange:b,style:{width:"255px"},placeholder:"请选择审批终点"},{default:H(()=>[(W(!0),Ce(St,null,Ut(E(m2),A=>(W(),Ee(g,{key:A.value,label:A.label,value:A.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])])]),_:1})])}}});const x5=Ft(S5,[["__scopeId","data-v-c20b0991"]]),N5={name:"approvers"},A5=We({...N5,props:{selectApprovers:{},formData:{}},emits:["update:selectApprovers","update:formData"],setup(n,{emit:e}){const t=n,r=e,o=sn(t,"selectApprovers",r),a=Hc("appId"),s=Hc("appEntryId"),l=sn(t,"formData",r),u=_e({get(){return t.formData.approvalMethod??an.custom},set(f){l.value.approvalMethod=f}}),h=_e(()=>u.value===an.custom),y=f=>{f!==an.custom&&(o.value=[],l.value.countersignType=go.OrSign),f!==an.leader&&(l.value.leaderChain=Di(),l.value.managerChain=Di()),f!==an.departmentLeader&&(l.value.leaderChain=Di(),l.value.managerChain=Di())};Wn(()=>u.value,f=>{f===an.component&&(l.value.componentSetting||(l.value.componentSetting={componentId:"",reqJson:[]}))}),Wn(()=>{var f;return(f=l.value.componentSetting)==null?void 0:f.componentId},f=>{l.value.componentSetting.reqJson=[]});const v=_e(()=>{switch(u.value){case an.custom:return rf(l).approvers;case an.component:return[{required:!0,message:"请选择组件",trigger:"change"}];default:return[]}}),b=_e(()=>{switch(u.value){case an.custom:return"approvers";case an.component:return"componentSetting.componentId";default:return""}});return(f,m)=>(W(),Ce("div",null,[j($n,{label:"审批人","show-message":h.value,required:!0,rules:v.value,prop:b.value},{default:H(()=>[j(lc,{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=g=>u.value=g),dictKey:E(nc),onChange:y},null,8,["modelValue","dictKey"]),h.value?(W(),Ee(zi,{key:0,isAll:"",isCooperation:"","is-child-org":"",childOrg:E(l).hasDeptCascade.approverHasDeptCascade,"onUpdate:childOrg":m[1]||(m[1]=g=>E(l).hasDeptCascade.approverHasDeptCascade=g),selectedValue:E(o),"onUpdate:selectedValue":m[2]||(m[2]=g=>cn(o)?o.value=g:null),placeholder:"请选择审批人",multiple:""},null,8,["childOrg","selectedValue"])):dt("",!0),u.value===E(an).component?(W(),Ce(St,{key:1},[j(xh,{modelValue:E(l).componentSetting.componentId,"onUpdate:modelValue":m[3]||(m[3]=g=>E(l).componentSetting.componentId=g),scenario:E(Qp).work_flow},null,8,["modelValue","scenario"]),E(l).componentSetting.componentId?(W(),Ee(Nh,{key:E(l).componentSetting.componentId,modelValue:E(l).componentSetting.reqJson,"onUpdate:modelValue":m[4]||(m[4]=g=>E(l).componentSetting.reqJson=g),style:{width:"300px"},componentId:E(l).componentSetting.componentId,appId:E(a),currentEntryInfo:{entryId:E(s)}},null,8,["modelValue","componentId","appId","currentEntryInfo"])):dt("",!0)],64)):dt("",!0)]),_:1},8,["show-message","rules","prop"]),u.value===E(an).leader&&E(l).leaderChain?(W(),Ee(_5,{key:0,modelValue:E(l).leaderChain,"onUpdate:modelValue":m[5]||(m[5]=g=>E(l).leaderChain=g)},null,8,["modelValue"])):dt("",!0),u.value===E(an).departmentLeader&&E(l).managerChain?(W(),Ee(x5,{key:1,modelValue:E(l).managerChain,"onUpdate:modelValue":m[6]||(m[6]=g=>E(l).managerChain=g)},null,8,["modelValue"])):dt("",!0)]))}});const id=Ft(A5,[["__scopeId","data-v-ce054083"]]),Sf=We({__name:"dict-select-item",props:{modelValue:{},dictKey:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=sn(t,"modelValue",e),a=_e(()=>ql[t.dictKey]);return(s,l)=>{const u=Aa,h=Bs;return W(),Ee(h,ko({modelValue:E(o),"onUpdate:modelValue":l[0]||(l[0]=y=>cn(o)?o.value=y:null)},s.$attrs),{default:H(()=>[zn(s.$slots,"default",eh(th({selects:a.value})),()=>[(W(!0),Ce(St,null,Ut(a.value,(y,v)=>(W(),Ee(u,{key:v,label:y.label,value:y.value},null,8,["label","value"]))),128))])]),_:3},16,["modelValue"])}}}),L5={name:"countersignType"},k5=We({...L5,props:{selectApprovers:{},formData:{},countersignType:{},countersignRatio:{}},emits:["update:countersignType","update:countersignRatio"],setup(n,{emit:e}){const t=n,r=e,o=sn(t,"countersignType",r),a=_e({get(){return Number(t.countersignRatio)},set(v){r("update:countersignRatio",v.toString())}}),s=_e(()=>o.value===3),l=_e(()=>{const v=t.selectApprovers;return v.length>0?v.some(function(f,m){return f.type!==v[0].type}):!1}),u=v=>{const b=t.formData.approvalMethod;return b===an.custom?v.value===go.Sequence&&l.value:b===an.departmentLeader?v.value===go.Ratio||v.value===go.Sequence:v.value!==go.Sequence},h=_e(()=>t.formData.approvalMethod===an.departmentLeader),y=_e(()=>t.formData.approvalMethod!==an.leader);return Wn(()=>l.value,()=>{l.value&&o.value===go.Sequence&&(o.value=1)}),(v,b)=>{const f=za,m=Yi,g=Aa,S=Ah;return y.value?(W(),Ee($n,{key:0,label:"审批方式",prop:"countersignType",rules:E(af).countersignType},{default:H(()=>[h.value?(W(),Ce("div",{key:0,class:"Gray_75"}," 当同一层级内有多个审批人时 ")):dt("",!0),j(Sf,{modelValue:E(o),"onUpdate:modelValue":b[0]||(b[0]=w=>cn(o)?o.value=w:null),style:{width:"100%"},"dict-key":E(Il),placeholder:"请选择审批方式"},{default:H(({selects:w})=>[(W(!0),Ce(St,null,Ut(w,(A,T)=>(W(),Ee(g,{key:T+A.value,label:A.label,value:A.value,disabled:u(A)},{default:H(()=>[Pe("div",{class:"option"},[st(en(A.label)+" ",1),A.value===E(go).Sequence&&l.value?(W(),Ee(m,{key:0,effect:"dark",content:"同类型审批人才可使用依次审批",placement:"right"},{default:H(()=>[j(f,{class:"tip"},{default:H(()=>[j(E(nh))]),_:1})]),_:1})):dt("",!0)])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","dict-key"]),Sa(j(S,{style:{padding:"0 12px"},modelValue:a.value,"onUpdate:modelValue":b[1]||(b[1]=w=>a.value=w),"format-tooltip":w=>w+"%",step:10,"show-stops":""},null,8,["modelValue","format-tooltip"]),[[Ho,s.value]])]),_:1},8,["rules"])):dt("",!0)}}});const sd=Ft(k5,[["__scopeId","data-v-97b7888c"]]),I5=We({__name:"dict-checkbox-item",props:{modelValue:{},dictKey:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=sn(t,"modelValue",e),a=_e(()=>ql[t.dictKey]);return(s,l)=>{const u=Os,h=Ju;return W(),Ee(h,ko({modelValue:E(o),"onUpdate:modelValue":l[0]||(l[0]=y=>cn(o)?o.value=y:null)},s.$attrs),{default:H(()=>[(W(!0),Ce(St,null,Ut(a.value,y=>(W(),Ee(u,{key:y.label,label:y.value},{default:H(()=>[st(en(y.label),1)]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue"])}}}),P5={name:"comment"},C5=We({...P5,props:{comment:{}},emits:["update:comment"],setup(n,{emit:e}){const o=sn(n,"comment",e),a=_e(()=>o.value.enabled);return(s,l)=>{const u=Wi;return W(),Ee($n,{label:"审批意见"},{default:H(()=>[Pe("div",{class:"comment-class"},[j(u,{"inline-prompt":"",modelValue:E(o).enabled,"onUpdate:modelValue":l[0]||(l[0]=h=>E(o).enabled=h),"active-text":"开","inactive-text":"关"},null,8,["modelValue"]),Sa(j(I5,{dictKey:E(hf),modelValue:E(o).required,"onUpdate:modelValue":l[1]||(l[1]=h=>E(o).required=h)},null,8,["dictKey","modelValue"]),[[Ho,a.value]])])]),_:1})}}});const ld=Ft(C5,[["__scopeId","data-v-50207f7c"]]),F5={name:"QuickApproval"},ud=We({...F5,props:{batchExamine:{type:Boolean}},emits:["update:batchExamine"],setup(n,{emit:e}){const o=sn(n,"batchExamine",e);return(a,s)=>{const l=Os;return W(),Ee($n,{label:"快速审批"},{default:H(()=>[j(l,{modelValue:E(o),"onUpdate:modelValue":s[0]||(s[0]=u=>cn(o)?o.value=u:null)},{default:H(()=>[st("批量处理")]),_:1},8,["modelValue"])]),_:1})}}}),D5={name:"errUser"},M5=We({...D5,props:{errType:{},errUser:{},formData:{}},emits:["update:errType","update:errUser"],setup(n,{emit:e}){const t=n,r=e,o=sn(t,"errType",r),a=sn(t,"errUser",r),s=_e(()=>o.value==="3");return(l,u)=>(W(),Ee($n,{label:"审批人异常",rules:E(nf)(l.formData).errUser,prop:"errUser"},{default:H(()=>[Pe("div",{class:"err-user"},[Pe("div",{class:"tip"},"当审批人设置错误、调离或无审核人时的处理方式"),j(lc,{modelValue:E(o),"onUpdate:modelValue":u[0]||(u[0]=h=>cn(o)?o.value=h:null),"dict-key":E(pf)},null,8,["modelValue","dict-key"]),s.value?(W(),Ee(zi,{key:0,tabs:[E(Nn).memberByOrg,E(Nn).jobByOrg],"is-dynamic":!1,selectedValue:E(a),"onUpdate:selectedValue":u[1]||(u[1]=h=>cn(a)?a.value=h:null),placeholder:"请选择指定人员"},null,8,["tabs","selectedValue"])):dt("",!0)])]),_:1},8,["rules"]))}});const cd=Ft(M5,[["__scopeId","data-v-f78b8721"]]),E5=We({__name:"TimeoutConfig",props:{form:{},entryId:{}},emits:["update:form"],setup(n,{emit:e}){const t=n,r=e,o=et(!1),a=et({timeoutNotifier:[],timeoutMessages:[]}),s=et(),l=et(),u=async()=>{var m,g,S;await Promise.all([(g=(m=s.value)==null?void 0:m.ruleFormRef)==null?void 0:g.validate(),(S=l.value)==null?void 0:S.validate()]),r("update:form",{...t.form,...a.value}),o.value=!1},h=[{id:"charger",name:"当前审批人",children:[{id:"charger",name:"当前审批人"}]}],{dynamicOptions:y}=ec({entryId:t.entryId,extraDynamicOptions:h}),v=_e(()=>{if(!t.form.timeoutMessages)return"";const m={timeoutNotifier:t.form.timeoutNotifier.map(A=>({id:A.id,type:A.type})),timeoutMessages:t.form.timeoutMessages};let g="";const S=Gh(m);g+=S?"默认消息内容，发送":"自定义消息内容，发送";const w=t.form.timeoutMessages.map(A=>`【${Ml(Number(A.notice),El)}】`);return g+=w.join("、"),g+"给 "}),b=_e({get(){const m=a.value.timeoutMessages.map(g=>({channel:Number(g.notice),title:g.title,rawContent:g.content}));return{selectors:a.value.timeoutNotifier,msgBase:m}},set(m){a.value.timeoutMessages=m.msgBase.map(g=>({notice:g.channel,title:g.title,content:g.rawContent})),a.value.timeoutNotifier=m.selectors??[]}});Wn(()=>o.value,m=>{m&&(a.value.timeoutNotifier=t.form.timeoutNotifier,a.value.timeoutMessages=t.form.timeoutMessages)},{immediate:!0});const f=m=>m<t.form.timeoutNotifier.length-1?" 、":"";return(m,g)=>{const S=Gi,w=Hn,A=Go;return W(),Ce("div",null,[zn(m.$slots,"default",{visible:o.value},()=>[j(S,{onClick:g[0]||(g[0]=T=>o.value=!0),icon:E(Hi),type:"primary",underline:!1},{default:H(()=>[st(en(v.value)+" ",1),(W(!0),Ce(St,null,Ut(m.form.timeoutNotifier,(T,G)=>(W(),Ce(St,{key:G},[j(Ul,{member:T,dynamicOptions:[{id:"charger",name:"当前审批人 | 当前审批人"},...E(y)]},null,8,["member","dynamicOptions"]),st(" "+en(f(G)),1)],64))),128))]),_:1},8,["icon"])],!0),j(A,{title:"消息设置-超时",modelValue:o.value,"onUpdate:modelValue":g[3]||(g[3]=T=>o.value=T),width:"640px"},{footer:H(()=>[j(w,{onClick:g[2]||(g[2]=T=>o.value=!1)},{default:H(()=>[st("取 消")]),_:1}),j(w,{type:"primary",onClick:u},{default:H(()=>[st("确 定")]),_:1})]),default:H(()=>[j(Yu,{model:a.value,ref_key:"formRef",ref:s},{default:H(()=>[j(Bl,{modelValue:b.value,"onUpdate:modelValue":g[1]||(g[1]=T=>b.value=T),ref_key:"messageRemindConfigRef",ref:l,entryId:m.entryId,"extra-dynamic-options":h},null,8,["modelValue","entryId"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const T5=Ft(E5,[["__scopeId","data-v-9812bf09"]]),O5={name:"timeout"},R5=We({...O5,props:{timeout:{},formData:{},entryId:{}},emits:["update:timeout","update:formData"],setup(n,{emit:e}){const t=n,r=e,o=sn(t,"timeout",r),a=js(t,"formData",r),s=_e(()=>o.value.handleType==="3");return Wn(()=>o.value.handleType,l=>{l==="3"&&(a.value.timeoutNotifier=Fi.timeoutNotifier,a.value.timeoutMessages=Fi.timeoutMessages)}),(l,u)=>{const h=Wi,y=Tl,v=rh;return W(),Ce("div",null,[j($n,{label:"审批超时处理"},{default:H(()=>[j(h,{"inline-prompt":"",modelValue:E(o).enabled,"onUpdate:modelValue":u[0]||(u[0]=b=>E(o).enabled=b),"active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),_:1}),Sa(j(v,{shadow:"hover","body-style":{padding:"10px"},style:{margin:"10px 0"}},{default:H(()=>[j($n,{label:"处理截止时间",prop:"timeout.limit",rules:E(tf)(l.formData.timeout).limit},{default:H(()=>[Pe("div",{style:{display:"flex","flex-direction":"column"}},[Pe("div",{class:"tip"},"流程到达该节点后多长时间为超时"),j(y,{modelValue:E(o).limit,"onUpdate:modelValue":u[2]||(u[2]=b=>E(o).limit=b),modelModifiers:{number:!0},type:"number",style:{width:"230px"},placeholder:"请输入处理截止时间"},{append:H(()=>[j(Sf,{style:{width:"80px"},modelValue:E(o).unit,"onUpdate:modelValue":u[1]||(u[1]=b=>E(o).unit=b),"dict-key":E(mf)},null,8,["modelValue","dict-key"])]),_:1},8,["modelValue"])])]),_:1},8,["rules"]),j($n,{label:"处理方式"},{default:H(()=>[j(lc,{modelValue:E(o).handleType,"onUpdate:modelValue":u[3]||(u[3]=b=>E(o).handleType=b),"dict-key":E(gf)},null,8,["modelValue","dict-key"])]),_:1}),s.value?(W(),Ee($n,{key:0},{default:H(()=>[j(T5,{form:E(a),"onUpdate:form":u[4]||(u[4]=b=>cn(a)?a.value=b:null),entryId:l.entryId},null,8,["form","entryId"])]),_:1})):dt("",!0)]),_:1},512),[[Ho,E(o).enabled]])])}}});const dd=Ft(R5,[["__scopeId","data-v-cce3480d"]]),fd=We({name:"autoApproveType",__name:"autoApproveType",props:{autoApproveType:{}},emits:["update:autoApproveType"],setup(n,{emit:e}){const o=sn(n,"autoApproveType",e),a=_e({get(){return o.value?o.value.split(","):[]},set(s){o.value=(s==null?void 0:s.join(","))??""}});return(s,l)=>{const u=Os,h=Ju;return W(),Ee($n,{label:"自动审批规则"},{default:H(()=>[j(h,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=y=>a.value=y)},{default:H(()=>[j(u,{label:E(So).SAME_SPONSOR},{default:H(()=>[st(" 审批人与发起人相同时，自动审批通过 ")]),_:1},8,["label"]),j(u,{label:E(So).SAME_PREVIOUS},{default:H(()=>[st(" 与上一节点审批人相同时，自动审批通过 ")]),_:1},8,["label"]),j(u,{label:E(So).SAME_ANY},{default:H(()=>[st(" 与前面任一节点审批人节点相同时，自动审批通过 ")]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})}}}),j5=[{name:od.name,node:od},{name:id.name,node:id},{name:sd.name,node:sd},{name:Es.name,node:Es},{name:ld.name,node:ld},{name:ud.name,node:ud},{name:cd.name,node:cd},{name:dd.name,node:dd},{name:fd.name,node:fd}],xf=new Map,B5=()=>{j5.forEach(n=>{xf.set(n.name,n.node)})};B5();const V5=We({__name:"setting-item-wrapper",props:{icon:{},title:{}},setup(n){return(e,t)=>(W(),Ce("div",{class:"advanced_item-wrapper"},[Pe("div",{class:"item_img_box"},[Pe("div",{class:wa(["img",e.icon])},[j(Rn,{"icon-class":e.icon},null,8,["icon-class"])],2)]),Pe("div",{class:"item_config"},[Pe("div",{class:"item_info_box"},[Pe("div",{class:"info"},[Pe("div",{class:"title"},en(e.title),1)])]),Pe("div",{class:"item_default"},[zn(e.$slots,"default",{},void 0,!0)])])]))}});const U5=Ft(V5,[["__scopeId","data-v-dd262d0b"]]),q5=We({__name:"ToDoSendMessageConfig",props:{form:{},entryId:{}},emits:["update:form"],setup(n,{emit:e}){const t=n,r=e,o=et(!1),a=et({toDoMessageNotifier:[],toDoMessages:[]}),s=et(),l=et(),u=async()=>{var f,m,g;await Promise.all([(m=(f=s.value)==null?void 0:f.ruleFormRef)==null?void 0:m.validate(),(g=l.value)==null?void 0:g.validate()]),r("update:form",{...t.form,...a.value}),o.value=!1},h=_e(()=>{if(!t.form.toDoMessages)return"";const f={toDoMessageNotifier:t.form.toDoMessageNotifier,toDoMessages:t.form.toDoMessages};let m="";const g=Wh(f);m+=g?"默认消息内容，发送":"自定义消息内容，发送";const S=t.form.toDoMessages.map(w=>`【${Ml(Number(w.notice),El)}】`);return m+=S.join("、"),m+"给 "}),y=[{id:"charger",name:"当前审批人",children:[{id:"charger",name:"当前审批人"}]}];Wn(()=>o.value,f=>{f&&(a.value.toDoMessageNotifier=t.form.toDoMessageNotifier.map(m=>({id:m.id,type:m.type})),a.value.toDoMessages=t.form.toDoMessages)},{immediate:!0});const v=_e({get(){const f=a.value.toDoMessages.map(m=>({channel:Number(m.notice),title:m.title,rawContent:m.content}));return{selectors:a.value.toDoMessageNotifier,msgBase:f}},set(f){a.value.toDoMessages=f.msgBase.map(m=>({notice:m.channel,title:m.title,content:m.rawContent})),a.value.toDoMessageNotifier=f.selectors??[]}}),b=f=>f<t.form.toDoMessageNotifier.length-1?" 、":"";return(f,m)=>{const g=Gi,S=Hn,w=Go;return W(),Ce("div",null,[zn(f.$slots,"default",{visible:o.value},()=>[j(g,{onClick:m[0]||(m[0]=A=>o.value=!0),icon:E(Hi),type:"primary",underline:!1},{default:H(()=>[st(en(h.value)+" ",1),(W(!0),Ce(St,null,Ut(f.form.toDoMessageNotifier,(A,T)=>(W(),Ce(St,{key:A},[j(Ul,{member:A,"dynamic-options":[{id:"charger",name:"当前审批人 | 当前审批人"}]},null,8,["member"]),st(" "+en(b(T)),1)],64))),128))]),_:1},8,["icon"])],!0),j(w,{title:"消息设置-待办",modelValue:o.value,"onUpdate:modelValue":m[3]||(m[3]=A=>o.value=A),width:"640px"},{footer:H(()=>[j(S,{onClick:m[2]||(m[2]=A=>o.value=!1)},{default:H(()=>[st("取 消")]),_:1}),j(S,{type:"primary",onClick:u},{default:H(()=>[st("确 定")]),_:1})]),default:H(()=>[j(Yu,{model:a.value,ref_key:"formRef",ref:s},{default:H(()=>[j(Bl,{modelValue:v.value,"onUpdate:modelValue":m[1]||(m[1]=A=>v.value=A),disabledMemberSelect:"",ref_key:"messageRemindConfigRef",ref:l,entryId:f.entryId,"extra-dynamic-options":y},null,8,["modelValue","entryId"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const z5=Ft(q5,[["__scopeId","data-v-d292b822"]]),$5=We({__name:"ErrUserMessageConfig",props:{form:{},entryId:{}},emits:["update:form"],setup(n,{emit:e}){const t=n,r=e,o=et(!1),a=et({errUserNotifier:[],errUserMessages:[]}),s=et(),l=async()=>{var b;await Promise.all([(b=s.value)==null?void 0:b.validate()]),r("update:form",{...t.form,...a.value}),o.value=!1},{dynamicOptions:u}=ec({entryId:t.entryId}),h=_e(()=>{if(!t.form.errUserMessages)return"";const b={errUserNotifier:t.form.errUserNotifier.map(w=>({id:w.id,type:w.type})),errUserMessages:t.form.errUserMessages};let f="";const m=Hh(b);f+=m?"默认消息内容，发送":"自定义消息内容，发送";const g=t.form.errUserMessages.map(w=>`【${Ml(Number(w.notice),El)}】`);f+=g.join("、");const S=t.form.errUserNotifier.length>=1?"、":"";return f+"给 应用管理员"+S}),y=_e({get(){const b=a.value.errUserMessages.map(f=>({channel:Number(f.notice),title:f.title,rawContent:f.content}));return{selectors:a.value.errUserNotifier,msgBase:b}},set(b){a.value.errUserMessages=b.msgBase.map(f=>({notice:f.channel,title:f.title,content:f.rawContent})),a.value.errUserNotifier=b.selectors??[]}});Wn(()=>o.value,b=>{b&&(a.value.errUserNotifier=t.form.errUserNotifier,a.value.errUserMessages=t.form.errUserMessages)},{immediate:!0});const v=b=>b<t.form.errUserNotifier.length-1?" 、":"";return(b,f)=>{const m=Gi,g=Hn,S=Go;return W(),Ce("div",null,[zn(b.$slots,"default",{visible:o.value},()=>[j(m,{onClick:f[0]||(f[0]=w=>o.value=!0),icon:E(Hi),type:"primary",underline:!1},{default:H(()=>[st(en(h.value)+" ",1),(W(!0),Ce(St,null,Ut(b.form.errUserNotifier,(w,A)=>(W(),Ce(St,{key:A},[j(Ul,{member:w,dynamicOptions:[...E(u)]},null,8,["member","dynamicOptions"]),st(" "+en(v(A)),1)],64))),128))]),_:1},8,["icon"])],!0),j(S,{title:"消息设置-审批人异常",modelValue:o.value,"onUpdate:modelValue":f[3]||(f[3]=w=>o.value=w),width:"640px"},{footer:H(()=>[j(g,{onClick:f[2]||(f[2]=w=>o.value=!1)},{default:H(()=>[st("取 消")]),_:1}),j(g,{type:"primary",onClick:l},{default:H(()=>[st("确 定")]),_:1})]),default:H(()=>[j(Bl,{modelValue:y.value,"onUpdate:modelValue":f[1]||(f[1]=w=>y.value=w),ref_key:"messageRemindConfigRef",ref:s,entryId:b.entryId,memberSelectRequired:!1},{"selectors-prefix":H(()=>[st("应用管理员，")]),_:1},8,["modelValue","entryId"])]),_:1},8,["modelValue"])])}}});const W5=Ft($5,[["__scopeId","data-v-c4051d84"]]),H5=We({__name:"FormValidate",props:{modelValue:{},formulaProp:{}},emits:["update:modelValue"],setup(n,{emit:e}){const o=js(n,"modelValue",e),a=et(0),s=et(!1),l=h=>{var y;s.value=!0,a.value=h??((y=o.value)==null?void 0:y.length)??0},u=h=>{var v;const y={...h,clientId:h.clientId||oh((v=o.value)==null?void 0:v.map(b=>b.clientId))};o.value||(o.value=[]),o.value[a.value]=y};return(h,y)=>{var b;const v=Gi;return W(),Ce("div",null,[j(Lh,{text:"设置校验规则",isIcon:!1,onClick:y[0]||(y[0]=f=>l())}),j(kh,{style:{"margin-top":"10px"},modelValue:E(o)??[],isDeleteConfirm:"",deleteConfirmTitle:"确定要删除该校验规则?",itemKey:"clientId"},{default:H(({element:f,index:m})=>[Pe("div",{style:{flex:"1",width:"1px","line-height":"initial",display:"flex","align-items":"center"}},[j(ah,{content:f.name},null,8,["content"])]),j(v,{style:{"font-size":"16px"},onClick:g=>l(m),icon:E(Hi),underline:!1},null,8,["onClick","icon"])]),_:1},8,["modelValue"]),j(_h,{modelValue:s.value,"onUpdate:modelValue":y[1]||(y[1]=f=>s.value=f),onSubmit:u,data:(b=E(o))==null?void 0:b[a.value],formulaProp:h.formulaProp,customErrorAfterActionOptions:[{label:"中断提交",value:E(Uc).stop},{label:"给出提示,允许继续提交",value:E(Uc).inquiries}]},null,8,["modelValue","data","formulaProp","customErrorAfterActionOptions"])])}}}),G5=We({__name:"SubmitRule",props:{disabled:{type:Boolean},modelValue:{}},emits:["update:disabled","update:modelValue"],setup(n,{emit:e}){const t=Mt(),r=n,o=e,a={icon:"rule",title:"节点提交校验规则",hint:"满足条件的数据允许提交或给出提示"},s=sn(r,"disabled",o),l=sn(r,"modelValue",o);Wn(()=>s.value,()=>{s.value||(l.value=[])});const u=_e(()=>({group:[{id:t.formModel.appEntryId,hideTitleBeInput:!0,fieldOptions:{fields:t.formModel.fields,isSubformId:!0}}]}));return(h,y)=>(W(),Ee(Hr,{modelValue:E(s),"onUpdate:modelValue":y[1]||(y[1]=v=>cn(s)?s.value=v:null),info:a},{default:H(()=>[j(H5,{formulaProp:u.value,style:{width:"100%"},modelValue:E(l),"onUpdate:modelValue":y[0]||(y[0]=v=>cn(l)?l.value=v:null)},null,8,["formulaProp","modelValue"])]),_:1},8,["modelValue"]))}}),Y5={name:"Approval"},J5=We({...Y5,props:{processData:{}},emits:["update:processData"],setup(n,{expose:e,emit:t}){const r=n,o=t,a=Mt(),s=_e(()=>a.formModel.appEntryId),l=et(),u=js(r,"processData",o),h=et("basic"),y=["approvers","countersignType","actions","comment","QuickApproval","autoApproveType","errUser","timeout"],v=S=>xf.get(S),b={transfer:{icon:"transfer",title:"转交",hint:"转交给他人办理，依然在当前节点"},sign:{icon:"sign",title:"加签",hint:"开启加签后，审批人可以选择一个或者多个成员进行审批"},signature:{icon:"signature",title:"签章",hint:"开启签章后，审批页面为签章页面"},cc:{icon:"cc",title:"抄送",hint:"选择抄送给谁，可以在我的抄送中查看"},messageRemind_todo:{icon:"",title:"待办",hint:"待办任务，发送消息提醒当前审批人"},messageRemind_error:{icon:"",title:"审批人异常",hint:"审批人为空或异常时，发送消息提醒"}},f={countersign:[{label:"添加审批人",value:"4"}],orSign:[{label:"在我审批前加签",value:"1"},{label:"在我审批后加签",value:"2"},{label:"用户自选",value:"3"}]},m=_e({get(){return u.value.cc},set(S){u.value.cc=S,S||(u.value.ccUsers=[])}}),g=_e(()=>u.value.countersignType===bo.orSign||u.value.countersignType===bo.levelApproval?f.orSign:f.countersign);return Wn(()=>u.value.countersignType,(S,w)=>{w&&(u.value.signRule=S===bo.orSign||S===bo.levelApproval?"3":"4")},{immediate:!0}),e({validate(){var S;return(S=l.value)==null?void 0:S.validate()}}),Wn(()=>u.value.toDoSendMessage,S=>{S&&(u.value.toDoMessageNotifier=[..._o.toDoMessageNotifier],u.value.toDoMessages=[..._o.toDoMessages])}),Wn(()=>u.value.errUserSendMessage,S=>{S&&(u.value.errUserNotifier=[...Ci.errUserNotifier],u.value.errUserMessages=[...Ci.errUserMessages])}),(S,w)=>{const A=Rl,T=Xi,G=Ol,ae=Na,ye=Yo,ie=jl;return W(),Ee(ye,{ref_key:"ruleFormRef",ref:l,"label-position":"left",model:E(u),"label-width":"120px",onSubmit:w[33]||(w[33]=Dr(()=>{},["prevent"]))},{default:H(()=>[j(ie,{modelValue:h.value,"onUpdate:modelValue":w[32]||(w[32]=R=>h.value=R)},{default:H(()=>[j(A,{label:"基础设置",name:"basic"},{default:H(()=>[(W(),Ce(St,null,Ut(y,R=>j(qi(v(R)),{key:R,formData:E(u),"onUpdate:formData":w[0]||(w[0]=Z=>cn(u)?u.value=Z:null),leaderChain:E(u).leaderChain,"onUpdate:leaderChain":w[1]||(w[1]=Z=>E(u).leaderChain=Z),"select-approvers":E(u).approvers,"onUpdate:selectApprovers":w[2]||(w[2]=Z=>E(u).approvers=Z),countersignType:E(u).countersignType,"onUpdate:countersignType":w[3]||(w[3]=Z=>E(u).countersignType=Z),countersignRatio:E(u).countersignRatio,"onUpdate:countersignRatio":w[4]||(w[4]=Z=>E(u).countersignRatio=Z),actions:E(u).actions,"onUpdate:actions":w[5]||(w[5]=Z=>E(u).actions=Z),candidates:E(u).candidates,"onUpdate:candidates":w[6]||(w[6]=Z=>E(u).candidates=Z),comment:E(u).comment,"onUpdate:comment":w[7]||(w[7]=Z=>E(u).comment=Z),errType:E(u).errType,"onUpdate:errType":w[8]||(w[8]=Z=>E(u).errType=Z),errUser:E(u).errUser,"onUpdate:errUser":w[9]||(w[9]=Z=>E(u).errUser=Z),timeout:E(u).timeout,"onUpdate:timeout":w[10]||(w[10]=Z=>E(u).timeout=Z),backRule:E(u).backRule,"onUpdate:backRule":w[11]||(w[11]=Z=>E(u).backRule=Z),backFlowType:E(u).backFlowType,"onUpdate:backFlowType":w[12]||(w[12]=Z=>E(u).backFlowType=Z),backNodes:E(u).backNodes,"onUpdate:backNodes":w[13]||(w[13]=Z=>E(u).backNodes=Z),batchExamine:E(u).batchExamine,"onUpdate:batchExamine":w[14]||(w[14]=Z=>E(u).batchExamine=Z),autoApproveType:E(u).autoApproveType,"onUpdate:autoApproveType":w[15]||(w[15]=Z=>E(u).autoApproveType=Z),entryId:s.value},null,40,["formData","leaderChain","select-approvers","countersignType","countersignRatio","actions","candidates","comment","errType","errUser","timeout","backRule","backFlowType","backNodes","batchExamine","autoApproveType","entryId"])),64))]),_:1}),j(A,{label:"表单权限",name:"form",lazy:""},{default:H(()=>[(W(),Ee(qi(v("fields")),{"fields-value":E(u).fields,"onUpdate:fieldsValue":w[16]||(w[16]=R=>E(u).fields=R),usePcSummary:E(u).usePcSummary,"onUpdate:usePcSummary":w[17]||(w[17]=R=>E(u).usePcSummary=R)},null,40,["fields-value","usePcSummary"]))]),_:1}),j(A,{label:"高级设置",name:"advanced",lazy:""},{default:H(()=>[Pe("div",{class:"advanced-wrapper"},[E(u).cc?(W(),Ee(Hr,{key:0,modelValue:m.value,"onUpdate:modelValue":w[20]||(w[20]=R=>m.value=R),info:b.cc},{default:H(()=>[j(zi,{tabs:[E(Nn).org,E(Nn).memberByOrg,E(Nn).role,E(Nn).jobByOrg,E(Nn).position],selectedValue:E(u).ccUsers,"onUpdate:selectedValue":w[18]||(w[18]=R=>E(u).ccUsers=R),"is-child-org":"",childOrg:E(u).hasDeptCascade.ccHasDeptCascade,"onUpdate:childOrg":w[19]||(w[19]=R=>E(u).hasDeptCascade.ccHasDeptCascade=R),placeholder:"点击设置抄送人员","dialog-title":"抄送人员",multiple:""},null,8,["tabs","selectedValue","childOrg"])]),_:1},8,["modelValue","info"])):dt("",!0),j(Hr,{modelValue:E(u).signature,"onUpdate:modelValue":w[21]||(w[21]=R=>E(u).signature=R),info:b.signature},null,8,["modelValue","info"]),j(Hr,{modelValue:E(u).sign,"onUpdate:modelValue":w[25]||(w[25]=R=>E(u).sign=R),info:b.sign},{default:H(()=>[j(ye,{"label-width":"110px"},{default:H(()=>[j(ae,{label:"加签方式"},{default:H(()=>[j(G,{modelValue:E(u).signRule,"onUpdate:modelValue":w[22]||(w[22]=R=>E(u).signRule=R)},{default:H(()=>[(W(!0),Ce(St,null,Ut(g.value,R=>(W(),Ee(T,{key:R.value,label:R.value,value:R.value},{default:H(()=>[st(en(R.label),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),j(ae,{label:"加签候选人员"},{default:H(()=>[j(zi,{tabs:[E(Nn).org,E(Nn).memberByOrg,E(Nn).role,E(Nn).jobByOrg],isDynamic:!1,selectedValue:E(u).signUsers,"onUpdate:selectedValue":w[23]||(w[23]=R=>E(u).signUsers=R),"is-child-org":"",childOrg:E(u).hasDeptCascade.signHasDeptCascade,"onUpdate:childOrg":w[24]||(w[24]=R=>E(u).hasDeptCascade.signHasDeptCascade=R),placeholder:"点击设置加签人员范围","dialog-title":"加签人员范围",multiple:""},null,8,["tabs","selectedValue","childOrg"])]),_:1})]),_:1})]),_:1},8,["modelValue","info"]),j(U5,{icon:"bell",title:"消息提醒"},{default:H(()=>[j(Hr,{modelValue:E(u).toDoSendMessage,"onUpdate:modelValue":w[27]||(w[27]=R=>E(u).toDoSendMessage=R),info:b.messageRemind_todo},{default:H(()=>[j(z5,{form:E(u),"onUpdate:form":w[26]||(w[26]=R=>cn(u)?u.value=R:null),entryId:s.value},null,8,["form","entryId"])]),_:1},8,["modelValue","info"]),j(Hr,{modelValue:E(u).errUserSendMessage,"onUpdate:modelValue":w[29]||(w[29]=R=>E(u).errUserSendMessage=R),info:b.messageRemind_error},{default:H(()=>[j(W5,{form:E(u),"onUpdate:form":w[28]||(w[28]=R=>cn(u)?u.value=R:null),entryId:s.value},null,8,["form","entryId"])]),_:1},8,["modelValue","info"])]),_:1}),j(G5,{modelValue:E(u).submitValidate,"onUpdate:modelValue":w[30]||(w[30]=R=>E(u).submitValidate=R),disabled:E(u).isSubmitValidate,"onUpdate:disabled":w[31]||(w[31]=R=>E(u).isSubmitValidate=R)},null,8,["modelValue","disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])}}});const X5=Ft(J5,[["__scopeId","data-v-f8c23849"]]),pd=We({__name:"SelectFetchField",props:{modelValue:{},entryId:{},fields:{},filter:{},isObject:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},isCondition:{type:Boolean,default:!1},filterOptions:{},prop:{default(){return{field:"field"}}}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const r=n,o=t;Wn(()=>r.entryId,()=>{u.value=[],s()});const{key:a,reload:s}=ih(),l=sh(),u=et([]),h=_e(()=>{let S={blockFilter(w){return w.type===zt.subform},excludeFilter(w,A){return!(A!=null&&A.isFormItem)}};return r.isCondition&&(S={blockFilter(w){return w.type===zt.subform},excludeFilter(w,A){return!(A!=null&&A.isCondition)}}),r.filterOptions&&(S=r.filterOptions),S}),y=_e(()=>{let S=va(u.value,h.value);return Wd(r.filter)&&(S=r.filter(S)),S}),v=_e(()=>y.value.filter(S=>S.source!==mu.system)),b=_e(()=>y.value.filter(S=>S.source===mu.system)),f=async()=>(r.fields?u.value=r.fields:r.entryId?u.value=await l.getFields(r.entryId):u.value=[],[]),m=(S,w)=>{const A=r.prop[S];return(A&&(w==null?void 0:w[A]))??""},g=_e({get(){const S=qc(r.modelValue).map(w=>r.isObject&&zc(w)?m("field",w):w);return r.multiple?S:S[0]??""},set(S){const w=qc(S).map(A=>{var ye;if(!r.isObject)return A;const T=Ui(A,u.value),G=lh(T==null?void 0:T.field.type),ae={...zc(r.modelValue)?r.modelValue:{}};for(const[ie,R]of Object.entries(r.prop))switch(ie){case"field":ae[R]=(T==null?void 0:T.field.fieldId)??"";break;case"dataType":ae[R]=(G==null?void 0:G.dataType)??"";break;case"entryId":ae[R]=r.entryId;break;case"source":ae[R]=(T==null?void 0:T.field.source)??mu.self;break;case"fieldType":ae[R]=(T==null?void 0:T.field.type)??"";break;case"subformId":ae[R]=((ye=T==null?void 0:T.parentField)==null?void 0:ye.fieldId)??void 0;break}return ae});o("update:modelValue",r.multiple?w:w[0]??"")}});return e({getField(S){return Ui(S,u.value)}}),(S,w)=>{const A=Aa,T=Hd;return W(),Ee(Ei,{modelValue:g.value,"onUpdate:modelValue":w[0]||(w[0]=G=>g.value=G),load:f,isCheckRemove:"",key:E(a),"remove-text":"已删除控件",multiple:S.multiple,"no-data-text":"无控件"},{default:H(()=>[(W(!0),Ce(St,null,Ut(v.value,G=>(W(),Ee(A,{key:G.fieldId,label:G.options.label,value:G.fieldId},{default:H(()=>[j($c,{fieldId:G.fieldId,fields:v.value},null,8,["fieldId","fields"])]),_:2},1032,["label","value"]))),128)),b.value.length?(W(),Ee(T,{key:0,label:"系统字段"},{default:H(()=>[(W(!0),Ce(St,null,Ut(b.value,G=>(W(),Ee(A,{key:G.fieldId,label:G.options.label,value:G.fieldId},{default:H(()=>[j($c,{fieldId:G.fieldId,fields:b.value},null,8,["fieldId","fields"])]),_:2},1032,["label","value"]))),128))]),_:1})):dt("",!0)]),_:1},8,["modelValue","multiple"])}}}),K5=(n,e)=>{if(!n)return e;const t=uh(n.field.type,"compareFieldType");let r;if(Wd(t)){const o=ch.equal;r=t(o)}else r=t??null;return e.filter(o=>!r||r.includes(o.type))},Z5={name:"SubProcess"},Q5=We({...Z5,props:{processData:{}},emits:["update:processData"],setup(n,{expose:e,emit:t}){const r=n,o=t,a=et(),s=Mt(),{flowList:l,normData:u}=Vl(),h=et(s.formModel.appEntryId),y=sn(r,"processData",o),v=async()=>{var w;await((w=a.value)==null?void 0:w.validate()),y.value.subFlowVariables.push({source:"",target:""})},b=w=>{y.value.subFlowVariables.splice(w,1)},f=async w=>{var T;const A=(T=l.filter(G=>G.flowId===w))==null?void 0:T[0];A&&(y.value.subFlowFormName=A.entryName,y.value.subFlowFormId=A.entryId)},m=async()=>{var G;const w=s.formModel.appId;if(!w)return;y.value.subFlowAppId=w;const A=((G=s.flowDesigner)==null?void 0:G.flowId)??"",T=l.filter(ae=>ae.flowId!==A);return u(T)},g=et(),S=(w,A,T)=>{var G,ae;if(g.value&&w){const ye=Array.isArray(g.value)?(G=g.value[T])==null?void 0:G.getField(w):(ae=g.value)==null?void 0:ae.getField(w);return K5(ye,A)}return A};return e({validate(){var w;return(w=a.value)==null?void 0:w.validate()}}),(w,A)=>{const T=Aa,G=Hd,ae=Na,ye=Hn,ie=Xi,R=Ol,Z=Yo;return W(),Ee(Z,{ref_key:"ruleFormRef",ref:a,"label-position":"left",model:E(y),rules:E(of),"label-width":"125px",onSubmit:A[3]||(A[3]=Dr(()=>{},["prevent"]))},{default:H(()=>[j(ae,{label:"选择子流程",prop:"subFlowFlowId"},{default:H(()=>[j(Ei,{modelValue:E(y).subFlowFlowId,"onUpdate:modelValue":A[0]||(A[0]=pe=>E(y).subFlowFlowId=pe),"on-load-finish":m,onChange:f,filterable:"",load:m,isCheckRemove:"",removeText:"表单已删除/表单不可选择"},{default:H(({options:pe})=>[(W(!0),Ce(St,null,Ut(pe,D=>(W(),Ee(G,{key:D.label,label:D.label},{default:H(()=>[(W(!0),Ce(St,null,Ut(D.children,M=>(W(),Ee(T,{key:M.flowId,label:M.title,value:M.flowId},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),j(ae,{label:"参数传递"},{default:H(()=>[j(ye,{type:"primary",icon:E(Ku),onClick:v},{default:H(()=>[st(" 添加参数 ")]),_:1},8,["icon"]),E(y).subFlowVariables.length>=1?(W(),Ce("div",{key:0,class:"azt-params-options",style:{width:"100%","line-height":"1"}},[Pe("div",null,"当前流程"),Pe("div",{class:"azt-params-tip"}),Pe("div",null,"子流程"),Pe("div",{class:"azt-params-del"})])):dt("",!0),(W(!0),Ce(St,null,Ut(E(y).subFlowVariables,(pe,D)=>(W(),Ce("div",{class:"azt-params-options",key:D},[Pe("div",null,[j(pd,{modelValue:pe.source,"onUpdate:modelValue":M=>pe.source=M,"is-object":!1,ref_for:!0,ref_key:"currentFieldRef",ref:g,"entry-id":h.value},null,8,["modelValue","onUpdate:modelValue","entry-id"])]),Pe("div",{class:"azt-params-tip"},"赋值给"),Pe("div",null,[j(pd,{modelValue:pe.target,"onUpdate:modelValue":M=>pe.target=M,disabled:!pe.source,"is-object":!1,filter:M=>S(pe.source,M,D),"entry-id":E(y).subFlowFormId},null,8,["modelValue","onUpdate:modelValue","disabled","filter","entry-id"])]),Pe("div",{class:"azt-params-del"},[j(Rn,{"icon-class":"DeleteFilled",onClick:M=>b(D)},null,8,["onClick"])])]))),128))]),_:1}),j(ae,{label:"子流程提交设置"},{default:H(()=>[j(R,{modelValue:E(y).subFlowAutoSubmit,"onUpdate:modelValue":A[1]||(A[1]=pe=>E(y).subFlowAutoSubmit=pe)},{default:H(()=>[j(ie,{label:!0},{default:H(()=>[st("创建子流程表单数据，并自动提交")]),_:1}),j(ie,{label:!1},{default:H(()=>[st(" 只创建子流程表单数据，需子流程发起人手动提交 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),j(ae,{label:"流转方式"},{default:H(()=>[j(R,{modelValue:E(y).completeAsync,"onUpdate:modelValue":A[2]||(A[2]=pe=>E(y).completeAsync=pe)},{default:H(()=>[j(ie,{label:!0},{default:H(()=>[st("子流程发起后，主流程进入下一个节点")]),_:1}),j(ie,{label:!1},{default:H(()=>[st("子流程执行完毕后，再开始下—个节点")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])}}});const e0=Ft(Q5,[["__scopeId","data-v-b778e69a"]]),t0={name:"actions"},n0=We({...t0,props:{actions:{}},emits:["update:actions"],setup(n,{emit:e}){const t=n,r=e,o=_e({get(){return t.actions},set(s){r("update:actions",s)}}),a=_e(()=>oc.filter(s=>f2.includes(s.type)));return(s,l)=>(W(),Ee($n,{label:"操作设置"},{default:H(()=>[j(sc,{actions:o.value,"onUpdate:actions":l[0]||(l[0]=u=>o.value=u),"default-actions":a.value},null,8,["actions","default-actions"])]),_:1}))}}),r0=We({__name:"index",props:{processData:{}},emits:["update:processData"],setup(n,{emit:e}){const t=n,r=e,o=et(),a=et("basic"),s=js(t,"processData",r);return(l,u)=>{const h=Na,y=Rl,v=jl,b=Yo;return W(),Ee(b,{ref_key:"ruleFormRef",ref:o,"label-position":"left",model:E(s),"label-width":"120px",onSubmit:u[6]||(u[6]=Dr(()=>{},["prevent"]))},{default:H(()=>[j(v,{modelValue:a.value,"onUpdate:modelValue":u[5]||(u[5]=f=>a.value=f)},{default:H(()=>[j(y,{label:"基础设置",name:"basic"},{default:H(()=>[j(h,{label:"抄送人",required:""},{default:H(()=>[j(zi,{tabs:[E(Nn).org,E(Nn).memberByOrg,E(Nn).role,E(Nn).jobByOrg,E(Nn).position],selectedValue:E(s).ccUsers,"onUpdate:selectedValue":u[0]||(u[0]=f=>E(s).ccUsers=f),"is-child-org":"",childOrg:E(s).hasDeptCascade.ccHasDeptCascade,"onUpdate:childOrg":u[1]||(u[1]=f=>E(s).hasDeptCascade.ccHasDeptCascade=f),placeholder:"点击设置抄送人员","dialog-title":"抄送人员",multiple:""},null,8,["tabs","selectedValue","childOrg"])]),_:1}),j(n0,{actions:E(s).actions,"onUpdate:actions":u[2]||(u[2]=f=>E(s).actions=f)},null,8,["actions"])]),_:1}),j(y,{label:"表单权限",name:"form",lazy:""},{default:H(()=>[j(Es,{"fields-value":E(s).fields,"onUpdate:fieldsValue":u[3]||(u[3]=f=>E(s).fields=f),usePcSummary:E(s).usePcSummary,"onUpdate:usePcSummary":u[4]||(u[4]=f=>E(s).usePcSummary=f),"hide-edit":"","hide-download":!1,"hide-required":!1},null,8,["fields-value","usePcSummary"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])}}}),a0={[nt.CC]:r0,[nt.SubProcess]:e0,[nt.Approval]:X5,[nt.StartEvent]:g5},o0=a0,i0=We({__name:"index",setup(n){const e=D2();Lo(Xd,e);const t=_e({get(){return e.visible},set(){e.close()}}),r=_e({get(){return e.node},set(v){v&&(e.node=v)}}),o=_e({get(){var v;return((v=r.value)==null?void 0:v.name)??""},set(v){r.value&&(r.value.name=v)}}),a=Mt(),s=_e(()=>{var b;if(!((b=r.value)!=null&&b.type))return;const v=r.value.type;return o0[v]}),l=async()=>{var g;const{errorMap:v,validateProcess:b}=a.errorModel,f=v,m=((g=r.value)==null?void 0:g.nodeId)??"";f.has(m)&&r.value&&(await b(r.value),await Ua(),await y()),r.value&&e.updateNode(r.value)},u=()=>{Ua(async()=>{var f;const v=a.errorModel.errorMap,b=((f=r.value)==null?void 0:f.nodeId)??"";v.has(b)&&await y()})},h=et(),y=async()=>{h.value.validate()};return(v,b)=>(W(),Ee(Td,{size:"670px","append-to-body":"","lock-scroll":"","with-header":!1,"show-close":!1,modelValue:t.value,"onUpdate:modelValue":b[2]||(b[2]=f=>t.value=f),class:"wf-panels",onOpen:u,onClose:l},{default:H(()=>{var f;return[Pe("div",{class:wa(["panels_title",((f=r.value)==null?void 0:f.type)+"-bg"])},[Pe("span",{class:"panels_icon"},[j(Rn,{"icon-class":"Edit"})]),j(rc,{modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=m=>o.value=m),disabled:!1},null,8,["modelValue"])],2),r.value?(W(),Ce("div",{key:0,class:"panels_main"},[(W(),Ee(qi(s.value),{ref_key:"ruleFormRef",ref:h,processData:r.value,"onUpdate:processData":b[1]||(b[1]=m=>r.value=m),key:r.value.nodeId},null,40,["processData"]))])):dt("",!0)]}),_:1},8,["modelValue"]))}});const s0=()=>{const n=Mt(),e=fr({visible:!1,node:null,setNode(t){e.node=An(t),e.visible=!0},close(){e.node=null,e.visible=!1},updateNode(t){(function r(o,a){for(let s=0;s<a.length;s++){const l=a[s];if(o===l.nodeId){a[s]=An(t);break}l.children.length>=1&&r(o,l.children)}})(t.nodeId,n.nodes),n.nodes}});return n.on(or.selectCondition,t=>e.setNode(t)),e},l0=We({__name:"index",setup(n){const e=Mt(),t=s0(),r=_e({get(){return t.visible},set(){t.close()}}),o=_e(()=>e.formModel.appEntryId),a=_e({get(){var m;return((m=t.node)==null?void 0:m.isElse)??!1},set(m){t.node&&(t.node.isElse=m)}}),s=_e({get(){var m;return((m=t.node)==null?void 0:m.name)??""},set(m){t.node&&(t.node.name=m)}}),l=_e(()=>{var S;if(a.value)return!1;const m=(S=t.node)==null?void 0:S.parentId;if(!m)return!1;const g=Va(m,e.nodes);return(g==null?void 0:g.node.children.some(w=>w.isElse))??!1}),u=et([]),h=et(!1),y=async()=>{var g;const m=((g=t.node)==null?void 0:g.condition)??[];m.length>=1&&(u.value=await Pl(m,o.value)),Ua(()=>{h.value=!0})},v=et(),b=()=>{t.close(),u.value=[],h.value=!1},f=async()=>{var S;const{validateProcess:m}=e.errorModel,g=t.node;if(g){if(g.isElse=a.value,a.value)g.condition=[],t.updateNode(g),t.close();else if(await((S=v.value)==null?void 0:S.validate()),u.value.length>=1){const w=vf(u.value);g.condition=[...w],t.updateNode(g),t.close()}else Gr.error("请添加过滤条件");await m(g)}};return(m,g)=>{const S=Wi,w=Hn,A=Go;return W(),Ee(A,{width:"800px",modelValue:r.value,"onUpdate:modelValue":g[3]||(g[3]=T=>r.value=T),onClose:b,onOpen:y},{header:H(()=>[Pe("div",{class:"dialog_header"},[Pe("div",{style:{"font-size":"22px"}},[j(Rn,{"icon-class":"Edit"})]),j(rc,{modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=T=>s.value=T),disabled:!1},null,8,["modelValue"])])]),footer:H(()=>[Pe("span",{class:"dialog-footer"},[j(w,{onClick:b},{default:H(()=>[st("取消")]),_:1}),j(w,{type:"primary",onClick:f},{default:H(()=>[st("确定")]),_:1})])]),default:H(()=>[Pe("div",{class:"condition_method"},[Pe("span",null,"数据流转条件:"),j(S,{modelValue:a.value,"onUpdate:modelValue":g[1]||(g[1]=T=>a.value=T),disabled:l.value,"inline-prompt":"",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"var(--el-color-primary)"},"active-text":"使用Else条件","inactive-text":"使用自定义流转条件"},null,8,["modelValue","disabled"])]),h.value?(W(),Ce("div",{key:0},[Sa(j(Jd,{condition:u.value,"onUpdate:condition":g[2]||(g[2]=T=>u.value=T),conditionForm:o.value,isDataType:"",ref_key:"fieldConditionRef",ref:v},null,8,["condition","conditionForm"]),[[Ho,!a.value]])])):dt("",!0)]),_:1},8,["modelValue"])}}});const u0=Ft(l0,[["__scopeId","data-v-03a50f37"]]),c0=We({__name:"ConditionBranchType",setup(n){const e=Mt(),t=et(!1),r=et(!0),o=et(),a=()=>{const l=o.value;l&&(r.value?e.beforeInsertNode(nt.Gateway,l):e.addApproverBranch(l),t.value=!1)},s=({type:l,data:u})=>{o.value=u,t.value=!0};return e.on(or.addApprovalBranch,s),(l,u)=>{const h=Xi,y=Hn,v=Go;return W(),Ee(v,{modelValue:t.value,"onUpdate:modelValue":u[3]||(u[3]=b=>t.value=b),title:"选择分支类型",width:"500px"},{footer:H(()=>[Pe("span",{class:"dialog-footer"},[j(y,{onClick:u[2]||(u[2]=b=>t.value=!1)},{default:H(()=>[st("取消")]),_:1}),j(y,{type:"primary",onClick:a},{default:H(()=>[st("确定")]),_:1})])]),default:H(()=>[Pe("div",{class:"azt-radio-branch"},[j(h,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=b=>r.value=b),label:!0,size:"large"},{default:H(()=>[st(" 添加普通分支 ")]),_:1},8,["modelValue"]),Pe("span",{class:"azt-radio-tip Gray_75"}," 仅对“通过”审批的数据进行处理。“拒绝”审批的数据结束流程。 ")]),Pe("div",{class:"azt-radio-branch"},[j(h,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=b=>r.value=b),label:!1,size:"large"},{default:H(()=>[st(" 添加审批结果分支 ")]),_:1},8,["modelValue"]),Pe("span",{class:"azt-radio-tip Gray_75"}," 分支固定为“通过”和“拒绝”。需对“通过”、“拒绝”审批的数据进行不同处理时使用此分支。 ")])]),_:1},8,["modelValue"])}}});const d0=Ft(c0,[["__scopeId","data-v-bd740b50"]]),f0=We({__name:"BatchSetFields",setup(n){const e=zl(),{getProcessFields:t,getFormFields:r,setProcessFields:o,clearAll:a}=e,s=_e(()=>e.visible),l=et("first"),u=_e(()=>r()),h=et([]),y=_e({get:()=>t(),set(g){h.value=An(g)}}),v=_e(()=>[{...ff,disable(g,S){const w=y.value.map(A=>({id:A.fieldId,name:"",property:$o(A)}));return df({field:g,helper:S},w)},ignoreFieldAuth:(g,S)=>cf({field:g,helper:S},u.value)}]),b=et(null),f=()=>{h.value.length>=1&&o(h.value),Ua(()=>{a()})},m=()=>a();return(g,S)=>{const w=Hn,A=Rl,T=jl;return s.value?(W(),Ee(E(fh),{key:0,handle:b.value,"initial-value":E(e).initPosition,style:{position:"fixed","z-index":"199"}},{default:H(()=>[Pe("div",{class:"setFields-layout"},[Pe("div",{ref_key:"handleRef",ref:b,class:"setFields-layout_header"},[Pe("span",null,"批量设置"),j(w,{onClick:m,icon:E(dh),link:""},null,8,["icon"])],512),Pe("div",{class:"setFields-layout_body"},[j(T,{modelValue:l.value,"onUpdate:modelValue":S[0]||(S[0]=G=>l.value=G)},{default:H(()=>[j(A,{label:"表单权限",name:"first"})]),_:1},8,["modelValue"]),j(Cu,{style:{"max-height":"420px","overflow-y":"auto","overflow-x":"hidden"},modelValue:y.value,"onUpdate:modelValue":S[1]||(S[1]=G=>y.value=G),fields:u.value,firstLabelWidth:189,auths:v.value,isIndeterminate:"",isRequired:"",isDownload:"",auth:{isTemplate:!0}},null,8,["modelValue","fields","auths"])]),Pe("div",{class:"setFields-layout_footer"},[j(w,{onClick:m},{default:H(()=>[st("取消")]),_:1}),j(w,{type:"primary",onClick:f},{default:H(()=>[st("确定")]),_:1})])])]),_:1},8,["handle","initial-value"])):dt("",!0)}}});const p0=Ft(f0,[["__scopeId","data-v-c96f4d52"]]);var ir=Uint8Array,Fr=Uint16Array,uc=Int32Array,$l=new ir([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wl=new ir([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ru=new ir([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Nf=function(n,e){for(var t=new Fr(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var o=new uc(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)o[a]=a-t[r]<<5|r;return{b:t,r:o}},Af=Nf($l,2),Lf=Af.b,ju=Af.r;Lf[28]=258,ju[258]=28;var kf=Nf(Wl,0),h0=kf.b,hd=kf.r,Bu=new Fr(32768);for(var mn=0;mn<32768;++mn){var ho=(mn&43690)>>1|(mn&21845)<<1;ho=(ho&52428)>>2|(ho&13107)<<2,ho=(ho&61680)>>4|(ho&3855)<<4,Bu[mn]=((ho&65280)>>8|(ho&255)<<8)>>1}var _a=function(n,e,t){for(var r=n.length,o=0,a=new Fr(e);o<r;++o)n[o]&&++a[n[o]-1];var s=new Fr(e);for(o=1;o<e;++o)s[o]=s[o-1]+a[o-1]<<1;var l;if(t){l=new Fr(1<<e);var u=15-e;for(o=0;o<r;++o)if(n[o])for(var h=o<<4|n[o],y=e-n[o],v=s[n[o]-1]++<<y,b=v|(1<<y)-1;v<=b;++v)l[Bu[v]>>u]=h}else for(l=new Fr(r),o=0;o<r;++o)n[o]&&(l[o]=Bu[s[n[o]-1]++]>>15-n[o]);return l},xo=new ir(288);for(var mn=0;mn<144;++mn)xo[mn]=8;for(var mn=144;mn<256;++mn)xo[mn]=9;for(var mn=256;mn<280;++mn)xo[mn]=7;for(var mn=280;mn<288;++mn)xo[mn]=8;var Ts=new ir(32);for(var mn=0;mn<32;++mn)Ts[mn]=5;var m0=_a(xo,9,0),g0=_a(xo,9,1),v0=_a(Ts,5,0),y0=_a(Ts,5,1),yu=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},na=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},bu=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},cc=function(n){return(n+7)/8|0},If=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new ir(n.subarray(e,t))},b0=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],aa=function(n,e,t){var r=new Error(e||b0[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,aa),!t)throw r;return r},_0=function(n,e,t,r){var o=n.length,a=r?r.length:0;if(!o||e.f&&!e.l)return t||new ir(0);var s=!t,l=s||e.i!=2,u=e.i;s&&(t=new ir(o*3));var h=function(Be){var Je=t.length;if(Be>Je){var qe=new ir(Math.max(Je*2,Be));qe.set(t),t=qe}},y=e.f||0,v=e.p||0,b=e.b||0,f=e.l,m=e.d,g=e.m,S=e.n,w=o*8;do{if(!f){y=na(n,v,1);var A=na(n,v+1,3);if(v+=3,A)if(A==1)f=g0,m=y0,g=9,S=5;else if(A==2){var ye=na(n,v,31)+257,ie=na(n,v+10,15)+4,R=ye+na(n,v+5,31)+1;v+=14;for(var Z=new ir(R),pe=new ir(19),D=0;D<ie;++D)pe[Ru[D]]=na(n,v+D*3,7);v+=ie*3;for(var M=yu(pe),te=(1<<M)-1,Y=_a(pe,M,1),D=0;D<R;){var ve=Y[na(n,v,te)];v+=ve&15;var T=ve>>4;if(T<16)Z[D++]=T;else{var ge=0,xe=0;for(T==16?(xe=3+na(n,v,3),v+=2,ge=Z[D-1]):T==17?(xe=3+na(n,v,7),v+=3):T==18&&(xe=11+na(n,v,127),v+=7);xe--;)Z[D++]=ge}}var de=Z.subarray(0,ye),we=Z.subarray(ye);g=yu(de),S=yu(we),f=_a(de,g,1),m=_a(we,S,1)}else aa(1);else{var T=cc(v)+4,G=n[T-4]|n[T-3]<<8,ae=T+G;if(ae>o){u&&aa(0);break}l&&h(b+G),t.set(n.subarray(T,ae),b),e.b=b+=G,e.p=v=ae*8,e.f=y;continue}if(v>w){u&&aa(0);break}}l&&h(b+131072);for(var Le=(1<<g)-1,Ye=(1<<S)-1,P=v;;P=v){var ge=f[bu(n,v)&Le],B=ge>>4;if(v+=ge&15,v>w){u&&aa(0);break}if(ge||aa(2),B<256)t[b++]=B;else if(B==256){P=v,f=null;break}else{var q=B-254;if(B>264){var D=B-257,X=$l[D];q=na(n,v,(1<<X)-1)+Lf[D],v+=X}var ne=m[bu(n,v)&Ye],fe=ne>>4;ne||aa(3),v+=ne&15;var we=h0[fe];if(fe>3){var X=Wl[fe];we+=bu(n,v)&(1<<X)-1,v+=X}if(v>w){u&&aa(0);break}l&&h(b+131072);var he=b+q;if(b<we){var me=a-we,Ve=Math.min(we,he);for(me+b<0&&aa(3);b<Ve;++b)t[b]=r[me+b]}for(;b<he;++b)t[b]=t[b-we]}}e.l=f,e.p=P,e.b=b,e.f=y,f&&(y=1,e.m=g,e.d=m,e.n=S)}while(!y);return b!=t.length&&s?If(t,0,b):t.subarray(0,b)},ja=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Ps=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},_u=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var o=t.length,a=t.slice();if(!o)return{t:Cf,l:0};if(o==1){var s=new ir(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(ae,ye){return ae.f-ye.f}),t.push({s:-1,f:25001});var l=t[0],u=t[1],h=0,y=1,v=2;for(t[0]={s:-1,f:l.f+u.f,l,r:u};y!=o-1;)l=t[t[h].f<t[v].f?h++:v++],u=t[h!=y&&t[h].f<t[v].f?h++:v++],t[y++]={s:-1,f:l.f+u.f,l,r:u};for(var b=a[0].s,r=1;r<o;++r)a[r].s>b&&(b=a[r].s);var f=new Fr(b+1),m=Vu(t[y-1],f,0);if(m>e){var r=0,g=0,S=m-e,w=1<<S;for(a.sort(function(ye,ie){return f[ie.s]-f[ye.s]||ye.f-ie.f});r<o;++r){var A=a[r].s;if(f[A]>e)g+=w-(1<<m-f[A]),f[A]=e;else break}for(g>>=S;g>0;){var T=a[r].s;f[T]<e?g-=1<<e-f[T]++-1:++r}for(;r>=0&&g;--r){var G=a[r].s;f[G]==e&&(--f[G],++g)}m=e}return{t:new ir(f),l:m}},Vu=function(n,e,t){return n.s==-1?Math.max(Vu(n.l,e,t+1),Vu(n.r,e,t+1)):e[n.s]=t},md=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Fr(++e),r=0,o=n[0],a=1,s=function(u){t[r++]=u},l=1;l<=e;++l)if(n[l]==o&&l!=e)++a;else{if(!o&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(o),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(o);a=1,o=n[l]}return{c:t.subarray(0,r),n:e}},Cs=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Pf=function(n,e,t){var r=t.length,o=cc(e+2);n[o]=r&255,n[o+1]=r>>8,n[o+2]=n[o]^255,n[o+3]=n[o+1]^255;for(var a=0;a<r;++a)n[o+a+4]=t[a];return(o+4+r)*8},gd=function(n,e,t,r,o,a,s,l,u,h,y){ja(e,y++,t),++o[256];for(var v=_u(o,15),b=v.t,f=v.l,m=_u(a,15),g=m.t,S=m.l,w=md(b),A=w.c,T=w.n,G=md(g),ae=G.c,ye=G.n,ie=new Fr(19),R=0;R<A.length;++R)++ie[A[R]&31];for(var R=0;R<ae.length;++R)++ie[ae[R]&31];for(var Z=_u(ie,7),pe=Z.t,D=Z.l,M=19;M>4&&!pe[Ru[M-1]];--M);var te=h+5<<3,Y=Cs(o,xo)+Cs(a,Ts)+s,ve=Cs(o,b)+Cs(a,g)+s+14+3*M+Cs(ie,pe)+2*ie[16]+3*ie[17]+7*ie[18];if(u>=0&&te<=Y&&te<=ve)return Pf(e,y,n.subarray(u,u+h));var ge,xe,de,we;if(ja(e,y,1+(ve<Y)),y+=2,ve<Y){ge=_a(b,f,0),xe=b,de=_a(g,S,0),we=g;var Le=_a(pe,D,0);ja(e,y,T-257),ja(e,y+5,ye-1),ja(e,y+10,M-4),y+=14;for(var R=0;R<M;++R)ja(e,y+3*R,pe[Ru[R]]);y+=3*M;for(var Ye=[A,ae],P=0;P<2;++P)for(var B=Ye[P],R=0;R<B.length;++R){var q=B[R]&31;ja(e,y,Le[q]),y+=pe[q],q>15&&(ja(e,y,B[R]>>5&127),y+=B[R]>>12)}}else ge=m0,xe=xo,de=v0,we=Ts;for(var R=0;R<l;++R){var X=r[R];if(X>255){var q=X>>18&31;Ps(e,y,ge[q+257]),y+=xe[q+257],q>7&&(ja(e,y,X>>23&31),y+=$l[q]);var ne=X&31;Ps(e,y,de[ne]),y+=we[ne],ne>3&&(Ps(e,y,X>>5&8191),y+=Wl[ne])}else Ps(e,y,ge[X]),y+=xe[X]}return Ps(e,y,ge[256]),y+xe[256]},w0=new uc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Cf=new ir(0),S0=function(n,e,t,r,o,a){var s=a.z||n.length,l=new ir(r+s+5*(1+Math.ceil(s/7e3))+o),u=l.subarray(r,l.length-o),h=a.l,y=(a.r||0)&7;if(e){y&&(u[0]=a.r>>3);for(var v=w0[e-1],b=v>>13,f=v&8191,m=(1<<t)-1,g=a.p||new Fr(32768),S=a.h||new Fr(m+1),w=Math.ceil(t/3),A=2*w,T=function(ht){return(n[ht]^n[ht+1]<<w^n[ht+2]<<A)&m},G=new uc(25e3),ae=new Fr(288),ye=new Fr(32),ie=0,R=0,Z=a.i||0,pe=0,D=a.w||0,M=0;Z+2<s;++Z){var te=T(Z),Y=Z&32767,ve=S[te];if(g[Y]=ve,S[te]=Y,D<=Z){var ge=s-Z;if((ie>7e3||pe>24576)&&(ge>423||!h)){y=gd(n,u,0,G,ae,ye,R,pe,M,Z-M,y),pe=ie=R=0,M=Z;for(var xe=0;xe<286;++xe)ae[xe]=0;for(var xe=0;xe<30;++xe)ye[xe]=0}var de=2,we=0,Le=f,Ye=Y-ve&32767;if(ge>2&&te==T(Z-Ye))for(var P=Math.min(b,ge)-1,B=Math.min(32767,Z),q=Math.min(258,ge);Ye<=B&&--Le&&Y!=ve;){if(n[Z+de]==n[Z+de-Ye]){for(var X=0;X<q&&n[Z+X]==n[Z+X-Ye];++X);if(X>de){if(de=X,we=Ye,X>P)break;for(var ne=Math.min(Ye,X-2),fe=0,xe=0;xe<ne;++xe){var he=Z-Ye+xe&32767,me=g[he],Ve=he-me&32767;Ve>fe&&(fe=Ve,ve=he)}}}Y=ve,ve=g[Y],Ye+=Y-ve&32767}if(we){G[pe++]=268435456|ju[de]<<18|hd[we];var Be=ju[de]&31,Je=hd[we]&31;R+=$l[Be]+Wl[Je],++ae[257+Be],++ye[Je],D=Z+de,++ie}else G[pe++]=n[Z],++ae[n[Z]]}}for(Z=Math.max(Z,D);Z<s;++Z)G[pe++]=n[Z],++ae[n[Z]];y=gd(n,u,h,G,ae,ye,R,pe,M,Z-M,y),h||(a.r=y&7|u[y/8|0]<<3,y-=7,a.h=S,a.p=g,a.i=Z,a.w=D)}else{for(var Z=a.w||0;Z<s+h;Z+=65535){var qe=Z+65535;qe>=s&&(u[y/8|0]=h,qe=s),y=Pf(u,y+1,n.subarray(Z,qe))}a.i=s}return If(l,0,r+cc(y)+o)},Ff=function(){var n=1,e=0;return{p:function(t){for(var r=n,o=e,a=t.length|0,s=0;s!=a;){for(var l=Math.min(s+2655,a);s<l;++s)o+=r+=t[s];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}n=r,e=o},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},x0=function(n,e,t,r,o){if(!o&&(o={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new ir(a.length+n.length);s.set(a),s.set(n,a.length),n=s,o.w=a.length}return S0(n,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,o)},Df=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},N0=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var o=Ff();o.p(e.dictionary),Df(n,2,o.d())}},A0=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&aa(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&aa(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Uu(n,e){e||(e={});var t=Ff();t.p(n);var r=x0(n,e,e.dictionary?6:2,4);return N0(r,e),Df(r,r.length-4,t.d()),r}function L0(n,e){return _0(n.subarray(A0(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var k0=typeof TextDecoder<"u"&&new TextDecoder,I0=0;try{k0.decode(Cf,{stream:!0}),I0=1}catch{}var At=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function wu(){At.console&&typeof At.console.log=="function"&&At.console.log.apply(At.console,arguments)}var un={log:wu,warn:function(n){At.console&&(typeof At.console.warn=="function"?At.console.warn.apply(At.console,arguments):wu.call(null,arguments))},error:function(n){At.console&&(typeof At.console.error=="function"?At.console.error.apply(At.console,arguments):wu(n))}};function Su(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){qo(r.response,e,t)},r.onerror=function(){un.error("could not download file")},r.send()}function vd(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function gl(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Fs,qu,qo=At.saveAs||((typeof window>"u"?"undefined":dn(window))!=="object"||window!==At?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=At.URL||At.webkitURL,o=document.createElement("a");e=e||n.name||"download",o.download=e,o.rel="noopener",typeof n=="string"?(o.href=n,o.origin!==location.origin?vd(o.href)?Su(n,e,t):gl(o,o.target="_blank"):gl(o)):(o.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){gl(o)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(vd(n))Su(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){gl(r)})}else navigator.msSaveOrOpenBlob(function(o,a){return a===void 0?a={autoBom:!1}:dn(a)!=="object"&&(un.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob([String.fromCharCode(65279),o],{type:o.type}):o}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Su(n,e,t);var o=n.type==="application/octet-stream",a=/constructor/i.test(At.HTMLElement)||At.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||o&&a)&&(typeof FileReader>"u"?"undefined":dn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var y=l.result;y=s?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=y:location=y,r=null},l.readAsDataURL(n)}else{var u=At.URL||At.webkitURL,h=u.createObjectURL(n);r?r.location=h:location.href=h,r=null,setTimeout(function(){u.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Mf(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<t.length;r++){var o=t[r].re,a=t[r].process,s=o.exec(n);s&&(e=a(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),h=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),"#"+l+u+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xu(n,e){var t=n[0],r=n[1],o=n[2],a=n[3];t=er(t,r,o,a,e[0],7,-680876936),a=er(a,t,r,o,e[1],12,-389564586),o=er(o,a,t,r,e[2],17,606105819),r=er(r,o,a,t,e[3],22,-1044525330),t=er(t,r,o,a,e[4],7,-176418897),a=er(a,t,r,o,e[5],12,1200080426),o=er(o,a,t,r,e[6],17,-1473231341),r=er(r,o,a,t,e[7],22,-45705983),t=er(t,r,o,a,e[8],7,1770035416),a=er(a,t,r,o,e[9],12,-1958414417),o=er(o,a,t,r,e[10],17,-42063),r=er(r,o,a,t,e[11],22,-1990404162),t=er(t,r,o,a,e[12],7,1804603682),a=er(a,t,r,o,e[13],12,-40341101),o=er(o,a,t,r,e[14],17,-1502002290),t=tr(t,r=er(r,o,a,t,e[15],22,1236535329),o,a,e[1],5,-165796510),a=tr(a,t,r,o,e[6],9,-1069501632),o=tr(o,a,t,r,e[11],14,643717713),r=tr(r,o,a,t,e[0],20,-373897302),t=tr(t,r,o,a,e[5],5,-701558691),a=tr(a,t,r,o,e[10],9,38016083),o=tr(o,a,t,r,e[15],14,-660478335),r=tr(r,o,a,t,e[4],20,-405537848),t=tr(t,r,o,a,e[9],5,568446438),a=tr(a,t,r,o,e[14],9,-1019803690),o=tr(o,a,t,r,e[3],14,-187363961),r=tr(r,o,a,t,e[8],20,1163531501),t=tr(t,r,o,a,e[13],5,-1444681467),a=tr(a,t,r,o,e[2],9,-51403784),o=tr(o,a,t,r,e[7],14,1735328473),t=nr(t,r=tr(r,o,a,t,e[12],20,-1926607734),o,a,e[5],4,-378558),a=nr(a,t,r,o,e[8],11,-2022574463),o=nr(o,a,t,r,e[11],16,1839030562),r=nr(r,o,a,t,e[14],23,-35309556),t=nr(t,r,o,a,e[1],4,-1530992060),a=nr(a,t,r,o,e[4],11,1272893353),o=nr(o,a,t,r,e[7],16,-155497632),r=nr(r,o,a,t,e[10],23,-1094730640),t=nr(t,r,o,a,e[13],4,681279174),a=nr(a,t,r,o,e[0],11,-358537222),o=nr(o,a,t,r,e[3],16,-722521979),r=nr(r,o,a,t,e[6],23,76029189),t=nr(t,r,o,a,e[9],4,-640364487),a=nr(a,t,r,o,e[12],11,-421815835),o=nr(o,a,t,r,e[15],16,530742520),t=rr(t,r=nr(r,o,a,t,e[2],23,-995338651),o,a,e[0],6,-198630844),a=rr(a,t,r,o,e[7],10,1126891415),o=rr(o,a,t,r,e[14],15,-1416354905),r=rr(r,o,a,t,e[5],21,-57434055),t=rr(t,r,o,a,e[12],6,1700485571),a=rr(a,t,r,o,e[3],10,-1894986606),o=rr(o,a,t,r,e[10],15,-1051523),r=rr(r,o,a,t,e[1],21,-2054922799),t=rr(t,r,o,a,e[8],6,1873313359),a=rr(a,t,r,o,e[15],10,-30611744),o=rr(o,a,t,r,e[6],15,-1560198380),r=rr(r,o,a,t,e[13],21,1309151649),t=rr(t,r,o,a,e[4],6,-145523070),a=rr(a,t,r,o,e[11],10,-1120210379),o=rr(o,a,t,r,e[2],15,718787259),r=rr(r,o,a,t,e[9],21,-343485551),n[0]=wo(t,n[0]),n[1]=wo(r,n[1]),n[2]=wo(o,n[2]),n[3]=wo(a,n[3])}function Hl(n,e,t,r,o,a){return e=wo(wo(e,n),wo(r,a)),wo(e<<o|e>>>32-o,t)}function er(n,e,t,r,o,a,s){return Hl(e&t|~e&r,n,e,o,a,s)}function tr(n,e,t,r,o,a,s){return Hl(e&r|t&~r,n,e,o,a,s)}function nr(n,e,t,r,o,a,s){return Hl(e^t^r,n,e,o,a,s)}function rr(n,e,t,r,o,a,s){return Hl(t^(e|~r),n,e,o,a,s)}function Ef(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)xu(r,P0(n.substring(e-64,e)));n=n.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)o[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(xu(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*t,xu(r,o),r}function P0(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Fs=At.atob.bind(At),qu=At.btoa.bind(At);var yd="0123456789abcdef".split("");function C0(n){for(var e="",t=0;t<4;t++)e+=yd[n>>8*t+4&15]+yd[n>>8*t&15];return e}function F0(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function zu(n){return Ef(n).map(F0).join("")}var D0=function(n){for(var e=0;e<n.length;e++)n[e]=C0(n[e]);return n.join("")}(Ef("hello"))!="5d41402abc4b2a76b9719d911017c592";function wo(n,e){if(D0){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $u(n,e){var t,r,o,a;if(n!==t){for(var s=(o=n,a=1+(256/n.length>>0),new Array(a+1).join(o)),l=[],u=0;u<256;u++)l[u]=u;var h=0;for(u=0;u<256;u++){var y=l[u];h=(h+y+s.charCodeAt(u))%256,l[u]=l[h],l[h]=y}t=n,r=l}else l=r;var v=e.length,b=0,f=0,m="";for(u=0;u<v;u++)f=(f+(y=l[b=(b+1)%256]))%256,l[b]=l[f],l[f]=y,s=l[(l[b]+l[f])%256],m+=String.fromCharCode(e.charCodeAt(u)^s);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var bd={print:4,modify:8,copy:16,"annot-forms":32};function Li(n,e,t,r){this.v=1,this.r=2;var o=192;n.forEach(function(l){if(bd.perm!==void 0)throw new Error("Invalid permission: "+l);o+=bd[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^o)),this.encryptionKey=zu(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=$u(this.encryptionKey,this.padding)}function ki(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var o=n.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=n[r]}return e}function _d(n){if(dn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,o){if(o=o||!1,typeof t!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[r,!!o],a},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var a in e[t]){var s=e[t][a];try{s[0].apply(n,r)}catch(l){At.console&&un.error("jsPDF PubSub Error",l.message,l)}s[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Cl(n){if(!(this instanceof Cl))return new Cl(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Tf(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function zo(n,e,t,r,o){if(!(this instanceof zo))return new zo(n,e,t,r,o);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Tf.call(this,r,o)}function Mi(n,e,t,r,o){if(!(this instanceof Mi))return new Mi(n,e,t,r,o);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Tf.call(this,r,o)}function Nt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],a=arguments[3],s=[],l=1,u=16,h="S",y=null;dn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,o=n.format||o,a=n.compress||n.compressPdf||a,(y=n.encryption||null)!==null&&(y.userPassword=y.userPassword||"",y.ownerPassword=y.ownerPassword||"",y.userPermissions=y.userPermissions||[]),l=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(u=n.floatPrecision),h=n.defaultPathOperation||"S"),s=n.filters||(a===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var v=n.putOnlyUsedFonts||!1,b={},f={internal:{},__private__:{}};f.__private__.PubSub=_d;var m="1.3",g=f.__private__.getPdfVersion=function(){return m};f.__private__.setPdfVersion=function(d){m=d};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return S};var w=f.__private__.getPageFormat=function(d){return S[d]};o=o||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},T=A.COMPAT;function G(){this.saveGraphicsState(),z(new vt(Ze,0,0,-Ze,0,eo()*Ze).toString()+" cm"),this.setFontSize(this.getFontSize()/Ze),h="n",T=A.ADVANCED}function ae(){this.restoreGraphicsState(),h="S",T=A.COMPAT}var ye=f.__private__.combineFontStyleAndFontWeight=function(d,N){if(d=="bold"&&N=="normal"||d=="bold"&&N==400||d=="normal"&&N=="italic"||d=="bold"&&N=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return N&&(d=N==400||N==="normal"?d==="italic"?"italic":"normal":N!=700&&N!=="bold"||d!=="normal"?(N==700?"bold":N)+""+d:"bold"),d};f.advancedAPI=function(d){var N=T===A.COMPAT;return N&&G.call(this),typeof d!="function"||(d(this),N&&ae.call(this)),this},f.compatAPI=function(d){var N=T===A.ADVANCED;return N&&ae.call(this),typeof d!="function"||(d(this),N&&G.call(this)),this},f.isAdvancedAPI=function(){return T===A.ADVANCED};var ie,R=function(d){if(T!==A.ADVANCED)throw new Error(d+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Z=f.roundToPrecision=f.__private__.roundToPrecision=function(d,N){var V=e||N;if(isNaN(d)||isNaN(V))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return d.toFixed(V).replace(/0+$/,"")};ie=f.hpf=f.__private__.hpf=typeof u=="number"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(d,u)}:u==="smart"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(d,d>-1&&d<1?16:5)}:function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(d,16)};var pe=f.f2=f.__private__.f2=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f2");return Z(d,2)},D=f.__private__.f3=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f3");return Z(d,3)},M=f.scale=f.__private__.scale=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.scale");return T===A.COMPAT?d*Ze:T===A.ADVANCED?d:void 0},te=function(d){return T===A.COMPAT?eo()-d:T===A.ADVANCED?d:void 0},Y=function(d){return M(te(d))};f.__private__.setPrecision=f.setPrecision=function(d){typeof parseInt(d,10)=="number"&&(e=parseInt(d,10))};var ve,ge="00000000000000000000000000000000",xe=f.__private__.getFileId=function(){return ge},de=f.__private__.setFileId=function(d){return ge=d!==void 0&&/^[a-fA-F0-9]{32}$/.test(d)?d.toUpperCase():ge.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),y!==null&&(K=new Li(y.userPermissions,y.userPassword,y.ownerPassword,ge)),ge};f.setFileId=function(d){return de(d),this},f.getFileId=function(){return xe()};var we=f.__private__.convertDateToPDFDate=function(d){var N=d.getTimezoneOffset(),V=N<0?"+":"-",J=Math.floor(Math.abs(N/60)),se=Math.abs(N%60),Ae=[V,q(J),"'",q(se),"'"].join("");return["D:",d.getFullYear(),q(d.getMonth()+1),q(d.getDate()),q(d.getHours()),q(d.getMinutes()),q(d.getSeconds()),Ae].join("")},Le=f.__private__.convertPDFDateToDate=function(d){var N=parseInt(d.substr(2,4),10),V=parseInt(d.substr(6,2),10)-1,J=parseInt(d.substr(8,2),10),se=parseInt(d.substr(10,2),10),Ae=parseInt(d.substr(12,2),10),Oe=parseInt(d.substr(14,2),10);return new Date(N,V,J,se,Ae,Oe,0)},Ye=f.__private__.setCreationDate=function(d){var N;if(d===void 0&&(d=new Date),d instanceof Date)N=we(d);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(d))throw new Error("Invalid argument passed to jsPDF.setCreationDate");N=d}return ve=N},P=f.__private__.getCreationDate=function(d){var N=ve;return d==="jsDate"&&(N=Le(ve)),N};f.setCreationDate=function(d){return Ye(d),this},f.getCreationDate=function(d){return P(d)};var B,q=f.__private__.padd2=function(d){return("0"+parseInt(d)).slice(-2)},X=f.__private__.padd2Hex=function(d){return("00"+(d=d.toString())).substr(d.length)},ne=0,fe=[],he=[],me=0,Ve=[],Be=[],Je=!1,qe=he,ht=function(){ne=0,me=0,he=[],fe=[],Ve=[],Or=bn(),hr=bn()};f.__private__.setCustomOutputDestination=function(d){Je=!0,qe=d};var ke=function(d){Je||(qe=d)};f.__private__.resetCustomOutputDestination=function(){Je=!1,qe=he};var z=f.__private__.out=function(d){return d=d.toString(),me+=d.length+1,qe.push(d),qe},kt=f.__private__.write=function(d){return z(arguments.length===1?d.toString():Array.prototype.join.call(arguments," "))},ot=f.__private__.getArrayBuffer=function(d){for(var N=d.length,V=new ArrayBuffer(N),J=new Uint8Array(V);N--;)J[N]=d.charCodeAt(N);return V},je=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return je};var $e=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(d){return $e=T===A.ADVANCED?d/Ze:d,this};var Ke,Ge=f.__private__.getFontSize=f.getFontSize=function(){return T===A.COMPAT?$e:$e*Ze},ut=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(d){return ut=d,this},f.__private__.getR2L=f.getR2L=function(){return ut};var Lt,It=f.__private__.setZoomMode=function(d){var N=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(d))Ke=d;else if(isNaN(d)){if(N.indexOf(d)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+d+'" is not recognized.');Ke=d}else Ke=parseInt(d,10)};f.__private__.getZoomMode=function(){return Ke};var Tt,Rt=f.__private__.setPageMode=function(d){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(d)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+d+'" is not recognized.');Lt=d};f.__private__.getPageMode=function(){return Lt};var $t=f.__private__.setLayoutMode=function(d){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(d)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+d+'" is not recognized.');Tt=d};f.__private__.getLayoutMode=function(){return Tt},f.__private__.setDisplayMode=f.setDisplayMode=function(d,N,V){return It(d),$t(N),Rt(V),this};var _t={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(d){if(Object.keys(_t).indexOf(d)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _t[d]},f.__private__.getDocumentProperties=function(){return _t},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(d){for(var N in _t)_t.hasOwnProperty(N)&&d[N]&&(_t[N]=d[N]);return this},f.__private__.setDocumentProperty=function(d,N){if(Object.keys(_t).indexOf(d)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _t[d]=N};var Ot,Ze,jn,Vt,wr,tn={},Jt={},Gn=[],Wt={},la={},hn={},pr={},Jr=null,gn=0,ft=[],Ht=new _d(f),ua=n.hotfixes||[],Tn={},Mr={},Er=[],vt=function d(N,V,J,se,Ae,Oe){if(!(this instanceof d))return new d(N,V,J,se,Ae,Oe);isNaN(N)&&(N=1),isNaN(V)&&(V=0),isNaN(J)&&(J=0),isNaN(se)&&(se=1),isNaN(Ae)&&(Ae=0),isNaN(Oe)&&(Oe=0),this._matrix=[N,V,J,se,Ae,Oe]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(d){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ie).join(d)},vt.prototype.multiply=function(d){var N=d.sx*this.sx+d.shy*this.shx,V=d.sx*this.shy+d.shy*this.sy,J=d.shx*this.sx+d.sy*this.shx,se=d.shx*this.shy+d.sy*this.sy,Ae=d.tx*this.sx+d.ty*this.shx+this.tx,Oe=d.tx*this.shy+d.ty*this.sy+this.ty;return new vt(N,V,J,se,Ae,Oe)},vt.prototype.decompose=function(){var d=this.sx,N=this.shy,V=this.shx,J=this.sy,se=this.tx,Ae=this.ty,Oe=Math.sqrt(d*d+N*N),Qe=(d/=Oe)*V+(N/=Oe)*J;V-=d*Qe,J-=N*Qe;var pt=Math.sqrt(V*V+J*J);return Qe/=pt,d*(J/=pt)<N*(V/=pt)&&(d=-d,N=-N,Qe=-Qe,Oe=-Oe),{scale:new vt(Oe,0,0,pt,0,0),translate:new vt(1,0,0,1,se,Ae),rotate:new vt(d,N,-N,d,0,0),skew:new vt(1,0,Qe,1,0,0)}},vt.prototype.toString=function(d){return this.join(" ")},vt.prototype.inversed=function(){var d=this.sx,N=this.shy,V=this.shx,J=this.sy,se=this.tx,Ae=this.ty,Oe=1/(d*J-N*V),Qe=J*Oe,pt=-N*Oe,Dt=-V*Oe,Pt=d*Oe;return new vt(Qe,pt,Dt,Pt,-Qe*se-Dt*Ae,-pt*se-Pt*Ae)},vt.prototype.applyToPoint=function(d){var N=d.x*this.sx+d.y*this.shx+this.tx,V=d.x*this.shy+d.y*this.sy+this.ty;return new ii(N,V)},vt.prototype.applyToRectangle=function(d){var N=this.applyToPoint(d),V=this.applyToPoint(new ii(d.x+d.w,d.y+d.h));return new ls(N.x,N.y,V.x-N.x,V.y-N.y)},vt.prototype.clone=function(){var d=this.sx,N=this.shy,V=this.shx,J=this.sy,se=this.tx,Ae=this.ty;return new vt(d,N,V,J,se,Ae)},f.Matrix=vt;var Sr=f.matrixMult=function(d,N){return N.multiply(d)},Tr=new vt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Tr;var Kn=function(d,N){if(!la[d]){var V=(N instanceof zo?"Sh":"P")+(Object.keys(Wt).length+1).toString(10);N.id=V,la[d]=V,Wt[V]=N,Ht.publish("addPattern",N)}};f.ShadingPattern=zo,f.TilingPattern=Mi,f.addShadingPattern=function(d,N){return R("addShadingPattern()"),Kn(d,N),this},f.beginTilingPattern=function(d){R("beginTilingPattern()"),zs(d.boundingBox[0],d.boundingBox[1],d.boundingBox[2]-d.boundingBox[0],d.boundingBox[3]-d.boundingBox[1],d.matrix)},f.endTilingPattern=function(d,N){R("endTilingPattern()"),N.stream=Be[B].join(`
`),Kn(d,N),Ht.publish("endTilingPattern",N),Er.pop().restore()};var Ln=f.__private__.newObject=function(){var d=bn();return sr(d,!0),d},bn=f.__private__.newObjectDeferred=function(){return ne++,fe[ne]=function(){return me},ne},sr=function(d,N){return N=typeof N=="boolean"&&N,fe[d]=me,N&&z(d+" 0 obj"),d},$a=f.__private__.newAdditionalObject=function(){var d={objId:bn(),content:""};return Ve.push(d),d},Or=bn(),hr=bn(),xr=f.__private__.decodeColorString=function(d){var N=d.split(" ");if(N.length!==2||N[1]!=="g"&&N[1]!=="G")N.length===5&&(N[4]==="k"||N[4]==="K")&&(N=[(1-N[0])*(1-N[3]),(1-N[1])*(1-N[3]),(1-N[2])*(1-N[3]),"r"]);else{var V=parseFloat(N[0]);N=[V,V,V,"r"]}for(var J="#",se=0;se<3;se++)J+=("0"+Math.floor(255*parseFloat(N[se])).toString(16)).slice(-2);return J},Nr=f.__private__.encodeColorString=function(d){var N;typeof d=="string"&&(d={ch1:d});var V=d.ch1,J=d.ch2,se=d.ch3,Ae=d.ch4,Oe=d.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof V=="string"&&V.charAt(0)!=="#"){var Qe=new Mf(V);if(Qe.ok)V=Qe.toHex();else if(!/^\d*\.?\d*$/.test(V))throw new Error('Invalid color "'+V+'" passed to jsPDF.encodeColorString.')}if(typeof V=="string"&&/^#[0-9A-Fa-f]{3}$/.test(V)&&(V="#"+V[1]+V[1]+V[2]+V[2]+V[3]+V[3]),typeof V=="string"&&/^#[0-9A-Fa-f]{6}$/.test(V)){var pt=parseInt(V.substr(1),16);V=pt>>16&255,J=pt>>8&255,se=255&pt}if(J===void 0||Ae===void 0&&V===J&&J===se)if(typeof V=="string")N=V+" "+Oe[0];else switch(d.precision){case 2:N=pe(V/255)+" "+Oe[0];break;case 3:default:N=D(V/255)+" "+Oe[0]}else if(Ae===void 0||dn(Ae)==="object"){if(Ae&&!isNaN(Ae.a)&&Ae.a===0)return N=["1.","1.","1.",Oe[1]].join(" ");if(typeof V=="string")N=[V,J,se,Oe[1]].join(" ");else switch(d.precision){case 2:N=[pe(V/255),pe(J/255),pe(se/255),Oe[1]].join(" ");break;default:case 3:N=[D(V/255),D(J/255),D(se/255),Oe[1]].join(" ")}}else if(typeof V=="string")N=[V,J,se,Ae,Oe[2]].join(" ");else switch(d.precision){case 2:N=[pe(V),pe(J),pe(se),pe(Ae),Oe[2]].join(" ");break;case 3:default:N=[D(V),D(J),D(se),D(Ae),Oe[2]].join(" ")}return N},Rr=f.__private__.getFilters=function(){return s},mr=f.__private__.putStream=function(d){var N=(d=d||{}).data||"",V=d.filters||Rr(),J=d.alreadyAppliedFilters||[],se=d.addLength1||!1,Ae=N.length,Oe=d.objectId,Qe=function(Qn){return Qn};if(y!==null&&Oe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");y!==null&&(Qe=K.encryptor(Oe,0));var pt={};V===!0&&(V=["FlateEncode"]);var Dt=d.additionalKeyValues||[],Pt=(pt=Nt.API.processDataByFilters!==void 0?Nt.API.processDataByFilters(N,V):{data:N,reverseChain:[]}).reverseChain+(Array.isArray(J)?J.join(" "):J.toString());if(pt.data.length!==0&&(Dt.push({key:"Length",value:pt.data.length}),se===!0&&Dt.push({key:"Length1",value:Ae})),Pt.length!=0)if(Pt.split("/").length-1==1)Dt.push({key:"Filter",value:Pt});else{Dt.push({key:"Filter",value:"["+Pt+"]"});for(var qt=0;qt<Dt.length;qt+=1)if(Dt[qt].key==="DecodeParms"){for(var yn=[],_n=0;_n<pt.reverseChain.split("/").length-1;_n+=1)yn.push("null");yn.push(Dt[qt].value),Dt[qt].value="["+yn.join(" ")+"]"}}z("<<");for(var Dn=0;Dn<Dt.length;Dn++)z("/"+Dt[Dn].key+" "+Dt[Dn].value);z(">>"),pt.data.length!==0&&(z("stream"),z(Qe(pt.data)),z("endstream"))},jr=f.__private__.putPage=function(d){var N=d.number,V=d.data,J=d.objId,se=d.contentsObjId;sr(J,!0),z("<</Type /Page"),z("/Parent "+d.rootDictionaryObjId+" 0 R"),z("/Resources "+d.resourceDictionaryObjId+" 0 R"),z("/MediaBox ["+parseFloat(ie(d.mediaBox.bottomLeftX))+" "+parseFloat(ie(d.mediaBox.bottomLeftY))+" "+ie(d.mediaBox.topRightX)+" "+ie(d.mediaBox.topRightY)+"]"),d.cropBox!==null&&z("/CropBox ["+ie(d.cropBox.bottomLeftX)+" "+ie(d.cropBox.bottomLeftY)+" "+ie(d.cropBox.topRightX)+" "+ie(d.cropBox.topRightY)+"]"),d.bleedBox!==null&&z("/BleedBox ["+ie(d.bleedBox.bottomLeftX)+" "+ie(d.bleedBox.bottomLeftY)+" "+ie(d.bleedBox.topRightX)+" "+ie(d.bleedBox.topRightY)+"]"),d.trimBox!==null&&z("/TrimBox ["+ie(d.trimBox.bottomLeftX)+" "+ie(d.trimBox.bottomLeftY)+" "+ie(d.trimBox.topRightX)+" "+ie(d.trimBox.topRightY)+"]"),d.artBox!==null&&z("/ArtBox ["+ie(d.artBox.bottomLeftX)+" "+ie(d.artBox.bottomLeftY)+" "+ie(d.artBox.topRightX)+" "+ie(d.artBox.topRightY)+"]"),typeof d.userUnit=="number"&&d.userUnit!==1&&z("/UserUnit "+d.userUnit),Ht.publish("putPage",{objId:J,pageContext:ft[N],pageNumber:N,page:V}),z("/Contents "+se+" 0 R"),z(">>"),z("endobj");var Ae=V.join(`
`);return T===A.ADVANCED&&(Ae+=`
Q`),sr(se,!0),mr({data:Ae,filters:Rr(),objectId:se}),z("endobj"),J},ca=f.__private__.putPages=function(){var d,N,V=[];for(d=1;d<=gn;d++)ft[d].objId=bn(),ft[d].contentsObjId=bn();for(d=1;d<=gn;d++)V.push(jr({number:d,data:Be[d],objId:ft[d].objId,contentsObjId:ft[d].contentsObjId,mediaBox:ft[d].mediaBox,cropBox:ft[d].cropBox,bleedBox:ft[d].bleedBox,trimBox:ft[d].trimBox,artBox:ft[d].artBox,userUnit:ft[d].userUnit,rootDictionaryObjId:Or,resourceDictionaryObjId:hr}));sr(Or,!0),z("<</Type /Pages");var J="/Kids [";for(N=0;N<gn;N++)J+=V[N]+" 0 R ";z(J+"]"),z("/Count "+gn),z(">>"),z("endobj"),Ht.publish("postPutPages")},ka=function(d){Ht.publish("putFont",{font:d,out:z,newObject:Ln,putStream:mr}),d.isAlreadyPutted!==!0&&(d.objectNumber=Ln(),z("<<"),z("/Type /Font"),z("/BaseFont /"+ki(d.postScriptName)),z("/Subtype /Type1"),typeof d.encoding=="string"&&z("/Encoding /"+d.encoding),z("/FirstChar 32"),z("/LastChar 255"),z(">>"),z("endobj"))},Ia=function(){for(var d in tn)tn.hasOwnProperty(d)&&(v===!1||v===!0&&b.hasOwnProperty(d))&&ka(tn[d])},Wa=function(d){d.objectNumber=Ln();var N=[];N.push({key:"Type",value:"/XObject"}),N.push({key:"Subtype",value:"/Form"}),N.push({key:"BBox",value:"["+[ie(d.x),ie(d.y),ie(d.x+d.width),ie(d.y+d.height)].join(" ")+"]"}),N.push({key:"Matrix",value:"["+d.matrix.toString()+"]"});var V=d.pages[1].join(`
`);mr({data:V,additionalKeyValues:N,objectId:d.objectNumber}),z("endobj")},Ha=function(){for(var d in Tn)Tn.hasOwnProperty(d)&&Wa(Tn[d])},Xo=function(d,N){var V,J=[],se=1/(N-1);for(V=0;V<1;V+=se)J.push(V);if(J.push(1),d[0].offset!=0){var Ae={offset:0,color:d[0].color};d.unshift(Ae)}if(d[d.length-1].offset!=1){var Oe={offset:1,color:d[d.length-1].color};d.push(Oe)}for(var Qe="",pt=0,Dt=0;Dt<J.length;Dt++){for(V=J[Dt];V>d[pt+1].offset;)pt++;var Pt=d[pt].offset,qt=(V-Pt)/(d[pt+1].offset-Pt),yn=d[pt].color,_n=d[pt+1].color;Qe+=X(Math.round((1-qt)*yn[0]+qt*_n[0]).toString(16))+X(Math.round((1-qt)*yn[1]+qt*_n[1]).toString(16))+X(Math.round((1-qt)*yn[2]+qt*_n[2]).toString(16))}return Qe.trim()},Io=function(d,N){N||(N=21);var V=Ln(),J=Xo(d.colors,N),se=[];se.push({key:"FunctionType",value:"0"}),se.push({key:"Domain",value:"[0.0 1.0]"}),se.push({key:"Size",value:"["+N+"]"}),se.push({key:"BitsPerSample",value:"8"}),se.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),se.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mr({data:J,additionalKeyValues:se,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:V}),z("endobj"),d.objectNumber=Ln(),z("<< /ShadingType "+d.type),z("/ColorSpace /DeviceRGB");var Ae="/Coords ["+ie(parseFloat(d.coords[0]))+" "+ie(parseFloat(d.coords[1]))+" ";d.type===2?Ae+=ie(parseFloat(d.coords[2]))+" "+ie(parseFloat(d.coords[3])):Ae+=ie(parseFloat(d.coords[2]))+" "+ie(parseFloat(d.coords[3]))+" "+ie(parseFloat(d.coords[4]))+" "+ie(parseFloat(d.coords[5])),z(Ae+="]"),d.matrix&&z("/Matrix ["+d.matrix.toString()+"]"),z("/Function "+V+" 0 R"),z("/Extend [true true]"),z(">>"),z("endobj")},Ko=function(d,N){var V=bn(),J=Ln();N.push({resourcesOid:V,objectOid:J}),d.objectNumber=J;var se=[];se.push({key:"Type",value:"/Pattern"}),se.push({key:"PatternType",value:"1"}),se.push({key:"PaintType",value:"1"}),se.push({key:"TilingType",value:"1"}),se.push({key:"BBox",value:"["+d.boundingBox.map(ie).join(" ")+"]"}),se.push({key:"XStep",value:ie(d.xStep)}),se.push({key:"YStep",value:ie(d.yStep)}),se.push({key:"Resources",value:V+" 0 R"}),d.matrix&&se.push({key:"Matrix",value:"["+d.matrix.toString()+"]"}),mr({data:d.stream,additionalKeyValues:se,objectId:d.objectNumber}),z("endobj")},Ga=function(d){var N;for(N in Wt)Wt.hasOwnProperty(N)&&(Wt[N]instanceof zo?Io(Wt[N]):Wt[N]instanceof Mi&&Ko(Wt[N],d))},da=function(d){for(var N in d.objectNumber=Ln(),z("<<"),d)switch(N){case"opacity":z("/ca "+pe(d[N]));break;case"stroke-opacity":z("/CA "+pe(d[N]))}z(">>"),z("endobj")},Zo=function(){var d;for(d in hn)hn.hasOwnProperty(d)&&da(hn[d])},Ya=function(){for(var d in z("/XObject <<"),Tn)Tn.hasOwnProperty(d)&&Tn[d].objectNumber>=0&&z("/"+d+" "+Tn[d].objectNumber+" 0 R");Ht.publish("putXobjectDict"),z(">>")},Qo=function(){K.oid=Ln(),z("<<"),z("/Filter /Standard"),z("/V "+K.v),z("/R "+K.r),z("/U <"+K.toHexString(K.U)+">"),z("/O <"+K.toHexString(K.O)+">"),z("/P "+K.P),z(">>"),z("endobj")},ei=function(){for(var d in z("/Font <<"),tn)tn.hasOwnProperty(d)&&(v===!1||v===!0&&b.hasOwnProperty(d))&&z("/"+d+" "+tn[d].objectNumber+" 0 R");z(">>")},Zi=function(){if(Object.keys(Wt).length>0){for(var d in z("/Shading <<"),Wt)Wt.hasOwnProperty(d)&&Wt[d]instanceof zo&&Wt[d].objectNumber>=0&&z("/"+d+" "+Wt[d].objectNumber+" 0 R");Ht.publish("putShadingPatternDict"),z(">>")}},Ja=function(d){if(Object.keys(Wt).length>0){for(var N in z("/Pattern <<"),Wt)Wt.hasOwnProperty(N)&&Wt[N]instanceof f.TilingPattern&&Wt[N].objectNumber>=0&&Wt[N].objectNumber<d&&z("/"+N+" "+Wt[N].objectNumber+" 0 R");Ht.publish("putTilingPatternDict"),z(">>")}},Qi=function(){if(Object.keys(hn).length>0){var d;for(d in z("/ExtGState <<"),hn)hn.hasOwnProperty(d)&&hn[d].objectNumber>=0&&z("/"+d+" "+hn[d].objectNumber+" 0 R");Ht.publish("putGStateDict"),z(">>")}},vn=function(d){sr(d.resourcesOid,!0),z("<<"),z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ei(),Zi(),Ja(d.objectOid),Qi(),Ya(),z(">>"),z("endobj")},ti=function(){var d=[];Ia(),Zo(),Ha(),Ga(d),Ht.publish("putResources"),d.forEach(vn),vn({resourcesOid:hr,objectOid:Number.MAX_SAFE_INTEGER}),Ht.publish("postPutResources")},Po=function(){Ht.publish("putAdditionalObjects");for(var d=0;d<Ve.length;d++){var N=Ve[d];sr(N.objId,!0),z(N.content),z("endobj")}Ht.publish("postPutAdditionalObjects")},ni=function(d){Jt[d.fontName]=Jt[d.fontName]||{},Jt[d.fontName][d.fontStyle]=d.id},Co=function(d,N,V,J,se){var Ae={id:"F"+(Object.keys(tn).length+1).toString(10),postScriptName:d,fontName:N,fontStyle:V,encoding:J,isStandardFont:se||!1,metadata:{}};return Ht.publish("addFont",{font:Ae,instance:this}),tn[Ae.id]=Ae,ni(Ae),Ae.id},ri=function(d){for(var N=0,V=je.length;N<V;N++){var J=Co.call(this,d[N][0],d[N][1],d[N][2],je[N][3],!0);v===!1&&(b[J]=!0);var se=d[N][0].split("-");ni({id:J,fontName:se[0],fontStyle:se[1]||""})}Ht.publish("addFonts",{fonts:tn,dictionary:Jt})},Ar=function(d){return d.foo=function(){try{return d.apply(this,arguments)}catch(J){var N=J.stack||"";~N.indexOf(" at ")&&(N=N.split(" at ")[1]);var V="Error in function "+N.split(`
`)[0].split("<")[0]+": "+J.message;if(!At.console)throw new Error(V);At.console.error(V,J),At.alert&&alert(V)}},d.foo.bar=d,d.foo},Xa=function(d,N){var V,J,se,Ae,Oe,Qe,pt,Dt,Pt;if(se=(N=N||{}).sourceEncoding||"Unicode",Oe=N.outputEncoding,(N.autoencode||Oe)&&tn[Ot].metadata&&tn[Ot].metadata[se]&&tn[Ot].metadata[se].encoding&&(Ae=tn[Ot].metadata[se].encoding,!Oe&&tn[Ot].encoding&&(Oe=tn[Ot].encoding),!Oe&&Ae.codePages&&(Oe=Ae.codePages[0]),typeof Oe=="string"&&(Oe=Ae[Oe]),Oe)){for(pt=!1,Qe=[],V=0,J=d.length;V<J;V++)(Dt=Oe[d.charCodeAt(V)])?Qe.push(String.fromCharCode(Dt)):Qe.push(d[V]),Qe[V].charCodeAt(0)>>8&&(pt=!0);d=Qe.join("")}for(V=d.length;pt===void 0&&V!==0;)d.charCodeAt(V-1)>>8&&(pt=!0),V--;if(!pt)return d;for(Qe=N.noBOM?[]:[254,255],V=0,J=d.length;V<J;V++){if((Pt=(Dt=d.charCodeAt(V))>>8)>>8)throw new Error("Character at position "+V+" of string '"+d+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(Pt),Qe.push(Dt-(Pt<<8))}return String.fromCharCode.apply(void 0,Qe)},Zn=f.__private__.pdfEscape=f.pdfEscape=function(d,N){return Xa(d,N).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ka=f.__private__.beginPage=function(d){Be[++gn]=[],ft[gn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(d[0]),topRightY:Number(d[1])}},Pa(gn),ke(Be[B])},Fo=function(d,N){var V,J,se;switch(t=N||t,typeof d=="string"&&(V=w(d.toLowerCase()),Array.isArray(V)&&(J=V[0],se=V[1])),Array.isArray(d)&&(J=d[0]*Ze,se=d[1]*Ze),isNaN(J)&&(J=o[0],se=o[1]),(J>14400||se>14400)&&(un.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),J=Math.min(14400,J),se=Math.min(14400,se)),o=[J,se],t.substr(0,1)){case"l":se>J&&(o=[se,J]);break;case"p":J>se&&(o=[se,J])}Ka(o),Za(Zt),z(Zr),is!==0&&z(is+" J"),ss!==0&&z(ss+" j"),Ht.publish("addPage",{pageNumber:gn})},es=function(d){d>0&&d<=gn&&(Be.splice(d,1),ft.splice(d,1),gn--,B>gn&&(B=gn),this.setPage(B))},Pa=function(d){d>0&&d<=gn&&(B=d)},ts=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Be.length-1},Xr=function(d,N,V){var J,se=void 0;return V=V||{},d=d!==void 0?d:tn[Ot].fontName,N=N!==void 0?N:tn[Ot].fontStyle,J=d.toLowerCase(),Jt[J]!==void 0&&Jt[J][N]!==void 0?se=Jt[J][N]:Jt[d]!==void 0&&Jt[d][N]!==void 0?se=Jt[d][N]:V.disableWarning===!1&&un.warn("Unable to look up font label for font '"+d+"', '"+N+"'. Refer to getFontList() for available fonts."),se||V.noFallback||(se=Jt.times[N])==null&&(se=Jt.times.normal),se},ai=f.__private__.putInfo=function(){var d=Ln(),N=function(J){return J};for(var V in y!==null&&(N=K.encryptor(d,0)),z("<<"),z("/Producer ("+Zn(N("jsPDF "+Nt.version))+")"),_t)_t.hasOwnProperty(V)&&_t[V]&&z("/"+V.substr(0,1).toUpperCase()+V.substr(1)+" ("+Zn(N(_t[V]))+")");z("/CreationDate ("+Zn(N(ve))+")"),z(">>"),z("endobj")},Do=f.__private__.putCatalog=function(d){var N=(d=d||{}).rootDictionaryObjId||Or;switch(Ln(),z("<<"),z("/Type /Catalog"),z("/Pages "+N+" 0 R"),Ke||(Ke="fullwidth"),Ke){case"fullwidth":z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":z("/OpenAction [3 0 R /Fit]");break;case"original":z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var V=""+Ke;V.substr(V.length-1)==="%"&&(Ke=parseInt(Ke)/100),typeof Ke=="number"&&z("/OpenAction [3 0 R /XYZ null null "+pe(Ke)+"]")}switch(Tt||(Tt="continuous"),Tt){case"continuous":z("/PageLayout /OneColumn");break;case"single":z("/PageLayout /SinglePage");break;case"two":case"twoleft":z("/PageLayout /TwoColumnLeft");break;case"tworight":z("/PageLayout /TwoColumnRight")}Lt&&z("/PageMode /"+Lt),Ht.publish("putCatalog"),z(">>"),z("endobj")},ns=f.__private__.putTrailer=function(){z("trailer"),z("<<"),z("/Size "+(ne+1)),z("/Root "+ne+" 0 R"),z("/Info "+(ne-1)+" 0 R"),y!==null&&z("/Encrypt "+K.oid+" 0 R"),z("/ID [ <"+ge+"> <"+ge+"> ]"),z(">>")},rs=f.__private__.putHeader=function(){z("%PDF-"+m),z("%ºß¬à")},as=f.__private__.putXRef=function(){var d="0000000000";z("xref"),z("0 "+(ne+1)),z("0000000000 65535 f ");for(var N=1;N<=ne;N++)typeof fe[N]=="function"?z((d+fe[N]()).slice(-10)+" 00000 n "):fe[N]!==void 0?z((d+fe[N]).slice(-10)+" 00000 n "):z("0000000000 00000 n ")},Kr=f.__private__.buildDocument=function(){ht(),ke(he),Ht.publish("buildDocument"),rs(),ca(),Po(),ti(),y!==null&&Qo(),ai(),Do();var d=me;return as(),ns(),z("startxref"),z(""+d),z("%%EOF"),ke(Be[B]),he.join(`
`)},L=f.__private__.getBlob=function(d){return new Blob([ot(d)],{type:"application/pdf"})},U=f.output=f.__private__.output=Ar(function(d,N){switch(typeof(N=N||{})=="string"?N={filename:N}:N.filename=N.filename||"generated.pdf",d){case void 0:return Kr();case"save":f.save(N.filename);break;case"arraybuffer":return ot(Kr());case"blob":return L(Kr());case"bloburi":case"bloburl":if(At.URL!==void 0&&typeof At.URL.createObjectURL=="function")return At.URL&&At.URL.createObjectURL(L(Kr()))||void 0;un.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var V="",J=Kr();try{V=qu(J)}catch{V=qu(unescape(encodeURIComponent(J)))}return"data:application/pdf;filename="+N.filename+";base64,"+V;case"pdfobjectnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var se="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ae=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';N.pdfObjectUrl&&(se=N.pdfObjectUrl,Ae="");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+se+'"'+Ae+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(N)+");<\/script></body></html>",Qe=At.open();return Qe!==null&&Qe.document.write(Oe),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(N.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+N.filename+'" width="500px" height="400px" /></body></html>',Dt=At.open();if(Dt!==null){Dt.document.write(pt);var Pt=this;Dt.document.documentElement.querySelector("#pdfViewer").onload=function(){Dt.document.title=N.filename,Dt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Pt.output("bloburl"))}}return Dt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(At)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",N)+'"></iframe></body></html>',yn=At.open();if(yn!==null&&(yn.document.write(qt),yn.document.title=N.filename),yn||typeof safari>"u")return yn;break;case"datauri":case"dataurl":return At.document.location.href=this.output("datauristring",N);default:return null}}),$=function(d){return Array.isArray(ua)===!0&&ua.indexOf(d)>-1};switch(r){case"pt":Ze=1;break;case"mm":Ze=72/25.4;break;case"cm":Ze=72/2.54;break;case"in":Ze=72;break;case"px":Ze=$("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ze=12;break;case"ex":Ze=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ze=r}var K=null;Ye(),de();var Ne=function(d){return y!==null?K.encryptor(d,0):function(N){return N}},Se=f.__private__.getPageInfo=f.getPageInfo=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ft[d].objId,pageNumber:d,pageContext:ft[d]}},le=f.__private__.getPageInfoByObjId=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var N in ft)if(ft[N].objId===d)break;return Se(N)},Ie=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ft[B].objId,pageNumber:B,pageContext:ft[B]}};f.addPage=function(){return Fo.apply(this,arguments),this},f.setPage=function(){return Pa.apply(this,arguments),ke.call(this,Be[B]),this},f.insertPage=function(d){return this.addPage(),this.movePage(B,d),this},f.movePage=function(d,N){var V,J;if(d>N){V=Be[d],J=ft[d];for(var se=d;se>N;se--)Be[se]=Be[se-1],ft[se]=ft[se-1];Be[N]=V,ft[N]=J,this.setPage(N)}else if(d<N){V=Be[d],J=ft[d];for(var Ae=d;Ae<N;Ae++)Be[Ae]=Be[Ae+1],ft[Ae]=ft[Ae+1];Be[N]=V,ft[N]=J,this.setPage(N)}return this},f.deletePage=function(){return es.apply(this,arguments),this},f.__private__.text=f.text=function(d,N,V,J,se){var Ae,Oe,Qe,pt,Dt,Pt,qt,yn,_n,Dn=(J=J||{}).scope||this;if(typeof d=="number"&&typeof N=="number"&&(typeof V=="string"||Array.isArray(V))){var Qn=V;V=N,N=d,d=Qn}if(arguments[3]instanceof vt?(R("The transform parameter of text() with a Matrix value"),_n=se):(Qe=arguments[4],pt=arguments[5],dn(qt=arguments[3])==="object"&&qt!==null||(typeof Qe=="string"&&(pt=Qe,Qe=null),typeof qt=="string"&&(pt=qt,qt=null),typeof qt=="number"&&(Qe=qt,qt=null),J={flags:qt,angle:Qe,align:pt})),isNaN(N)||isNaN(V)||d==null)throw new Error("Invalid arguments passed to jsPDF.text");if(d.length===0)return Dn;var Bn="",Qr=!1,kr=typeof J.lineHeightFactor=="number"?J.lineHeightFactor:Kt,pa=Dn.internal.scaleFactor;function $s(fn){return fn=fn.split("	").join(Array(J.TabLen||9).join(" ")),Zn(fn,qt)}function fs(fn){for(var pn,In=fn.concat(),On=[],Ea=In.length;Ea--;)typeof(pn=In.shift())=="string"?On.push(pn):Array.isArray(fn)&&(pn.length===1||pn[1]===void 0&&pn[2]===void 0)?On.push(pn[0]):On.push([pn[0],pn[1],pn[2]]);return On}function ps(fn,pn){var In;if(typeof fn=="string")In=pn(fn)[0];else if(Array.isArray(fn)){for(var On,Ea,ws=fn.concat(),vi=[],Js=ws.length;Js--;)typeof(On=ws.shift())=="string"?vi.push(pn(On)[0]):Array.isArray(On)&&typeof On[0]=="string"&&(Ea=pn(On[0],On[1],On[2]),vi.push([Ea[0],Ea[1],Ea[2]]));In=vi}return In}var li=!1,hs=!0;if(typeof d=="string")li=!0;else if(Array.isArray(d)){var ms=d.concat();Oe=[];for(var ui,Yn=ms.length;Yn--;)(typeof(ui=ms.shift())!="string"||Array.isArray(ui)&&typeof ui[0]!="string")&&(hs=!1);li=hs}if(li===!1)throw new Error('Type of text must be string or Array. "'+d+'" is not recognized.');typeof d=="string"&&(d=d.match(/[\r?\n]/)?d.split(/\r\n|\r|\n/g):[d]);var ci=$e/Dn.internal.scaleFactor,di=ci*(kr-1);switch(J.baseline){case"bottom":V-=di;break;case"top":V+=ci-di;break;case"hanging":V+=ci-2*di;break;case"middle":V+=ci/2-di}if((Pt=J.maxWidth||0)>0&&(typeof d=="string"?d=Dn.splitTextToSize(d,Pt):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(fn,pn){return fn.concat(Dn.splitTextToSize(pn,Pt))},[]))),Ae={text:d,x:N,y:V,options:J,mutex:{pdfEscape:Zn,activeFontKey:Ot,fonts:tn,activeFontSize:$e}},Ht.publish("preProcessText",Ae),d=Ae.text,Qe=(J=Ae.options).angle,!(_n instanceof vt)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,J.rotationDirection===0&&(Qe=-Qe),T===A.ADVANCED&&(Qe=-Qe);var fi=Math.cos(Qe),gs=Math.sin(Qe);_n=new vt(fi,gs,-gs,fi,0,0)}else Qe&&Qe instanceof vt&&(_n=Qe);T!==A.ADVANCED||_n||(_n=Tr),(Dt=J.charSpace||oi)!==void 0&&(Bn+=ie(M(Dt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(yn=J.horizontalScale)!==void 0&&(Bn+=ie(100*yn)+` Tz
`),J.lang;var gr=-1,Kl=J.renderingMode!==void 0?J.renderingMode:J.stroke,vs=Dn.internal.getCurrentPageInfo().pageContext;switch(Kl){case 0:case!1:case"fill":gr=0;break;case 1:case!0:case"stroke":gr=1;break;case 2:case"fillThenStroke":gr=2;break;case 3:case"invisible":gr=3;break;case 4:case"fillAndAddForClipping":gr=4;break;case 5:case"strokeAndAddPathForClipping":gr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gr=6;break;case 7:case"addToPathForClipping":gr=7}var Ws=vs.usedRenderingMode!==void 0?vs.usedRenderingMode:-1;gr!==-1?Bn+=gr+` Tr
`:Ws!==-1&&(Bn+=`0 Tr
`),gr!==-1&&(vs.usedRenderingMode=gr),pt=J.align||"left";var Br,pi=$e*kr,Hs=Dn.internal.pageSize.getWidth(),Gs=tn[Ot];Dt=J.charSpace||oi,Pt=J.maxWidth||0,qt=Object.assign({autoencode:!0,noBOM:!0},J.flags);var to=[],Oo=function(fn){return Dn.getStringUnitWidth(fn,{font:Gs,charSpace:Dt,fontSize:$e,doKerning:!1})*$e/pa};if(Object.prototype.toString.call(d)==="[object Array]"){var vr;Oe=fs(d),pt!=="left"&&(Br=Oe.map(Oo));var lr,no=0;if(pt==="right"){N-=Br[0],d=[],Yn=Oe.length;for(var Fa=0;Fa<Yn;Fa++)Fa===0?(lr=fa(N),vr=Ca(V)):(lr=M(no-Br[Fa]),vr=-pi),d.push([Oe[Fa],lr,vr]),no=Br[Fa]}else if(pt==="center"){N-=Br[0]/2,d=[],Yn=Oe.length;for(var Da=0;Da<Yn;Da++)Da===0?(lr=fa(N),vr=Ca(V)):(lr=M((no-Br[Da])/2),vr=-pi),d.push([Oe[Da],lr,vr]),no=Br[Da]}else if(pt==="left"){d=[],Yn=Oe.length;for(var hi=0;hi<Yn;hi++)d.push(Oe[hi])}else if(pt==="justify"&&Gs.encoding==="Identity-H"){d=[],Yn=Oe.length,Pt=Pt!==0?Pt:Hs;for(var Ma=0,kn=0;kn<Yn;kn++)if(vr=kn===0?Ca(V):-pi,lr=kn===0?fa(N):Ma,kn<Yn-1){var ys=M((Pt-Br[kn])/(Oe[kn].split(" ").length-1)),ur=Oe[kn].split(" ");d.push([ur[0]+" ",lr,vr]),Ma=0;for(var Vr=1;Vr<ur.length;Vr++){var mi=(Oo(ur[Vr-1]+" "+ur[Vr])-Oo(ur[Vr]))*pa+ys;Vr==ur.length-1?d.push([ur[Vr],mi,0]):d.push([ur[Vr]+" ",mi,0]),Ma-=mi}}else d.push([Oe[kn],lr,vr]);d.push(["",Ma,0])}else{if(pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(d=[],Yn=Oe.length,Pt=Pt!==0?Pt:Hs,kn=0;kn<Yn;kn++)vr=kn===0?Ca(V):-pi,lr=kn===0?fa(N):0,kn<Yn-1?to.push(ie(M((Pt-Br[kn])/(Oe[kn].split(" ").length-1)))):to.push(0),d.push([Oe[kn],lr,vr])}}var Ys=typeof J.R2L=="boolean"?J.R2L:ut;Ys===!0&&(d=ps(d,function(fn,pn,In){return[fn.split("").reverse().join(""),pn,In]})),Ae={text:d,x:N,y:V,options:J,mutex:{pdfEscape:Zn,activeFontKey:Ot,fonts:tn,activeFontSize:$e}},Ht.publish("postProcessText",Ae),d=Ae.text,Qr=Ae.mutex.isHex||!1;var bs=tn[Ot].encoding;bs!=="WinAnsiEncoding"&&bs!=="StandardEncoding"||(d=ps(d,function(fn,pn,In){return[$s(fn),pn,In]})),Oe=fs(d),d=[];for(var Ro,jo,ro,Bo=0,gi=1,Vo=Array.isArray(Oe[0])?gi:Bo,ao="",_s=function(fn,pn,In){var On="";return In instanceof vt?(In=typeof J.angle=="number"?Sr(In,new vt(1,0,0,1,fn,pn)):Sr(new vt(1,0,0,1,fn,pn),In),T===A.ADVANCED&&(In=Sr(new vt(1,0,0,-1,0,0),In)),On=In.join(" ")+` Tm
`):On=ie(fn)+" "+ie(pn)+` Td
`,On},Ur=0;Ur<Oe.length;Ur++){switch(ao="",Vo){case gi:ro=(Qr?"<":"(")+Oe[Ur][0]+(Qr?">":")"),Ro=parseFloat(Oe[Ur][1]),jo=parseFloat(Oe[Ur][2]);break;case Bo:ro=(Qr?"<":"(")+Oe[Ur]+(Qr?">":")"),Ro=fa(N),jo=Ca(V)}to!==void 0&&to[Ur]!==void 0&&(ao=to[Ur]+` Tw
`),Ur===0?d.push(ao+_s(Ro,jo,_n)+ro):Vo===Bo?d.push(ao+ro):Vo===gi&&d.push(ao+_s(Ro,jo,_n)+ro)}d=Vo===Bo?d.join(` Tj
T* `):d.join(` Tj
`),d+=` Tj
`;var qr=`BT
/`;return qr+=Ot+" "+$e+` Tf
`,qr+=ie($e*kr)+` TL
`,qr+=Eo+`
`,qr+=Bn,qr+=d,z(qr+="ET"),b[Ot]=!0,Dn};var Re=f.__private__.clip=f.clip=function(d){return z(d==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Re("evenodd")},f.__private__.discardPath=f.discardPath=function(){return z("n"),this};var Ue=f.__private__.isValidStyle=function(d){var N=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(d)!==-1&&(N=!0),N};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(d){return Ue(d)&&(h=d),this};var ze=f.__private__.getStyle=f.getStyle=function(d){var N=h;switch(d){case"D":case"S":N="S";break;case"F":N="f";break;case"FD":case"DF":N="B";break;case"f":case"f*":case"B":case"B*":N=d}return N},rt=f.close=function(){return z("h"),this};f.stroke=function(){return z("S"),this},f.fill=function(d){return lt("f",d),this},f.fillEvenOdd=function(d){return lt("f*",d),this},f.fillStroke=function(d){return lt("B",d),this},f.fillStrokeEvenOdd=function(d){return lt("B*",d),this};var lt=function(d,N){dn(N)==="object"?bt(N,d):z(d)},ct=function(d){d===null||T===A.ADVANCED&&d===void 0||(d=ze(d),z(d))};function it(d,N,V,J,se){var Ae=new Mi(N||this.boundingBox,V||this.xStep,J||this.yStep,this.gState,se||this.matrix);Ae.stream=this.stream;var Oe=d+"$$"+this.cloneIndex+++"$$";return Kn(Oe,Ae),Ae}var bt=function(d,N){var V=la[d.key],J=Wt[V];if(J instanceof zo)z("q"),z(xt(N)),J.gState&&f.setGState(J.gState),z(d.matrix.toString()+" cm"),z("/"+V+" sh"),z("Q");else if(J instanceof Mi){var se=new vt(1,0,0,-1,0,eo());d.matrix&&(se=se.multiply(d.matrix||Tr),V=it.call(J,d.key,d.boundingBox,d.xStep,d.yStep,se).id),z("q"),z("/Pattern cs"),z("/"+V+" scn"),J.gState&&f.setGState(J.gState),z(N),z("Q")}},xt=function(d){switch(d){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},jt=f.moveTo=function(d,N){return z(ie(M(d))+" "+ie(Y(N))+" m"),this},Gt=f.lineTo=function(d,N){return z(ie(M(d))+" "+ie(Y(N))+" l"),this},mt=f.curveTo=function(d,N,V,J,se,Ae){return z([ie(M(d)),ie(Y(N)),ie(M(V)),ie(Y(J)),ie(M(se)),ie(Y(Ae)),"c"].join(" ")),this};f.__private__.line=f.line=function(d,N,V,J,se){if(isNaN(d)||isNaN(N)||isNaN(V)||isNaN(J)||!Ue(se))throw new Error("Invalid arguments passed to jsPDF.line");return T===A.COMPAT?this.lines([[V-d,J-N]],d,N,[1,1],se||"S"):this.lines([[V-d,J-N]],d,N,[1,1]).stroke()},f.__private__.lines=f.lines=function(d,N,V,J,se,Ae){var Oe,Qe,pt,Dt,Pt,qt,yn,_n,Dn,Qn,Bn,Qr;if(typeof d=="number"&&(Qr=V,V=N,N=d,d=Qr),J=J||[1,1],Ae=Ae||!1,isNaN(N)||isNaN(V)||!Array.isArray(d)||!Array.isArray(J)||!Ue(se)||typeof Ae!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(jt(N,V),Oe=J[0],Qe=J[1],Dt=d.length,Qn=N,Bn=V,pt=0;pt<Dt;pt++)(Pt=d[pt]).length===2?(Qn=Pt[0]*Oe+Qn,Bn=Pt[1]*Qe+Bn,Gt(Qn,Bn)):(qt=Pt[0]*Oe+Qn,yn=Pt[1]*Qe+Bn,_n=Pt[2]*Oe+Qn,Dn=Pt[3]*Qe+Bn,Qn=Pt[4]*Oe+Qn,Bn=Pt[5]*Qe+Bn,mt(qt,yn,_n,Dn,Qn,Bn));return Ae&&rt(),ct(se),this},f.path=function(d){for(var N=0;N<d.length;N++){var V=d[N],J=V.c;switch(V.op){case"m":jt(J[0],J[1]);break;case"l":Gt(J[0],J[1]);break;case"c":mt.apply(this,J);break;case"h":rt()}}return this},f.__private__.rect=f.rect=function(d,N,V,J,se){if(isNaN(d)||isNaN(N)||isNaN(V)||isNaN(J)||!Ue(se))throw new Error("Invalid arguments passed to jsPDF.rect");return T===A.COMPAT&&(J=-J),z([ie(M(d)),ie(Y(N)),ie(M(V)),ie(M(J)),"re"].join(" ")),ct(se),this},f.__private__.triangle=f.triangle=function(d,N,V,J,se,Ae,Oe){if(isNaN(d)||isNaN(N)||isNaN(V)||isNaN(J)||isNaN(se)||isNaN(Ae)||!Ue(Oe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[V-d,J-N],[se-V,Ae-J],[d-se,N-Ae]],d,N,[1,1],Oe,!0),this},f.__private__.roundedRect=f.roundedRect=function(d,N,V,J,se,Ae,Oe){if(isNaN(d)||isNaN(N)||isNaN(V)||isNaN(J)||isNaN(se)||isNaN(Ae)||!Ue(Oe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return se=Math.min(se,.5*V),Ae=Math.min(Ae,.5*J),this.lines([[V-2*se,0],[se*Qe,0,se,Ae-Ae*Qe,se,Ae],[0,J-2*Ae],[0,Ae*Qe,-se*Qe,Ae,-se,Ae],[2*se-V,0],[-se*Qe,0,-se,-Ae*Qe,-se,-Ae],[0,2*Ae-J],[0,-Ae*Qe,se*Qe,-Ae,se,-Ae]],d+se,N,[1,1],Oe,!0),this},f.__private__.ellipse=f.ellipse=function(d,N,V,J,se){if(isNaN(d)||isNaN(N)||isNaN(V)||isNaN(J)||!Ue(se))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ae=4/3*(Math.SQRT2-1)*V,Oe=4/3*(Math.SQRT2-1)*J;return jt(d+V,N),mt(d+V,N-Oe,d+Ae,N-J,d,N-J),mt(d-Ae,N-J,d-V,N-Oe,d-V,N),mt(d-V,N+Oe,d-Ae,N+J,d,N+J),mt(d+Ae,N+J,d+V,N+Oe,d+V,N),ct(se),this},f.__private__.circle=f.circle=function(d,N,V,J){if(isNaN(d)||isNaN(N)||isNaN(V)||!Ue(J))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(d,N,V,V,J)},f.setFont=function(d,N,V){return V&&(N=ye(N,V)),Ot=Xr(d,N,{disableWarning:!1}),this};var Xt=f.__private__.getFont=f.getFont=function(){return tn[Xr.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var d,N,V={};for(d in Jt)if(Jt.hasOwnProperty(d))for(N in V[d]=[],Jt[d])Jt[d].hasOwnProperty(N)&&V[d].push(N);return V},f.addFont=function(d,N,V,J,se){var Ae=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ae.indexOf(arguments[3])!==-1?se=arguments[3]:arguments[3]&&Ae.indexOf(arguments[3])==-1&&(V=ye(V,J)),se=se||"Identity-H",Co.call(this,d,N,V,se)};var Kt,Zt=n.lineWidth||.200025,Lr=f.__private__.getLineWidth=f.getLineWidth=function(){return Zt},Za=f.__private__.setLineWidth=f.setLineWidth=function(d){return Zt=d,z(ie(M(d))+" w"),this};f.__private__.setLineDash=Nt.API.setLineDash=Nt.API.setLineDashPattern=function(d,N){if(d=d||[],N=N||0,isNaN(N)||!Array.isArray(d))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return d=d.map(function(V){return ie(M(V))}).join(" "),N=ie(M(N)),z("["+d+"] "+N+" d"),this};var Mo=f.__private__.getLineHeight=f.getLineHeight=function(){return $e*Kt};f.__private__.getLineHeight=f.getLineHeight=function(){return $e*Kt};var Vs=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(d){return typeof(d=d||1.15)=="number"&&(Kt=d),this},Us=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Kt};Vs(n.lineHeight);var fa=f.__private__.getHorizontalCoordinate=function(d){return M(d)},Ca=f.__private__.getVerticalCoordinate=function(d){return T===A.ADVANCED?d:ft[B].mediaBox.topRightY-ft[B].mediaBox.bottomLeftY-M(d)},Gl=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(d){return ie(fa(d))},Qa=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(d){return ie(Ca(d))},Zr=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return xr(Zr)},f.__private__.setStrokeColor=f.setDrawColor=function(d,N,V,J){return Zr=Nr({ch1:d,ch2:N,ch3:V,ch4:J,pdfColorType:"draw",precision:2}),z(Zr),this};var os=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return xr(os)},f.__private__.setFillColor=f.setFillColor=function(d,N,V,J){return os=Nr({ch1:d,ch2:N,ch3:V,ch4:J,pdfColorType:"fill",precision:2}),z(os),this};var Eo=n.textColor||"0 g",Yl=f.__private__.getTextColor=f.getTextColor=function(){return xr(Eo)};f.__private__.setTextColor=f.setTextColor=function(d,N,V,J){return Eo=Nr({ch1:d,ch2:N,ch3:V,ch4:J,pdfColorType:"text",precision:3}),this};var oi=n.charSpace,Jl=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(oi||0)};f.__private__.setCharSpace=f.setCharSpace=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return oi=d,this};var is=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(d){var N=f.CapJoinStyles[d];if(N===void 0)throw new Error("Line cap style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return is=N,z(N+" J"),this};var ss=0;f.__private__.setLineJoin=f.setLineJoin=function(d){var N=f.CapJoinStyles[d];if(N===void 0)throw new Error("Line join style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ss=N,z(N+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(d){if(d=d||0,isNaN(d))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return z(ie(M(d))+" M"),this},f.GState=Cl,f.setGState=function(d){(d=typeof d=="string"?hn[pr[d]]:qs(null,d)).equals(Jr)||(z("/"+d.id+" gs"),Jr=d)};var qs=function(d,N){if(!d||!pr[d]){var V=!1;for(var J in hn)if(hn.hasOwnProperty(J)&&hn[J].equals(N)){V=!0;break}if(V)N=hn[J];else{var se="GS"+(Object.keys(hn).length+1).toString(10);hn[se]=N,N.id=se}return d&&(pr[d]=N.id),Ht.publish("addGState",N),N}};f.addGState=function(d,N){return qs(d,N),this},f.saveGraphicsState=function(){return z("q"),Gn.push({key:Ot,size:$e,color:Eo}),this},f.restoreGraphicsState=function(){z("Q");var d=Gn.pop();return Ot=d.key,$e=d.size,Eo=d.color,Jr=null,this},f.setCurrentTransformationMatrix=function(d){return z(d.toString()+" cm"),this},f.comment=function(d){return z("#"+d),this};var ii=function(d,N){var V=d||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return V},set:function(Ae){isNaN(Ae)||(V=parseFloat(Ae))}});var J=N||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return J},set:function(Ae){isNaN(Ae)||(J=parseFloat(Ae))}});var se="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return se},set:function(Ae){se=Ae.toString()}}),this},ls=function(d,N,V,J){ii.call(this,d,N),this.type="rect";var se=V||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return se},set:function(Oe){isNaN(Oe)||(se=parseFloat(Oe))}});var Ae=J||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ae},set:function(Oe){isNaN(Oe)||(Ae=parseFloat(Oe))}}),this},us=function(){this.page=gn,this.currentPage=B,this.pages=Be.slice(0),this.pagesContext=ft.slice(0),this.x=jn,this.y=Vt,this.matrix=wr,this.width=To(B),this.height=eo(B),this.outputDestination=qe,this.id="",this.objectNumber=-1};us.prototype.restore=function(){gn=this.page,B=this.currentPage,ft=this.pagesContext,Be=this.pages,jn=this.x,Vt=this.y,wr=this.matrix,cs(B,this.width),ds(B,this.height),qe=this.outputDestination};var zs=function(d,N,V,J,se){Er.push(new us),gn=B=0,Be=[],jn=d,Vt=N,wr=se,Ka([V,J])},Xl=function(d){if(Mr[d])Er.pop().restore();else{var N=new us,V="Xo"+(Object.keys(Tn).length+1).toString(10);N.id=V,Mr[d]=V,Tn[V]=N,Ht.publish("addFormObject",N),Er.pop().restore()}};for(var si in f.beginFormObject=function(d,N,V,J,se){return zs(d,N,V,J,se),this},f.endFormObject=function(d){return Xl(d),this},f.doFormObject=function(d,N){var V=Tn[Mr[d]];return z("q"),z(N.toString()+" cm"),z("/"+V.id+" Do"),z("Q"),this},f.getFormObject=function(d){var N=Tn[Mr[d]];return{x:N.x,y:N.y,width:N.width,height:N.height,matrix:N.matrix}},f.save=function(d,N){return d=d||"generated.pdf",(N=N||{}).returnPromise=N.returnPromise||!1,N.returnPromise===!1?(qo(L(Kr()),d),typeof qo.unload=="function"&&At.setTimeout&&setTimeout(qo.unload,911),this):new Promise(function(V,J){try{var se=qo(L(Kr()),d);typeof qo.unload=="function"&&At.setTimeout&&setTimeout(qo.unload,911),V(se)}catch(Ae){J(Ae.message)}})},Nt.API)Nt.API.hasOwnProperty(si)&&(si==="events"&&Nt.API.events.length?function(d,N){var V,J,se;for(se=N.length-1;se!==-1;se--)V=N[se][0],J=N[se][1],d.subscribe.apply(d,[V].concat(typeof J=="function"?[J]:J))}(Ht,Nt.API.events):f[si]=Nt.API[si]);var To=f.getPageWidth=function(d){return(ft[d=d||B].mediaBox.topRightX-ft[d].mediaBox.bottomLeftX)/Ze},cs=f.setPageWidth=function(d,N){ft[d].mediaBox.topRightX=N*Ze+ft[d].mediaBox.bottomLeftX},eo=f.getPageHeight=function(d){return(ft[d=d||B].mediaBox.topRightY-ft[d].mediaBox.bottomLeftY)/Ze},ds=f.setPageHeight=function(d,N){ft[d].mediaBox.topRightY=N*Ze+ft[d].mediaBox.bottomLeftY};return f.internal={pdfEscape:Zn,getStyle:ze,getFont:Xt,getFontSize:Ge,getCharSpace:Jl,getTextColor:Yl,getLineHeight:Mo,getLineHeightFactor:Us,getLineWidth:Lr,write:kt,getHorizontalCoordinate:fa,getVerticalCoordinate:Ca,getCoordinateString:Gl,getVerticalCoordinateString:Qa,collections:{},newObject:Ln,newAdditionalObject:$a,newObjectDeferred:bn,newObjectDeferredBegin:sr,getFilters:Rr,putStream:mr,events:Ht,scaleFactor:Ze,pageSize:{getWidth:function(){return To(B)},setWidth:function(d){cs(B,d)},getHeight:function(){return eo(B)},setHeight:function(d){ds(B,d)}},encryptionOptions:y,encryption:K,getEncryptor:Ne,output:U,getNumberOfPages:ts,pages:Be,out:z,f2:pe,f3:D,getPageInfo:Se,getPageInfoByObjId:le,getCurrentPageInfo:Ie,getPDFVersion:g,Point:ii,Rectangle:ls,Matrix:vt,hasHotfix:$},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return To(B)},set:function(d){cs(B,d)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return eo(B)},set:function(d){ds(B,d)},enumerable:!0,configurable:!0}),ri.call(f,je),Ot="F1",Fo(o,t),Ht.publish("initialized"),f}Li.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Li.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Li.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Li.prototype.processOwnerPassword=function(n,e){return $u(zu(e).substr(0,5),n)},Li.prototype.encryptor=function(n,e){var t=zu(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return $u(t,r)}},Cl.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||dn(n)!==dn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Nt.API={events:[]},Nt.version="3.0.1";var xn=Nt.API,dc=1,Jo=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ni=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ct=function(n){return n.toFixed(2)},mo=function(n){return n.toFixed(5)};xn.__acroform__={};var _r=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},wd=function(n){return n*dc},ma=function(n){var e=new Rf,t=at.internal.getHeight(n)||0,r=at.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Ct(r)),Number(Ct(t))],e},M0=xn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},E0=xn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},T0=xn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Pn=xn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return T0(n,e-1)},Cn=xn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return M0(n,e-1)},Fn=xn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return E0(n,e-1)},O0=xn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=n[0],a=n[1],s=n[2],l=n[3],u={};return u.lowerLeft_X=t(o)||0,u.lowerLeft_Y=r(a+l)||0,u.upperRight_X=t(o+s)||0,u.upperRight_Y=r(a)||0,[Number(Ct(u.lowerLeft_X)),Number(Ct(u.lowerLeft_Y)),Number(Ct(u.upperRight_X)),Number(Ct(u.upperRight_Y))]},R0=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Wu(n,t),o=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+o+" "+Ct(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=ma(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},Wu=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=n.multiline?o.map(function(D){return D.split(`
`)}):o.map(function(D){return[D]});var a=t,s=at.internal.getHeight(n)||0;s=s<0?-s:s;var l=at.internal.getWidth(n)||0;l=l<0?-l:l;var u=function(D,M,te){if(D+1<o.length){var Y=M+" "+o[D+1][0];return vl(Y,n,te).width<=l-4}return!1};a++;e:for(;a>0;){e="",a--;var h,y,v=vl("3",n,a).height,b=n.multiline?s-a:(s-v)/2,f=b+=2,m=0,g=0,S=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+vl(e,n,a=12).width+", FieldWidth:"+l+`
`;break}for(var w="",A=0,T=0;T<o.length;T++)if(o.hasOwnProperty(T)){var G=!1;if(o[T].length!==1&&S!==o[T].length-1){if((v+2)*(A+2)+2>s)continue e;w+=o[T][S],G=!0,g=T,T--}else{w=(w+=o[T][S]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var ae=parseInt(T),ye=u(ae,w,a),ie=T>=o.length-1;if(ye&&!ie){w+=" ",S=0;continue}if(ye||ie){if(ie)g=ae;else if(n.multiline&&(v+2)*(A+2)+2>s)continue e}else{if(!n.multiline||(v+2)*(A+2)+2>s)continue e;g=ae}}for(var R="",Z=m;Z<=g;Z++){var pe=o[Z];if(n.multiline){if(Z===g){R+=pe[S]+" ",S=(S+1)%pe.length;continue}if(Z===m){R+=pe[pe.length-1]+" ";continue}}R+=pe[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,y=vl(R,n,a).width,n.textAlign){case"right":h=l-y-2;break;case"center":h=(l-y)/2;break;case"left":default:h=2}e+=Ct(h)+" "+Ct(f)+` Td
`,e+="("+Jo(R)+`) Tj
`,e+=-Ct(h)+` 0 Td
`,f=-(a+2),y=0,m=G?g:g+1,A++,w=""}break}return r.text=e,r.fontSize=a,r},vl=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:o}},j0={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},B0=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},V0=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,o=n[t];e.internal.newObjectDeferredBegin(o.objId,!0),dn(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete n[r]}},U0=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ia.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(j0)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");dc=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new jf,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];a.objId=void 0,a.hasAnnotation&&B0(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,o){var a=!r;for(var s in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var l=r[s],u=[],h=l.Rect;if(l.Rect&&(l.Rect=O0(l.Rect,o)),o.internal.newObjectDeferredBegin(l.objId,!0),l.DA=at.createDefaultAppearanceStream(l),dn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(u=l.getKeyValueListForStream()),l.Rect=h,l.hasAppearanceStream&&!l.appearanceStreamContent){var y=R0(l);u.push({key:"AP",value:"<</N "+y+">>"}),o.internal.acroformPlugin.xForms.push(y)}if(l.appearanceStreamContent){var v="";for(var b in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(b)){var f=l.appearanceStreamContent[b];if(v+="/"+b+" ",v+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var s in f)if(f.hasOwnProperty(s)){var m=f[s];typeof m=="function"&&(m=m.call(o,l)),v+="/"+s+" "+m+" ",o.internal.acroformPlugin.xForms.indexOf(m)>=0||o.internal.acroformPlugin.xForms.push(m)}}else typeof(m=f)=="function"&&(m=m.call(o,l)),v+="/"+s+" "+m,o.internal.acroformPlugin.xForms.indexOf(m)>=0||o.internal.acroformPlugin.xForms.push(m);v+=">>"}u.push({key:"AP",value:`<<
`+v+">>"})}o.internal.putStream({additionalKeyValues:u,objectId:l.objId}),o.internal.out("endobj")}a&&V0(o.internal.acroformPlugin.xForms,o)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},Of=xn.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var o="[",a=0;a<n.length;a++)switch(a!==0&&(o+=" "),dn(n[a])){case"boolean":case"number":case"object":o+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),o+="("+Jo(r(n[a].toString()))+")"):o+=n[a].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Nu=function(n,e,t){var r=function(o){return o};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Jo(r(n))+")"},ba=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ba.prototype.toString=function(){return this.objId+" 0 R"},ba.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ba.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],o=this[r];o&&(Array.isArray(o)?n.push({key:r,value:Of(o,this.objId,this.scope)}):o instanceof ba?(o.scope=this.scope,n.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&n.push({key:r,value:o}))}return n};var Rf=function(){ba.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};_r(Rf,ba);var jf=function(){ba.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Jo(t(n))+")"}},set:function(t){n=t}})};_r(jf,ba);var ia=function n(){ba.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Pn(e,3)},set:function(w){w?this.F=Cn(e,3):this.F=Fn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Fl)return;a="FieldObject"+n.FieldNum++}var w=function(A){return A};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Jo(w(a))+")"},set:function(w){a=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(w){a=w}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(w){s=w}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/dc:h},set:function(w){h=w}});var y="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return y},set:function(w){y=w}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof Fl||this instanceof Wo))return Nu(v,this.objId,this.scope)},set:function(w){w=w.toString(),v=w}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof qn?b:Nu(b,this.objId,this.scope)},set:function(w){w=w.toString(),b=this instanceof qn?w:w.substr(0,1)==="("?Ni(w.substr(1,w.length-2)):Ni(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof qn?Ni(b.substr(1,b.length-1)):b},set:function(w){w=w.toString(),b=this instanceof qn?"/"+w:w}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof qn?f:Nu(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=this instanceof qn?w:w.substr(0,1)==="("?Ni(w.substr(1,w.length-2)):Ni(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof qn?Ni(f.substr(1,f.length-1)):f},set:function(w){w=w.toString(),f=this instanceof qn?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(w){w=!!w,g=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(w){m=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,1)},set:function(w){w?this.Ff=Cn(this.Ff,1):this.Ff=Fn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,2)},set:function(w){w?this.Ff=Cn(this.Ff,2):this.Ff=Fn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,3)},set:function(w){w?this.Ff=Cn(this.Ff,3):this.Ff=Fn(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');S=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(S){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};_r(ia,ba);var Ri=function(){ia.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Of(e,this.objId,this.scope)},set:function(t){var r,o;o=[],typeof(r=t)=="string"&&(o=function(a,s,l){l||(l=1);for(var u,h=[];u=s.exec(a);)h.push(u[l]);return h}(r,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,18)},set:function(t){t?this.Ff=Cn(this.Ff,18):this.Ff=Fn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Cn(this.Ff,19):this.Ff=Fn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,20)},set:function(t){t?(this.Ff=Cn(this.Ff,20),e.sort()):this.Ff=Fn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,22)},set:function(t){t?this.Ff=Cn(this.Ff,22):this.Ff=Fn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(t){t?this.Ff=Cn(this.Ff,23):this.Ff=Fn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,27)},set:function(t){t?this.Ff=Cn(this.Ff,27):this.Ff=Fn(this.Ff,27)}}),this.hasAppearanceStream=!1};_r(Ri,ia);var ji=function(){Ri.call(this),this.fontName="helvetica",this.combo=!1};_r(ji,Ri);var Bi=function(){ji.call(this),this.combo=!0};_r(Bi,ji);var _l=function(){Bi.call(this),this.edit=!0};_r(_l,Bi);var qn=function(){ia.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,15)},set:function(t){t?this.Ff=Cn(this.Ff,15):this.Ff=Fn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,16)},set:function(t){t?this.Ff=Cn(this.Ff,16):this.Ff=Fn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,17)},set:function(t){t?this.Ff=Cn(this.Ff,17):this.Ff=Fn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(t){t?this.Ff=Cn(this.Ff,26):this.Ff=Fn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,o=[];for(r in o.push("<<"),e)o.push("/"+r+" ("+Jo(t(e[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(t){dn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};_r(qn,ia);var wl=function(){qn.call(this),this.pushButton=!0};_r(wl,qn);var Vi=function(){qn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};_r(Vi,qn);var Fl=function(){var n,e;ia.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(l){return l};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),r)s.push("/"+a+" ("+Jo(o(r[a]))+")");return s.push(">>"),s.join(`
`)},set:function(o){dn(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(o){t="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=at.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_r(Fl,ia),Vi.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Vi.prototype.createOption=function(n){var e=new Fl;return e.Parent=this,e.optionName=n,this.Kids.push(e),q0.call(this.scope,e),e};var Sl=function(){qn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=at.CheckBox.createAppearanceStream()};_r(Sl,qn);var Wo=function(){ia.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,13)},set:function(e){e?this.Ff=Cn(this.Ff,13):this.Ff=Fn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,21)},set:function(e){e?this.Ff=Cn(this.Ff,21):this.Ff=Fn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(e){e?this.Ff=Cn(this.Ff,23):this.Ff=Fn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,24)},set:function(e){e?this.Ff=Cn(this.Ff,24):this.Ff=Fn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,25)},set:function(e){e?this.Ff=Cn(this.Ff,25):this.Ff=Fn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(e){e?this.Ff=Cn(this.Ff,26):this.Ff=Fn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_r(Wo,ia);var xl=function(){Wo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,14)},set:function(n){n?this.Ff=Cn(this.Ff,14):this.Ff=Fn(this.Ff,14)}}),this.password=!0};_r(xl,Wo);var at={CheckBox:{createAppearanceStream:function(){return{N:{On:at.CheckBox.YesNormal},D:{On:at.CheckBox.YesPushDown,Off:at.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=ma(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),a=Wu(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Ct(at.internal.getWidth(n))+" "+Ct(at.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Ct(a.fontSize)+" Tf "+o),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=ma(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),o=[],a=at.internal.getHeight(n),s=at.internal.getWidth(n),l=Wu(n,n.caption);return o.push("1 g"),o.push("0 0 "+Ct(s)+" "+Ct(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Ct(s-1)+" "+Ct(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+t+" "+Ct(l.fontSize)+" Tf "+r),o.push(l.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(n){var e=ma(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ct(at.internal.getWidth(n))+" "+Ct(at.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:at.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=at.RadioButton.Circle.YesNormal,e.D[n]=at.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=ma(n);e.scope=n.scope;var t=[],r=at.internal.getWidth(n)<=at.internal.getHeight(n)?at.internal.getWidth(n)/4:at.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=at.internal.Bezier_C,a=Number((r*o).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+mo(at.internal.getWidth(n)/2)+" "+mo(at.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ma(n);e.scope=n.scope;var t=[],r=at.internal.getWidth(n)<=at.internal.getHeight(n)?at.internal.getWidth(n)/4:at.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),a=Number((o*at.internal.Bezier_C).toFixed(5)),s=Number((r*at.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+mo(at.internal.getWidth(n)/2)+" "+mo(at.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),t.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),t.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),t.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+mo(at.internal.getWidth(n)/2)+" "+mo(at.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=ma(n);e.scope=n.scope;var t=[],r=at.internal.getWidth(n)<=at.internal.getHeight(n)?at.internal.getWidth(n)/4:at.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),a=Number((o*at.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+mo(at.internal.getWidth(n)/2)+" "+mo(at.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),t.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),t.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),t.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:at.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=at.RadioButton.Cross.YesNormal,e.D[n]=at.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=ma(n);e.scope=n.scope;var t=[],r=at.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Ct(at.internal.getWidth(n)-2)+" "+Ct(at.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Ct(r.x1.x)+" "+Ct(r.x1.y)+" m"),t.push(Ct(r.x2.x)+" "+Ct(r.x2.y)+" l"),t.push(Ct(r.x4.x)+" "+Ct(r.x4.y)+" m"),t.push(Ct(r.x3.x)+" "+Ct(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ma(n);e.scope=n.scope;var t=at.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ct(at.internal.getWidth(n))+" "+Ct(at.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ct(at.internal.getWidth(n)-2)+" "+Ct(at.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Ct(t.x1.x)+" "+Ct(t.x1.y)+" m"),r.push(Ct(t.x2.x)+" "+Ct(t.x2.y)+" l"),r.push(Ct(t.x4.x)+" "+Ct(t.x4.y)+" m"),r.push(Ct(t.x3.x)+" "+Ct(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=ma(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ct(at.internal.getWidth(n))+" "+Ct(at.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};at.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=at.internal.getWidth(n),t=at.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},at.internal.getWidth=function(n){var e=0;return dn(n)==="object"&&(e=wd(n.Rect[2])),e},at.internal.getHeight=function(n){var e=0;return dn(n)==="object"&&(e=wd(n.Rect[3])),e};var q0=xn.addField=function(n){if(U0(this,n),!(n instanceof ia))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};xn.AcroFormChoiceField=Ri,xn.AcroFormListBox=ji,xn.AcroFormComboBox=Bi,xn.AcroFormEditBox=_l,xn.AcroFormButton=qn,xn.AcroFormPushButton=wl,xn.AcroFormRadioButton=Vi,xn.AcroFormCheckBox=Sl,xn.AcroFormTextField=Wo,xn.AcroFormPasswordField=xl,xn.AcroFormAppearance=at,xn.AcroForm={ChoiceField:Ri,ListBox:ji,ComboBox:Bi,EditBox:_l,Button:qn,PushButton:wl,RadioButton:Vi,CheckBox:Sl,TextField:Wo,PasswordField:xl,Appearance:at},Nt.AcroForm={ChoiceField:Ri,ListBox:ji,ComboBox:Bi,EditBox:_l,Button:qn,PushButton:wl,RadioButton:Vi,CheckBox:Sl,TextField:Wo,PasswordField:xl,Appearance:at};function Bf(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(D,M){var te,Y,ve,ge,xe,de=e;if((M=M||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(ye(D))for(xe in t)for(ve=t[xe],te=0;te<ve.length;te+=1){for(ge=!0,Y=0;Y<ve[te].length;Y+=1)if(ve[te][Y]!==void 0&&ve[te][Y]!==D[Y]){ge=!1;break}if(ge===!0){de=xe;break}}else for(xe in t)for(ve=t[xe],te=0;te<ve.length;te+=1){for(ge=!0,Y=0;Y<ve[te].length;Y+=1)if(ve[te][Y]!==void 0&&ve[te][Y]!==D.charCodeAt(Y)){ge=!1;break}if(ge===!0){de=xe;break}}return de===e&&M!==e&&(de=M),de},o=function D(M){for(var te=this.internal.write,Y=this.internal.putStream,ve=(0,this.internal.getFilters)();ve.indexOf("FlateEncode")!==-1;)ve.splice(ve.indexOf("FlateEncode"),1);M.objectId=this.internal.newObject();var ge=[];if(ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Image"}),ge.push({key:"Width",value:M.width}),ge.push({key:"Height",value:M.height}),M.colorSpace===S.INDEXED?ge.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(M.palette.length/3-1)+" "+("sMask"in M&&M.sMask!==void 0?M.objectId+2:M.objectId+1)+" 0 R]"}):(ge.push({key:"ColorSpace",value:"/"+M.colorSpace}),M.colorSpace===S.DEVICE_CMYK&&ge.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ge.push({key:"BitsPerComponent",value:M.bitsPerComponent}),"decodeParameters"in M&&M.decodeParameters!==void 0&&ge.push({key:"DecodeParms",value:"<<"+M.decodeParameters+">>"}),"transparency"in M&&Array.isArray(M.transparency)){for(var xe="",de=0,we=M.transparency.length;de<we;de++)xe+=M.transparency[de]+" "+M.transparency[de]+" ";ge.push({key:"Mask",value:"["+xe+"]"})}M.sMask!==void 0&&ge.push({key:"SMask",value:M.objectId+1+" 0 R"});var Le=M.filter!==void 0?["/"+M.filter]:void 0;if(Y({data:M.data,additionalKeyValues:ge,alreadyAppliedFilters:Le,objectId:M.objectId}),te("endobj"),"sMask"in M&&M.sMask!==void 0){var Ye="/Predictor "+M.predictor+" /Colors 1 /BitsPerComponent "+M.bitsPerComponent+" /Columns "+M.width,P={width:M.width,height:M.height,colorSpace:"DeviceGray",bitsPerComponent:M.bitsPerComponent,decodeParameters:Ye,data:M.sMask};"filter"in M&&(P.filter=M.filter),D.call(this,P)}if(M.colorSpace===S.INDEXED){var B=this.internal.newObject();Y({data:R(new Uint8Array(M.palette)),objectId:B}),te("endobj")}},a=function(){var D=this.internal.collections.addImage_images;for(var M in D)o.call(this,D[M])},s=function(){var D,M=this.internal.collections.addImage_images,te=this.internal.write;for(var Y in M)te("/I"+(D=M[Y]).index,D.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",s))},u=function(){var D=this.internal.collections.addImage_images;return l.call(this),D},h=function(){return Object.keys(this.internal.collections.addImage_images).length},y=function(D){return typeof n["process"+D.toUpperCase()]=="function"},v=function(D){return dn(D)==="object"&&D.nodeType===1},b=function(D,M){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var te=""+D.getAttribute("src");if(te.indexOf("data:image/")===0)return Fs(unescape(te).split("base64,").pop());var Y=n.loadFile(te,!0);if(Y!==void 0)return Y}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var ve;switch(M){case"PNG":ve="image/png";break;case"WEBP":ve="image/webp";break;case"JPEG":case"JPG":default:ve="image/jpeg"}return Fs(D.toDataURL(ve,1).split("base64,").pop())}},f=function(D){var M=this.internal.collections.addImage_images;if(M){for(var te in M)if(D===M[te].alias)return M[te]}},m=function(D,M,te){return D||M||(D=-96,M=-96),D<0&&(D=-1*te.width*72/D/this.internal.scaleFactor),M<0&&(M=-1*te.height*72/M/this.internal.scaleFactor),D===0&&(D=M*te.width/te.height),M===0&&(M=D*te.height/te.width),[D,M]},g=function(D,M,te,Y,ve,ge){var xe=m.call(this,te,Y,ve),de=this.internal.getCoordinateString,we=this.internal.getVerticalCoordinateString,Le=u.call(this);if(te=xe[0],Y=xe[1],Le[ve.index]=ve,ge){ge*=Math.PI/180;var Ye=Math.cos(ge),P=Math.sin(ge),B=function(X){return X.toFixed(4)},q=[B(Ye),B(P),B(-1*P),B(Ye),0,0,"cm"]}this.internal.write("q"),ge?(this.internal.write([1,"0","0",1,de(D),we(M+Y),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([de(te),"0","0",de(Y),"0","0","cm"].join(" "))):this.internal.write([de(te),"0","0",de(Y),de(D),we(M+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ve.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=n.__addimage__.sHashCode=function(D){var M,te,Y=0;if(typeof D=="string")for(te=D.length,M=0;M<te;M++)Y=(Y<<5)-Y+D.charCodeAt(M),Y|=0;else if(ye(D))for(te=D.byteLength/2,M=0;M<te;M++)Y=(Y<<5)-Y+D[M],Y|=0;return Y},T=n.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var M=!0;return D.length===0&&(M=!1),D.length%4!=0&&(M=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(M=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(M=!1),M},G=n.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var M=D.indexOf(",");return M<0?null:D.substring(0,M).trim().endsWith("base64")?D.substring(M+1):null},ae=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(D){return ae()&&D instanceof ArrayBuffer};var ye=n.__addimage__.isArrayBufferView=function(D){return ae()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},ie=n.__addimage__.binaryStringToUint8Array=function(D){for(var M=D.length,te=new Uint8Array(M),Y=0;Y<M;Y++)te[Y]=D.charCodeAt(Y);return te},R=n.__addimage__.arrayBufferToBinaryString=function(D){for(var M="",te=ye(D)?D:new Uint8Array(D),Y=0;Y<te.length;Y+=8192)M+=String.fromCharCode.apply(null,te.subarray(Y,Y+8192));return M};n.addImage=function(){var D,M,te,Y,ve,ge,xe,de,we;if(typeof arguments[1]=="number"?(M=e,te=arguments[1],Y=arguments[2],ve=arguments[3],ge=arguments[4],xe=arguments[5],de=arguments[6],we=arguments[7]):(M=arguments[1],te=arguments[2],Y=arguments[3],ve=arguments[4],ge=arguments[5],xe=arguments[6],de=arguments[7],we=arguments[8]),dn(D=arguments[0])==="object"&&!v(D)&&"imageData"in D){var Le=D;D=Le.imageData,M=Le.format||M||e,te=Le.x||te||0,Y=Le.y||Y||0,ve=Le.w||Le.width||ve,ge=Le.h||Le.height||ge,xe=Le.alias||xe,de=Le.compression||de,we=Le.rotation||Le.angle||we}var Ye=this.internal.getFilters();if(de===void 0&&Ye.indexOf("FlateEncode")!==-1&&(de="SLOW"),isNaN(te)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=Z.call(this,D,M,xe,de);return g.call(this,te,Y,ve,ge,P,we),this};var Z=function(D,M,te,Y){var ve,ge,xe;if(typeof D=="string"&&r(D)===e){D=unescape(D);var de=pe(D,!1);(de!==""||(de=n.loadFile(D,!0))!==void 0)&&(D=de)}if(v(D)&&(D=b(D,M)),M=r(D,M),!y(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(((xe=te)==null||xe.length===0)&&(te=function(we){return typeof we=="string"||ye(we)?A(we):ye(we.data)?A(we.data):null}(D)),(ve=f.call(this,te))||(ae()&&(D instanceof Uint8Array||M==="RGBA"||(ge=D,D=ie(D))),ve=this["process"+M.toUpperCase()](D,h.call(this),te,function(we){return we&&typeof we=="string"&&(we=we.toUpperCase()),we in n.image_compression?we:w.NONE}(Y),ge)),!ve)throw new Error("An unknown error occurred whilst processing the image.");return ve},pe=n.__addimage__.convertBase64ToBinaryString=function(D,M){M=typeof M!="boolean"||M;var te,Y="";if(typeof D=="string"){var ve;te=(ve=G(D))!==null&&ve!==void 0?ve:D;try{Y=Fs(te)}catch(ge){if(M)throw T(te)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ge.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};n.getImageProperties=function(D){var M,te,Y="";if(v(D)&&(D=b(D)),typeof D=="string"&&r(D)===e&&((Y=pe(D,!1))===""&&(Y=n.loadFile(D)||""),D=Y),te=r(D),!y(te))throw new Error("addImage does not support files of type '"+te+"', please ensure that a plugin for '"+te+"' support is added.");if(!ae()||D instanceof Uint8Array||(D=ie(D)),!(M=this["process"+te.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return M.fileType=te,M}})(Nt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Nt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,o,a,s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(t.objId),h=t.pageContext.annotations,y=!1,v=0;v<h.length&&!y;v++)switch((r=h[v]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(y=!0);break;case"reference":case"text":case"freetext":y=!0}if(y!=0){this.internal.write("/Annots [");for(var b=0;b<h.length;b++){r=h[b];var f=this.internal.pdfEscape,m=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(g.objId),A=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+s(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+f(w(r.contents))+")",a+=" /Popup "+S.objId+" 0 R",a+=" /P "+u.objId+" 0 R",a+=" /T ("+f(w(A))+") >>",g.content=a;var T=g.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+s(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+T,r.open&&(a+=" /Open true"),a+=" >>",S.content=a,this.internal.write(g.objId,"0 R",S.objId,"0 R");break;case"freetext":o="/Rect ["+s(r.bounds.x)+" "+l(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var G=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+f(m(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var ae=this.annotations._nameMap[r.options.name];r.options.pageNumber=ae.page,r.options.top=ae.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+f(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ye=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+ye+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,o,a,s){var l=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:u(t),y:h(r),w:u(t+o),h:h(r+a)},options:s,type:"link"})},n.textWithLink=function(t,r,o,a){var s,l,u=this.getTextWidth(t),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var y=this.splitTextToSize(t,l).length;s=Math.ceil(h*y)}else l=u,s=h;return this.text(t,r,o,a),o+=.2*h,a.align==="center"&&(r-=u/2),a.align==="right"&&(r-=u),this.link(r,o-h,l,s,a),u},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Nt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=n.__arabicParser__.isArabicEndLetter=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length<=2},u=n.__arabicParser__.isArabicAlfLetter=function(g){return s(g)&&o.indexOf(g.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=1};var h=n.__arabicParser__.arabicLetterHasFinalForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=3};var y=n.__arabicParser__.arabicLetterHasMedialForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length==4},v=n.__arabicParser__.resolveLigatures=function(g){var S=0,w=t,A="",T=0;for(S=0;S<g.length;S+=1)w[g.charCodeAt(S)]!==void 0?(T++,typeof(w=w[g.charCodeAt(S)])=="number"&&(A+=String.fromCharCode(w),w=t,T=0),S===g.length-1&&(w=t,A+=g.charAt(S-(T-1)),S-=T-1,T=0)):(w=t,A+=g.charAt(S-T),S-=T,T=0);return A};n.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var b=n.__arabicParser__.getCorrectForm=function(g,S,w){return s(g)?a(g)===!1?-1:!h(g)||!s(S)&&!s(w)||!s(w)&&l(S)||l(g)&&!s(S)||l(g)&&u(S)||l(g)&&l(S)?0:y(g)&&s(S)&&!l(S)&&s(w)&&h(w)?3:l(g)||!s(w)?1:2:-1},f=function(g){var S=0,w=0,A=0,T="",G="",ae="",ye=(g=g||"").split("\\s+"),ie=[];for(S=0;S<ye.length;S+=1){for(ie.push(""),w=0;w<ye[S].length;w+=1)T=ye[S][w],G=ye[S][w-1],ae=ye[S][w+1],s(T)?(A=b(T,G,ae),ie[S]+=A!==-1?String.fromCharCode(e[T.charCodeAt(0)][A]):T):ie[S]+=T;ie[S]=v(ie[S])}return ie.join(" ")},m=n.__arabicParser__.processArabic=n.processArabic=function(){var g,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(S)){var A=0;for(w=[],A=0;A<S.length;A+=1)Array.isArray(S[A])?w.push([f(S[A][0]),S[A][1],S[A][2]]):w.push([f(S[A])]);g=w}else g=f(S);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};n.events.push(["preProcessText",m])}(Nt.API),Nt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(l){o=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(l){s=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var o;if((t=t||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Nt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var y=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return y},set:function(g){y=g}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(g){v=g}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(g){b=g}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(g){m=g}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},n.getTextDimensions=function(u,h){r.call(this);var y=(h=h||{}).fontSize||this.getFontSize(),v=h.font||this.getFont(),b=h.scaleFactor||this.internal.scaleFactor,f=0,m=0,g=0,S=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var w=h.maxWidth;w>0?typeof u=="string"?u=this.splitTextToSize(u,w):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(T,G){return T.concat(S.splitTextToSize(G,w))},[])):u=Array.isArray(u)?u:[u];for(var A=0;A<u.length;A++)f<(g=this.getStringUnitWidth(u[A],{font:v})*y)&&(f=g);return f!==0&&(m=u.length),{w:f/=b,h:Math.max((m*y*this.getLineHeightFactor()-y*(this.getLineHeightFactor()-1))/b,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var u;u=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var h=this.internal.__cell__.lastCell,y=this.internal.__cell__.padding,v=this.internal.__cell__.margins||e,b=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===u.lineNumber?(u.x=(h.x||0)+(h.width||0),u.y=h.y||0):h.y+h.height+u.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=v.top,f&&b&&(this.printHeaderRow(u.lineNumber,!0),u.y+=b[0].height)):u.y=h.y+h.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,t===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-y,u.y+y,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+y,{align:"center",baseline:"top",maxWidth:u.width-y-y}):this.text(u.text,u.x+y,u.y+y,{align:"left",baseline:"top",maxWidth:u.width-y-y})),this.internal.__cell__.lastCell=u,this};n.table=function(u,h,y,v,b){if(r.call(this),!y)throw new Error("No data for PDF table.");var f,m,g,S,w=[],A=[],T=[],G={},ae={},ye=[],ie=[],R=(b=b||{}).autoSize||!1,Z=b.printHeaders!==!1,pe=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,D=b.margins||Object.assign({width:this.getPageWidth()},e),M=typeof b.padding=="number"?b.padding:3,te=b.headerBackgroundColor||"#c8c8c8",Y=b.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Z,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=pe,this.internal.__cell__.padding=M,this.internal.__cell__.headerBackgroundColor=te,this.internal.__cell__.headerTextColor=Y,this.setFontSize(pe),v==null)A=w=Object.keys(y[0]),T=w.map(function(){return"left"});else if(Array.isArray(v)&&dn(v[0])==="object")for(w=v.map(function(Le){return Le.name}),A=v.map(function(Le){return Le.prompt||Le.name||""}),T=v.map(function(Le){return Le.align||"left"}),f=0;f<v.length;f+=1)ae[v[f].name]=v[f].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(A=w=v,T=w.map(function(){return"left"}));if(R||Array.isArray(v)&&typeof v[0]=="string")for(f=0;f<w.length;f+=1){for(G[S=w[f]]=y.map(function(Le){return Le[S]}),this.setFont(void 0,"bold"),ye.push(this.getTextDimensions(A[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=G[S],this.setFont(void 0,"normal"),g=0;g<m.length;g+=1)ye.push(this.getTextDimensions(m[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ae[S]=Math.max.apply(null,ye)+M+M,ye=[]}if(Z){var ve={};for(f=0;f<w.length;f+=1)ve[w[f]]={},ve[w[f]].text=A[f],ve[w[f]].align=T[f];var ge=l.call(this,ve,ae);ie=w.map(function(Le){return new a(u,h,ae[Le],ge,ve[Le].text,void 0,ve[Le].align)}),this.setTableHeaderRow(ie),this.printHeaderRow(1,!1)}var xe=v.reduce(function(Le,Ye){return Le[Ye.name]=Ye.align,Le},{});for(f=0;f<y.length;f+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:f,data:y[f]},this);var de=l.call(this,y[f],ae);for(g=0;g<w.length;g+=1){var we=y[f][w[g]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:f,col:g,data:we},this),s.call(this,new a(u,h,ae[w[g]],de,we,f+2,xe[w[g]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=h,this};var l=function(u,h){var y=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(u).map(function(f){var m=u[f];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,h[f]-y-y)},this).map(function(f){return this.getLineHeightFactor()*f.length*v/b+y+y},this).reduce(function(f,m){return Math.max(f,m)},0)};n.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},n.printHeaderRow=function(u,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var y;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){y=this.internal.__cell__.tableHeaderRow[f].clone(),h&&(y.y=this.internal.__cell__.margins.top||0,b.push(y)),y.lineNumber=u;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,y),this.setTextColor(m)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),t=!1}}(Nt.API);var Vf={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Uf=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Hu=Bf(Uf),qf=[100,200,300,400,500,600,700,800,900],z0=Bf(qf);function Gu(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return Vf[a=a||"normal"]?a:"normal"}(n.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),o=function(a){return typeof Hu[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:o,src:n.src||[],ref:n.ref||{name:e,style:[o,t,r].join(" ")}}}function Sd(n,e,t,r){var o;for(o=t;o>=0&&o<e.length;o+=r)if(n[e[o]])return n[e[o]];for(o=t;o>=0&&o<e.length;o-=r)if(n[e[o]])return n[e[o]]}var $0={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},xd={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Nd(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function W0(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",o=Object.assign({},$0,t.genericFontFamilies||{}),a=null,s=null,l=0;l<e.length;++l)if(o[(a=Gu(e[l])).family]&&(a.family=o[a.family]),n.hasOwnProperty(a.family)){s=n[a.family];break}if(!(s=s||n[r]))throw new Error("Could not find a font-family for the rule '"+Nd(a)+"' and default family '"+r+"'.");if(s=function(u,h){if(h[u])return h[u];var y=Hu[u],v=y<=Hu.normal?-1:1,b=Sd(h,Uf,y,v);if(!b)throw new Error("Could not find a matching font-stretch value for "+u);return b}(a.stretch,s),s=function(u,h){if(h[u])return h[u];for(var y=Vf[u],v=0;v<y.length;++v)if(h[y[v]])return h[y[v]];throw new Error("Could not find a matching font-style for "+u)}(a.style,s),!(s=function(u,h){if(h[u])return h[u];if(u===400&&h[500])return h[500];if(u===500&&h[400])return h[400];var y=z0[u],v=Sd(h,qf,y,u<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+u);return v}(a.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Nd(a)+"'.");return s}function Ad(n){return n.trimLeft()}function H0(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function G0(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var yl,Ld,kd,Au=["times"];(function(n){var e,t,r,o,a,s,l,u,h,y=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new u,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new s,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new s,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new v(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,l=this.internal.Rectangle,u=this.internal.Matrix,h=new y}]);var v=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=P;Object.defineProperty(this,"pdf",{get:function(){return B}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(ke){q=!!ke}});var X=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return X},set:function(ke){X=!!ke}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(ke){isNaN(ke)||(ne=ke)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(ke){isNaN(ke)||(fe=ke)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(ke){var z;typeof ke=="number"?z=[ke,ke,ke,ke]:((z=new Array(4))[0]=ke[0],z[1]=ke.length>=2?ke[1]:z[0],z[2]=ke.length>=3?ke[2]:z[0],z[3]=ke.length>=4?ke[3]:z[1]),h.margin=z}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(ke){he=ke}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(ke){me=ke}});var Ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ve},set:function(ke){Ve=ke}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(ke){ke instanceof y&&(h=ke)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(ke){h.path=ke}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(ke){Be=ke}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ke){var z;z=b(ke),this.ctx.fillStyle=z.style,this.ctx.isFillTransparent=z.a===0,this.ctx.fillOpacity=z.a,this.pdf.setFillColor(z.r,z.g,z.b,{a:z.a}),this.pdf.setTextColor(z.r,z.g,z.b,{a:z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ke){var z=b(ke);this.ctx.strokeStyle=z.style,this.ctx.isStrokeTransparent=z.a===0,this.ctx.strokeOpacity=z.a,z.a===0?this.pdf.setDrawColor(255,255,255):(z.a,this.pdf.setDrawColor(z.r,z.g,z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ke){["butt","round","square"].indexOf(ke)!==-1&&(this.ctx.lineCap=ke,this.pdf.setLineCap(ke))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ke){isNaN(ke)||(this.ctx.lineWidth=ke,this.pdf.setLineWidth(ke))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ke){["bevel","round","miter"].indexOf(ke)!==-1&&(this.ctx.lineJoin=ke,this.pdf.setLineJoin(ke))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ke){isNaN(ke)||(this.ctx.miterLimit=ke,this.pdf.setMiterLimit(ke))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ke){this.ctx.textBaseline=ke}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ke){["right","end","center","left","start"].indexOf(ke)!==-1&&(this.ctx.textAlign=ke)}});var Je=null;function qe(ke,z){if(Je===null){var kt=function(ot){var je=[];return Object.keys(ot).forEach(function($e){ot[$e].forEach(function(Ke){var Ge=null;switch(Ke){case"bold":Ge={family:$e,weight:"bold"};break;case"italic":Ge={family:$e,style:"italic"};break;case"bolditalic":Ge={family:$e,weight:"bold",style:"italic"};break;case"":case"normal":Ge={family:$e}}Ge!==null&&(Ge.ref={name:$e,style:Ke},je.push(Ge))})}),je}(ke.getFontList());Je=function(ot){for(var je={},$e=0;$e<ot.length;++$e){var Ke=Gu(ot[$e]),Ge=Ke.family,ut=Ke.stretch,Lt=Ke.style,It=Ke.weight;je[Ge]=je[Ge]||{},je[Ge][ut]=je[Ge][ut]||{},je[Ge][ut][Lt]=je[Ge][ut][Lt]||{},je[Ge][ut][Lt][It]=Ke}return je}(kt.concat(z))}return Je}var ht=null;Object.defineProperty(this,"fontFaces",{get:function(){return ht},set:function(ke){Je=null,ht=ke}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ke){var z;if(this.ctx.font=ke,(z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ke))!==null){var kt=z[1];z[2];var ot=z[3],je=z[4];z[5];var $e=z[6],Ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(je)[2];je=Math.floor(Ke==="px"?parseFloat(je)*this.pdf.internal.scaleFactor:Ke==="em"?parseFloat(je)*this.pdf.getFontSize():parseFloat(je)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(je);var Ge=function(_t){var Ot,Ze,jn=[],Vt=_t.trim();if(Vt==="")return Au;if(Vt in xd)return[xd[Vt]];for(;Vt!=="";){switch(Ze=null,Ot=(Vt=Ad(Vt)).charAt(0)){case'"':case"'":Ze=H0(Vt.substring(1),Ot);break;default:Ze=G0(Vt)}if(Ze===null||(jn.push(Ze[0]),(Vt=Ad(Ze[1]))!==""&&Vt.charAt(0)!==","))return Au;Vt=Vt.replace(/^,/,"")}return jn}($e);if(this.fontFaces){var ut=W0(qe(this.pdf,this.fontFaces),Ge.map(function(_t){return{family:_t,stretch:"normal",weight:ot,style:kt}}));this.pdf.setFont(ut.ref.name,ut.ref.style)}else{var Lt="";(ot==="bold"||parseInt(ot,10)>=700||kt==="bold")&&(Lt="bold"),kt==="italic"&&(Lt+="italic"),Lt.length===0&&(Lt="normal");for(var It="",Tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Rt=0;Rt<Ge.length;Rt++){if(this.pdf.internal.getFont(Ge[Rt],Lt,{noFallback:!0,disableWarning:!0})!==void 0){It=Ge[Rt];break}if(Lt==="bolditalic"&&this.pdf.internal.getFont(Ge[Rt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)It=Ge[Rt],Lt="bold";else if(this.pdf.internal.getFont(Ge[Rt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){It=Ge[Rt],Lt="normal";break}}if(It===""){for(var $t=0;$t<Ge.length;$t++)if(Tt[Ge[$t]]){It=Tt[Ge[$t]];break}}It=It===""?"Times":It,this.pdf.setFont(It,Lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ke){this.ctx.globalCompositeOperation=ke}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ke){this.ctx.globalAlpha=ke}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ke){this.ctx.lineDashOffset=ke,Ye.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ke){this.ctx.lineDash=ke,Ye.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ke){this.ctx.ignoreClearRect=!!ke}})};v.prototype.setLineDash=function(P){this.lineDash=P},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){G.call(this,"fill",!1)},v.prototype.stroke=function(){G.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(P,B){if(isNaN(P)||isNaN(B))throw un.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new s(P,B));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new s(P,B)},v.prototype.closePath=function(){var P=new s(0,0),B=0;for(B=this.path.length-1;B!==-1;B--)if(this.path[B].type==="begin"&&dn(this.path[B+1])==="object"&&typeof this.path[B+1].x=="number"){P=new s(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(P.x,P.y)},v.prototype.lineTo=function(P,B){if(isNaN(P)||isNaN(B))throw un.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new s(P,B));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new s(q.x,q.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},v.prototype.quadraticCurveTo=function(P,B,q,X){if(isNaN(q)||isNaN(X)||isNaN(P)||isNaN(B))throw un.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new s(q,X)),fe=this.ctx.transform.applyToPoint(new s(P,B));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new s(ne.x,ne.y)},v.prototype.bezierCurveTo=function(P,B,q,X,ne,fe){if(isNaN(ne)||isNaN(fe)||isNaN(P)||isNaN(B)||isNaN(q)||isNaN(X))throw un.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new s(ne,fe)),me=this.ctx.transform.applyToPoint(new s(P,B)),Ve=this.ctx.transform.applyToPoint(new s(q,X));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:Ve.x,y2:Ve.y,x:he.x,y:he.y}),this.ctx.lastPoint=new s(he.x,he.y)},v.prototype.arc=function(P,B,q,X,ne,fe){if(isNaN(P)||isNaN(B)||isNaN(q)||isNaN(X)||isNaN(ne))throw un.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new s(P,B));P=he.x,B=he.y;var me=this.ctx.transform.applyToPoint(new s(0,q)),Ve=this.ctx.transform.applyToPoint(new s(0,0));q=Math.sqrt(Math.pow(me.x-Ve.x,2)+Math.pow(me.y-Ve.y,2))}Math.abs(ne-X)>=2*Math.PI&&(X=0,ne=2*Math.PI),this.path.push({type:"arc",x:P,y:B,radius:q,startAngle:X,endAngle:ne,counterclockwise:fe})},v.prototype.arcTo=function(P,B,q,X,ne){throw new Error("arcTo not implemented.")},v.prototype.rect=function(P,B,q,X){if(isNaN(P)||isNaN(B)||isNaN(q)||isNaN(X))throw un.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,B),this.lineTo(P+q,B),this.lineTo(P+q,B+X),this.lineTo(P,B+X),this.lineTo(P,B),this.lineTo(P+q,B),this.lineTo(P,B)},v.prototype.fillRect=function(P,B,q,X){if(isNaN(P)||isNaN(B)||isNaN(q)||isNaN(X))throw un.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,B,q,X),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},v.prototype.strokeRect=function(P,B,q,X){if(isNaN(P)||isNaN(B)||isNaN(q)||isNaN(X))throw un.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(P,B,q,X),this.stroke())},v.prototype.clearRect=function(P,B,q,X){if(isNaN(P)||isNaN(B)||isNaN(q)||isNaN(X))throw un.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,B,q,X))},v.prototype.save=function(P){P=typeof P!="boolean"||P;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var X=new y(this.ctx);this.ctxStack.push(this.ctx),this.ctx=X}},v.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(B),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(P){var B,q,X,ne;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))B=0,q=0,X=0,ne=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(fe!==null)B=parseInt(fe[1]),q=parseInt(fe[2]),X=parseInt(fe[3]),ne=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)B=parseInt(fe[1]),q=parseInt(fe[2]),X=parseInt(fe[3]),ne=parseFloat(fe[4]);else{if(ne=1,typeof P=="string"&&P.charAt(0)!=="#"){var he=new Mf(P);P=he.ok?he.toHex():"#000000"}P.length===4?(B=P.substring(1,2),B+=B,q=P.substring(2,3),q+=q,X=P.substring(3,4),X+=X):(B=P.substring(1,3),q=P.substring(3,5),X=P.substring(5,7)),B=parseInt(B,16),q=parseInt(q,16),X=parseInt(X,16)}}return{r:B,g:q,b:X,a:ne,style:P}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(P,B,q,X){if(isNaN(B)||isNaN(q)||typeof P!="string")throw un.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(X=isNaN(X)?void 0:X,!f.call(this)){var ne=de(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;M.call(this,{text:P,x:B,y:q,scale:fe,angle:ne,align:this.textAlign,maxWidth:X})}},v.prototype.strokeText=function(P,B,q,X){if(isNaN(B)||isNaN(q)||typeof P!="string")throw un.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){X=isNaN(X)?void 0:X;var ne=de(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;M.call(this,{text:P,x:B,y:q,scale:fe,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:X})}},v.prototype.measureText=function(P){if(typeof P!="string")throw un.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,q=this.pdf.internal.scaleFactor,X=B.internal.getFontSize(),ne=B.getStringUnitWidth(P)*X/B.internal.scaleFactor,fe=function(he){var me=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this};return new fe({width:ne*=Math.round(96*q/72*1e4)/1e4})},v.prototype.scale=function(P,B){if(isNaN(P)||isNaN(B))throw un.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new u(P,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},v.prototype.rotate=function(P){if(isNaN(P))throw un.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new u(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},v.prototype.translate=function(P,B){if(isNaN(P)||isNaN(B))throw un.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new u(1,0,0,1,P,B);this.ctx.transform=this.ctx.transform.multiply(q)},v.prototype.transform=function(P,B,q,X,ne,fe){if(isNaN(P)||isNaN(B)||isNaN(q)||isNaN(X)||isNaN(ne)||isNaN(fe))throw un.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new u(P,B,q,X,ne,fe);this.ctx.transform=this.ctx.transform.multiply(he)},v.prototype.setTransform=function(P,B,q,X,ne,fe){P=isNaN(P)?1:P,B=isNaN(B)?0:B,q=isNaN(q)?0:q,X=isNaN(X)?1:X,ne=isNaN(ne)?0:ne,fe=isNaN(fe)?0:fe,this.ctx.transform=new u(P,B,q,X,ne,fe)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(P,B,q,X,ne,fe,he,me,Ve){var Be=this.pdf.getImageProperties(P),Je=1,qe=1,ht=1,ke=1;X!==void 0&&me!==void 0&&(ht=me/X,ke=Ve/ne,Je=Be.width/X*me/X,qe=Be.height/ne*Ve/ne),fe===void 0&&(fe=B,he=q,B=0,q=0),X!==void 0&&me===void 0&&(me=X,Ve=ne),X===void 0&&me===void 0&&(me=Be.width,Ve=Be.height);for(var z,kt=this.ctx.transform.decompose(),ot=de(kt.rotate.shx),je=new u,$e=(je=(je=(je=je.multiply(kt.translate)).multiply(kt.skew)).multiply(kt.scale)).applyToRectangle(new l(fe-B*ht,he-q*ke,X*Je,ne*qe)),Ke=S.call(this,$e),Ge=[],ut=0;ut<Ke.length;ut+=1)Ge.indexOf(Ke[ut])===-1&&Ge.push(Ke[ut]);if(T(Ge),this.autoPaging)for(var Lt=Ge[0],It=Ge[Ge.length-1],Tt=Lt;Tt<It+1;Tt++){this.pdf.setPage(Tt);var Rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$t=Tt===1?this.posY+this.margin[0]:this.margin[0],_t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=Tt===1?0:_t+(Tt-2)*Ot;if(this.ctx.clip_path.length!==0){var jn=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(z,this.posX+this.margin[3],-Ze+$t+this.ctx.prevPageLastElemOffset),ae.call(this,"fill",!0),this.path=jn}var Vt=JSON.parse(JSON.stringify($e));Vt=A([Vt],this.posX+this.margin[3],-Ze+$t+this.ctx.prevPageLastElemOffset)[0];var wr=(Tt>Lt||Tt<It)&&g.call(this);wr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,Ot,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Vt.x,Vt.y,Vt.w,Vt.h,null,null,ot),wr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,ot)};var S=function(P,B,q){var X=[];B=B||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":X.push(Math.floor((P.y+ne)/q)+1);break;case"arc":X.push(Math.floor((P.y+ne-P.radius)/q)+1),X.push(Math.floor((P.y+ne+P.radius)/q)+1);break;case"qct":var fe=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);X.push(Math.floor((fe.y+ne)/q)+1),X.push(Math.floor((fe.y+fe.h+ne)/q)+1);break;case"bct":var he=Le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);X.push(Math.floor((he.y+ne)/q)+1),X.push(Math.floor((he.y+he.h+ne)/q)+1);break;case"rect":X.push(Math.floor((P.y+ne)/q)+1),X.push(Math.floor((P.y+P.h+ne)/q)+1)}for(var me=0;me<X.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<X[me];)w.call(this);return X},w=function(){var P=this.fillStyle,B=this.strokeStyle,q=this.font,X=this.lineCap,ne=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=B,this.font=q,this.lineCap=X,this.lineWidth=ne,this.lineJoin=fe},A=function(P,B,q){for(var X=0;X<P.length;X++)switch(P[X].type){case"bct":P[X].x2+=B,P[X].y2+=q;case"qct":P[X].x1+=B,P[X].y1+=q;case"mt":case"lt":case"arc":default:P[X].x+=B,P[X].y+=q}return P},T=function(P){return P.sort(function(B,q){return B-q})},G=function(P,B){for(var q,X,ne=this.fillStyle,fe=this.strokeStyle,he=this.lineCap,me=this.lineWidth,Ve=Math.abs(me*this.ctx.transform.scaleX),Be=this.lineJoin,Je=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),ht=[],ke=0;ke<qe.length;ke++)if(qe[ke].x!==void 0)for(var z=S.call(this,qe[ke]),kt=0;kt<z.length;kt+=1)ht.indexOf(z[kt])===-1&&ht.push(z[kt]);for(var ot=0;ot<ht.length;ot++)for(;this.pdf.internal.getNumberOfPages()<ht[ot];)w.call(this);if(T(ht),this.autoPaging)for(var je=ht[0],$e=ht[ht.length-1],Ke=je;Ke<$e+1;Ke++){this.pdf.setPage(Ke),this.fillStyle=ne,this.strokeStyle=fe,this.lineCap=he,this.lineWidth=Ve,this.lineJoin=Be;var Ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ut=Ke===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Tt=Ke===1?0:Lt+(Ke-2)*It;if(this.ctx.clip_path.length!==0){var Rt=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(q,this.posX+this.margin[3],-Tt+ut+this.ctx.prevPageLastElemOffset),ae.call(this,P,!0),this.path=Rt}if(X=JSON.parse(JSON.stringify(Je)),this.path=A(X,this.posX+this.margin[3],-Tt+ut+this.ctx.prevPageLastElemOffset),B===!1||Ke===0){var $t=(Ke>je||Ke<$e)&&g.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,It,null).clip().discardPath()),ae.call(this,P,B),$t&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=Ve,ae.call(this,P,B),this.lineWidth=me;this.path=Je},ae=function(P,B){if((P!=="stroke"||B||!m.call(this))&&(P==="stroke"||B||!f.call(this))){for(var q,X,ne=[],fe=this.path,he=0;he<fe.length;he++){var me=fe[he];switch(me.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:me,deltas:[],abs:[]});break;case"lt":var Ve=ne.length;if(fe[he-1]&&!isNaN(fe[he-1].x)&&(q=[me.x-fe[he-1].x,me.y-fe[he-1].y],Ve>0)){for(;Ve>=0;Ve--)if(ne[Ve-1].close!==!0&&ne[Ve-1].begin!==!0){ne[Ve-1].deltas.push(q),ne[Ve-1].abs.push(me);break}}break;case"bct":q=[me.x1-fe[he-1].x,me.y1-fe[he-1].y,me.x2-fe[he-1].x,me.y2-fe[he-1].y,me.x-fe[he-1].x,me.y-fe[he-1].y],ne[ne.length-1].deltas.push(q);break;case"qct":var Be=fe[he-1].x+2/3*(me.x1-fe[he-1].x),Je=fe[he-1].y+2/3*(me.y1-fe[he-1].y),qe=me.x+2/3*(me.x1-me.x),ht=me.y+2/3*(me.y1-me.y),ke=me.x,z=me.y;q=[Be-fe[he-1].x,Je-fe[he-1].y,qe-fe[he-1].x,ht-fe[he-1].y,ke-fe[he-1].x,z-fe[he-1].y],ne[ne.length-1].deltas.push(q);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(me)}}X=B?null:P==="stroke"?"stroke":"fill";for(var kt=!1,ot=0;ot<ne.length;ot++)if(ne[ot].arc)for(var je=ne[ot].abs,$e=0;$e<je.length;$e++){var Ke=je[$e];Ke.type==="arc"?R.call(this,Ke.x,Ke.y,Ke.radius,Ke.startAngle,Ke.endAngle,Ke.counterclockwise,void 0,B,!kt):te.call(this,Ke.x,Ke.y),kt=!0}else if(ne[ot].close===!0)this.pdf.internal.out("h"),kt=!1;else if(ne[ot].begin!==!0){var Ge=ne[ot].start.x,ut=ne[ot].start.y;Y.call(this,ne[ot].deltas,Ge,ut),kt=!0}X&&Z.call(this,X),B&&pe.call(this)}},ye=function(P){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-q;case"top":return P+B-q;case"hanging":return P+B-2*q;case"middle":return P+B/2-q;case"ideographic":return P;case"alphabetic":default:return P}},ie=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(B,q){this.colorStops.push([B,q])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(P,B,q,X,ne,fe,he,me,Ve){for(var Be=ge.call(this,q,X,ne,fe),Je=0;Je<Be.length;Je++){var qe=Be[Je];Je===0&&(Ve?D.call(this,qe.x1+P,qe.y1+B):te.call(this,qe.x1+P,qe.y1+B)),ve.call(this,P,B,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}me?pe.call(this):Z.call(this,he)},Z=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},pe=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(P,B){this.pdf.internal.out(t(P)+" "+r(B)+" m")},M=function(P){var B;switch(P.align){case"right":case"end":B="right";break;case"center":B="center";break;case"left":case"start":default:B="left"}var q=this.pdf.getTextDimensions(P.text),X=ye.call(this,P.y),ne=ie.call(this,X)-q.h,fe=this.ctx.transform.applyToPoint(new s(P.x,X)),he=this.ctx.transform.decompose(),me=new u;me=(me=(me=me.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var Ve,Be,Je,qe=this.ctx.transform.applyToRectangle(new l(P.x,X,q.w,q.h)),ht=me.applyToRectangle(new l(P.x,ne,q.w,q.h)),ke=S.call(this,ht),z=[],kt=0;kt<ke.length;kt+=1)z.indexOf(ke[kt])===-1&&z.push(ke[kt]);if(T(z),this.autoPaging)for(var ot=z[0],je=z[z.length-1],$e=ot;$e<je+1;$e++){this.pdf.setPage($e);var Ke=$e===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[2],Lt=ut-this.margin[0],It=this.pdf.internal.pageSize.width-this.margin[1],Tt=It-this.margin[3],Rt=$e===1?0:Ge+($e-2)*Lt;if(this.ctx.clip_path.length!==0){var $t=this.path;Ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Ve,this.posX+this.margin[3],-1*Rt+Ke),ae.call(this,"fill",!0),this.path=$t}var _t=A([JSON.parse(JSON.stringify(ht))],this.posX+this.margin[3],-Rt+Ke+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*P.scale),Je=this.lineWidth,this.lineWidth=Je*P.scale);var Ot=this.autoPaging!=="text";if(Ot||_t.y+_t.h<=ut){if(Ot||_t.y>=Ke&&_t.x<=It){var Ze=Ot?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||It-_t.x)[0],jn=A([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-Rt+Ke+this.ctx.prevPageLastElemOffset)[0],Vt=Ot&&($e>ot||$e<je)&&g.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,Lt,null).clip().discardPath()),this.pdf.text(Ze,jn.x,jn.y,{angle:P.angle,align:B,renderingMode:P.renderingMode}),Vt&&this.pdf.restoreGraphicsState()}}else _t.y<ut&&(this.ctx.prevPageLastElemOffset+=ut-_t.y);P.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=Je)}else P.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*P.scale),Je=this.lineWidth,this.lineWidth=Je*P.scale),this.pdf.text(P.text,fe.x+this.posX,fe.y+this.posY,{angle:P.angle,align:B,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=Je)},te=function(P,B,q,X){q=q||0,X=X||0,this.pdf.internal.out(t(P+q)+" "+r(B+X)+" l")},Y=function(P,B,q){return this.pdf.lines(P,B,q,null,null)},ve=function(P,B,q,X,ne,fe,he,me){this.pdf.internal.out([e(o(q+P)),e(a(X+B)),e(o(ne+P)),e(a(fe+B)),e(o(he+P)),e(a(me+B)),"c"].join(" "))},ge=function(P,B,q,X){for(var ne=2*Math.PI,fe=Math.PI/2;B>q;)B-=ne;var he=Math.abs(q-B);he<ne&&X&&(he=ne-he);for(var me=[],Ve=X?-1:1,Be=B;he>1e-5;){var Je=Be+Ve*Math.min(he,fe);me.push(xe.call(this,P,Be,Je)),he-=Math.abs(Je-Be),Be=Je}return me},xe=function(P,B,q){var X=(q-B)/2,ne=P*Math.cos(X),fe=P*Math.sin(X),he=ne,me=-fe,Ve=he*he+me*me,Be=Ve+he*ne+me*fe,Je=4/3*(Math.sqrt(2*Ve*Be)-Be)/(he*fe-me*ne),qe=he-Je*me,ht=me+Je*he,ke=qe,z=-ht,kt=X+B,ot=Math.cos(kt),je=Math.sin(kt);return{x1:P*Math.cos(B),y1:P*Math.sin(B),x2:qe*ot-ht*je,y2:qe*je+ht*ot,x3:ke*ot-z*je,y3:ke*je+z*ot,x4:P*Math.cos(q),y4:P*Math.sin(q)}},de=function(P){return 180*P/Math.PI},we=function(P,B,q,X,ne,fe){var he=P+.5*(q-P),me=B+.5*(X-B),Ve=ne+.5*(q-ne),Be=fe+.5*(X-fe),Je=Math.min(P,ne,he,Ve),qe=Math.max(P,ne,he,Ve),ht=Math.min(B,fe,me,Be),ke=Math.max(B,fe,me,Be);return new l(Je,ht,qe-Je,ke-ht)},Le=function(P,B,q,X,ne,fe,he,me){var Ve,Be,Je,qe,ht,ke,z,kt,ot,je,$e,Ke,Ge,ut,Lt=q-P,It=X-B,Tt=ne-q,Rt=fe-X,$t=he-ne,_t=me-fe;for(Be=0;Be<41;Be++)ot=(z=(Je=P+(Ve=Be/40)*Lt)+Ve*((ht=q+Ve*Tt)-Je))+Ve*(ht+Ve*(ne+Ve*$t-ht)-z),je=(kt=(qe=B+Ve*It)+Ve*((ke=X+Ve*Rt)-qe))+Ve*(ke+Ve*(fe+Ve*_t-ke)-kt),Be==0?($e=ot,Ke=je,Ge=ot,ut=je):($e=Math.min($e,ot),Ke=Math.min(Ke,je),Ge=Math.max(Ge,ot),ut=Math.max(ut,je));return new l(Math.round($e),Math.round(Ke),Math.round(Ge-$e),Math.round(ut-Ke))},Ye=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,B,q=(P=this.ctx.lineDash,B=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:B}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(Nt.API),function(n){var e=function(a){var s,l,u,h,y,v,b,f,m,g;for(l=[],u=0,h=(a+=s="\0\0\0\0".slice(a.length%4||4)).length;h>u;u+=4)(y=(a.charCodeAt(u)<<24)+(a.charCodeAt(u+1)<<16)+(a.charCodeAt(u+2)<<8)+a.charCodeAt(u+3))!==0?(v=(y=((y=((y=((y=(y-(g=y%85))/85)-(m=y%85))/85)-(f=y%85))/85)-(b=y%85))/85)%85,l.push(v+33,b+33,f+33,m+33,g+33)):l.push(122);return function(S,w){for(var A=w;A>0;A--)S.pop()}(l,s.length),String.fromCharCode.apply(String,l)+"~>"},t=function(a){var s,l,u,h,y,v=String,b="length",f=255,m="charCodeAt",g="slice",S="replace";for(a[g](-2),a=a[g](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),u=[],h=0,y=(a+=s="uuuuu"[g](a[b]%5||5))[b];y>h;h+=5)l=52200625*(a[m](h)-33)+614125*(a[m](h+1)-33)+7225*(a[m](h+2)-33)+85*(a[m](h+3)-33)+(a[m](h+4)-33),u.push(f&l>>24,f&l>>16,f&l>>8,f&l);return function(w,A){for(var T=A;T>0;T--)w.pop()}(u,s[b]),v.fromCharCode.apply(v,u)},r=function(a){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),s.test(a)===!1)return"";for(var l="",u=0;u<a.length;u+=2)l+=String.fromCharCode("0x"+(a[u]+a[u+1]));return l},o=function(a){for(var s=new Uint8Array(a.length),l=a.length;l--;)s[l]=a.charCodeAt(l);return a=(s=Uu(s)).reduce(function(u,h){return u+String.fromCharCode(h)},"")};n.processDataByFilters=function(a,s){var l=0,u=a||"",h=[];for(typeof(s=s||[])=="string"&&(s=[s]),l=0;l<s.length;l+=1)switch(s[l]){case"ASCII85Decode":case"/ASCII85Decode":u=t(u),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=r(u),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(y){return("0"+y.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=o(u),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[l]+'" is not implemented')}return{data:u,reverseChain:h.reverse().join(" ")}}}(Nt.API),function(n){n.loadFile=function(e,t,r){return function(o,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var l=void 0;try{l=function(u,h,y){var v=new XMLHttpRequest,b=0,f=function(m){var g=m.length,S=[],w=String.fromCharCode;for(b=0;b<g;b+=1)S.push(w(255&m.charCodeAt(b)));return S.join("")};if(v.open("GET",u,!h),v.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(v.onload=function(){v.status===200?y(f(this.responseText)):y(void 0)}),v.send(null),h&&v.status===200)return f(v.responseText)}(o,a,s)}catch{}return l}(e,t,r)},n.loadImageFile=n.loadFile}(Nt.API),function(n){function e(){return(At.html2canvas?Promise.resolve(At.html2canvas):Iu(()=>import("./html2canvas.esm-0543ed55.js"),[],import.meta.url)).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(At.DOMPurify?Promise.resolve(At.DOMPurify):Iu(()=>import("./purify.es-31816194.js"),[],import.meta.url)).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var l=dn(s);return l==="undefined"?"undefined":l==="string"||s instanceof String?"string":l==="number"||s instanceof Number?"number":l==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":l==="object"?"object":"unknown"},o=function(s,l){var u=document.createElement(s);for(var h in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[h]=l.style[h];return u},a=function s(l){var u=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),h=s.convert(Promise.resolve(),u);return h=(h=h.setProgress(1,s,1,[s])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(s,l){return s.__proto__=l||a.prototype,s},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(s,l){return this.then(function(){switch(l=l||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(u){return this.set({src:o("div",{innerHTML:s,dompurify:u})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},a.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function u(h,y){for(var v=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),b=h.firstChild;b;b=b.nextSibling)y!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||v.appendChild(u(b,y));return h.nodeType===1&&(h.nodeName==="CANVAS"?(v.width=h.width,v.height=h.height,v.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(v.value=h.value),v.addEventListener("load",function(){v.scrollTop=h.scrollTop,v.scrollLeft=h.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(l){var u=this.opt.jsPDF,h=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=h,h)for(var b=0;b<h.length;++b){var f=h[b],m=f.src.find(function(g){return g.format==="truetype"});m&&u.addFont(m.url,f.ref.name,f.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,u.context2d.save(!0),l(this.prop.container,v)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(s,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(s,l):this.outputPdf(s,l)},a.prototype.outputPdf=function(s,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,l)})},a.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},a.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(s){if(r(s)!=="object")return this;var l=Object.keys(s||{}).map(function(u){if(u in a.template.prop)return function(){this.prop[u]=s[u]};switch(u){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[u]=s[u]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(s,l){return this.then(function(){var u=s in a.template.prop?this.prop[s]:this.opt[s];return l?l(u):u})},a.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},a.prototype.setPageSize=function(s){function l(u,h){return Math.floor(u*h/72*96)}return this.then(function(){(s=s||Nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:l(s.inner.width,s.k),height:l(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},a.prototype.setProgress=function(s,l,u,h){return s!=null&&(this.progress.val=s),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(s,l,u,h){return this.setProgress(s?this.progress.val+s:null,l||null,u?this.progress.n+u:null,h?this.progress.stack.concat(h):null)},a.prototype.then=function(s,l){var u=this;return this.thenCore(s,l,function(h,y){return u.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(v){return u.updateProgress(null,h),v}).then(h,y).then(function(v){return u.updateProgress(1),v})})},a.prototype.thenCore=function(s,l,u){u=u||Promise.prototype.then,s&&(s=s.bind(this)),l&&(l=l.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),y=u.call(h,s,l);return a.convert(y,this.__proto__)},a.prototype.thenExternal=function(s,l){return Promise.prototype.then.call(this,s,l)},a.prototype.thenList=function(s){var l=this;return s.forEach(function(u){l=l.thenCore(u)}),l},a.prototype.catch=function(s){s&&(s=s.bind(this));var l=Promise.prototype.catch.call(this,s);return a.convert(l,this)},a.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},a.prototype.error=function(s){return this.then(function(){throw new Error(s)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Nt.getPageSize=function(s,l,u){if(dn(s)==="object"){var h=s;s=h.orientation,l=h.unit||l,u=h.format||u}l=l||"mm",u=u||"a4",s=(""+(s||"P")).toLowerCase();var y,v=(""+u).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+l}var f,m=0,g=0;if(b.hasOwnProperty(v))m=b[v][1]/y,g=b[v][0]/y;else try{m=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(s==="p"||s==="portrait")s="p",g>m&&(f=g,g=m,m=f);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",m>g&&(f=g,g=m,m=f)}return{width:g,height:m,unit:l,k:y,orientation:s}},n.html=function(s,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Gu):null;var u=new a(l);return l.worker?u:u.from(s).doCallback()}}(Nt.API),Nt.API.addJS=function(n){return kd=n,this.internal.events.subscribe("postPutResources",function(){yl=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(yl+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ld=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+kd+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){yl!==void 0&&Ld!==void 0&&this.internal.out("/Names <</JavaScript "+yl+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=t.outline.render().split(/\r\n/),a=0;a<o.length;a++){var s=o[a],l=r.exec(s);if(l!=null){var u=l[1];t.internal.newObjectDeferredBegin(u,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,y=[];for(a=0;a<h;a++){var v=t.internal.newObject();y.push(v);var b=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<y.length;a++)t.internal.write("(page_"+(a+1)+")"+y[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,o,a){var s={title:o,options:a,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var s=r.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var l=this.count=this.count_r({count:0},s);if(l>0&&this.line("/Count "+l),s.options&&s.options.pageNumber){var u=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,o){for(var a=0;a<o.children.length;a++)r.count++,this.count_r(r,o.children[a]);return r.count}}])}(Nt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,o,a,s,l){var u,h=this.decode.DCT_DECODE,y=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(u=function(v){for(var b,f=256*v.charCodeAt(4)+v.charCodeAt(5),m=v.length,g={width:0,height:0,numcomponents:1},S=4;S<m;S+=2){if(S+=f,e.indexOf(v.charCodeAt(S+1))!==-1){b=256*v.charCodeAt(S+5)+v.charCodeAt(S+6),g={width:256*v.charCodeAt(S+7)+v.charCodeAt(S+8),height:b,numcomponents:v.charCodeAt(S+9)};break}f=256*v.charCodeAt(S+2)+v.charCodeAt(S+3)}return g}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}y={data:t,width:u.width,height:u.height,colorSpace:l,bitsPerComponent:8,filter:h,index:r,alias:o}}return y}}(Nt.API);var Ai,bl,Id,Pd,Cd,Y0=function(){var n,e,t;function r(a){var s,l,u,h,y,v,b,f,m,g,S,w,A,T;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(s=this.readUInt32(),m=function(){var G,ae;for(ae=[],G=0;G<4;++G)ae.push(String.fromCharCode(this.data[this.pos++]));return ae}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},y=this.readUInt16(),h=this.readUInt16()||100,v.delay=1e3*y/h,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(m==="fdAT"&&(this.pos+=4,s-=4),a=(v!=null?v.data:void 0)||this.imgData,w=0;0<=s?w<s:w>s;0<=s?++w:--w)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((g=u-this.transparency.indexed.length)>0)for(A=0;0<=g?A<g:A>g;0<=g?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":b=(S=this.read(s)).indexOf(0),f=String.fromCharCode.apply(String,S.slice(0,b)),this.text[f]=String.fromCharCode.apply(String,S.slice(b+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var s,l;for(l=[],s=0;0<=a?s<a:s>a;0<=a?++s:--s)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var s=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*s),u=0,h=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function y(v,b,f,m){var g,S,w,A,T,G,ae,ye,ie,R,Z,pe,D,M,te,Y,ve,ge,xe,de,we,Le=Math.ceil((h.width-v)/f),Ye=Math.ceil((h.height-b)/m),P=h.width==Le&&h.height==Ye;for(M=s*Le,pe=P?l:new Uint8Array(M*Ye),G=a.length,D=0,S=0;D<Ye&&u<G;){switch(a[u++]){case 0:for(A=ve=0;ve<M;A=ve+=1)pe[S++]=a[u++];break;case 1:for(A=ge=0;ge<M;A=ge+=1)g=a[u++],T=A<s?0:pe[S-s],pe[S++]=(g+T)%256;break;case 2:for(A=xe=0;xe<M;A=xe+=1)g=a[u++],w=(A-A%s)/s,te=D&&pe[(D-1)*M+w*s+A%s],pe[S++]=(te+g)%256;break;case 3:for(A=de=0;de<M;A=de+=1)g=a[u++],w=(A-A%s)/s,T=A<s?0:pe[S-s],te=D&&pe[(D-1)*M+w*s+A%s],pe[S++]=(g+Math.floor((T+te)/2))%256;break;case 4:for(A=we=0;we<M;A=we+=1)g=a[u++],w=(A-A%s)/s,T=A<s?0:pe[S-s],D===0?te=Y=0:(te=pe[(D-1)*M+w*s+A%s],Y=w&&pe[(D-1)*M+(w-1)*s+A%s]),ae=T+te-Y,ye=Math.abs(ae-T),R=Math.abs(ae-te),Z=Math.abs(ae-Y),ie=ye<=R&&ye<=Z?T:R<=Z?te:Y,pe[S++]=(g+ie)%256;break;default:throw new Error("Invalid filter algorithm: "+a[u-1])}if(!P){var B=((b+D*m)*h.width+v)*s,q=D*M;for(A=0;A<Le;A+=1){for(var X=0;X<s;X+=1)l[B++]=pe[q++];B+=(f-1)*s}}D++}}return a=L0(a),h.interlaceMethod==1?(y(0,0,8,8),y(4,0,8,8),y(0,4,4,8),y(2,0,4,4),y(0,2,2,4),y(1,0,2,2),y(0,1,1,2)):y(0,0,1,1),l},r.prototype.decodePalette=function(){var a,s,l,u,h,y,v,b,f;for(l=this.palette,y=this.transparency.indexed||[],h=new Uint8Array((y.length||0)+l.length),u=0,a=0,s=v=0,b=l.length;v<b;s=v+=3)h[u++]=l[s],h[u++]=l[s+1],h[u++]=l[s+2],h[u++]=(f=y[a++])!=null?f:255;return h},r.prototype.copyToImageData=function(a,s){var l,u,h,y,v,b,f,m,g,S,w;if(u=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),u=4,l=!0),m=(h=a.data||a).length,v=g||s,y=b=0,u===1)for(;y<m;)f=g?4*s[y/4]:b,S=v[f++],h[y++]=S,h[y++]=S,h[y++]=S,h[y++]=l?v[f++]:255,b=f;else for(;y<m;)f=g?4*s[y/4]:b,h[y++]=v[f++],h[y++]=v[f++],h[y++]=v[f++],h[y++]=l?v[f++]:255,b=f},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var o=function(){if(Object.prototype.toString.call(At)==="[object Window]"){try{e=At.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),n=function(a){var s;if(o()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var s,l,u,h,y,v,b,f;if(this.animation){for(f=[],l=y=0,v=(b=this.animation.frames).length;y<v;l=++y)s=b[l],u=a.createImageData(s.width,s.height),h=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(u,h),s.imageData=u,f.push(s.image=n(u));return f}},r.prototype.renderFrame=function(a,s){var l,u,h;return l=(u=this.animation.frames)[s],h=u[s-1],s===0&&a.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?a.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&a.putImageData(h.imageData,h.xOffset,h.yOffset),l.blendOp===0&&a.clearRect(l.xOffset,l.yOffset,l.width,l.height),a.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(a){var s,l,u,h,y,v,b=this;return l=0,v=this.animation,h=v.numFrames,u=v.frames,y=v.numPlays,(s=function(){var f,m;if(f=l++%h,m=u[f],b.renderFrame(a,f),h>1&&l/h<y)return b.animation._timeout=setTimeout(s,m.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var s,l;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,s=a.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(l=s.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),s.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function J0(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,o=n[e++],a=o>>7,s=1<<(7&o)+1;n[e++],n[e++];var l=null,u=null;a&&(l=e,u=s,e+=3*s);var h=!0,y=[],v=0,b=null,f=0,m=null;for(this.width=t,this.height=r;h&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,m=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=n[e++];v=n[e++]|n[e++]<<8,b=n[e++],!(1&g)&&(b=null),f=g>>2&7,e++;break;case 254:for(;;){if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var S=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,G=n[e++],ae=G>>6&1,ye=1<<(7&G)+1,ie=l,R=u,Z=!1;G>>7&&(Z=!0,ie=e,R=ye,e+=3*ye);var pe=e;for(e++;;){var D;if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}y.push({x:S,y:w,width:A,height:T,has_local_palette:Z,palette_offset:ie,palette_size:R,data_offset:pe,data_length:e-pe,transparent_index:b,interlaced:!!ae,delay:v,disposal:f});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return y.length},this.loopCount=function(){return m},this.frameInfo=function(M){if(M<0||M>=y.length)throw new Error("Frame index out of range.");return y[M]},this.decodeAndBlitFrameBGRA=function(M,te){var Y=this.frameInfo(M),ve=Y.width*Y.height,ge=new Uint8Array(ve);Fd(n,Y.data_offset,ge,ve);var xe=Y.palette_offset,de=Y.transparent_index;de===null&&(de=256);var we=Y.width,Le=t-we,Ye=we,P=4*(Y.y*t+Y.x),B=4*((Y.y+Y.height)*t+Y.x),q=P,X=4*Le;Y.interlaced===!0&&(X+=4*t*7);for(var ne=8,fe=0,he=ge.length;fe<he;++fe){var me=ge[fe];if(Ye===0&&(Ye=we,(q+=X)>=B&&(X=4*Le+4*t*(ne-1),q=P+(we+Le)*(ne<<1),ne>>=1)),me===de)q+=4;else{var Ve=n[xe+3*me],Be=n[xe+3*me+1],Je=n[xe+3*me+2];te[q++]=Je,te[q++]=Be,te[q++]=Ve,te[q++]=255}--Ye}},this.decodeAndBlitFrameRGBA=function(M,te){var Y=this.frameInfo(M),ve=Y.width*Y.height,ge=new Uint8Array(ve);Fd(n,Y.data_offset,ge,ve);var xe=Y.palette_offset,de=Y.transparent_index;de===null&&(de=256);var we=Y.width,Le=t-we,Ye=we,P=4*(Y.y*t+Y.x),B=4*((Y.y+Y.height)*t+Y.x),q=P,X=4*Le;Y.interlaced===!0&&(X+=4*t*7);for(var ne=8,fe=0,he=ge.length;fe<he;++fe){var me=ge[fe];if(Ye===0&&(Ye=we,(q+=X)>=B&&(X=4*Le+4*t*(ne-1),q=P+(we+Le)*(ne<<1),ne>>=1)),me===de)q+=4;else{var Ve=n[xe+3*me],Be=n[xe+3*me+1],Je=n[xe+3*me+2];te[q++]=Ve,te[q++]=Be,te[q++]=Je,te[q++]=255}--Ye}}}function Fd(n,e,t,r){for(var o=n[e++],a=1<<o,s=a+1,l=s+1,u=o+1,h=(1<<u)-1,y=0,v=0,b=0,f=n[e++],m=new Int32Array(4096),g=null;;){for(;y<16&&f!==0;)v|=n[e++]<<y,y+=8,f===1?f=n[e++]:--f;if(y<u)break;var S=v&h;if(v>>=u,y-=u,S!==a){if(S===s)break;for(var w=S<l?S:g,A=0,T=w;T>a;)T=m[T]>>8,++A;var G=T;if(b+A+(w!==S?1:0)>r)return void un.log("Warning, gif stream longer than expected.");t[b++]=G;var ae=b+=A;for(w!==S&&(t[b++]=G),T=w;A--;)T=m[T],t[--ae]=255&T,T>>=8;g!==null&&l<4096&&(m[l++]=g<<8|G,l>=h+1&&u<12&&(++u,h=h<<1|1)),g=S}else l=s+1,h=(1<<(u=o+1))-1,g=null}return b!==r&&un.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Lu(n){var e,t,r,o,a,s=Math.floor,l=new Array(64),u=new Array(64),h=new Array(64),y=new Array(64),v=new Array(65535),b=new Array(65535),f=new Array(64),m=new Array(64),g=[],S=0,w=7,A=new Array(64),T=new Array(64),G=new Array(64),ae=new Array(256),ye=new Array(2048),ie=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],pe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],te=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ve=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ge(P,B){for(var q=0,X=0,ne=new Array,fe=1;fe<=16;fe++){for(var he=1;he<=P[fe];he++)ne[B[X]]=[],ne[B[X]][0]=q,ne[B[X]][1]=fe,X++,q++;q*=2}return ne}function xe(P){for(var B=P[0],q=P[1]-1;q>=0;)B&1<<q&&(S|=1<<w),q--,--w<0&&(S==255?(de(255),de(0)):de(S),w=7,S=0)}function de(P){g.push(P)}function we(P){de(P>>8&255),de(255&P)}function Le(P,B,q,X,ne){for(var fe,he=ne[0],me=ne[240],Ve=function(je,$e){var Ke,Ge,ut,Lt,It,Tt,Rt,$t,_t,Ot,Ze=0;for(_t=0;_t<8;++_t){Ke=je[Ze],Ge=je[Ze+1],ut=je[Ze+2],Lt=je[Ze+3],It=je[Ze+4],Tt=je[Ze+5],Rt=je[Ze+6];var jn=Ke+($t=je[Ze+7]),Vt=Ke-$t,wr=Ge+Rt,tn=Ge-Rt,Jt=ut+Tt,Gn=ut-Tt,Wt=Lt+It,la=Lt-It,hn=jn+Wt,pr=jn-Wt,Jr=wr+Jt,gn=wr-Jt;je[Ze]=hn+Jr,je[Ze+4]=hn-Jr;var ft=.707106781*(gn+pr);je[Ze+2]=pr+ft,je[Ze+6]=pr-ft;var Ht=.382683433*((hn=la+Gn)-(gn=tn+Vt)),ua=.5411961*hn+Ht,Tn=1.306562965*gn+Ht,Mr=.707106781*(Jr=Gn+tn),Er=Vt+Mr,vt=Vt-Mr;je[Ze+5]=vt+ua,je[Ze+3]=vt-ua,je[Ze+1]=Er+Tn,je[Ze+7]=Er-Tn,Ze+=8}for(Ze=0,_t=0;_t<8;++_t){Ke=je[Ze],Ge=je[Ze+8],ut=je[Ze+16],Lt=je[Ze+24],It=je[Ze+32],Tt=je[Ze+40],Rt=je[Ze+48];var Sr=Ke+($t=je[Ze+56]),Tr=Ke-$t,Kn=Ge+Rt,Ln=Ge-Rt,bn=ut+Tt,sr=ut-Tt,$a=Lt+It,Or=Lt-It,hr=Sr+$a,xr=Sr-$a,Nr=Kn+bn,Rr=Kn-bn;je[Ze]=hr+Nr,je[Ze+32]=hr-Nr;var mr=.707106781*(Rr+xr);je[Ze+16]=xr+mr,je[Ze+48]=xr-mr;var jr=.382683433*((hr=Or+sr)-(Rr=Ln+Tr)),ca=.5411961*hr+jr,ka=1.306562965*Rr+jr,Ia=.707106781*(Nr=sr+Ln),Wa=Tr+Ia,Ha=Tr-Ia;je[Ze+40]=Ha+ca,je[Ze+24]=Ha-ca,je[Ze+8]=Wa+ka,je[Ze+56]=Wa-ka,Ze++}for(_t=0;_t<64;++_t)Ot=je[_t]*$e[_t],f[_t]=Ot>0?Ot+.5|0:Ot-.5|0;return f}(P,B),Be=0;Be<64;++Be)m[ie[Be]]=Ve[Be];var Je=m[0]-q;q=m[0],Je==0?xe(X[0]):(xe(X[b[fe=32767+Je]]),xe(v[fe]));for(var qe=63;qe>0&&m[qe]==0;)qe--;if(qe==0)return xe(he),q;for(var ht,ke=1;ke<=qe;){for(var z=ke;m[ke]==0&&ke<=qe;)++ke;var kt=ke-z;if(kt>=16){ht=kt>>4;for(var ot=1;ot<=ht;++ot)xe(me);kt&=15}fe=32767+m[ke],xe(ne[(kt<<4)+b[fe]]),xe(v[fe]),ke++}return qe!=63&&xe(he),q}function Ye(P){P=Math.min(Math.max(P,1),100),a!=P&&(function(B){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],X=0;X<64;X++){var ne=s((q[X]*B+50)/100);ne=Math.min(Math.max(ne,1),255),l[ie[X]]=ne}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var me=s((fe[he]*B+50)/100);me=Math.min(Math.max(me,1),255),u[ie[he]]=me}for(var Ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,Je=0;Je<8;Je++)for(var qe=0;qe<8;qe++)h[Be]=1/(l[ie[Be]]*Ve[Je]*Ve[qe]*8),y[Be]=1/(u[ie[Be]]*Ve[Je]*Ve[qe]*8),Be++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),a=P)}this.encode=function(P,B){B&&Ye(B),g=new Array,S=0,w=7,we(65496),we(65504),we(16),de(74),de(70),de(73),de(70),de(0),de(1),de(1),de(0),we(1),we(1),de(0),de(0),function(){we(65499),we(132),de(0);for(var Ge=0;Ge<64;Ge++)de(l[Ge]);de(1);for(var ut=0;ut<64;ut++)de(u[ut])}(),function(Ge,ut){we(65472),we(17),de(8),we(ut),we(Ge),de(3),de(1),de(17),de(0),de(2),de(17),de(1),de(3),de(17),de(1)}(P.width,P.height),function(){we(65476),we(418),de(0);for(var Ge=0;Ge<16;Ge++)de(R[Ge+1]);for(var ut=0;ut<=11;ut++)de(Z[ut]);de(16);for(var Lt=0;Lt<16;Lt++)de(pe[Lt+1]);for(var It=0;It<=161;It++)de(D[It]);de(1);for(var Tt=0;Tt<16;Tt++)de(M[Tt+1]);for(var Rt=0;Rt<=11;Rt++)de(te[Rt]);de(17);for(var $t=0;$t<16;$t++)de(Y[$t+1]);for(var _t=0;_t<=161;_t++)de(ve[_t])}(),we(65498),we(12),de(3),de(1),de(0),de(2),de(17),de(3),de(17),de(0),de(63),de(0);var q=0,X=0,ne=0;S=0,w=7,this.encode.displayName="_encode_";for(var fe,he,me,Ve,Be,Je,qe,ht,ke,z=P.data,kt=P.width,ot=P.height,je=4*kt,$e=0;$e<ot;){for(fe=0;fe<je;){for(Be=je*$e+fe,qe=-1,ht=0,ke=0;ke<64;ke++)Je=Be+(ht=ke>>3)*je+(qe=4*(7&ke)),$e+ht>=ot&&(Je-=je*($e+1+ht-ot)),fe+qe>=je&&(Je-=fe+qe-je+4),he=z[Je++],me=z[Je++],Ve=z[Je++],A[ke]=(ye[he]+ye[me+256>>0]+ye[Ve+512>>0]>>16)-128,T[ke]=(ye[he+768>>0]+ye[me+1024>>0]+ye[Ve+1280>>0]>>16)-128,G[ke]=(ye[he+1280>>0]+ye[me+1536>>0]+ye[Ve+1792>>0]>>16)-128;q=Le(A,h,q,e,r),X=Le(T,y,X,t,o),ne=Le(G,y,ne,t,o),fe+=32}$e+=8}if(w>=0){var Ke=[];Ke[1]=w+1,Ke[0]=(1<<w+1)-1,xe(Ke)}return we(65497),new Uint8Array(g)},n=n||50,function(){for(var P=String.fromCharCode,B=0;B<256;B++)ae[B]=P(B)}(),e=ge(R,Z),t=ge(M,te),r=ge(pe,D),o=ge(Y,ve),function(){for(var P=1,B=2,q=1;q<=15;q++){for(var X=P;X<B;X++)b[32767+X]=q,v[32767+X]=[],v[32767+X][1]=q,v[32767+X][0]=X;for(var ne=-(B-1);ne<=-P;ne++)b[32767+ne]=q,v[32767+ne]=[],v[32767+ne][1]=q,v[32767+ne][0]=B-1+ne;P<<=1,B<<=1}}(),function(){for(var P=0;P<256;P++)ye[P]=19595*P,ye[P+256>>0]=38470*P,ye[P+512>>0]=7471*P+32768,ye[P+768>>0]=-11059*P,ye[P+1024>>0]=-21709*P,ye[P+1280>>0]=32768*P+8421375,ye[P+1536>>0]=-27439*P,ye[P+1792>>0]=-5329*P}(),Ye(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ra(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Dd(n){function e(R){if(!R)throw Error("assert :P")}function t(R,Z,pe){for(var D=0;4>D;D++)if(R[Z+D]!=pe.charCodeAt(D))return!0;return!1}function r(R,Z,pe,D,M){for(var te=0;te<M;te++)R[Z+te]=pe[D+te]}function o(R,Z,pe,D){for(var M=0;M<D;M++)R[Z+M]=pe}function a(R){return new Int32Array(R)}function s(R,Z){for(var pe=[],D=0;D<R;D++)pe.push(new Z);return pe}function l(R,Z){var pe=[];return function D(M,te,Y){for(var ve=Y[te],ge=0;ge<ve&&(M.push(Y.length>te+1?[]:new Z),!(Y.length<te+1));ge++)D(M[ge],te+1,Y)}(pe,0,R),pe}var u=function(){var R=this;function Z(i,c){for(var p=1<<c-1>>>0;i&p;)p>>>=1;return p?(i&p-1)+p:i}function pe(i,c,p,_,x){e(!(_%p));do i[c+(_-=p)]=x;while(0<_)}function D(i,c,p,_,x){if(e(2328>=x),512>=x)var k=a(512);else if((k=a(x))==null)return 0;return function(I,C,F,O,Q,ue){var ce,oe,Me=C,be=1<<F,ee=a(16),re=a(16);for(e(Q!=0),e(O!=null),e(I!=null),e(0<F),oe=0;oe<Q;++oe){if(15<O[oe])return 0;++ee[O[oe]]}if(ee[0]==Q)return 0;for(re[1]=0,ce=1;15>ce;++ce){if(ee[ce]>1<<ce)return 0;re[ce+1]=re[ce]+ee[ce]}for(oe=0;oe<Q;++oe)ce=O[oe],0<O[oe]&&(ue[re[ce]++]=oe);if(re[15]==1)return(O=new M).g=0,O.value=ue[0],pe(I,Me,1,be,O),be;var Fe,Te=-1,De=be-1,tt=0,He=1,yt=1,Xe=1<<F;for(oe=0,ce=1,Q=2;ce<=F;++ce,Q<<=1){if(He+=yt<<=1,0>(yt-=ee[ce]))return 0;for(;0<ee[ce];--ee[ce])(O=new M).g=ce,O.value=ue[oe++],pe(I,Me+tt,Q,Xe,O),tt=Z(tt,ce)}for(ce=F+1,Q=2;15>=ce;++ce,Q<<=1){if(He+=yt<<=1,0>(yt-=ee[ce]))return 0;for(;0<ee[ce];--ee[ce]){if(O=new M,(tt&De)!=Te){for(Me+=Xe,Fe=1<<(Te=ce)-F;15>Te&&!(0>=(Fe-=ee[Te]));)++Te,Fe<<=1;be+=Xe=1<<(Fe=Te-F),I[C+(Te=tt&De)].g=Fe+F,I[C+Te].value=Me-C-Te}O.g=ce-F,O.value=ue[oe++],pe(I,Me+(tt>>F),Q,Xe,O),tt=Z(tt,ce)}}return He!=2*re[15]-1?0:be}(i,c,p,_,x,k)}function M(){this.value=this.g=0}function te(){this.value=this.g=0}function Y(){this.G=s(5,M),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Yn,te)}function ve(i,c,p,_){e(i!=null),e(c!=null),e(2147483648>_),i.Ca=254,i.I=0,i.b=-8,i.Ka=0,i.oa=c,i.pa=p,i.Jd=c,i.Yc=p+_,i.Zc=4<=_?p+_-4+1:p,fe(i)}function ge(i,c){for(var p=0;0<c--;)p|=me(i,128)<<c;return p}function xe(i,c){var p=ge(i,c);return he(i)?-p:p}function de(i,c,p,_){var x,k=0;for(e(i!=null),e(c!=null),e(4294967288>_),i.Sb=_,i.Ra=0,i.u=0,i.h=0,4<_&&(_=4),x=0;x<_;++x)k+=c[p+x]<<8*x;i.Ra=k,i.bb=_,i.oa=c,i.pa=p}function we(i){for(;8<=i.u&&i.bb<i.Sb;)i.Ra>>>=8,i.Ra+=i.oa[i.pa+i.bb]<<fi-8>>>0,++i.bb,i.u-=8;q(i)&&(i.h=1,i.u=0)}function Le(i,c){if(e(0<=c),!i.h&&c<=di){var p=B(i)&ci[c];return i.u+=c,we(i),p}return i.h=1,i.u=0}function Ye(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(i){return i.Ra>>>(i.u&fi-1)>>>0}function q(i){return e(i.bb<=i.Sb),i.h||i.bb==i.Sb&&i.u>fi}function X(i,c){i.u=c,i.h=q(i)}function ne(i){i.u>=gs&&(e(i.u>=gs),we(i))}function fe(i){e(i!=null&&i.oa!=null),i.pa<i.Zc?(i.I=(i.oa[i.pa++]|i.I<<8)>>>0,i.b+=8):(e(i!=null&&i.oa!=null),i.pa<i.Yc?(i.b+=8,i.I=i.oa[i.pa++]|i.I<<8):i.Ka?i.b=0:(i.I<<=8,i.b+=8,i.Ka=1))}function he(i){return ge(i,1)}function me(i,c){var p=i.Ca;0>i.b&&fe(i);var _=i.b,x=p*c>>>8,k=(i.I>>>_>x)+0;for(k?(p-=x,i.I-=x+1<<_>>>0):p=x+1,_=p,x=0;256<=_;)x+=8,_>>=8;return _=7^x+gr[_],i.b-=_,i.Ca=(p<<_)-1,k}function Ve(i,c,p){i[c+0]=p>>24&255,i[c+1]=p>>16&255,i[c+2]=p>>8&255,i[c+3]=p>>0&255}function Be(i,c){return i[c+0]<<0|i[c+1]<<8}function Je(i,c){return Be(i,c)|i[c+2]<<16}function qe(i,c){return Be(i,c)|Be(i,c+2)<<16}function ht(i,c){var p=1<<c;return e(i!=null),e(0<c),i.X=a(p),i.X==null?0:(i.Mb=32-c,i.Xa=c,1)}function ke(i,c){e(i!=null),e(c!=null),e(i.Xa==c.Xa),r(c.X,0,i.X,0,1<<c.Xa)}function z(){this.X=[],this.Xa=this.Mb=0}function kt(i,c,p,_){e(p!=null),e(_!=null);var x=p[0],k=_[0];return x==0&&(x=(i*k+c/2)/c),k==0&&(k=(c*x+i/2)/i),0>=x||0>=k?0:(p[0]=x,_[0]=k,1)}function ot(i,c){return i+(1<<c)-1>>>c}function je(i,c){return((4278255360&i)+(4278255360&c)>>>0&4278255360)+((16711935&i)+(16711935&c)>>>0&16711935)>>>0}function $e(i,c){R[c]=function(p,_,x,k,I,C,F){var O;for(O=0;O<I;++O){var Q=R[i](C[F+O-1],x,k+O);C[F+O]=je(p[_+O],Q)}}}function Ke(){this.ud=this.hd=this.jd=0}function Ge(i,c){return((4278124286&(i^c))>>>1)+(i&c)>>>0}function ut(i){return 0<=i&&256>i?i:0>i?0:255<i?255:void 0}function Lt(i,c){return ut(i+(i-c+.5>>1))}function It(i,c,p){return Math.abs(c-p)-Math.abs(i-p)}function Tt(i,c,p,_,x,k,I){for(_=k[I-1],p=0;p<x;++p)k[I+p]=_=je(i[c+p],_)}function Rt(i,c,p,_,x){var k;for(k=0;k<p;++k){var I=i[c+k],C=I>>8&255,F=16711935&(F=(F=16711935&I)+((C<<16)+C));_[x+k]=(4278255360&I)+F>>>0}}function $t(i,c){c.jd=i>>0&255,c.hd=i>>8&255,c.ud=i>>16&255}function _t(i,c,p,_,x,k){var I;for(I=0;I<_;++I){var C=c[p+I],F=C>>>8,O=C,Q=255&(Q=(Q=C>>>16)+((i.jd<<24>>24)*(F<<24>>24)>>>5));O=255&(O=(O=O+((i.hd<<24>>24)*(F<<24>>24)>>>5))+((i.ud<<24>>24)*(Q<<24>>24)>>>5)),x[k+I]=(4278255360&C)+(Q<<16)+O}}function Ot(i,c,p,_,x){R[c]=function(k,I,C,F,O,Q,ue,ce,oe){for(F=ue;F<ce;++F)for(ue=0;ue<oe;++ue)O[Q++]=x(C[_(k[I++])])},R[i]=function(k,I,C,F,O,Q,ue){var ce=8>>k.b,oe=k.Ea,Me=k.K[0],be=k.w;if(8>ce)for(k=(1<<k.b)-1,be=(1<<ce)-1;I<C;++I){var ee,re=0;for(ee=0;ee<oe;++ee)ee&k||(re=_(F[O++])),Q[ue++]=x(Me[re&be]),re>>=ce}else R["VP8LMapColor"+p](F,O,Me,be,Q,ue,I,C,oe)}}function Ze(i,c,p,_,x){for(p=c+p;c<p;){var k=i[c++];_[x++]=k>>16&255,_[x++]=k>>8&255,_[x++]=k>>0&255}}function jn(i,c,p,_,x){for(p=c+p;c<p;){var k=i[c++];_[x++]=k>>16&255,_[x++]=k>>8&255,_[x++]=k>>0&255,_[x++]=k>>24&255}}function Vt(i,c,p,_,x){for(p=c+p;c<p;){var k=(I=i[c++])>>16&240|I>>12&15,I=I>>0&240|I>>28&15;_[x++]=k,_[x++]=I}}function wr(i,c,p,_,x){for(p=c+p;c<p;){var k=(I=i[c++])>>16&248|I>>13&7,I=I>>5&224|I>>3&31;_[x++]=k,_[x++]=I}}function tn(i,c,p,_,x){for(p=c+p;c<p;){var k=i[c++];_[x++]=k>>0&255,_[x++]=k>>8&255,_[x++]=k>>16&255}}function Jt(i,c,p,_,x,k){if(k==0)for(p=c+p;c<p;)Ve(_,((k=i[c++])[0]>>24|k[1]>>8&65280|k[2]<<8&16711680|k[3]<<24)>>>0),x+=32;else r(_,x,i,c,p)}function Gn(i,c){R[c][0]=R[i+"0"],R[c][1]=R[i+"1"],R[c][2]=R[i+"2"],R[c][3]=R[i+"3"],R[c][4]=R[i+"4"],R[c][5]=R[i+"5"],R[c][6]=R[i+"6"],R[c][7]=R[i+"7"],R[c][8]=R[i+"8"],R[c][9]=R[i+"9"],R[c][10]=R[i+"10"],R[c][11]=R[i+"11"],R[c][12]=R[i+"12"],R[c][13]=R[i+"13"],R[c][14]=R[i+"0"],R[c][15]=R[i+"0"]}function Wt(i){return i==eu||i==tu||i==tl||i==nu}function la(){this.eb=[],this.size=this.A=this.fb=0}function hn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new la,this.f.kb=new hn,this.sd=null}function Jr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function gn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ft(i){return alert("todo:WebPSamplerProcessPlane"),i.T}function Ht(i,c){var p=i.T,_=c.ba.f.RGBA,x=_.eb,k=_.fb+i.ka*_.A,I=$r[c.ba.S],C=i.y,F=i.O,O=i.f,Q=i.N,ue=i.ea,ce=i.W,oe=c.cc,Me=c.dc,be=c.Mc,ee=c.Nc,re=i.ka,Fe=i.ka+i.T,Te=i.U,De=Te+1>>1;for(re==0?I(C,F,null,null,O,Q,ue,ce,O,Q,ue,ce,x,k,null,null,Te):(I(c.ec,c.fc,C,F,oe,Me,be,ee,O,Q,ue,ce,x,k-_.A,x,k,Te),++p);re+2<Fe;re+=2)oe=O,Me=Q,be=ue,ee=ce,Q+=i.Rc,ce+=i.Rc,k+=2*_.A,I(C,(F+=2*i.fa)-i.fa,C,F,oe,Me,be,ee,O,Q,ue,ce,x,k-_.A,x,k,Te);return F+=i.fa,i.j+Fe<i.o?(r(c.ec,c.fc,C,F,Te),r(c.cc,c.dc,O,Q,De),r(c.Mc,c.Nc,ue,ce,De),p--):1&Fe||I(C,F,null,null,O,Q,ue,ce,O,Q,ue,ce,x,k+_.A,null,null,Te),p}function ua(i,c,p){var _=i.F,x=[i.J];if(_!=null){var k=i.U,I=c.ba.S,C=I==el||I==tl;c=c.ba.f.RGBA;var F=[0],O=i.ka;F[0]=i.T,i.Kb&&(O==0?--F[0]:(--O,x[0]-=i.width),i.j+i.ka+i.T==i.o&&(F[0]=i.o-i.j-O));var Q=c.eb;O=c.fb+O*c.A,i=pn(_,x[0],i.width,k,F,Q,O+(C?0:3),c.A),e(p==F),i&&Wt(I)&&qr(Q,O,C,k,F,c.A)}return 0}function Tn(i){var c=i.ma,p=c.ba.S,_=11>p,x=p==Zs||p==Qs||p==el||p==Ql||p==12||Wt(p);if(c.memory=null,c.Ib=null,c.Jb=null,c.Nd=null,!hs(c.Oa,i,x?11:12))return 0;if(x&&Wt(p)&&Oe(),i.da)alert("todo:use_scaling");else{if(_){if(c.Ib=ft,i.Kb){if(p=i.U+1>>1,c.memory=a(i.U+2*p),c.memory==null)return 0;c.ec=c.memory,c.fc=0,c.cc=c.ec,c.dc=c.fc+i.U,c.Mc=c.cc,c.Nc=c.dc+p,c.Ib=Ht,Oe()}}else alert("todo:EmitYUV");x&&(c.Jb=ua,_&&se())}if(_&&!Sc){for(i=0;256>i;++i)cp[i]=89858*(i-128)+rl>>nl,pp[i]=-22014*(i-128)+rl,fp[i]=-45773*(i-128),dp[i]=113618*(i-128)+rl>>nl;for(i=xs;i<ou;++i)c=76283*(i-16)+rl>>nl,hp[i-xs]=kr(c,255),mp[i-xs]=kr(c+8>>4,15);Sc=1}return 1}function Mr(i){var c=i.ma,p=i.U,_=i.T;return e(!(1&i.ka)),0>=p||0>=_?0:(p=c.Ib(i,c),c.Jb!=null&&c.Jb(i,c,p),c.Dc+=p,1)}function Er(i){i.ma.memory=null}function vt(i,c,p,_){return Le(i,8)!=47?0:(c[0]=Le(i,14)+1,p[0]=Le(i,14)+1,_[0]=Le(i,1),Le(i,3)!=0?0:!i.h)}function Sr(i,c){if(4>i)return i+1;var p=i-2>>1;return(2+(1&i)<<p)+Le(c,p)+1}function Tr(i,c){return 120<c?c-120:1<=(p=((p=Xf[c-1])>>4)*i+(8-(15&p)))?p:1;var p}function Kn(i,c,p){var _=B(p),x=i[c+=255&_].g-8;return 0<x&&(X(p,p.u+8),_=B(p),c+=i[c].value,c+=_&(1<<x)-1),X(p,p.u+i[c].g),i[c].value}function Ln(i,c,p){return p.g+=i.g,p.value+=i.value<<c>>>0,e(8>=p.g),i.g}function bn(i,c,p){var _=i.xc;return e((c=_==0?0:i.vc[i.md*(p>>_)+(c>>_)])<i.Wb),i.Ya[c]}function sr(i,c,p,_){var x=i.ab,k=i.c*c,I=i.C;c=I+c;var C=p,F=_;for(_=i.Ta,p=i.Ua;0<x--;){var O=i.gc[x],Q=I,ue=c,ce=C,oe=F,Me=(F=_,C=p,O.Ea);switch(e(Q<ue),e(ue<=O.nc),O.hc){case 2:Ws(ce,oe,(ue-Q)*Me,F,C);break;case 0:var be=Q,ee=ue,re=F,Fe=C,Te=(Xe=O).Ea;be==0&&(Kl(ce,oe,null,null,1,re,Fe),Tt(ce,oe+1,0,0,Te-1,re,Fe+1),oe+=Te,Fe+=Te,++be);for(var De=1<<Xe.b,tt=De-1,He=ot(Te,Xe.b),yt=Xe.K,Xe=Xe.w+(be>>Xe.b)*He;be<ee;){var Qt=yt,nn=Xe,Yt=1;for(vs(ce,oe,re,Fe-Te,1,re,Fe);Yt<Te;){var Bt=(Yt&~tt)+De;Bt>Te&&(Bt=Te),(0,to[Qt[nn++]>>8&15])(ce,oe+ +Yt,re,Fe+Yt-Te,Bt-Yt,re,Fe+Yt),Yt=Bt}oe+=Te,Fe+=Te,++be&tt||(Xe+=He)}ue!=O.nc&&r(F,C-Me,F,C+(ue-Q-1)*Me,Me);break;case 1:for(Me=ce,ee=oe,Te=(ce=O.Ea)-(Fe=ce&~(re=(oe=1<<O.b)-1)),be=ot(ce,O.b),De=O.K,O=O.w+(Q>>O.b)*be;Q<ue;){for(tt=De,He=O,yt=new Ke,Xe=ee+Fe,Qt=ee+ce;ee<Xe;)$t(tt[He++],yt),Oo(yt,Me,ee,oe,F,C),ee+=oe,C+=oe;ee<Qt&&($t(tt[He++],yt),Oo(yt,Me,ee,Te,F,C),ee+=Te,C+=Te),++Q&re||(O+=be)}break;case 3:if(ce==F&&oe==C&&0<O.b){for(ee=F,ce=Me=C+(ue-Q)*Me-(Fe=(ue-Q)*ot(O.Ea,O.b)),oe=F,re=C,be=[],Fe=(Te=Fe)-1;0<=Fe;--Fe)be[Fe]=oe[re+Fe];for(Fe=Te-1;0<=Fe;--Fe)ee[ce+Fe]=be[Fe];Br(O,Q,ue,F,Me,F,C)}else Br(O,Q,ue,ce,oe,F,C)}C=_,F=p}F!=p&&r(_,p,C,F,k)}function $a(i,c){var p=i.V,_=i.Ba+i.c*i.C,x=c-i.C;if(e(c<=i.l.o),e(16>=x),0<x){var k=i.l,I=i.Ta,C=i.Ua,F=k.width;if(sr(i,x,p,_),x=C=[C],e((p=i.C)<(_=c)),e(k.v<k.va),_>k.o&&(_=k.o),p<k.j){var O=k.j-p;p=k.j,x[0]+=O*F}if(p>=_?p=0:(x[0]+=4*k.v,k.ka=p-k.j,k.U=k.va-k.v,k.T=_-p,p=1),p){if(C=C[0],11>(p=i.ca).S){var Q=p.f.RGBA,ue=(_=p.S,x=k.U,k=k.T,O=Q.eb,Q.A),ce=k;for(Q=Q.fb+i.Ma*Q.A;0<ce--;){var oe=I,Me=C,be=x,ee=O,re=Q;switch(_){case Ks:vr(oe,Me,be,ee,re);break;case Zs:lr(oe,Me,be,ee,re);break;case eu:lr(oe,Me,be,ee,re),qr(ee,re,0,be,1,0);break;case fc:Da(oe,Me,be,ee,re);break;case Qs:Jt(oe,Me,be,ee,re,1);break;case tu:Jt(oe,Me,be,ee,re,1),qr(ee,re,0,be,1,0);break;case el:Jt(oe,Me,be,ee,re,0);break;case tl:Jt(oe,Me,be,ee,re,0),qr(ee,re,1,be,1,0);break;case Ql:no(oe,Me,be,ee,re);break;case nu:no(oe,Me,be,ee,re),fn(ee,re,be,1,0);break;case pc:Fa(oe,Me,be,ee,re);break;default:e(0)}C+=F,Q+=ue}i.Ma+=k}else alert("todo:EmitRescaledRowsYUVA");e(i.Ma<=p.height)}}i.C=c,e(i.C<=i.i)}function Or(i){var c;if(0<i.ua)return 0;for(c=0;c<i.Wb;++c){var p=i.Ya[c].G,_=i.Ya[c].H;if(0<p[1][_[1]+0].g||0<p[2][_[2]+0].g||0<p[3][_[3]+0].g)return 0}return 1}function hr(i,c,p,_,x,k){if(i.Z!=0){var I=i.qd,C=i.rd;for(e(io[i.Z]!=null);c<p;++c)io[i.Z](I,C,_,x,_,x,k),I=_,C=x,x+=k;i.qd=I,i.rd=C}}function xr(i,c){var p=i.l.ma,_=p.Z==0||p.Z==1?i.l.j:i.C;if(_=i.C<_?_:i.C,e(c<=i.l.o),c>_){var x=i.l.width,k=p.ca,I=p.tb+x*_,C=i.V,F=i.Ba+i.c*_,O=i.gc;e(i.ab==1),e(O[0].hc==3),Hs(O[0],_,c,C,F,k,I),hr(p,_,c,k,I,x)}i.C=i.Ma=c}function Nr(i,c,p,_,x,k,I){var C=i.$/_,F=i.$%_,O=i.m,Q=i.s,ue=p+i.$,ce=ue;x=p+_*x;var oe=p+_*k,Me=280+Q.ua,be=i.Pb?C:16777216,ee=0<Q.ua?Q.Wa:null,re=Q.wc,Fe=ue<oe?bn(Q,F,C):null;e(i.C<k),e(oe<=x);var Te=!1;e:for(;;){for(;Te||ue<oe;){var De=0;if(C>=be){var tt=ue-p;e((be=i).Pb),be.wd=be.m,be.xd=tt,0<be.s.ua&&ke(be.s.Wa,be.s.vb),be=C+Zf}if(F&re||(Fe=bn(Q,F,C)),e(Fe!=null),Fe.Qb&&(c[ue]=Fe.qb,Te=!0),!Te)if(ne(O),Fe.jc){De=O,tt=c;var He=ue,yt=Fe.pd[B(De)&Yn-1];e(Fe.jc),256>yt.g?(X(De,De.u+yt.g),tt[He]=yt.value,De=0):(X(De,De.u+yt.g-256),e(256<=yt.value),De=yt.value),De==0&&(Te=!0)}else De=Kn(Fe.G[0],Fe.H[0],O);if(O.h)break;if(Te||256>De){if(!Te)if(Fe.nd)c[ue]=(Fe.qb|De<<8)>>>0;else{if(ne(O),Te=Kn(Fe.G[1],Fe.H[1],O),ne(O),tt=Kn(Fe.G[2],Fe.H[2],O),He=Kn(Fe.G[3],Fe.H[3],O),O.h)break;c[ue]=(He<<24|Te<<16|De<<8|tt)>>>0}if(Te=!1,++ue,++F>=_&&(F=0,++C,I!=null&&C<=k&&!(C%16)&&I(i,C),ee!=null))for(;ce<ue;)De=c[ce++],ee.X[(506832829*De&4294967295)>>>ee.Mb]=De}else if(280>De){if(De=Sr(De-256,O),tt=Kn(Fe.G[4],Fe.H[4],O),ne(O),tt=Tr(_,tt=Sr(tt,O)),O.h)break;if(ue-p<tt||x-ue<De)break e;for(He=0;He<De;++He)c[ue+He]=c[ue+He-tt];for(ue+=De,F+=De;F>=_;)F-=_,++C,I!=null&&C<=k&&!(C%16)&&I(i,C);if(e(ue<=x),F&re&&(Fe=bn(Q,F,C)),ee!=null)for(;ce<ue;)De=c[ce++],ee.X[(506832829*De&4294967295)>>>ee.Mb]=De}else{if(!(De<Me))break e;for(Te=De-280,e(ee!=null);ce<ue;)De=c[ce++],ee.X[(506832829*De&4294967295)>>>ee.Mb]=De;De=ue,e(!(Te>>>(tt=ee).Xa)),c[De]=tt.X[Te],Te=!0}Te||e(O.h==q(O))}if(i.Pb&&O.h&&ue<x)e(i.m.h),i.a=5,i.m=i.wd,i.$=i.xd,0<i.s.ua&&ke(i.s.vb,i.s.Wa);else{if(O.h)break e;I!=null&&I(i,C>k?k:C),i.a=0,i.$=ue-p}return 1}return i.a=3,0}function Rr(i){e(i!=null),i.vc=null,i.yc=null,i.Ya=null;var c=i.Wa;c!=null&&(c.X=null),i.vb=null,e(i!=null)}function mr(){var i=new Xl;return i==null?null:(i.a=0,i.xb=gc,Gn("Predictor","VP8LPredictors"),Gn("Predictor","VP8LPredictors_C"),Gn("PredictorAdd","VP8LPredictorsAdd"),Gn("PredictorAdd","VP8LPredictorsAdd_C"),Ws=Rt,Oo=_t,vr=Ze,lr=jn,no=Vt,Fa=wr,Da=tn,R.VP8LMapColor32b=pi,R.VP8LMapColor8b=Gs,i)}function jr(i,c,p,_,x){var k=1,I=[i],C=[c],F=_.m,O=_.s,Q=null,ue=0;e:for(;;){if(p)for(;k&&Le(F,1);){var ce=I,oe=C,Me=_,be=1,ee=Me.m,re=Me.gc[Me.ab],Fe=Le(ee,2);if(Me.Oc&1<<Fe)k=0;else{switch(Me.Oc|=1<<Fe,re.hc=Fe,re.Ea=ce[0],re.nc=oe[0],re.K=[null],++Me.ab,e(4>=Me.ab),Fe){case 0:case 1:re.b=Le(ee,3)+2,be=jr(ot(re.Ea,re.b),ot(re.nc,re.b),0,Me,re.K),re.K=re.K[0];break;case 3:var Te,De=Le(ee,8)+1,tt=16<De?0:4<De?1:2<De?2:3;if(ce[0]=ot(re.Ea,tt),re.b=tt,Te=be=jr(De,1,0,Me,re.K)){var He,yt=De,Xe=re,Qt=1<<(8>>Xe.b),nn=a(Qt);if(nn==null)Te=0;else{var Yt=Xe.K[0],Bt=Xe.w;for(nn[0]=Xe.K[0][0],He=1;He<1*yt;++He)nn[He]=je(Yt[Bt+He],nn[He-1]);for(;He<4*Qt;++He)nn[He]=0;Xe.K[0]=null,Xe.K[0]=nn,Te=1}}be=Te;break;case 2:break;default:e(0)}k=be}}if(I=I[0],C=C[0],k&&Le(F,1)&&!(k=1<=(ue=Le(F,4))&&11>=ue)){_.a=3;break e}var ln;if(ln=k)t:{var on,Et,Mn,yr=_,En=I,br=C,rn=ue,Pr=p,Cr=yr.m,Vn=yr.s,Jn=[null],cr=1,Wr=0,ha=Kf[rn];n:for(;;){if(Pr&&Le(Cr,1)){var Un=Le(Cr,3)+2,Oa=ot(En,Un),Uo=ot(br,Un),yi=Oa*Uo;if(!jr(Oa,Uo,0,yr,Jn))break n;for(Jn=Jn[0],Vn.xc=Un,on=0;on<yi;++on){var so=Jn[on]>>8&65535;Jn[on]=so,so>=cr&&(cr=so+1)}}if(Cr.h)break n;for(Et=0;5>Et;++Et){var wn=hc[Et];!Et&&0<rn&&(wn+=1<<rn),Wr<wn&&(Wr=wn)}var iu=s(cr*ha,M),Ac=cr,Lc=s(Ac,Y);if(Lc==null)var ol=null;else e(65536>=Ac),ol=Lc;var Ns=a(Wr);if(ol==null||Ns==null||iu==null){yr.a=1;break n}var il=iu;for(on=Mn=0;on<cr;++on){var ta=ol[on],bi=ta.G,_i=ta.H,kc=0,sl=1,Ic=0;for(Et=0;5>Et;++Et){wn=hc[Et],bi[Et]=il,_i[Et]=Mn,!Et&&0<rn&&(wn+=1<<rn);a:{var ll,su=wn,ul=yr,As=Ns,yp=il,bp=Mn,lu=0,lo=ul.m,_p=Le(lo,1);if(o(As,0,0,su),_p){var wp=Le(lo,1)+1,Sp=Le(lo,1),Pc=Le(lo,Sp==0?1:8);As[Pc]=1,wp==2&&(As[Pc=Le(lo,8)]=1);var cl=1}else{var Cc=a(19),Fc=Le(lo,4)+4;if(19<Fc){ul.a=3;var dl=0;break a}for(ll=0;ll<Fc;++ll)Cc[Jf[ll]]=Le(lo,3);var uu=void 0,Ls=void 0,Dc=ul,xp=Cc,fl=su,Mc=As,cu=0,uo=Dc.m,Ec=8,Tc=s(128,M);r:for(;D(Tc,0,7,xp,19);){if(Le(uo,1)){var Np=2+2*Le(uo,3);if((uu=2+Le(uo,Np))>fl)break r}else uu=fl;for(Ls=0;Ls<fl&&uu--;){ne(uo);var Oc=Tc[0+(127&B(uo))];X(uo,uo.u+Oc.g);var wi=Oc.value;if(16>wi)Mc[Ls++]=wi,wi!=0&&(Ec=wi);else{var Ap=wi==16,Rc=wi-16,Lp=Gf[Rc],jc=Le(uo,Hf[Rc])+Lp;if(Ls+jc>fl)break r;for(var kp=Ap?Ec:0;0<jc--;)Mc[Ls++]=kp}}cu=1;break r}cu||(Dc.a=3),cl=cu}(cl=cl&&!lo.h)&&(lu=D(yp,bp,8,As,su)),cl&&lu!=0?dl=lu:(ul.a=3,dl=0)}if(dl==0)break n;if(sl&&Yf[Et]==1&&(sl=il[Mn].g==0),kc+=il[Mn].g,Mn+=dl,3>=Et){var ks,du=Ns[0];for(ks=1;ks<wn;++ks)Ns[ks]>du&&(du=Ns[ks]);Ic+=du}}if(ta.nd=sl,ta.Qb=0,sl&&(ta.qb=(bi[3][_i[3]+0].value<<24|bi[1][_i[1]+0].value<<16|bi[2][_i[2]+0].value)>>>0,kc==0&&256>bi[0][_i[0]+0].value&&(ta.Qb=1,ta.qb+=bi[0][_i[0]+0].value<<8)),ta.jc=!ta.Qb&&6>Ic,ta.jc){var pl,Ra=ta;for(pl=0;pl<Yn;++pl){var co=pl,fo=Ra.pd[co],hl=Ra.G[0][Ra.H[0]+co];256<=hl.value?(fo.g=hl.g+256,fo.value=hl.value):(fo.g=0,fo.value=0,co>>=Ln(hl,8,fo),co>>=Ln(Ra.G[1][Ra.H[1]+co],16,fo),co>>=Ln(Ra.G[2][Ra.H[2]+co],0,fo),Ln(Ra.G[3][Ra.H[3]+co],24,fo))}}}Vn.vc=Jn,Vn.Wb=cr,Vn.Ya=ol,Vn.yc=iu,ln=1;break t}ln=0}if(!(k=ln)){_.a=3;break e}if(0<ue){if(O.ua=1<<ue,!ht(O.Wa,ue)){_.a=1,k=0;break e}}else O.ua=0;var fu=_,Bc=I,Ip=C,pu=fu.s,hu=pu.xc;if(fu.c=Bc,fu.i=Ip,pu.md=ot(Bc,hu),pu.wc=hu==0?-1:(1<<hu)-1,p){_.xb=op;break e}if((Q=a(I*C))==null){_.a=1,k=0;break e}k=(k=Nr(_,Q,0,I,C,C,null))&&!F.h;break e}return k?(x!=null?x[0]=Q:(e(Q==null),e(p)),_.$=0,p||Rr(O)):Rr(O),k}function ca(i,c){var p=i.c*i.i,_=p+c+16*c;return e(i.c<=c),i.V=a(_),i.V==null?(i.Ta=null,i.Ua=0,i.a=1,0):(i.Ta=i.V,i.Ua=i.Ba+p+c,1)}function ka(i,c){var p=i.C,_=c-p,x=i.V,k=i.Ba+i.c*p;for(e(c<=i.l.o);0<_;){var I=16<_?16:_,C=i.l.ma,F=i.l.width,O=F*I,Q=C.ca,ue=C.tb+F*p,ce=i.Ta,oe=i.Ua;sr(i,I,x,k),In(ce,oe,Q,ue,O),hr(C,p,p+I,Q,ue,F),_-=I,x+=I*i.c,p+=I}e(p==c),i.C=i.Ma=c}function Ia(){this.ub=this.yd=this.td=this.Rb=0}function Wa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ha(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Xo(){this.Yb=function(){var i=[];return function c(p,_,x){for(var k=x[_],I=0;I<k&&(p.push(x.length>_+1?[]:0),!(x.length<_+1));I++)c(p[I],_+1,x)}(i,0,[3,11]),i}()}function Io(){this.jb=a(3),this.Wc=l([4,8],Xo),this.Xc=l([4,17],Xo)}function Ko(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ga(){this.ld=this.La=this.dd=this.tc=0}function da(){this.Na=this.la=0}function Zo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ya(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ga),this.Y=0,this.ya=Array(new Ya),this.aa=0,this.l=new Ja}function ei(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Zi(){this.cb=this.a=0,this.sc="",this.m=new Ye,this.Od=new Ia,this.Kc=new Wa,this.ed=new Ko,this.Qa=new Ha,this.Ic=this.$c=this.Aa=0,this.D=new Qo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,Ye),this.ia=0,this.pb=s(4,Zo),this.Pa=new Io,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ei),this.Hd=0,this.rb=Array(new da),this.sb=0,this.wa=Array(new Ga),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ya),this.L=this.aa=0,this.gd=l([4,2],Ga),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ja(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qi(){var i=new Zi;return i!=null&&(i.a=0,i.sc="OK",i.cb=0,i.Xb=0,Ss||(Ss=ni)),i}function vn(i,c,p){return i.a==0&&(i.a=c,i.sc=p,i.cb=0),0}function ti(i,c,p){return 3<=p&&i[c+0]==157&&i[c+1]==1&&i[c+2]==42}function Po(i,c){if(i==null)return 0;if(i.a=0,i.sc="OK",c==null)return vn(i,2,"null VP8Io passed to VP8GetHeaders()");var p=c.data,_=c.w,x=c.ha;if(4>x)return vn(i,7,"Truncated header.");var k=p[_+0]|p[_+1]<<8|p[_+2]<<16,I=i.Od;if(I.Rb=!(1&k),I.td=k>>1&7,I.yd=k>>4&1,I.ub=k>>5,3<I.td)return vn(i,3,"Incorrect keyframe parameters.");if(!I.yd)return vn(i,4,"Frame not displayable.");_+=3,x-=3;var C=i.Kc;if(I.Rb){if(7>x)return vn(i,7,"cannot parse picture header");if(!ti(p,_,x))return vn(i,3,"Bad code word");C.c=16383&(p[_+4]<<8|p[_+3]),C.Td=p[_+4]>>6,C.i=16383&(p[_+6]<<8|p[_+5]),C.Ud=p[_+6]>>6,_+=7,x-=7,i.za=C.c+15>>4,i.Ub=C.i+15>>4,c.width=C.c,c.height=C.i,c.Da=0,c.j=0,c.v=0,c.va=c.width,c.o=c.height,c.da=0,c.ib=c.width,c.hb=c.height,c.U=c.width,c.T=c.height,o((k=i.Pa).jb,0,255,k.jb.length),e((k=i.Qa)!=null),k.Cb=0,k.Bb=0,k.Fb=1,o(k.Zb,0,0,k.Zb.length),o(k.Lb,0,0,k.Lb)}if(I.ub>x)return vn(i,7,"bad partition length");ve(k=i.m,p,_,I.ub),_+=I.ub,x-=I.ub,I.Rb&&(C.Ld=he(k),C.Kd=he(k)),C=i.Qa;var F,O=i.Pa;if(e(k!=null),e(C!=null),C.Cb=he(k),C.Cb){if(C.Bb=he(k),he(k)){for(C.Fb=he(k),F=0;4>F;++F)C.Zb[F]=he(k)?xe(k,7):0;for(F=0;4>F;++F)C.Lb[F]=he(k)?xe(k,6):0}if(C.Bb)for(F=0;3>F;++F)O.jb[F]=he(k)?ge(k,8):255}else C.Bb=0;if(k.Ka)return vn(i,3,"cannot parse segment header");if((C=i.ed).zd=he(k),C.Tb=ge(k,6),C.wb=ge(k,3),C.Pc=he(k),C.Pc&&he(k)){for(O=0;4>O;++O)he(k)&&(C.vd[O]=xe(k,6));for(O=0;4>O;++O)he(k)&&(C.od[O]=xe(k,6))}if(i.L=C.Tb==0?0:C.zd?1:2,k.Ka)return vn(i,3,"cannot parse filter header");var Q=x;if(x=F=_,_=F+Q,C=Q,i.Xb=(1<<ge(i.m,2))-1,Q<3*(O=i.Xb))p=7;else{for(F+=3*O,C-=3*O,Q=0;Q<O;++Q){var ue=p[x+0]|p[x+1]<<8|p[x+2]<<16;ue>C&&(ue=C),ve(i.Jc[+Q],p,F,ue),F+=ue,C-=ue,x+=3}ve(i.Jc[+O],p,F,C),p=F<_?0:5}if(p!=0)return vn(i,p,"cannot parse partitions");for(p=ge(F=i.m,7),x=he(F)?xe(F,4):0,_=he(F)?xe(F,4):0,C=he(F)?xe(F,4):0,O=he(F)?xe(F,4):0,F=he(F)?xe(F,4):0,Q=i.Qa,ue=0;4>ue;++ue){if(Q.Cb){var ce=Q.Zb[ue];Q.Fb||(ce+=p)}else{if(0<ue){i.pb[ue]=i.pb[0];continue}ce=p}var oe=i.pb[ue];oe.Sc[0]=ru[kr(ce+x,127)],oe.Sc[1]=au[kr(ce+0,127)],oe.Eb[0]=2*ru[kr(ce+_,127)],oe.Eb[1]=101581*au[kr(ce+C,127)]>>16,8>oe.Eb[1]&&(oe.Eb[1]=8),oe.Qc[0]=ru[kr(ce+O,117)],oe.Qc[1]=au[kr(ce+F,127)],oe.lc=ce+F}if(!I.Rb)return vn(i,4,"Not a key frame.");for(he(k),I=i.Pa,p=0;4>p;++p){for(x=0;8>x;++x)for(_=0;3>_;++_)for(C=0;11>C;++C)O=me(k,rp[p][x][_][C])?ge(k,8):tp[p][x][_][C],I.Wc[p][x].Yb[_][C]=O;for(x=0;17>x;++x)I.Xc[p][x]=I.Wc[p][ap[x]]}return i.kc=he(k),i.kc&&(i.Bd=ge(k,8)),i.cb=1}function ni(i,c,p,_,x,k,I){var C=c[x].Yb[p];for(p=0;16>x;++x){if(!me(i,C[p+0]))return x;for(;!me(i,C[p+1]);)if(C=c[++x].Yb[0],p=0,x==16)return 16;var F=c[x+1].Yb;if(me(i,C[p+2])){var O=i,Q=0;if(me(O,(ce=C)[(ue=p)+3]))if(me(O,ce[ue+6])){for(C=0,ue=2*(Q=me(O,ce[ue+8]))+(ce=me(O,ce[ue+9+Q])),Q=0,ce=Qf[ue];ce[C];++C)Q+=Q+me(O,ce[C]);Q+=3+(8<<ue)}else me(O,ce[ue+7])?(Q=7+2*me(O,165),Q+=me(O,145)):Q=5+me(O,159);else Q=me(O,ce[ue+4])?3+me(O,ce[ue+5]):2;C=F[2]}else Q=1,C=F[1];F=I+ep[x],0>(O=i).b&&fe(O);var ue,ce=O.b,oe=(ue=O.Ca>>1)-(O.I>>ce)>>31;--O.b,O.Ca+=oe,O.Ca|=1,O.I-=(ue+1&oe)<<ce,k[F]=((Q^oe)-oe)*_[(0<x)+0]}return 16}function Co(i){var c=i.rb[i.sb-1];c.la=0,c.Na=0,o(i.zc,0,0,i.zc.length),i.ja=0}function ri(i,c){if(i==null)return 0;if(c==null)return vn(i,2,"NULL VP8Io parameter in VP8Decode().");if(!i.cb&&!Po(i,c))return 0;if(e(i.cb),c.ac==null||c.ac(c)){c.ob&&(i.L=0);var p=al[i.L];if(i.L==2?(i.yb=0,i.zb=0):(i.yb=c.v-p>>4,i.zb=c.j-p>>4,0>i.yb&&(i.yb=0),0>i.zb&&(i.zb=0)),i.Va=c.o+15+p>>4,i.Hb=c.va+15+p>>4,i.Hb>i.za&&(i.Hb=i.za),i.Va>i.Ub&&(i.Va=i.Ub),0<i.L){var _=i.ed;for(p=0;4>p;++p){var x;if(i.Qa.Cb){var k=i.Qa.Lb[p];i.Qa.Fb||(k+=_.Tb)}else k=_.Tb;for(x=0;1>=x;++x){var I=i.gd[p][x],C=k;if(_.Pc&&(C+=_.vd[0],x&&(C+=_.od[0])),0<(C=0>C?0:63<C?63:C)){var F=C;0<_.wb&&(F=4<_.wb?F>>2:F>>1)>9-_.wb&&(F=9-_.wb),1>F&&(F=1),I.dd=F,I.tc=2*C+F,I.ld=40<=C?2:15<=C?1:0}else I.tc=0;I.La=x}}}p=0}else vn(i,6,"Frame setup failed"),p=i.a;if(p=p==0){if(p){i.$c=0,0<i.Aa||(i.Ic=vp);e:{p=i.Ic,_=4*(F=i.za);var O=32*F,Q=F+1,ue=0<i.L?F*(0<i.Aa?2:1):0,ce=(i.Aa==2?2:1)*F;if((I=_+832+(x=3*(16*p+al[i.L])/2*O)+(k=i.Fa!=null&&0<i.Fa.length?i.Kc.c*i.Kc.i:0))!=I)p=0;else{if(I>i.Vb){if(i.Vb=0,i.Ec=a(I),i.Fc=0,i.Ec==null){p=vn(i,1,"no memory during frame initialization.");break e}i.Vb=I}I=i.Ec,C=i.Fc,i.Ac=I,i.Bc=C,C+=_,i.Gd=s(O,ei),i.Hd=0,i.rb=s(Q+1,da),i.sb=1,i.wa=ue?s(ue,Ga):null,i.Y=0,i.D.Nb=0,i.D.wa=i.wa,i.D.Y=i.Y,0<i.Aa&&(i.D.Y+=F),e(!0),i.oc=I,i.pc=C,C+=832,i.ya=s(ce,Ya),i.aa=0,i.D.ya=i.ya,i.D.aa=i.aa,i.Aa==2&&(i.D.aa+=F),i.R=16*F,i.B=8*F,F=(O=al[i.L])*i.R,O=O/2*i.B,i.sa=I,i.ta=C+F,i.qa=i.sa,i.ra=i.ta+16*p*i.R+O,i.Ha=i.qa,i.Ia=i.ra+8*p*i.B+O,i.$c=0,C+=x,i.mb=k?I:null,i.nb=k?C:null,e(C+k<=i.Fc+i.Vb),Co(i),o(i.Ac,i.Bc,0,_),p=1}}if(p){if(c.ka=0,c.y=i.sa,c.O=i.ta,c.f=i.qa,c.N=i.ra,c.ea=i.Ha,c.Vd=i.Ia,c.fa=i.R,c.Rc=i.B,c.F=null,c.J=0,!Js){for(p=-255;255>=p;++p)On[255+p]=0>p?-p:p;for(p=-1020;1020>=p;++p)Ea[1020+p]=-128>p?-128:127<p?127:p;for(p=-112;112>=p;++p)ws[112+p]=-16>p?-16:15<p?15:p;for(p=-255;510>=p;++p)vi[255+p]=0>p?0:255<p?255:p;Js=1}hi=ai,Ma=es,ys=Pa,ur=ts,Vr=Xr,kn=Fo,mi=os,Ys=Eo,bs=Jl,Ro=is,jo=Yl,ro=oi,Bo=ss,gi=qs,Vo=Us,ao=fa,_s=Ca,Ur=Gl,ea[0]=Ue,ea[1]=ns,ea[2]=Ie,ea[3]=Re,ea[4]=ze,ea[5]=lt,ea[6]=rt,ea[7]=ct,ea[8]=bt,ea[9]=it,oo[0]=$,oo[1]=as,oo[2]=Kr,oo[3]=L,oo[4]=K,oo[5]=Ne,oo[6]=Se,Ta[0]=mt,Ta[1]=rs,Ta[2]=xt,Ta[3]=jt,Ta[4]=Kt,Ta[5]=Xt,Ta[6]=Zt,p=1}else p=0}p&&(p=function(oe,Me){for(oe.M=0;oe.M<oe.Va;++oe.M){var be,ee=oe.Jc[oe.M&oe.Xb],re=oe.m,Fe=oe;for(be=0;be<Fe.za;++be){var Te=re,De=Fe,tt=De.Ac,He=De.Bc+4*be,yt=De.zc,Xe=De.ya[De.aa+be];if(De.Qa.Bb?Xe.$b=me(Te,De.Pa.jb[0])?2+me(Te,De.Pa.jb[2]):me(Te,De.Pa.jb[1]):Xe.$b=0,De.kc&&(Xe.Ad=me(Te,De.Bd)),Xe.Za=!me(Te,145)+0,Xe.Za){var Qt=Xe.Ob,nn=0;for(De=0;4>De;++De){var Yt,Bt=yt[0+De];for(Yt=0;4>Yt;++Yt){Bt=np[tt[He+Yt]][Bt];for(var ln=mc[me(Te,Bt[0])];0<ln;)ln=mc[2*ln+me(Te,Bt[ln])];Bt=-ln,tt[He+Yt]=Bt}r(Qt,nn,tt,He,4),nn+=4,yt[0+De]=Bt}}else Bt=me(Te,156)?me(Te,128)?1:3:me(Te,163)?2:0,Xe.Ob[0]=Bt,o(tt,He,Bt,4),o(yt,0,Bt,4);Xe.Dd=me(Te,142)?me(Te,114)?me(Te,183)?1:3:2:0}if(Fe.m.Ka)return vn(oe,7,"Premature end-of-partition0 encountered.");for(;oe.ja<oe.za;++oe.ja){if(Fe=ee,Te=(re=oe).rb[re.sb-1],tt=re.rb[re.sb+re.ja],be=re.ya[re.aa+re.ja],He=re.kc?be.Ad:0)Te.la=tt.la=0,be.Za||(Te.Na=tt.Na=0),be.Hc=0,be.Gc=0,be.ia=0;else{var on,Et;if(Te=tt,tt=Fe,He=re.Pa.Xc,yt=re.ya[re.aa+re.ja],Xe=re.pb[yt.$b],De=yt.ad,Qt=0,nn=re.rb[re.sb-1],Bt=Yt=0,o(De,Qt,0,384),yt.Za)var Mn=0,yr=He[3];else{ln=a(16);var En=Te.Na+nn.Na;if(En=Ss(tt,He[1],En,Xe.Eb,0,ln,0),Te.Na=nn.Na=(0<En)+0,1<En)hi(ln,0,De,Qt);else{var br=ln[0]+3>>3;for(ln=0;256>ln;ln+=16)De[Qt+ln]=br}Mn=1,yr=He[0]}var rn=15&Te.la,Pr=15&nn.la;for(ln=0;4>ln;++ln){var Cr=1&Pr;for(br=Et=0;4>br;++br)rn=rn>>1|(Cr=(En=Ss(tt,yr,En=Cr+(1&rn),Xe.Sc,Mn,De,Qt))>Mn)<<7,Et=Et<<2|(3<En?3:1<En?2:De[Qt+0]!=0),Qt+=16;rn>>=4,Pr=Pr>>1|Cr<<7,Yt=(Yt<<8|Et)>>>0}for(yr=rn,Mn=Pr>>4,on=0;4>on;on+=2){for(Et=0,rn=Te.la>>4+on,Pr=nn.la>>4+on,ln=0;2>ln;++ln){for(Cr=1&Pr,br=0;2>br;++br)En=Cr+(1&rn),rn=rn>>1|(Cr=0<(En=Ss(tt,He[2],En,Xe.Qc,0,De,Qt)))<<3,Et=Et<<2|(3<En?3:1<En?2:De[Qt+0]!=0),Qt+=16;rn>>=2,Pr=Pr>>1|Cr<<5}Bt|=Et<<4*on,yr|=rn<<4<<on,Mn|=(240&Pr)<<on}Te.la=yr,nn.la=Mn,yt.Hc=Yt,yt.Gc=Bt,yt.ia=43690&Bt?0:Xe.ia,He=!(Yt|Bt)}if(0<re.L&&(re.wa[re.Y+re.ja]=re.gd[be.$b][be.Za],re.wa[re.Y+re.ja].La|=!He),Fe.Ka)return vn(oe,7,"Premature end-of-file encountered.")}if(Co(oe),re=Me,Fe=1,be=(ee=oe).D,Te=0<ee.L&&ee.M>=ee.zb&&ee.M<=ee.Va,ee.Aa==0)e:{if(be.M=ee.M,be.uc=Te,ps(ee,be),Fe=1,be=(Et=ee.D).Nb,Te=(Bt=al[ee.L])*ee.R,tt=Bt/2*ee.B,ln=16*be*ee.R,br=8*be*ee.B,He=ee.sa,yt=ee.ta-Te+ln,Xe=ee.qa,De=ee.ra-tt+br,Qt=ee.Ha,nn=ee.Ia-tt+br,Pr=(rn=Et.M)==0,Yt=rn>=ee.Va-1,ee.Aa==2&&ps(ee,Et),Et.uc)for(Cr=(En=ee).D.M,e(En.D.uc),Et=En.yb;Et<En.Hb;++Et){Mn=Et,yr=Cr;var Vn=(Jn=(wn=En).D).Nb;on=wn.R;var Jn=Jn.wa[Jn.Y+Mn],cr=wn.sa,Wr=wn.ta+16*Vn*on+16*Mn,ha=Jn.dd,Un=Jn.tc;if(Un!=0)if(e(3<=Un),wn.L==1)0<Mn&&ao(cr,Wr,on,Un+4),Jn.La&&Ur(cr,Wr,on,Un),0<yr&&Vo(cr,Wr,on,Un+4),Jn.La&&_s(cr,Wr,on,Un);else{var Oa=wn.B,Uo=wn.qa,yi=wn.ra+8*Vn*Oa+8*Mn,so=wn.Ha,wn=wn.Ia+8*Vn*Oa+8*Mn;Vn=Jn.ld,0<Mn&&(Ys(cr,Wr,on,Un+4,ha,Vn),Ro(Uo,yi,so,wn,Oa,Un+4,ha,Vn)),Jn.La&&(ro(cr,Wr,on,Un,ha,Vn),gi(Uo,yi,so,wn,Oa,Un,ha,Vn)),0<yr&&(mi(cr,Wr,on,Un+4,ha,Vn),bs(Uo,yi,so,wn,Oa,Un+4,ha,Vn)),Jn.La&&(jo(cr,Wr,on,Un,ha,Vn),Bo(Uo,yi,so,wn,Oa,Un,ha,Vn))}}if(ee.ia&&alert("todo:DitherRow"),re.put!=null){if(Et=16*rn,rn=16*(rn+1),Pr?(re.y=ee.sa,re.O=ee.ta+ln,re.f=ee.qa,re.N=ee.ra+br,re.ea=ee.Ha,re.W=ee.Ia+br):(Et-=Bt,re.y=He,re.O=yt,re.f=Xe,re.N=De,re.ea=Qt,re.W=nn),Yt||(rn-=Bt),rn>re.o&&(rn=re.o),re.F=null,re.J=null,ee.Fa!=null&&0<ee.Fa.length&&Et<rn&&(re.J=ds(ee,re,Et,rn-Et),re.F=ee.mb,re.F==null&&re.F.length==0)){Fe=vn(ee,3,"Could not decode alpha data.");break e}Et<re.j&&(Bt=re.j-Et,Et=re.j,e(!(1&Bt)),re.O+=ee.R*Bt,re.N+=ee.B*(Bt>>1),re.W+=ee.B*(Bt>>1),re.F!=null&&(re.J+=re.width*Bt)),Et<rn&&(re.O+=re.v,re.N+=re.v>>1,re.W+=re.v>>1,re.F!=null&&(re.J+=re.v),re.ka=Et-re.j,re.U=re.va-re.v,re.T=rn-Et,Fe=re.put(re))}be+1!=ee.Ic||Yt||(r(ee.sa,ee.ta-Te,He,yt+16*ee.R,Te),r(ee.qa,ee.ra-tt,Xe,De+8*ee.B,tt),r(ee.Ha,ee.Ia-tt,Qt,nn+8*ee.B,tt))}if(!Fe)return vn(oe,6,"Output aborted.")}return 1}(i,c)),c.bc!=null&&c.bc(c),p&=1}return p?(i.cb=0,p):0}function Ar(i,c,p,_,x){x=i[c+p+32*_]+(x>>3),i[c+p+32*_]=-256&x?0>x?0:255:x}function Xa(i,c,p,_,x,k){Ar(i,c,0,p,_+x),Ar(i,c,1,p,_+k),Ar(i,c,2,p,_-k),Ar(i,c,3,p,_-x)}function Zn(i){return(20091*i>>16)+i}function Ka(i,c,p,_){var x,k=0,I=a(16);for(x=0;4>x;++x){var C=i[c+0]+i[c+8],F=i[c+0]-i[c+8],O=(35468*i[c+4]>>16)-Zn(i[c+12]),Q=Zn(i[c+4])+(35468*i[c+12]>>16);I[k+0]=C+Q,I[k+1]=F+O,I[k+2]=F-O,I[k+3]=C-Q,k+=4,c++}for(x=k=0;4>x;++x)C=(i=I[k+0]+4)+I[k+8],F=i-I[k+8],O=(35468*I[k+4]>>16)-Zn(I[k+12]),Ar(p,_,0,0,C+(Q=Zn(I[k+4])+(35468*I[k+12]>>16))),Ar(p,_,1,0,F+O),Ar(p,_,2,0,F-O),Ar(p,_,3,0,C-Q),k++,_+=32}function Fo(i,c,p,_){var x=i[c+0]+4,k=35468*i[c+4]>>16,I=Zn(i[c+4]),C=35468*i[c+1]>>16;Xa(p,_,0,x+I,i=Zn(i[c+1]),C),Xa(p,_,1,x+k,i,C),Xa(p,_,2,x-k,i,C),Xa(p,_,3,x-I,i,C)}function es(i,c,p,_,x){Ka(i,c,p,_),x&&Ka(i,c+16,p,_+4)}function Pa(i,c,p,_){Ma(i,c+0,p,_,1),Ma(i,c+32,p,_+128,1)}function ts(i,c,p,_){var x;for(i=i[c+0]+4,x=0;4>x;++x)for(c=0;4>c;++c)Ar(p,_,c,x,i)}function Xr(i,c,p,_){i[c+0]&&ur(i,c+0,p,_),i[c+16]&&ur(i,c+16,p,_+4),i[c+32]&&ur(i,c+32,p,_+128),i[c+48]&&ur(i,c+48,p,_+128+4)}function ai(i,c,p,_){var x,k=a(16);for(x=0;4>x;++x){var I=i[c+0+x]+i[c+12+x],C=i[c+4+x]+i[c+8+x],F=i[c+4+x]-i[c+8+x],O=i[c+0+x]-i[c+12+x];k[0+x]=I+C,k[8+x]=I-C,k[4+x]=O+F,k[12+x]=O-F}for(x=0;4>x;++x)I=(i=k[0+4*x]+3)+k[3+4*x],C=k[1+4*x]+k[2+4*x],F=k[1+4*x]-k[2+4*x],O=i-k[3+4*x],p[_+0]=I+C>>3,p[_+16]=O+F>>3,p[_+32]=I-C>>3,p[_+48]=O-F>>3,_+=64}function Do(i,c,p){var _,x=c-32,k=Ir,I=255-i[x-1];for(_=0;_<p;++_){var C,F=k,O=I+i[c-1];for(C=0;C<p;++C)i[c+C]=F[O+i[x+C]];c+=32}}function ns(i,c){Do(i,c,4)}function rs(i,c){Do(i,c,8)}function as(i,c){Do(i,c,16)}function Kr(i,c){var p;for(p=0;16>p;++p)r(i,c+32*p,i,c-32,16)}function L(i,c){var p;for(p=16;0<p;--p)o(i,c,i[c-1],16),c+=32}function U(i,c,p){var _;for(_=0;16>_;++_)o(c,p+32*_,i,16)}function $(i,c){var p,_=16;for(p=0;16>p;++p)_+=i[c-1+32*p]+i[c+p-32];U(_>>5,i,c)}function K(i,c){var p,_=8;for(p=0;16>p;++p)_+=i[c-1+32*p];U(_>>4,i,c)}function Ne(i,c){var p,_=8;for(p=0;16>p;++p)_+=i[c+p-32];U(_>>4,i,c)}function Se(i,c){U(128,i,c)}function le(i,c,p){return i+2*c+p+2>>2}function Ie(i,c){var p,_=c-32;for(_=new Uint8Array([le(i[_-1],i[_+0],i[_+1]),le(i[_+0],i[_+1],i[_+2]),le(i[_+1],i[_+2],i[_+3]),le(i[_+2],i[_+3],i[_+4])]),p=0;4>p;++p)r(i,c+32*p,_,0,_.length)}function Re(i,c){var p=i[c-1],_=i[c-1+32],x=i[c-1+64],k=i[c-1+96];Ve(i,c+0,16843009*le(i[c-1-32],p,_)),Ve(i,c+32,16843009*le(p,_,x)),Ve(i,c+64,16843009*le(_,x,k)),Ve(i,c+96,16843009*le(x,k,k))}function Ue(i,c){var p,_=4;for(p=0;4>p;++p)_+=i[c+p-32]+i[c-1+32*p];for(_>>=3,p=0;4>p;++p)o(i,c+32*p,_,4)}function ze(i,c){var p=i[c-1+0],_=i[c-1+32],x=i[c-1+64],k=i[c-1-32],I=i[c+0-32],C=i[c+1-32],F=i[c+2-32],O=i[c+3-32];i[c+0+96]=le(_,x,i[c-1+96]),i[c+1+96]=i[c+0+64]=le(p,_,x),i[c+2+96]=i[c+1+64]=i[c+0+32]=le(k,p,_),i[c+3+96]=i[c+2+64]=i[c+1+32]=i[c+0+0]=le(I,k,p),i[c+3+64]=i[c+2+32]=i[c+1+0]=le(C,I,k),i[c+3+32]=i[c+2+0]=le(F,C,I),i[c+3+0]=le(O,F,C)}function rt(i,c){var p=i[c+1-32],_=i[c+2-32],x=i[c+3-32],k=i[c+4-32],I=i[c+5-32],C=i[c+6-32],F=i[c+7-32];i[c+0+0]=le(i[c+0-32],p,_),i[c+1+0]=i[c+0+32]=le(p,_,x),i[c+2+0]=i[c+1+32]=i[c+0+64]=le(_,x,k),i[c+3+0]=i[c+2+32]=i[c+1+64]=i[c+0+96]=le(x,k,I),i[c+3+32]=i[c+2+64]=i[c+1+96]=le(k,I,C),i[c+3+64]=i[c+2+96]=le(I,C,F),i[c+3+96]=le(C,F,F)}function lt(i,c){var p=i[c-1+0],_=i[c-1+32],x=i[c-1+64],k=i[c-1-32],I=i[c+0-32],C=i[c+1-32],F=i[c+2-32],O=i[c+3-32];i[c+0+0]=i[c+1+64]=k+I+1>>1,i[c+1+0]=i[c+2+64]=I+C+1>>1,i[c+2+0]=i[c+3+64]=C+F+1>>1,i[c+3+0]=F+O+1>>1,i[c+0+96]=le(x,_,p),i[c+0+64]=le(_,p,k),i[c+0+32]=i[c+1+96]=le(p,k,I),i[c+1+32]=i[c+2+96]=le(k,I,C),i[c+2+32]=i[c+3+96]=le(I,C,F),i[c+3+32]=le(C,F,O)}function ct(i,c){var p=i[c+0-32],_=i[c+1-32],x=i[c+2-32],k=i[c+3-32],I=i[c+4-32],C=i[c+5-32],F=i[c+6-32],O=i[c+7-32];i[c+0+0]=p+_+1>>1,i[c+1+0]=i[c+0+64]=_+x+1>>1,i[c+2+0]=i[c+1+64]=x+k+1>>1,i[c+3+0]=i[c+2+64]=k+I+1>>1,i[c+0+32]=le(p,_,x),i[c+1+32]=i[c+0+96]=le(_,x,k),i[c+2+32]=i[c+1+96]=le(x,k,I),i[c+3+32]=i[c+2+96]=le(k,I,C),i[c+3+64]=le(I,C,F),i[c+3+96]=le(C,F,O)}function it(i,c){var p=i[c-1+0],_=i[c-1+32],x=i[c-1+64],k=i[c-1+96];i[c+0+0]=p+_+1>>1,i[c+2+0]=i[c+0+32]=_+x+1>>1,i[c+2+32]=i[c+0+64]=x+k+1>>1,i[c+1+0]=le(p,_,x),i[c+3+0]=i[c+1+32]=le(_,x,k),i[c+3+32]=i[c+1+64]=le(x,k,k),i[c+3+64]=i[c+2+64]=i[c+0+96]=i[c+1+96]=i[c+2+96]=i[c+3+96]=k}function bt(i,c){var p=i[c-1+0],_=i[c-1+32],x=i[c-1+64],k=i[c-1+96],I=i[c-1-32],C=i[c+0-32],F=i[c+1-32],O=i[c+2-32];i[c+0+0]=i[c+2+32]=p+I+1>>1,i[c+0+32]=i[c+2+64]=_+p+1>>1,i[c+0+64]=i[c+2+96]=x+_+1>>1,i[c+0+96]=k+x+1>>1,i[c+3+0]=le(C,F,O),i[c+2+0]=le(I,C,F),i[c+1+0]=i[c+3+32]=le(p,I,C),i[c+1+32]=i[c+3+64]=le(_,p,I),i[c+1+64]=i[c+3+96]=le(x,_,p),i[c+1+96]=le(k,x,_)}function xt(i,c){var p;for(p=0;8>p;++p)r(i,c+32*p,i,c-32,8)}function jt(i,c){var p;for(p=0;8>p;++p)o(i,c,i[c-1],8),c+=32}function Gt(i,c,p){var _;for(_=0;8>_;++_)o(c,p+32*_,i,8)}function mt(i,c){var p,_=8;for(p=0;8>p;++p)_+=i[c+p-32]+i[c-1+32*p];Gt(_>>4,i,c)}function Xt(i,c){var p,_=4;for(p=0;8>p;++p)_+=i[c+p-32];Gt(_>>3,i,c)}function Kt(i,c){var p,_=4;for(p=0;8>p;++p)_+=i[c-1+32*p];Gt(_>>3,i,c)}function Zt(i,c){Gt(128,i,c)}function Lr(i,c,p){var _=i[c-p],x=i[c+0],k=3*(x-_)+Zl[1020+i[c-2*p]-i[c+p]],I=Xs[112+(k+4>>3)];i[c-p]=Ir[255+_+Xs[112+(k+3>>3)]],i[c+0]=Ir[255+x-I]}function Za(i,c,p,_){var x=i[c+0],k=i[c+p];return zr[255+i[c-2*p]-i[c-p]]>_||zr[255+k-x]>_}function Mo(i,c,p,_){return 4*zr[255+i[c-p]-i[c+0]]+zr[255+i[c-2*p]-i[c+p]]<=_}function Vs(i,c,p,_,x){var k=i[c-3*p],I=i[c-2*p],C=i[c-p],F=i[c+0],O=i[c+p],Q=i[c+2*p],ue=i[c+3*p];return 4*zr[255+C-F]+zr[255+I-O]>_?0:zr[255+i[c-4*p]-k]<=x&&zr[255+k-I]<=x&&zr[255+I-C]<=x&&zr[255+ue-Q]<=x&&zr[255+Q-O]<=x&&zr[255+O-F]<=x}function Us(i,c,p,_){var x=2*_+1;for(_=0;16>_;++_)Mo(i,c+_,p,x)&&Lr(i,c+_,p)}function fa(i,c,p,_){var x=2*_+1;for(_=0;16>_;++_)Mo(i,c+_*p,1,x)&&Lr(i,c+_*p,1)}function Ca(i,c,p,_){var x;for(x=3;0<x;--x)Us(i,c+=4*p,p,_)}function Gl(i,c,p,_){var x;for(x=3;0<x;--x)fa(i,c+=4,p,_)}function Qa(i,c,p,_,x,k,I,C){for(k=2*k+1;0<x--;){if(Vs(i,c,p,k,I))if(Za(i,c,p,C))Lr(i,c,p);else{var F=i,O=c,Q=p,ue=F[O-2*Q],ce=F[O-Q],oe=F[O+0],Me=F[O+Q],be=F[O+2*Q],ee=27*(Fe=Zl[1020+3*(oe-ce)+Zl[1020+ue-Me]])+63>>7,re=18*Fe+63>>7,Fe=9*Fe+63>>7;F[O-3*Q]=Ir[255+F[O-3*Q]+Fe],F[O-2*Q]=Ir[255+ue+re],F[O-Q]=Ir[255+ce+ee],F[O+0]=Ir[255+oe-ee],F[O+Q]=Ir[255+Me-re],F[O+2*Q]=Ir[255+be-Fe]}c+=_}}function Zr(i,c,p,_,x,k,I,C){for(k=2*k+1;0<x--;){if(Vs(i,c,p,k,I))if(Za(i,c,p,C))Lr(i,c,p);else{var F=i,O=c,Q=p,ue=F[O-Q],ce=F[O+0],oe=F[O+Q],Me=Xs[112+((be=3*(ce-ue))+4>>3)],be=Xs[112+(be+3>>3)],ee=Me+1>>1;F[O-2*Q]=Ir[255+F[O-2*Q]+ee],F[O-Q]=Ir[255+ue+be],F[O+0]=Ir[255+ce-Me],F[O+Q]=Ir[255+oe-ee]}c+=_}}function os(i,c,p,_,x,k){Qa(i,c,p,1,16,_,x,k)}function Eo(i,c,p,_,x,k){Qa(i,c,1,p,16,_,x,k)}function Yl(i,c,p,_,x,k){var I;for(I=3;0<I;--I)Zr(i,c+=4*p,p,1,16,_,x,k)}function oi(i,c,p,_,x,k){var I;for(I=3;0<I;--I)Zr(i,c+=4,1,p,16,_,x,k)}function Jl(i,c,p,_,x,k,I,C){Qa(i,c,x,1,8,k,I,C),Qa(p,_,x,1,8,k,I,C)}function is(i,c,p,_,x,k,I,C){Qa(i,c,1,x,8,k,I,C),Qa(p,_,1,x,8,k,I,C)}function ss(i,c,p,_,x,k,I,C){Zr(i,c+4*x,x,1,8,k,I,C),Zr(p,_+4*x,x,1,8,k,I,C)}function qs(i,c,p,_,x,k,I,C){Zr(i,c+4,1,x,8,k,I,C),Zr(p,_+4,1,x,8,k,I,C)}function ii(){this.ba=new pr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new gn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ls(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function us(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zs(){this.ua=0,this.Wa=new z,this.vb=new z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new M}function Xl(){this.xb=this.a=0,this.l=new Ja,this.ca=new pr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zs,this.ab=0,this.gc=s(4,us),this.Oc=0}function si(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ja,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function To(i,c,p,_,x,k,I){for(i=i==null?0:i[c+0],c=0;c<I;++c)x[k+c]=i+p[_+c]&255,i=x[k+c]}function cs(i,c,p,_,x,k,I){var C;if(i==null)To(null,null,p,_,x,k,I);else for(C=0;C<I;++C)x[k+C]=i[c+C]+p[_+C]&255}function eo(i,c,p,_,x,k,I){if(i==null)To(null,null,p,_,x,k,I);else{var C,F=i[c+0],O=F,Q=F;for(C=0;C<I;++C)O=Q+(F=i[c+C])-O,Q=p[_+C]+(-256&O?0>O?0:255:O)&255,O=F,x[k+C]=Q}}function ds(i,c,p,_){var x=c.width,k=c.o;if(e(i!=null&&c!=null),0>p||0>=_||p+_>k)return null;if(!i.Cc){if(i.ga==null){var I;if(i.ga=new si,(I=i.ga==null)||(I=c.width*c.o,e(i.Gb.length==0),i.Gb=a(I),i.Uc=0,i.Gb==null?I=0:(i.mb=i.Gb,i.nb=i.Uc,i.rc=null,I=1),I=!I),!I){I=i.ga;var C=i.Fa,F=i.P,O=i.qc,Q=i.mb,ue=i.nb,ce=F+1,oe=O-1,Me=I.l;if(e(C!=null&&Q!=null&&c!=null),io[0]=null,io[1]=To,io[2]=cs,io[3]=eo,I.ca=Q,I.tb=ue,I.c=c.width,I.i=c.height,e(0<I.c&&0<I.i),1>=O)c=0;else if(I.$a=C[F+0]>>0&3,I.Z=C[F+0]>>2&3,I.Lc=C[F+0]>>4&3,F=C[F+0]>>6&3,0>I.$a||1<I.$a||4<=I.Z||1<I.Lc||F)c=0;else if(Me.put=Mr,Me.ac=Tn,Me.bc=Er,Me.ma=I,Me.width=c.width,Me.height=c.height,Me.Da=c.Da,Me.v=c.v,Me.va=c.va,Me.j=c.j,Me.o=c.o,I.$a)e:{e(I.$a==1),c=mr();t:for(;;){if(c==null){c=0;break e}if(e(I!=null),I.mc=c,c.c=I.c,c.i=I.i,c.l=I.l,c.l.ma=I,c.l.width=I.c,c.l.height=I.i,c.a=0,de(c.m,C,ce,oe),!jr(I.c,I.i,1,c,null)||(c.ab==1&&c.gc[0].hc==3&&Or(c.s)?(I.ic=1,C=c.c*c.i,c.Ta=null,c.Ua=0,c.V=a(C),c.Ba=0,c.V==null?(c.a=1,c=0):c=1):(I.ic=0,c=ca(c,I.c)),!c))break t;c=1;break e}I.mc=null,c=0}else c=oe>=I.c*I.i;I=!c}if(I)return null;i.ga.Lc!=1?i.Ga=0:_=k-p}e(i.ga!=null),e(p+_<=k);e:{if(c=(C=i.ga).c,k=C.l.o,C.$a==0){if(ce=i.rc,oe=i.Vc,Me=i.Fa,F=i.P+1+p*c,O=i.mb,Q=i.nb+p*c,e(F<=i.P+i.qc),C.Z!=0)for(e(io[C.Z]!=null),I=0;I<_;++I)io[C.Z](ce,oe,Me,F,O,Q,c),ce=O,oe=Q,Q+=c,F+=c;else for(I=0;I<_;++I)r(O,Q,Me,F,c),ce=O,oe=Q,Q+=c,F+=c;i.rc=ce,i.Vc=oe}else{if(e(C.mc!=null),c=p+_,e((I=C.mc)!=null),e(c<=I.i),I.C>=c)c=1;else if(C.ic||se(),C.ic){C=I.V,ce=I.Ba,oe=I.c;var be=I.i,ee=(Me=1,F=I.$/oe,O=I.$%oe,Q=I.m,ue=I.s,I.$),re=oe*be,Fe=oe*c,Te=ue.wc,De=ee<Fe?bn(ue,O,F):null;e(ee<=re),e(c<=be),e(Or(ue));t:for(;;){for(;!Q.h&&ee<Fe;){if(O&Te||(De=bn(ue,O,F)),e(De!=null),ne(Q),256>(be=Kn(De.G[0],De.H[0],Q)))C[ce+ee]=be,++ee,++O>=oe&&(O=0,++F<=c&&!(F%16)&&xr(I,F));else{if(!(280>be)){Me=0;break t}be=Sr(be-256,Q);var tt,He=Kn(De.G[4],De.H[4],Q);if(ne(Q),!(ee>=(He=Tr(oe,He=Sr(He,Q)))&&re-ee>=be)){Me=0;break t}for(tt=0;tt<be;++tt)C[ce+ee+tt]=C[ce+ee+tt-He];for(ee+=be,O+=be;O>=oe;)O-=oe,++F<=c&&!(F%16)&&xr(I,F);ee<Fe&&O&Te&&(De=bn(ue,O,F))}e(Q.h==q(Q))}xr(I,F>c?c:F);break t}!Me||Q.h&&ee<re?(Me=0,I.a=Q.h?5:3):I.$=ee,c=Me}else c=Nr(I,I.V,I.Ba,I.c,I.i,c,ka);if(!c){_=0;break e}}p+_>=k&&(i.Cc=1),_=1}if(!_)return null;if(i.Cc&&((_=i.ga)!=null&&(_.mc=null),i.ga=null,0<i.Ga))return alert("todo:WebPDequantizeLevels"),null}return i.nb+p*x}function d(i,c,p,_,x,k){for(;0<x--;){var I,C=i,F=c+(p?1:0),O=i,Q=c+(p?0:3);for(I=0;I<_;++I){var ue=O[Q+4*I];ue!=255&&(ue*=32897,C[F+4*I+0]=C[F+4*I+0]*ue>>23,C[F+4*I+1]=C[F+4*I+1]*ue>>23,C[F+4*I+2]=C[F+4*I+2]*ue>>23)}c+=k}}function N(i,c,p,_,x){for(;0<_--;){var k;for(k=0;k<p;++k){var I=i[c+2*k+0],C=15&(O=i[c+2*k+1]),F=4369*C,O=(240&O|O>>4)*F>>16;i[c+2*k+0]=(240&I|I>>4)*F>>16&240|(15&I|I<<4)*F>>16>>4&15,i[c+2*k+1]=240&O|C}c+=x}}function V(i,c,p,_,x,k,I,C){var F,O,Q=255;for(O=0;O<x;++O){for(F=0;F<_;++F){var ue=i[c+F];k[I+4*F]=ue,Q&=ue}c+=p,I+=C}return Q!=255}function J(i,c,p,_,x){var k;for(k=0;k<x;++k)p[_+k]=i[c+k]>>8}function se(){qr=d,fn=N,pn=V,In=J}function Ae(i,c,p){R[i]=function(_,x,k,I,C,F,O,Q,ue,ce,oe,Me,be,ee,re,Fe,Te){var De,tt=Te-1>>1,He=C[F+0]|O[Q+0]<<16,yt=ue[ce+0]|oe[Me+0]<<16;e(_!=null);var Xe=3*He+yt+131074>>2;for(c(_[x+0],255&Xe,Xe>>16,be,ee),k!=null&&(Xe=3*yt+He+131074>>2,c(k[I+0],255&Xe,Xe>>16,re,Fe)),De=1;De<=tt;++De){var Qt=C[F+De]|O[Q+De]<<16,nn=ue[ce+De]|oe[Me+De]<<16,Yt=He+Qt+yt+nn+524296,Bt=Yt+2*(Qt+yt)>>3;Xe=Bt+He>>1,He=(Yt=Yt+2*(He+nn)>>3)+Qt>>1,c(_[x+2*De-1],255&Xe,Xe>>16,be,ee+(2*De-1)*p),c(_[x+2*De-0],255&He,He>>16,be,ee+(2*De-0)*p),k!=null&&(Xe=Yt+yt>>1,He=Bt+nn>>1,c(k[I+2*De-1],255&Xe,Xe>>16,re,Fe+(2*De-1)*p),c(k[I+2*De+0],255&He,He>>16,re,Fe+(2*De+0)*p)),He=Qt,yt=nn}1&Te||(Xe=3*He+yt+131074>>2,c(_[x+Te-1],255&Xe,Xe>>16,be,ee+(Te-1)*p),k!=null&&(Xe=3*yt+He+131074>>2,c(k[I+Te-1],255&Xe,Xe>>16,re,Fe+(Te-1)*p)))}}function Oe(){$r[Ks]=ip,$r[Zs]=vc,$r[fc]=sp,$r[Qs]=yc,$r[el]=bc,$r[Ql]=_c,$r[pc]=lp,$r[eu]=vc,$r[tu]=yc,$r[tl]=bc,$r[nu]=_c}function Qe(i){return i&~up?0>i?0:255:i>>wc}function pt(i,c){return Qe((19077*i>>8)+(26149*c>>8)-14234)}function Dt(i,c,p){return Qe((19077*i>>8)-(6419*c>>8)-(13320*p>>8)+8708)}function Pt(i,c){return Qe((19077*i>>8)+(33050*c>>8)-17685)}function qt(i,c,p,_,x){_[x+0]=pt(i,p),_[x+1]=Dt(i,c,p),_[x+2]=Pt(i,c)}function yn(i,c,p,_,x){_[x+0]=Pt(i,c),_[x+1]=Dt(i,c,p),_[x+2]=pt(i,p)}function _n(i,c,p,_,x){var k=Dt(i,c,p);c=k<<3&224|Pt(i,c)>>3,_[x+0]=248&pt(i,p)|k>>5,_[x+1]=c}function Dn(i,c,p,_,x){var k=240&Pt(i,c)|15;_[x+0]=240&pt(i,p)|Dt(i,c,p)>>4,_[x+1]=k}function Qn(i,c,p,_,x){_[x+0]=255,qt(i,c,p,_,x+1)}function Bn(i,c,p,_,x){yn(i,c,p,_,x),_[x+3]=255}function Qr(i,c,p,_,x){qt(i,c,p,_,x),_[x+3]=255}function kr(i,c){return 0>i?0:i>c?c:i}function pa(i,c,p){R[i]=function(_,x,k,I,C,F,O,Q,ue){for(var ce=Q+(-2&ue)*p;Q!=ce;)c(_[x+0],k[I+0],C[F+0],O,Q),c(_[x+1],k[I+0],C[F+0],O,Q+p),x+=2,++I,++F,Q+=2*p;1&ue&&c(_[x+0],k[I+0],C[F+0],O,Q)}}function $s(i,c,p){return p==0?i==0?c==0?6:5:c==0?4:0:p}function fs(i,c,p,_,x){switch(i>>>30){case 3:Ma(c,p,_,x,0);break;case 2:kn(c,p,_,x);break;case 1:ur(c,p,_,x)}}function ps(i,c){var p,_,x=c.M,k=c.Nb,I=i.oc,C=i.pc+40,F=i.oc,O=i.pc+584,Q=i.oc,ue=i.pc+600;for(p=0;16>p;++p)I[C+32*p-1]=129;for(p=0;8>p;++p)F[O+32*p-1]=129,Q[ue+32*p-1]=129;for(0<x?I[C-1-32]=F[O-1-32]=Q[ue-1-32]=129:(o(I,C-32-1,127,21),o(F,O-32-1,127,9),o(Q,ue-32-1,127,9)),_=0;_<i.za;++_){var ce=c.ya[c.aa+_];if(0<_){for(p=-1;16>p;++p)r(I,C+32*p-4,I,C+32*p+12,4);for(p=-1;8>p;++p)r(F,O+32*p-4,F,O+32*p+4,4),r(Q,ue+32*p-4,Q,ue+32*p+4,4)}var oe=i.Gd,Me=i.Hd+_,be=ce.ad,ee=ce.Hc;if(0<x&&(r(I,C-32,oe[Me].y,0,16),r(F,O-32,oe[Me].f,0,8),r(Q,ue-32,oe[Me].ea,0,8)),ce.Za){var re=I,Fe=C-32+16;for(0<x&&(_>=i.za-1?o(re,Fe,oe[Me].y[15],4):r(re,Fe,oe[Me+1].y,0,4)),p=0;4>p;p++)re[Fe+128+p]=re[Fe+256+p]=re[Fe+384+p]=re[Fe+0+p];for(p=0;16>p;++p,ee<<=2)re=I,Fe=C+xc[p],ea[ce.Ob[p]](re,Fe),fs(ee,be,16*+p,re,Fe)}else if(re=$s(_,x,ce.Ob[0]),oo[re](I,C),ee!=0)for(p=0;16>p;++p,ee<<=2)fs(ee,be,16*+p,I,C+xc[p]);for(p=ce.Gc,re=$s(_,x,ce.Dd),Ta[re](F,O),Ta[re](Q,ue),ee=be,re=F,Fe=O,255&(ce=p>>0)&&(170&ce?ys(ee,256,re,Fe):Vr(ee,256,re,Fe)),ce=Q,ee=ue,255&(p>>=8)&&(170&p?ys(be,320,ce,ee):Vr(be,320,ce,ee)),x<i.Ub-1&&(r(oe[Me].y,0,I,C+480,16),r(oe[Me].f,0,F,O+224,8),r(oe[Me].ea,0,Q,ue+224,8)),p=8*k*i.B,oe=i.sa,Me=i.ta+16*_+16*k*i.R,be=i.qa,ce=i.ra+8*_+p,ee=i.Ha,re=i.Ia+8*_+p,p=0;16>p;++p)r(oe,Me+p*i.R,I,C+32*p,16);for(p=0;8>p;++p)r(be,ce+p*i.B,F,O+32*p,8),r(ee,re+p*i.B,Q,ue+32*p,8)}}function li(i,c,p,_,x,k,I,C,F){var O=[0],Q=[0],ue=0,ce=F!=null?F.kd:0,oe=F??new ls;if(i==null||12>p)return 7;oe.data=i,oe.w=c,oe.ha=p,c=[c],p=[p],oe.gb=[oe.gb];e:{var Me=c,be=p,ee=oe.gb;if(e(i!=null),e(be!=null),e(ee!=null),ee[0]=0,12<=be[0]&&!t(i,Me[0],"RIFF")){if(t(i,Me[0]+8,"WEBP")){ee=3;break e}var re=qe(i,Me[0]+4);if(12>re||4294967286<re){ee=3;break e}if(ce&&re>be[0]-8){ee=7;break e}ee[0]=re,Me[0]+=12,be[0]-=12}ee=0}if(ee!=0)return ee;for(re=0<oe.gb[0],p=p[0];;){e:{var Fe=i;be=c,ee=p;var Te=O,De=Q,tt=Me=[0];if((Xe=ue=[ue])[0]=0,8>ee[0])ee=7;else{if(!t(Fe,be[0],"VP8X")){if(qe(Fe,be[0]+4)!=10){ee=3;break e}if(18>ee[0]){ee=7;break e}var He=qe(Fe,be[0]+8),yt=1+Je(Fe,be[0]+12);if(2147483648<=yt*(Fe=1+Je(Fe,be[0]+15))){ee=3;break e}tt!=null&&(tt[0]=He),Te!=null&&(Te[0]=yt),De!=null&&(De[0]=Fe),be[0]+=18,ee[0]-=18,Xe[0]=1}ee=0}}if(ue=ue[0],Me=Me[0],ee!=0)return ee;if(be=!!(2&Me),!re&&ue)return 3;if(k!=null&&(k[0]=!!(16&Me)),I!=null&&(I[0]=be),C!=null&&(C[0]=0),I=O[0],Me=Q[0],ue&&be&&F==null){ee=0;break}if(4>p){ee=7;break}if(re&&ue||!re&&!ue&&!t(i,c[0],"ALPH")){p=[p],oe.na=[oe.na],oe.P=[oe.P],oe.Sa=[oe.Sa];e:{He=i,ee=c,re=p;var Xe=oe.gb;Te=oe.na,De=oe.P,tt=oe.Sa,yt=22,e(He!=null),e(re!=null),Fe=ee[0];var Qt=re[0];for(e(Te!=null),e(tt!=null),Te[0]=null,De[0]=null,tt[0]=0;;){if(ee[0]=Fe,re[0]=Qt,8>Qt){ee=7;break e}var nn=qe(He,Fe+4);if(4294967286<nn){ee=3;break e}var Yt=8+nn+1&-2;if(yt+=Yt,0<Xe&&yt>Xe){ee=3;break e}if(!t(He,Fe,"VP8 ")||!t(He,Fe,"VP8L")){ee=0;break e}if(Qt[0]<Yt){ee=7;break e}t(He,Fe,"ALPH")||(Te[0]=He,De[0]=Fe+8,tt[0]=nn),Fe+=Yt,Qt-=Yt}}if(p=p[0],oe.na=oe.na[0],oe.P=oe.P[0],oe.Sa=oe.Sa[0],ee!=0)break}p=[p],oe.Ja=[oe.Ja],oe.xa=[oe.xa];e:if(Xe=i,ee=c,re=p,Te=oe.gb[0],De=oe.Ja,tt=oe.xa,He=ee[0],Fe=!t(Xe,He,"VP8 "),yt=!t(Xe,He,"VP8L"),e(Xe!=null),e(re!=null),e(De!=null),e(tt!=null),8>re[0])ee=7;else{if(Fe||yt){if(Xe=qe(Xe,He+4),12<=Te&&Xe>Te-12){ee=3;break e}if(ce&&Xe>re[0]-8){ee=7;break e}De[0]=Xe,ee[0]+=8,re[0]-=8,tt[0]=yt}else tt[0]=5<=re[0]&&Xe[He+0]==47&&!(Xe[He+4]>>5),De[0]=re[0];ee=0}if(p=p[0],oe.Ja=oe.Ja[0],oe.xa=oe.xa[0],c=c[0],ee!=0)break;if(4294967286<oe.Ja)return 3;if(C==null||be||(C[0]=oe.xa?2:1),I=[I],Me=[Me],oe.xa){if(5>p){ee=7;break}C=I,ce=Me,be=k,i==null||5>p?i=0:5<=p&&i[c+0]==47&&!(i[c+4]>>5)?(re=[0],Xe=[0],Te=[0],de(De=new P,i,c,p),vt(De,re,Xe,Te)?(C!=null&&(C[0]=re[0]),ce!=null&&(ce[0]=Xe[0]),be!=null&&(be[0]=Te[0]),i=1):i=0):i=0}else{if(10>p){ee=7;break}C=Me,i==null||10>p||!ti(i,c+3,p-3)?i=0:(ce=i[c+0]|i[c+1]<<8|i[c+2]<<16,be=16383&(i[c+7]<<8|i[c+6]),i=16383&(i[c+9]<<8|i[c+8]),1&ce||3<(ce>>1&7)||!(ce>>4&1)||ce>>5>=oe.Ja||!be||!i?i=0:(I&&(I[0]=be),C&&(C[0]=i),i=1))}if(!i||(I=I[0],Me=Me[0],ue&&(O[0]!=I||Q[0]!=Me)))return 3;F!=null&&(F[0]=oe,F.offset=c-F.w,e(4294967286>c-F.w),e(F.offset==F.ha-p));break}return ee==0||ee==7&&ue&&F==null?(k!=null&&(k[0]|=oe.na!=null&&0<oe.na.length),_!=null&&(_[0]=I),x!=null&&(x[0]=Me),0):ee}function hs(i,c,p){var _=c.width,x=c.height,k=0,I=0,C=_,F=x;if(c.Da=i!=null&&0<i.Da,c.Da&&(C=i.cd,F=i.bd,k=i.v,I=i.j,11>p||(k&=-2,I&=-2),0>k||0>I||0>=C||0>=F||k+C>_||I+F>x))return 0;if(c.v=k,c.j=I,c.va=k+C,c.o=I+F,c.U=C,c.T=F,c.da=i!=null&&0<i.da,c.da){if(!kt(C,F,p=[i.ib],k=[i.hb]))return 0;c.ib=p[0],c.hb=k[0]}return c.ob=i!=null&&i.ob,c.Kb=i==null||!i.Sd,c.da&&(c.ob=c.ib<3*_/4&&c.hb<3*x/4,c.Kb=0),1}function ms(i){if(i==null)return 2;if(11>i.S){var c=i.f.RGBA;c.fb+=(i.height-1)*c.A,c.A=-c.A}else c=i.f.kb,i=i.height,c.O+=(i-1)*c.fa,c.fa=-c.fa,c.N+=(i-1>>1)*c.Ab,c.Ab=-c.Ab,c.W+=(i-1>>1)*c.Db,c.Db=-c.Db,c.F!=null&&(c.J+=(i-1)*c.lb,c.lb=-c.lb);return 0}function ui(i,c,p,_){if(_==null||0>=i||0>=c)return 2;if(p!=null){if(p.Da){var x=p.cd,k=p.bd,I=-2&p.v,C=-2&p.j;if(0>I||0>C||0>=x||0>=k||I+x>i||C+k>c)return 2;i=x,c=k}if(p.da){if(!kt(i,c,x=[p.ib],k=[p.hb]))return 2;i=x[0],c=k[0]}}_.width=i,_.height=c;e:{var F=_.width,O=_.height;if(i=_.S,0>=F||0>=O||!(i>=Ks&&13>i))i=2;else{if(0>=_.Rd&&_.sd==null){I=k=x=c=0;var Q=(C=F*Nc[i])*O;if(11>i||(k=(O+1)/2*(c=(F+1)/2),i==12&&(I=(x=F)*O)),(O=a(Q+2*k+I))==null){i=1;break e}_.sd=O,11>i?((F=_.f.RGBA).eb=O,F.fb=0,F.A=C,F.size=Q):((F=_.f.kb).y=O,F.O=0,F.fa=C,F.Fd=Q,F.f=O,F.N=0+Q,F.Ab=c,F.Cd=k,F.ea=O,F.W=0+Q+k,F.Db=c,F.Ed=k,i==12&&(F.F=O,F.J=0+Q+2*k),F.Tc=I,F.lb=x)}if(c=1,x=_.S,k=_.width,I=_.height,x>=Ks&&13>x)if(11>x)i=_.f.RGBA,c&=(C=Math.abs(i.A))*(I-1)+k<=i.size,c&=C>=k*Nc[x],c&=i.eb!=null;else{i=_.f.kb,C=(k+1)/2,Q=(I+1)/2,F=Math.abs(i.fa),O=Math.abs(i.Ab);var ue=Math.abs(i.Db),ce=Math.abs(i.lb),oe=ce*(I-1)+k;c&=F*(I-1)+k<=i.Fd,c&=O*(Q-1)+C<=i.Cd,c=(c&=ue*(Q-1)+C<=i.Ed)&F>=k&O>=C&ue>=C,c&=i.y!=null,c&=i.f!=null,c&=i.ea!=null,x==12&&(c&=ce>=k,c&=oe<=i.Tc,c&=i.F!=null)}else c=0;i=c?0:2}}return i!=0||p!=null&&p.fd&&(i=ms(_)),i}var Yn=64,ci=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],di=24,fi=32,gs=8,gr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];$e("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(i){return i},R.Predictor2=function(i,c,p){return c[p+0]},R.Predictor3=function(i,c,p){return c[p+1]},R.Predictor4=function(i,c,p){return c[p-1]},R.Predictor5=function(i,c,p){return Ge(Ge(i,c[p+1]),c[p+0])},R.Predictor6=function(i,c,p){return Ge(i,c[p-1])},R.Predictor7=function(i,c,p){return Ge(i,c[p+0])},R.Predictor8=function(i,c,p){return Ge(c[p-1],c[p+0])},R.Predictor9=function(i,c,p){return Ge(c[p+0],c[p+1])},R.Predictor10=function(i,c,p){return Ge(Ge(i,c[p-1]),Ge(c[p+0],c[p+1]))},R.Predictor11=function(i,c,p){var _=c[p+0];return 0>=It(_>>24&255,i>>24&255,(c=c[p-1])>>24&255)+It(_>>16&255,i>>16&255,c>>16&255)+It(_>>8&255,i>>8&255,c>>8&255)+It(255&_,255&i,255&c)?_:i},R.Predictor12=function(i,c,p){var _=c[p+0];return(ut((i>>24&255)+(_>>24&255)-((c=c[p-1])>>24&255))<<24|ut((i>>16&255)+(_>>16&255)-(c>>16&255))<<16|ut((i>>8&255)+(_>>8&255)-(c>>8&255))<<8|ut((255&i)+(255&_)-(255&c)))>>>0},R.Predictor13=function(i,c,p){var _=c[p-1];return(Lt((i=Ge(i,c[p+0]))>>24&255,_>>24&255)<<24|Lt(i>>16&255,_>>16&255)<<16|Lt(i>>8&255,_>>8&255)<<8|Lt(i>>0&255,_>>0&255))>>>0};var Kl=R.PredictorAdd0;R.PredictorAdd1=Tt,$e("Predictor2","PredictorAdd2"),$e("Predictor3","PredictorAdd3"),$e("Predictor4","PredictorAdd4"),$e("Predictor5","PredictorAdd5"),$e("Predictor6","PredictorAdd6"),$e("Predictor7","PredictorAdd7"),$e("Predictor8","PredictorAdd8"),$e("Predictor9","PredictorAdd9"),$e("Predictor10","PredictorAdd10"),$e("Predictor11","PredictorAdd11"),$e("Predictor12","PredictorAdd12"),$e("Predictor13","PredictorAdd13");var vs=R.PredictorAdd2;Ot("ColorIndexInverseTransform","MapARGB","32b",function(i){return i>>8&255},function(i){return i}),Ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(i){return i},function(i){return i>>8&255});var Ws,Br=R.ColorIndexInverseTransform,pi=R.MapARGB,Hs=R.VP8LColorIndexInverseTransformAlpha,Gs=R.MapAlpha,to=R.VP8LPredictorsAdd=[];to.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var Oo,vr,lr,no,Fa,Da,hi,Ma,kn,ys,ur,Vr,mi,Ys,bs,Ro,jo,ro,Bo,gi,Vo,ao,_s,Ur,qr,fn,pn,In,On=a(511),Ea=a(2041),ws=a(225),vi=a(767),Js=0,Zl=Ea,Xs=ws,Ir=vi,zr=On,Ks=0,Zs=1,fc=2,Qs=3,el=4,Ql=5,pc=6,eu=7,tu=8,tl=9,nu=10,Hf=[2,3,7],Gf=[3,3,11],hc=[280,256,256,256,40],Yf=[0,1,1,1,0],Jf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xf=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Kf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zf=8,ru=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],au=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ss=null,Qf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ep=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],mc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],tp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],np=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],rp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ap=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],oo=[],ea=[],Ta=[],op=1,gc=2,io=[],$r=[];Ae("UpsampleRgbLinePair",qt,3),Ae("UpsampleBgrLinePair",yn,3),Ae("UpsampleRgbaLinePair",Qr,4),Ae("UpsampleBgraLinePair",Bn,4),Ae("UpsampleArgbLinePair",Qn,4),Ae("UpsampleRgba4444LinePair",Dn,2),Ae("UpsampleRgb565LinePair",_n,2);var ip=R.UpsampleRgbLinePair,sp=R.UpsampleBgrLinePair,vc=R.UpsampleRgbaLinePair,yc=R.UpsampleBgraLinePair,bc=R.UpsampleArgbLinePair,_c=R.UpsampleRgba4444LinePair,lp=R.UpsampleRgb565LinePair,nl=16,rl=1<<nl-1,xs=-227,ou=482,wc=6,up=(256<<wc)-1,Sc=0,cp=a(256),dp=a(256),fp=a(256),pp=a(256),hp=a(ou-xs),mp=a(ou-xs);pa("YuvToRgbRow",qt,3),pa("YuvToBgrRow",yn,3),pa("YuvToRgbaRow",Qr,4),pa("YuvToBgraRow",Bn,4),pa("YuvToArgbRow",Qn,4),pa("YuvToRgba4444Row",Dn,2),pa("YuvToRgb565Row",_n,2);var xc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],al=[0,2,8],gp=[8,7,6,4,4,2,2,2,1,1,1,1],vp=1;this.WebPDecodeRGBA=function(i,c,p,_,x){var k=Zs,I=new ii,C=new pr;I.ba=C,C.S=k,C.width=[C.width],C.height=[C.height];var F=C.width,O=C.height,Q=new Jr;if(Q==null||i==null)var ue=2;else e(Q!=null),ue=li(i,c,p,Q.width,Q.height,Q.Pd,Q.Qd,Q.format,null);if(ue!=0?F=0:(F!=null&&(F[0]=Q.width[0]),O!=null&&(O[0]=Q.height[0]),F=1),F){C.width=C.width[0],C.height=C.height[0],_!=null&&(_[0]=C.width),x!=null&&(x[0]=C.height);e:{if(_=new Ja,(x=new ls).data=i,x.w=c,x.ha=p,x.kd=1,c=[0],e(x!=null),((i=li(x.data,x.w,x.ha,null,null,null,c,null,x))==0||i==7)&&c[0]&&(i=4),(c=i)==0){if(e(I!=null),_.data=x.data,_.w=x.w+x.offset,_.ha=x.ha-x.offset,_.put=Mr,_.ac=Tn,_.bc=Er,_.ma=I,x.xa){if((i=mr())==null){I=1;break e}if(function(ce,oe){var Me=[0],be=[0],ee=[0];t:for(;;){if(ce==null)return 0;if(oe==null)return ce.a=2,0;if(ce.l=oe,ce.a=0,de(ce.m,oe.data,oe.w,oe.ha),!vt(ce.m,Me,be,ee)){ce.a=3;break t}if(ce.xb=gc,oe.width=Me[0],oe.height=be[0],!jr(Me[0],be[0],1,ce,null))break t;return 1}return e(ce.a!=0),0}(i,_)){if(_=(c=ui(_.width,_.height,I.Oa,I.ba))==0){t:{_=i;n:for(;;){if(_==null){_=0;break t}if(e(_.s.yc!=null),e(_.s.Ya!=null),e(0<_.s.Wb),e((p=_.l)!=null),e((x=p.ma)!=null),_.xb!=0){if(_.ca=x.ba,_.tb=x.tb,e(_.ca!=null),!hs(x.Oa,p,Qs)){_.a=2;break n}if(!ca(_,p.width)||p.da)break n;if((p.da||Wt(_.ca.S))&&se(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&se()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!ht(_.s.vb,_.s.Wa.Xa)){_.a=1;break n}_.xb=0}if(!Nr(_,_.V,_.Ba,_.c,_.i,p.o,$a))break n;x.Dc=_.Ma,_=1;break t}e(_.a!=0),_=0}_=!_}_&&(c=i.a)}else c=i.a}else{if((i=new Qi)==null){I=1;break e}if(i.Fa=x.na,i.P=x.P,i.qc=x.Sa,Po(i,_)){if((c=ui(_.width,_.height,I.Oa,I.ba))==0){if(i.Aa=0,p=I.Oa,e((x=i)!=null),p!=null){if(0<(F=0>(F=p.Md)?0:100<F?255:255*F/100)){for(O=Q=0;4>O;++O)12>(ue=x.pb[O]).lc&&(ue.ia=F*gp[0>ue.lc?0:ue.lc]>>3),Q|=ue.ia;Q&&(alert("todo:VP8InitRandom"),x.ia=1)}x.Ga=p.Id,100<x.Ga?x.Ga=100:0>x.Ga&&(x.Ga=0)}ri(i,_)||(c=i.a)}}else c=i.a}c==0&&I.Oa!=null&&I.Oa.fd&&(c=ms(I.ba))}I=c}k=I!=0?null:11>k?C.f.RGBA.eb:C.f.kb.y}else k=null;return k};var Nc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(R,Z){for(var pe="",D=0;D<4;D++)pe+=String.fromCharCode(R[Z++]);return pe}function y(R,Z){return(R[Z+0]<<0|R[Z+1]<<8|R[Z+2]<<16)>>>0}function v(R,Z){return(R[Z+0]<<0|R[Z+1]<<8|R[Z+2]<<16|R[Z+3]<<24)>>>0}new u;var b=[0],f=[0],m=[],g=new u,S=n,w=function(R,Z){var pe={},D=0,M=!1,te=0,Y=0;if(pe.frames=[],!function(B,q,X,ne){for(var fe=0;fe<ne;fe++)if(B[q+fe]!=X.charCodeAt(fe))return!0;return!1}(R,Z,"RIFF",4)){for(v(R,Z+=4),Z+=8;Z<R.length;){var ve=h(R,Z),ge=v(R,Z+=4);Z+=4;var xe=ge+(1&ge);switch(ve){case"VP8 ":case"VP8L":pe.frames[D]===void 0&&(pe.frames[D]={}),(Le=pe.frames[D]).src_off=M?Y:Z-8,Le.src_size=te+ge+8,D++,M&&(M=!1,te=0,Y=0);break;case"VP8X":(Le=pe.header={}).feature_flags=R[Z];var de=Z+4;Le.canvas_width=1+y(R,de),de+=3,Le.canvas_height=1+y(R,de),de+=3;break;case"ALPH":M=!0,te=xe+8,Y=Z-8;break;case"ANIM":(Le=pe.header).bgcolor=v(R,Z),de=Z+4,Le.loop_count=(Ye=R)[(P=de)+0]<<0|Ye[P+1]<<8,de+=2;break;case"ANMF":var we,Le;(Le=pe.frames[D]={}).offset_x=2*y(R,Z),Z+=3,Le.offset_y=2*y(R,Z),Z+=3,Le.width=1+y(R,Z),Z+=3,Le.height=1+y(R,Z),Z+=3,Le.duration=y(R,Z),Z+=3,we=R[Z++],Le.dispose=1&we,Le.blend=we>>1&1}ve!="ANMF"&&(Z+=xe)}var Ye,P;return pe}}(S,0);w.response=S,w.rgbaoutput=!0,w.dataurl=!1;var A=w.header?w.header:null,T=w.frames?w.frames:null;if(A){A.loop_counter=A.loop_count,b=[A.canvas_height],f=[A.canvas_width];for(var G=0;G<T.length&&T[G].blend!=0;G++);}var ae=T[0],ye=g.WebPDecodeRGBA(S,ae.src_off,ae.src_size,f,b);ae.rgba=ye,ae.imgwidth=f[0],ae.imgheight=b[0];for(var ie=0;ie<f[0]*b[0]*4;ie++)m[ie]=ye[ie];return this.width=f,this.height=b,this.data=m,this}(function(n){var e=function(){return typeof Uu=="function"},t=function(b,f,m,g){var S=4,w=s;switch(g){case n.image_compression.FAST:S=1,w=a;break;case n.image_compression.MEDIUM:S=6,w=l;break;case n.image_compression.SLOW:S=9,w=u}b=r(b,f,m,w);var A=Uu(b,{level:S});return n.__addimage__.arrayBufferToBinaryString(A)},r=function(b,f,m,g){for(var S,w,A,T=b.length/f,G=new Uint8Array(b.length+T),ae=y(),ye=0;ye<T;ye+=1){if(A=ye*f,S=b.subarray(A,A+f),g)G.set(g(S,m,w),A+ye);else{for(var ie,R=ae.length,Z=[];ie<R;ie+=1)Z[ie]=ae[ie](S,m,w);var pe=v(Z.concat());G.set(Z[pe],A+ye)}w=S}return G},o=function(b){var f=Array.apply([],b);return f.unshift(0),f},a=function(b,f){var m,g=[],S=b.length;g[0]=1;for(var w=0;w<S;w+=1)m=b[w-f]||0,g[w+1]=b[w]-m+256&255;return g},s=function(b,f,m){var g,S=[],w=b.length;S[0]=2;for(var A=0;A<w;A+=1)g=m&&m[A]||0,S[A+1]=b[A]-g+256&255;return S},l=function(b,f,m){var g,S,w=[],A=b.length;w[0]=3;for(var T=0;T<A;T+=1)g=b[T-f]||0,S=m&&m[T]||0,w[T+1]=b[T]+256-(g+S>>>1)&255;return w},u=function(b,f,m){var g,S,w,A,T=[],G=b.length;T[0]=4;for(var ae=0;ae<G;ae+=1)g=b[ae-f]||0,S=m&&m[ae]||0,w=m&&m[ae-f]||0,A=h(g,S,w),T[ae+1]=b[ae]-A+256&255;return T},h=function(b,f,m){if(b===f&&f===m)return b;var g=Math.abs(f-m),S=Math.abs(b-m),w=Math.abs(b+f-m-m);return g<=S&&g<=w?b:S<=w?f:m},y=function(){return[o,a,s,l,u]},v=function(b){var f=b.map(function(m){return m.reduce(function(g,S){return g+Math.abs(S)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(b,f,m,g){var S,w,A,T,G,ae,ye,ie,R,Z,pe,D,M,te,Y,ve=this.decode.FLATE_DECODE,ge="";if(this.__addimage__.isArrayBuffer(b)&&(b=new Uint8Array(b)),this.__addimage__.isArrayBufferView(b)){if(b=(A=new Y0(b)).imgData,w=A.bits,S=A.colorSpace,G=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){R=(ie=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,pe=new Uint8Array(R*A.colors),Z=new Uint8Array(R);var xe,de=A.pixelBitlength-A.bits;for(te=0,Y=0;te<R;te++){for(M=ie[te],xe=0;xe<de;)pe[Y++]=M>>>xe&255,xe+=A.bits;Z[te]=M>>>xe&255}}if(A.bits===16){R=(ie=new Uint32Array(A.decodePixels().buffer)).length,pe=new Uint8Array(R*(32/A.pixelBitlength)*A.colors),Z=new Uint8Array(R*(32/A.pixelBitlength)),D=A.colors>1,te=0,Y=0;for(var we=0;te<R;)M=ie[te++],pe[Y++]=M>>>0&255,D&&(pe[Y++]=M>>>16&255,M=ie[te++],pe[Y++]=M>>>0&255),Z[we++]=M>>>16&255;w=8}g!==n.image_compression.NONE&&e()?(b=t(pe,A.width*A.colors,A.colors,g),ye=t(Z,A.width,1,g)):(b=pe,ye=Z,ve=void 0)}if(A.colorType===3&&(S=this.color_spaces.INDEXED,ae=A.palette,A.transparency.indexed)){var Le=A.transparency.indexed,Ye=0;for(te=0,R=Le.length;te<R;++te)Ye+=Le[te];if((Ye/=255)===R-1&&Le.indexOf(0)!==-1)T=[Le.indexOf(0)];else if(Ye!==R){for(ie=A.decodePixels(),Z=new Uint8Array(ie.length),te=0,R=ie.length;te<R;te++)Z[te]=Le[ie[te]];ye=t(Z,A.width,1)}}var P=function(B){var q;switch(B){case n.image_compression.FAST:q=11;break;case n.image_compression.MEDIUM:q=13;break;case n.image_compression.SLOW:q=14;break;default:q=12}return q}(g);return ve===this.decode.FLATE_DECODE&&(ge="/Predictor "+P+" "),ge+="/Colors "+G+" /BitsPerComponent "+w+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),(ye&&this.__addimage__.isArrayBuffer(ye)||this.__addimage__.isArrayBufferView(ye))&&(ye=this.__addimage__.arrayBufferToBinaryString(ye)),{alias:m,data:b,index:f,filter:ve,decodeParameters:ge,transparency:T,palette:ae,sMask:ye,predictor:P,width:A.width,height:A.height,bitsPerComponent:w,colorSpace:S}}}})(Nt.API),function(n){n.processGIF89A=function(e,t,r,o){var a=new J0(e),s=a.width,l=a.height,u=[];a.decodeAndBlitFrameRGBA(0,u);var h={data:u,width:s,height:l},y=new Lu(100).encode(h,100);return n.processJPEG.call(this,y,t,r,o)},n.processGIF87A=n.processGIF89A}(Nt.API),ra.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ra.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){un.log("bit decode error:"+t)}},ra.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++)for(var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*o*4,l=0;l<8&&8*o+l<this.width;l++){var u=this.palette[a>>7-l&1];this.data[s+4*l]=u.blue,this.data[s+4*l+1]=u.green,this.data[s+4*l+2]=u.red,this.data[s+4*l+3]=255}t!==0&&(this.pos+=4-t)}},ra.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<n;o++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*o*4,l=a>>4,u=15&a,h=this.palette[l];if(this.data[s]=h.blue,this.data[s+1]=h.green,this.data[s+2]=h.red,this.data[s+3]=255,2*o+1>=this.width)break;h=this.palette[u],this.data[s+4]=h.blue,this.data[s+4+1]=h.green,this.data[s+4+2]=h.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},ra.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(o<this.palette.length){var s=this.palette[o];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},ra.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,l=(a>>5&e)/e*255|0,u=(a>>10&e)/e*255|0,h=a>>15?255:0,y=r*this.width*4+4*o;this.data[y]=u,this.data[y+1]=l,this.data[y+2]=s,this.data[y+3]=h}this.pos+=n}},ra.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&e)/e*255|0,u=(s>>5&t)/t*255|0,h=(s>>11)/e*255|0,y=o*this.width*4+4*a;this.data[y]=h,this.data[y+1]=u,this.data[y+2]=l,this.data[y+3]=255}this.pos+=n}},ra.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=o,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},ra.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=a,this.data[l+1]=o,this.data[l+2]=r,this.data[l+3]=s}},ra.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,o){var a=new ra(e,!1),s=a.width,l=a.height,u={data:a.getData(),width:s,height:l},h=new Lu(100).encode(u,100);return n.processJPEG.call(this,h,t,r,o)}}(Nt.API),Dd.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,o){var a=new Dd(e),s=a.width,l=a.height,u={data:a.getData(),width:s,height:l},h=new Lu(100).encode(u,100);return n.processJPEG.call(this,h,t,r,o)}}(Nt.API),Nt.API.processRGBA=function(n,e,t){for(var r=n.data,o=r.length,a=new Uint8Array(o/4*3),s=new Uint8Array(o/4),l=0,u=0,h=0;h<o;h+=4){var y=r[h],v=r[h+1],b=r[h+2],f=r[h+3];a[l++]=y,a[l++]=v,a[l++]=b,s[u++]=f}var m=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:m,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Nt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ai=Nt.API,bl=Ai.getCharWidthsArray=function(n,e){var t,r,o=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:o.metadata.Unicode.widths,u=l.fof?l.fof:1,h=e.kerning?e.kerning:o.metadata.Unicode.kerning,y=h.fof?h.fof:1,v=e.doKerning!==!1,b=0,f=n.length,m=0,g=l[0]||u,S=[];for(t=0;t<f;t++)r=n.charCodeAt(t),typeof o.metadata.widthOfString=="function"?S.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+s*(1e3/a)||0)/1e3):(b=v&&dn(h[r])==="object"&&!isNaN(parseInt(h[r][m],10))?h[r][m]/y:0,S.push((l[r]||g)/u+b)),m=r;return S},Id=Ai.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Ai.processArabic&&(n=Ai.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,o)/t:bl.apply(this,arguments).reduce(function(a,s){return a+s},0)},Pd=function(n,e,t,r){for(var o=[],a=0,s=n.length,l=0;a!==s&&l+e[a]<t;)l+=e[a],a++;o.push(n.slice(0,a));var u=a;for(l=0;a!==s;)l+e[a]>r&&(o.push(n.slice(u,a)),l=0,u=a),l+=e[a],a++;return u!==a&&o.push(n.slice(u,a)),o},Cd=function(n,e,t){t||(t={});var r,o,a,s,l,u,h,y=[],v=[y],b=t.textIndent||0,f=0,m=0,g=n.split(" "),S=bl.apply(this,[" ",t])[0];if(u=t.lineIndent===-1?g[0].length+2:t.lineIndent||0){var w=Array(u).join(" "),A=[];g.map(function(G){(G=G.split(/\s*\n/)).length>1?A=A.concat(G.map(function(ae,ye){return(ye&&ae.length?`
`:"")+ae})):A.push(G[0])}),g=A,u=Id.apply(this,[w,t])}for(a=0,s=g.length;a<s;a++){var T=0;if(r=g[a],u&&r[0]==`
`&&(r=r.substr(1),T=1),b+f+(m=(o=bl.apply(this,[r,t])).reduce(function(G,ae){return G+ae},0))>e||T){if(m>e){for(l=Pd.apply(this,[r,o,e-(b+f),e]),y.push(l.shift()),y=[l.pop()];l.length;)v.push([l.shift()]);m=o.slice(r.length-(y[0]?y[0].length:0)).reduce(function(G,ae){return G+ae},0)}else y=[r];v.push(y),b=m+u,f=S}else y.push(r),b+=f+m,f=S}return h=u?function(G,ae){return(ae?w:"")+G.join(" ")}:function(G){return G.join(" ")},v.map(h)},Ai.splitTextToSize=function(n,e,t){var r,o=(t=t||{}).fontSize||this.internal.getFontSize(),a=function(y){if(y.widths&&y.kerning)return{widths:y.widths,kerning:y.kerning};var v=this.internal.getFont(y.fontName,y.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/o;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=t.lineIndent;var l,u,h=[];for(l=0,u=r.length;l<u;l++)h=h.concat(Cd.apply(this,[r[l],s,a]));return h},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},o=0;o<e.length;o++)t[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var a=function(v){return"0x"+parseInt(v,10).toString(16)},s=n.__fontmetrics__.compress=function(v){var b,f,m,g,S=["{"];for(var w in v){if(b=v[w],isNaN(parseInt(w,10))?f="'"+w+"'":(w=parseInt(w,10),f=(f=a(w).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof b=="number")b<0?(m=a(b).slice(3),g="-"):(m=a(b).slice(2),g=""),m=g+m.slice(0,-1)+r[m.slice(-1)];else{if(dn(b)!=="object")throw new Error("Don't know what to do with value type "+dn(b)+".");m=s(b)}S.push(f+m)}return S.push("}"),S.join("")},l=n.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,f,m,g,S={},w=1,A=S,T=[],G="",ae="",ye=v.length-1,ie=1;ie<ye;ie+=1)(g=v[ie])=="'"?b?(m=b.join(""),b=void 0):b=[]:b?b.push(g):g=="{"?(T.push([A,m]),A={},m=void 0):g=="}"?((f=T.pop())[0][f[1]]=A,m=void 0,A=f[0]):g=="-"?w=-1:m===void 0?t.hasOwnProperty(g)?(G+=t[g],m=parseInt(G,16)*w,w=1,G=""):G+=g:t.hasOwnProperty(g)?(ae+=t[g],A[m]=parseInt(ae,16)*w,w=1,m=void 0,ae=""):ae+=g;return S},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},y={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(v){var b=v.font,f=y.Unicode[b.postScriptName];f&&(b.metadata.Unicode={},b.metadata.Unicode.widths=f.widths,b.metadata.Unicode.kerning=f.kerning);var m=h.Unicode[b.postScriptName];m&&(b.metadata.Unicode.encoding=m,b.encoding=m.codePages[0])}])}(Nt.API),function(n){var e=function(t){for(var r=t.length,o=new Uint8Array(r),a=0;a<r;a++)o[a]=t.charCodeAt(a);return o};n.API.events.push(["addFont",function(t){var r=void 0,o=t.font,a=t.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(s,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(Fs(l)),s.metadata=n.API.TTFFont.open(l),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(o,r)}}])}(Nt),function(n){function e(){return(At.canvg?Promise.resolve(At.canvg):Iu(()=>import("./index.es-446bd001.js"),["./index.es-446bd001.js","./index-b80d5ef5.js","..\\css\\index-13cb634b.css","./defineProperty-d37e2d2c.js","./typeof-7fd5df1e.js"],import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Nt.API.addSvgAsImage=function(t,r,o,a,s,l,u,h){if(isNaN(r)||isNaN(o))throw un.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw un.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var y=document.createElement("canvas");y.width=a,y.height=s;var v=y.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,y.width,y.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(m){return m.fromString(v,t,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(b)}).then(function(){f.addImage(y.toDataURL("image/jpeg",1),r,o,a,s,u,h)})}}(),Nt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,t);return this},Nt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,o,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(s),u=[],h=0,y=0,v=0;function b(m,g){var S,w=!1;for(S=0;S<m.length;S+=1)m[S]===g&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=l.length;for(v=0;v<f;v+=1)t[l[v]].value=t[l[v]].defaultValue,t[l[v]].explicitSet=!1}if(dn(n)==="object"){for(o in n)if(a=n[o],b(l,o)&&a!==void 0){if(t[o].type==="boolean"&&typeof a=="boolean")t[o].value=a;else if(t[o].type==="name"&&b(t[o].valueSet,a))t[o].value=a;else if(t[o].type==="integer"&&Number.isInteger(a))t[o].value=a;else if(t[o].type==="array"){for(h=0;h<a.length;h+=1)if(r=!0,a[h].length===1&&typeof a[h][0]=="number")u.push(String(a[h]-1));else if(a[h].length>1){for(y=0;y<a[h].length;y+=1)typeof a[h][y]!="number"&&(r=!1);r===!0&&u.push([a[h][0]-1,a[h][1]-1].join(" "))}t[o].value="["+u.join(" ")+"]"}else t[o].value=t[o].defaultValue;t[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,g=[];for(m in t)t[m].explicitSet===!0&&(t[m].type==="name"?g.push("/"+m+" /"+t[m].value):g.push("/"+m+" "+t[m].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),h=a.length+s.length+l.length+o.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(o+a+s+l+u),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Nt.API),function(n){var e=n.API,t=e.pdfEscape16=function(a,s){for(var l,u=s.metadata.Unicode.widths,h=["","0","00","000","0000"],y=[""],v=0,b=a.length;v<b;++v){if(l=s.metadata.characterToGlyph(a.charCodeAt(v)),s.metadata.glyIdsUsed.push(l),s.metadata.toUnicode[l]=a.charCodeAt(v),u.indexOf(l)==-1&&(u.push(l),u.push([parseInt(s.metadata.widthOfGlyph(l),10)])),l=="0")return y.join("");l=l.toString(16),y.push(h[4-l.length],l)}return y.join("")},r=function(a){var s,l,u,h,y,v,b;for(y=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],v=0,b=(l=Object.keys(a).sort(function(f,m){return f-m})).length;v<b;v++)s=l[v],u.length>=100&&(y+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(h=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),u.push("<"+s+"><"+h+">"));return u.length&&(y+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),y+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(s){var l=s.font,u=s.out,h=s.newObject,y=s.putStream;if(l.metadata instanceof n.API.TTFFont&&l.encoding==="Identity-H"){for(var v=l.metadata.Unicode.widths,b=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",m=0;m<b.length;m++)f+=String.fromCharCode(b[m]);var g=h();y({data:f,addLength1:!0,objectId:g}),u("endobj");var S=h();y({data:r(l.metadata.toUnicode),addLength1:!0,objectId:S}),u("endobj");var w=h();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+ki(l.fontName)),u("/FontFile2 "+g+" 0 R"),u("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),u("/Flags "+l.metadata.flags),u("/StemV "+l.metadata.stemV),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u(">>"),u("endobj");var A=h();u("<<"),u("/Type /Font"),u("/BaseFont /"+ki(l.fontName)),u("/FontDescriptor "+w+" 0 R"),u("/W "+n.API.PDFObject.convert(v)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+l.encoding+")"),u(">>"),u(">>"),u("endobj"),l.objectNumber=h(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+S+" 0 R"),u("/BaseFont /"+ki(l.fontName)),u("/Encoding /"+l.encoding),u("/DescendantFonts ["+A+" 0 R]"),u(">>"),u("endobj"),l.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(s){var l=s.font,u=s.out,h=s.newObject,y=s.putStream;if(l.metadata instanceof n.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var v=l.metadata.rawData,b="",f=0;f<v.length;f++)b+=String.fromCharCode(v[f]);var m=h();y({data:b,addLength1:!0,objectId:m}),u("endobj");var g=h();y({data:r(l.metadata.toUnicode),addLength1:!0,objectId:g}),u("endobj");var S=h();u("<<"),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u("/StemV "+l.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+m+" 0 R"),u("/Flags 96"),u("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),u("/FontName /"+ki(l.fontName)),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u(">>"),u("endobj"),l.objectNumber=h();for(var w=0;w<l.metadata.hmtx.widths.length;w++)l.metadata.hmtx.widths[w]=parseInt(l.metadata.hmtx.widths[w]*(1e3/l.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+ki(l.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),u("endobj"),l.isAlreadyPutted=!0}})(a)}]);var o=function(a){var s,l=a.text||"",u=a.x,h=a.y,y=a.options||{},v=a.mutex||{},b=v.pdfEscape,f=v.activeFontKey,m=v.fonts,g=f,S="",w=0,A="",T=m[g].encoding;if(m[g].encoding!=="Identity-H")return{text:l,x:u,y:h,options:y,mutex:v};for(A=l,g=f,Array.isArray(l)&&(A=l[0]),w=0;w<A.length;w+=1)m[g].metadata.hasOwnProperty("cmap")&&(s=m[g].metadata.cmap.unicode.codeMap[A[w].charCodeAt(0)]),s||A[w].charCodeAt(0)<256&&m[g].metadata.hasOwnProperty("Unicode")?S+=A[w]:S+="";var G="";return parseInt(g.slice(1))<14||T==="WinAnsiEncoding"?G=b(S,g).split("").map(function(ae){return ae.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(G=t(S,m[g])),v.isHex=!0,{text:G,x:u,y:h,options:y,mutex:v}};e.events.push(["postProcessText",function(a){var s=a.text||"",l=[],u={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var h=0;for(h=0;h<s.length;h+=1)Array.isArray(s[h])&&s[h].length===3?l.push([o(Object.assign({},u,{text:s[h][0]})).text,s[h][1],s[h][2]]):l.push(o(Object.assign({},u,{text:s[h]})).text);a.text=l}else a.text=o(Object.assign({},u,{text:s})).text}])}(Nt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Nt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var o,a,s,l,u,h,y,v=e,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,T=0;this.__bidiEngine__={};var G=function(D){var M=D.charCodeAt(),te=M>>8,Y=g[te];return Y!==void 0?v[256*Y+(255&M)]:te===252||te===253?"AL":w.test(te)?"L":te===8?"R":"N"},ae=function(D){for(var M,te=0;te<D.length;te++){if((M=G(D.charAt(te)))==="L")return!1;if(M==="R")return!0}return!1},ye=function(D,M,te,Y){var ve,ge,xe,de,we=M[Y];switch(we){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(we="AN");break;case"AL":A=!0,we="R";break;case"WS":we="N";break;case"CS":Y<1||Y+1>=M.length||(ve=te[Y-1])!=="EN"&&ve!=="AN"||(ge=M[Y+1])!=="EN"&&ge!=="AN"?we="N":A&&(ge="AN"),we=ge===ve?ge:"N";break;case"ES":we=(ve=Y>0?te[Y-1]:"B")==="EN"&&Y+1<M.length&&M[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&te[Y-1]==="EN"){we="EN";break}if(A){we="N";break}for(xe=Y+1,de=M.length;xe<de&&M[xe]==="ET";)xe++;we=xe<de&&M[xe]==="EN"?"EN":"N";break;case"NSM":if(s&&!l){for(de=M.length,xe=Y+1;xe<de&&M[xe]==="NSM";)xe++;if(xe<de){var Le=D[Y],Ye=Le>=1425&&Le<=2303||Le===64286;if(ve=M[xe],Ye&&(ve==="R"||ve==="AL")){we="R";break}}}we=Y<1||(ve=M[Y-1])==="B"?"N":te[Y-1];break;case"B":A=!1,o=!0,we=T;break;case"S":a=!0,we="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":we="N"}return we},ie=function(D,M,te){var Y=D.split("");return te&&R(Y,te,{hiLevel:T}),Y.reverse(),M&&M.reverse(),Y.join("")},R=function(D,M,te){var Y,ve,ge,xe,de,we=-1,Le=D.length,Ye=0,P=[],B=T?f:b,q=[];for(A=!1,o=!1,a=!1,ve=0;ve<Le;ve++)q[ve]=G(D[ve]);for(ge=0;ge<Le;ge++){if(de=Ye,P[ge]=ye(D,q,P,ge),Y=240&(Ye=B[de][m[P[ge]]]),Ye&=15,M[ge]=xe=B[Ye][5],Y>0)if(Y===16){for(ve=we;ve<ge;ve++)M[ve]=1;we=-1}else we=-1;if(B[Ye][6])we===-1&&(we=ge);else if(we>-1){for(ve=we;ve<ge;ve++)M[ve]=xe;we=-1}q[ge]==="B"&&(M[ge]=0),te.hiLevel|=xe}a&&function(X,ne,fe){for(var he=0;he<fe;he++)if(X[he]==="S"){ne[he]=T;for(var me=he-1;me>=0&&X[me]==="WS";me--)ne[me]=T}}(q,M,Le)},Z=function(D,M,te,Y,ve){if(!(ve.hiLevel<D)){if(D===1&&T===1&&!o)return M.reverse(),void(te&&te.reverse());for(var ge,xe,de,we,Le=M.length,Ye=0;Ye<Le;){if(Y[Ye]>=D){for(de=Ye+1;de<Le&&Y[de]>=D;)de++;for(we=Ye,xe=de-1;we<xe;we++,xe--)ge=M[we],M[we]=M[xe],M[xe]=ge,te&&(ge=te[we],te[we]=te[xe],te[xe]=ge);Ye=de}Ye++}}},pe=function(D,M,te){var Y=D.split(""),ve={hiLevel:T};return te||(te=[]),R(Y,te,ve),function(ge,xe,de){if(de.hiLevel!==0&&y)for(var we,Le=0;Le<ge.length;Le++)xe[Le]===1&&(we=S.indexOf(ge[Le]))>=0&&(ge[Le]=S[we+1])}(Y,te,ve),Z(2,Y,M,te,ve),Z(1,Y,M,te,ve),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(D,M,te){if(function(ve,ge){if(ge)for(var xe=0;xe<ve.length;xe++)ge[xe]=xe;l===void 0&&(l=ae(ve)),h===void 0&&(h=ae(ve))}(D,M),s||!u||h)if(s&&u&&l^h)T=l?1:0,D=ie(D,M,te);else if(!s&&u&&h)T=l?1:0,D=pe(D,M,te),D=ie(D,M);else if(!s||l||u||h){if(s&&!u&&l^h)D=ie(D,M),l?(T=0,D=pe(D,M,te)):(T=1,D=pe(D,M,te),D=ie(D,M));else if(s&&l&&!u&&h)T=1,D=pe(D,M,te),D=ie(D,M);else if(!s&&!u&&l^h){var Y=y;l?(T=1,D=pe(D,M,te),T=0,y=!1,D=pe(D,M,te),y=Y):(T=0,D=pe(D,M,te),D=ie(D,M),T=1,y=!1,D=pe(D,M,te),y=Y,D=ie(D,M))}}else T=0,D=pe(D,M,te);else T=l?1:0,D=pe(D,M,te);return D},this.__bidiEngine__.setOptions=function(D){D&&(s=D.isInputVisual,u=D.isOutputVisual,l=D.isInputRtl,h=D.isOutputRtl,y=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var o=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var l=0;for(s=[],l=0;l<o.length;l+=1)Object.prototype.toString.call(o[l])==="[object Array]"?s.push([t.doBidiReorder(o[l][0]),o[l][1],o[l][2]]):s.push([t.doBidiReorder(o[l])]);r.text=s}else r.text=t.doBidiReorder(o);t.setOptions({isInputVisual:!0})}])}(Nt),Nt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new No(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new cm(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new X0(this.contents),this.head=new Z0(this),this.name=new rm(this),this.cmap=new zf(this),this.toUnicode={},this.hhea=new Q0(this),this.maxp=new am(this),this.hmtx=new om(this),this.post=new tm(this),this.os2=new em(this),this.loca=new um(this),this.glyf=new im(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,l,u,h;for(h=[],s=0,l=(u=this.bbox).length;s<l;s++)e=u[s],h.push(Math.round(e*this.scaleFactor));return h}.call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(t=o>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var o,a,s,l;for(s=0,a=0,l=(e=""+e).length;0<=l?a<l:a>l;a=0<=l?++a:--a)o=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var sa,No=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,o;for(o=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,o,a,s,l,u;return e=this.readByte(),t=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^a)+65536*(255^s)+256*(255^l)+(255^u)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*o+16777216*a+65536*s+256*l+u},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,o,a;for(a=[],r=0,o=e.length;r<o;r++)t=e[r],a.push(this.writeByte(t));return a},n}(),X0=function(){var n;function e(t){var r,o,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,o,a,s,l,u,h,y,v,b,f,m,g;for(g in f=Object.keys(t).length,u=Math.log(2),v=16*Math.floor(Math.log(f)/u),s=Math.floor(v/u),y=16*f-v,(o=new No).writeInt(this.scalarType),o.writeShort(f),o.writeShort(v),o.writeShort(s),o.writeShort(y),a=16*f,h=o.pos+a,l=null,m=[],t)for(b=t[g],o.writeString(g),o.writeInt(n(b)),o.writeInt(h),o.writeInt(b.length),m=m.concat(b),g==="head"&&(l=h),h+=b.length;h%4;)m.push(0),h++;return o.write(m),r=2981146554-n(o.data),o.pos=l+8,o.writeUInt32(r),o.data},n=function(t){var r,o,a,s;for(t=$f.call(t);t.length%4;)t.push(0);for(a=new No(t),o=0,r=0,s=t.length;r<s;r=r+=4)o+=a.readUInt32();return 4294967295&o},e}(),K0={}.hasOwnProperty,La=function(n,e){for(var t in e)K0.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};sa=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var Z0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return La(e,sa),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new No).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Md=function(){function n(e,t){var r,o,a,s,l,u,h,y,v,b,f,m,g,S,w,A,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),v=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(f=e.readUInt16(),b=f/2,e.pos+=6,a=function(){var G,ae;for(ae=[],u=G=0;0<=b?G<b:G>b;u=0<=b?++G:--G)ae.push(e.readUInt16());return ae}(),e.pos+=2,g=function(){var G,ae;for(ae=[],u=G=0;0<=b?G<b:G>b;u=0<=b?++G:--G)ae.push(e.readUInt16());return ae}(),h=function(){var G,ae;for(ae=[],u=G=0;0<=b?G<b:G>b;u=0<=b?++G:--G)ae.push(e.readUInt16());return ae}(),y=function(){var G,ae;for(ae=[],u=G=0;0<=b?G<b:G>b;u=0<=b?++G:--G)ae.push(e.readUInt16());return ae}(),o=(this.length-e.pos+this.offset)/2,l=function(){var G,ae;for(ae=[],u=G=0;0<=o?G<o:G>o;u=0<=o?++G:--G)ae.push(e.readUInt16());return ae}(),u=w=0,T=a.length;w<T;u=++w)for(S=a[u],r=A=m=g[u];m<=S?A<=S:A>=S;r=m<=S?++A:--A)y[u]===0?s=r+h[u]:(s=l[y[u]/2+(r-m)-(b-u)]||0)!==0&&(s+=h[u]),this.codeMap[r]=65535&s}e.pos=v}return n.encode=function(e,t){var r,o,a,s,l,u,h,y,v,b,f,m,g,S,w,A,T,G,ae,ye,ie,R,Z,pe,D,M,te,Y,ve,ge,xe,de,we,Le,Ye,P,B,q,X,ne,fe,he,me,Ve,Be,Je;switch(Y=new No,s=Object.keys(e).sort(function(qe,ht){return qe-ht}),t){case"macroman":for(g=0,S=function(){var qe=[];for(m=0;m<256;++m)qe.push(0);return qe}(),A={0:0},a={},ve=0,we=s.length;ve<we;ve++)A[me=e[o=s[ve]]]==null&&(A[me]=++g),a[o]={old:e[o],new:A[e[o]]},S[o]=A[e[o]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(S),{charMap:a,subtable:Y.data,maxGlyphID:g+1};case"unicode":for(M=[],v=[],T=0,A={},r={},w=h=null,ge=0,Le=s.length;ge<Le;ge++)A[ae=e[o=s[ge]]]==null&&(A[ae]=++T),r[o]={old:ae,new:A[ae]},l=A[ae]-o,w!=null&&l===h||(w&&v.push(w),M.push(o),h=l),w=o;for(w&&v.push(w),v.push(65535),M.push(65535),pe=2*(Z=M.length),R=2*Math.pow(Math.log(Z)/Math.LN2,2),b=Math.log(R/2)/Math.LN2,ie=2*Z-R,u=[],ye=[],f=[],m=xe=0,Ye=M.length;xe<Ye;m=++xe){if(D=M[m],y=v[m],D===65535){u.push(0),ye.push(0);break}if(D-(te=r[D].new)>=32768)for(u.push(0),ye.push(2*(f.length+Z-m)),o=de=D;D<=y?de<=y:de>=y;o=D<=y?++de:--de)f.push(r[o].new);else u.push(te-D),ye.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*Z+2*f.length),Y.writeUInt16(0),Y.writeUInt16(pe),Y.writeUInt16(R),Y.writeUInt16(b),Y.writeUInt16(ie),fe=0,P=v.length;fe<P;fe++)o=v[fe],Y.writeUInt16(o);for(Y.writeUInt16(0),he=0,B=M.length;he<B;he++)o=M[he],Y.writeUInt16(o);for(Ve=0,q=u.length;Ve<q;Ve++)l=u[Ve],Y.writeUInt16(l);for(Be=0,X=ye.length;Be<X;Be++)G=ye[Be],Y.writeUInt16(G);for(Je=0,ne=f.length;Je<ne;Je++)g=f[Je],Y.writeUInt16(g);return{charMap:r,subtable:Y.data,maxGlyphID:T+1}}},n}(),zf=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return La(e,sa),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,o,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)r=new Md(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var o,a;return r==null&&(r="macroman"),o=Md.encode(t,r),(a=new No).writeUInt16(0),a.writeUInt16(1),o.table=a.data.concat(o.subtable),o},e}(),Q0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return La(e,sa),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),em=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return La(e,sa),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(t.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(t.readInt());return o}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(t.readInt());return o}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),tm=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return La(e,sa),e.prototype.tag="post",e.prototype.parse=function(t){var r,o,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var s;for(o=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=o?s<o:s>o;s=0<=o?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return o=t.readUInt16(),this.offsets=t.read(o);case 196608:break;case 262144:return this.map=function(){var l,u,h;for(h=[],s=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;s=0<=u?++l:--l)h.push(t.readUInt32());return h}.call(this)}},e}(),nm=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},rm=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return La(e,sa),e.prototype.tag="name",e.prototype.parse=function(t){var r,o,a,s,l,u,h,y,v,b,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),u=t.readShort(),o=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)o.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+u+t.readShort()});for(h={},s=v=0,b=o.length;v<b;s=++v)a=o[s],t.pos=a.offset,y=t.readString(a.length),l=new nm(y,a),h[f=a.nameID]==null&&(h[f]=[]),h[a.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e}(),am=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return La(e,sa),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),om=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return La(e,sa),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,o,a,s,l,u,h;for(t.pos=this.offset,this.metrics=[],r=0,u=this.file.hhea.numberOfMetrics;0<=u?r<u:r>u;r=0<=u?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var y,v;for(v=[],r=y=0;0<=a?y<a:y>a;r=0<=a?++y:--y)v.push(t.readInt16());return v}(),this.widths=function(){var y,v,b,f;for(f=[],y=0,v=(b=this.metrics).length;y<v;y++)s=b[y],f.push(s.advance);return f}.call(this),o=this.widths[this.widths.length-1],h=[],r=l=0;0<=a?l<a:l>a;r=0<=a?++l:--l)h.push(this.widths.push(o));return h},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),$f=[].slice,im=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return La(e,sa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,o,a,s,l,u,h,y,v,b;return t in this.cache?this.cache[t]:(s=this.file.loca,r=this.file.contents,o=s.indexOf(t),(a=s.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+o,l=(u=new No(r.read(a))).readShort(),y=u.readShort(),b=u.readShort(),h=u.readShort(),v=u.readShort(),this.cache[t]=l===-1?new lm(u,y,b,h,v):new sm(u,l,y,b,h,v),this.cache[t]))},e.prototype.encode=function(t,r,o){var a,s,l,u,h;for(l=[],s=[],u=0,h=r.length;u<h;u++)a=t[r[u]],s.push(l.length),a&&(l=l.concat(a.encode(o)));return s.push(l.length),{table:l,offsets:s}},e}(),sm=function(){function n(e,t,r,o,a,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=o,this.xMax=a,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),lm=function(){function n(e,t,r,o,a){var s,l;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;l=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&l;)s.pos+=1&l?4:2,128&l?s.pos+=8:64&l?s.pos+=4:8&l&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new No($f.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),um=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return La(e,sa),e.prototype.tag="loca",e.prototype.parse=function(t){var r,o;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var a,s;for(s=[],o=0,a=this.length;o<a;o+=2)s.push(2*t.readUInt16());return s}.call(this):function(){var a,s;for(s=[],o=0,a=this.length;o<a;o+=4)s.push(t.readUInt32());return s}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var o=new Uint32Array(this.offsets.length),a=0,s=0,l=0;l<o.length;++l)if(o[l]=a,s<r.length&&r[s]==l){++s,o[l]=a;var u=this.offsets[l],h=this.offsets[l+1]-u;h>0&&(a+=h)}for(var y=new Array(4*o.length),v=0;v<o.length;++v)y[4*v+3]=255&o[v],y[4*v+2]=(65280&o[v])>>8,y[4*v+1]=(16711680&o[v])>>16,y[4*v]=(4278190080&o[v])>>24;return y},e}(),cm=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,o,a;for(t in o=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=o[r];return e},n.prototype.glyphsFor=function(e){var t,r,o,a,s,l,u;for(o={},s=0,l=e.length;s<l;s++)o[a=e[s]]=this.font.glyf.glyphFor(a);for(a in t=[],o)(r=o[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in u=this.glyphsFor(t))r=u[a],o[a]=r;return o},n.prototype.encode=function(e,t){var r,o,a,s,l,u,h,y,v,b,f,m,g,S,w;for(o in r=zf.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),f={0:0},w=r.charMap)f[(u=w[o]).old]=u.new;for(m in b=r.maxGlyphID,s)m in f||(f[m]=b++);return y=function(A){var T,G;for(T in G={},A)G[A[T]]=T;return G}(f),v=Object.keys(y).sort(function(A,T){return A-T}),g=function(){var A,T,G;for(G=[],A=0,T=v.length;A<T;A++)l=v[A],G.push(y[l]);return G}(),a=this.font.glyf.encode(s,g,f),h=this.font.loca.encode(a.offsets,g),S={cmap:this.font.cmap.raw(),glyf:a.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},n}();Nt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,o,a,s;if(Array.isArray(t))return"["+function(){var l,u,h;for(h=[],l=0,u=t.length;l<u;l++)r=t[l],h.push(e.convert(r));return h}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(o in a=["<<"],t)s=t[o],a.push("/"+o+" "+e.convert(s));return a.push(">>"),a.join(`
`)}return""+t},e}();var $i={},dm={get exports(){return $i},set exports(n){$i=n}};(function(n,e){(function(t,r){r(e)})(ph,function(t){var r=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,h=Math.pow,y=(L,U,$)=>U in L?r(L,U,{enumerable:!0,configurable:!0,writable:!0,value:$}):L[U]=$,v=(L,U)=>{for(var $ in U||(U={}))l.call(U,$)&&y(L,$,U[$]);if(s)for(var $ of s(U))u.call(U,$)&&y(L,$,U[$]);return L},b=(L,U)=>o(L,a(U)),f=(L,U)=>{var $={};for(var K in L)l.call(L,K)&&U.indexOf(K)<0&&($[K]=L[K]);if(L!=null&&s)for(var K of s(L))U.indexOf(K)<0&&u.call(L,K)&&($[K]=L[K]);return $},m=(L,U,$)=>new Promise((K,Ne)=>{var Se=Re=>{try{Ie($.next(Re))}catch(Ue){Ne(Ue)}},le=Re=>{try{Ie($.throw(Re))}catch(Ue){Ne(Ue)}},Ie=Re=>Re.done?K(Re.value):Promise.resolve(Re.value).then(Se,le);Ie(($=$.apply(L,U)).next())}),g;function S(L,U){return L[13]=1,L[14]=U>>8,L[15]=U&255,L[16]=U>>8,L[17]=U&255,L}const w=112,A=72,T=89,G=115;let ae;function ye(){const L=new Int32Array(256);for(let U=0;U<256;U++){let $=U;for(let K=0;K<8;K++)$=$&1?3988292384^$>>>1:$>>>1;L[U]=$}return L}function ie(L){let U=-1;ae||(ae=ye());for(let $=0;$<L.length;$++)U=ae[(U^L[$])&255]^U>>>8;return U^-1}function R(L){const U=L.length-1;for(let $=U;$>=4;$--)if(L[$-4]===9&&L[$-3]===w&&L[$-2]===A&&L[$-1]===T&&L[$]===G)return $-3;return 0}function Z(L,U,$=!1){const K=new Uint8Array(13);U*=39.3701,K[0]=w,K[1]=A,K[2]=T,K[3]=G,K[4]=U>>>24,K[5]=U>>>16,K[6]=U>>>8,K[7]=U&255,K[8]=K[4],K[9]=K[5],K[10]=K[6],K[11]=K[7],K[12]=1;const Ne=ie(K),Se=new Uint8Array(4);if(Se[0]=Ne>>>24,Se[1]=Ne>>>16,Se[2]=Ne>>>8,Se[3]=Ne&255,$){const le=R(L);return L.set(K,le),L.set(Se,le+13),L}else{const le=new Uint8Array(4);le[0]=0,le[1]=0,le[2]=0,le[3]=9;const Ie=new Uint8Array(54);return Ie.set(L,0),Ie.set(le,33),Ie.set(K,37),Ie.set(Se,50),Ie}}const pe="AAlwSFlz",D="AAAJcEhZ",M="AAAACXBI";function te(L){let U=L.indexOf(pe);return U===-1&&(U=L.indexOf(D)),U===-1&&(U=L.indexOf(M)),U}const Y="[modern-screenshot]",ve=typeof window<"u",ge=ve&&"Worker"in window,xe=ve&&"atob"in window,de=ve&&"btoa"in window,we=ve?(g=window.navigator)==null?void 0:g.userAgent:"",Le=we.includes("Chrome"),Ye=we.includes("AppleWebKit")&&!Le,P=we.includes("Firefox"),B=L=>L&&"__CONTEXT__"in L,q=L=>L.constructor.name==="CSSFontFaceRule",X=L=>L.constructor.name==="CSSImportRule",ne=L=>L.nodeType===1,fe=L=>typeof L.className=="object",he=L=>L.tagName==="image",me=L=>L.tagName==="use",Ve=L=>ne(L)&&typeof L.style<"u"&&!fe(L),Be=L=>L.nodeType===8,Je=L=>L.nodeType===3,qe=L=>L.tagName==="IMG",ht=L=>L.tagName==="VIDEO",ke=L=>L.tagName==="CANVAS",z=L=>L.tagName==="TEXTAREA",kt=L=>L.tagName==="INPUT",ot=L=>L.tagName==="STYLE",je=L=>L.tagName==="SCRIPT",$e=L=>L.tagName==="SELECT",Ke=L=>L.tagName==="SLOT",Ge=L=>L.tagName==="IFRAME",ut=(...L)=>console.warn(Y,...L);function Lt(L){var U;const $=(U=L==null?void 0:L.createElement)==null?void 0:U.call(L,"canvas");return $&&($.height=$.width=1),!!$&&"toDataURL"in $&&!!$.toDataURL("image/webp").includes("image/webp")}const It=L=>L.startsWith("data:");function Tt(L,U){if(L.match(/^[a-z]+:\/\//i))return L;if(ve&&L.match(/^\/\//))return window.location.protocol+L;if(L.match(/^[a-z]+:/i)||!ve)return L;const $=Rt().implementation.createHTMLDocument(),K=$.createElement("base"),Ne=$.createElement("a");return $.head.appendChild(K),$.body.appendChild(Ne),U&&(K.href=U),Ne.href=L,Ne.href}function Rt(L){var U;return(U=L&&ne(L)?L==null?void 0:L.ownerDocument:L)!=null?U:window.document}const $t="http://www.w3.org/2000/svg";function _t(L,U,$){const K=Rt($).createElementNS($t,"svg");return K.setAttributeNS(null,"width",L.toString()),K.setAttributeNS(null,"height",U.toString()),K.setAttributeNS(null,"viewBox",`0 0 ${L} ${U}`),K}function Ot(L,U){let $=new XMLSerializer().serializeToString(L);return U&&($=$.replace(/[\u0000-\u0008\v\f\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent($)}`}function Ze(L,U="image/png",$=1){return m(this,null,function*(){try{return yield new Promise((K,Ne)=>{L.toBlob(Se=>{Se?K(Se):Ne(new Error("Blob is null"))},U,$)})}catch(K){if(xe)return jn(L.toDataURL(U,$));throw K}})}function jn(L){var U,$;const[K,Ne]=L.split(","),Se=($=(U=K.match(/data:(.+);/))==null?void 0:U[1])!=null?$:void 0,le=window.atob(Ne),Ie=le.length,Re=new Uint8Array(Ie);for(let Ue=0;Ue<Ie;Ue+=1)Re[Ue]=le.charCodeAt(Ue);return new Blob([Re],{type:Se})}function Vt(L,U){return new Promise(($,K)=>{const Ne=new FileReader;Ne.onload=()=>$(Ne.result),Ne.onerror=()=>K(Ne.error),Ne.onabort=()=>K(new Error(`Failed read blob to ${U}`)),U==="dataUrl"?Ne.readAsDataURL(L):U==="arrayBuffer"&&Ne.readAsArrayBuffer(L)})}const wr=L=>Vt(L,"dataUrl"),tn=L=>Vt(L,"arrayBuffer");function Jt(L,U){const $=Rt(U).createElement("img");return $.decoding="sync",$.loading="eager",$.src=L,$}function Gn(L,U){return new Promise($=>{const{timeout:K,ownerDocument:Ne,onError:Se,onWarn:le}=U??{},Ie=typeof L=="string"?Jt(L,Rt(Ne)):L;let Re=null,Ue=null;function ze(){$(Ie),Re&&clearTimeout(Re),Ue==null||Ue()}if(K&&(Re=setTimeout(ze,K)),ht(Ie)){const rt=Ie.currentSrc||Ie.src;if(!rt)return Ie.poster?Gn(Ie.poster,U).then($):ze();if(Ie.readyState>=2)return ze();const lt=ze,ct=it=>{le==null||le("Failed video load",rt,it),Se==null||Se(it),ze()};Ue=()=>{Ie.removeEventListener("loadeddata",lt),Ie.removeEventListener("error",ct)},Ie.addEventListener("loadeddata",lt,{once:!0}),Ie.addEventListener("error",ct,{once:!0})}else{const rt=he(Ie)?Ie.href.baseVal:Ie.currentSrc||Ie.src;if(!rt)return ze();const lt=()=>m(this,null,function*(){if(qe(Ie)&&"decode"in Ie)try{yield Ie.decode()}catch(it){le==null||le("Failed to decode image, trying to render anyway",Ie.dataset.originalSrc||rt,it)}ze()}),ct=it=>{le==null||le("Failed image load",Ie.dataset.originalSrc||rt,it),ze()};if(qe(Ie)&&Ie.complete)return lt();Ue=()=>{Ie.removeEventListener("load",lt),Ie.removeEventListener("error",ct)},Ie.addEventListener("load",lt,{once:!0}),Ie.addEventListener("error",ct,{once:!0})}})}function Wt(L,U){return m(this,null,function*(){Ve(L)&&(qe(L)||ht(L)?yield Gn(L,U):yield Promise.all(["img","video"].flatMap($=>Array.from(L.querySelectorAll($)).map(K=>Gn(K,U)))))})}const la=function(){let L=0;const U=()=>`0000${(Math.random()*h(36,4)<<0).toString(36)}`.slice(-4);return()=>(L+=1,`u${U()}${L}`)}();function hn(L){return L==null?void 0:L.split(",").map(U=>U.trim().replace(/"|'/g,"").toLowerCase()).filter(Boolean)}let pr=0;function Jr(L){const U=`${Y}[#${pr}]`;return pr++,{time:$=>L&&console.time(`${U} ${$}`),timeEnd:$=>L&&console.timeEnd(`${U} ${$}`),warn:(...$)=>L&&ut(...$)}}function gn(L){return{cache:L?"no-cache":"force-cache"}}function ft(L,U){return m(this,null,function*(){return B(L)?L:Ht(L,b(v({},U),{autoDestruct:!0}))})}function Ht(L,U){return m(this,null,function*(){var $,K,Ne,Se,le;const{scale:Ie=1,workerUrl:Re,workerNumber:Ue=1}=U||{},ze=!!(U!=null&&U.debug),rt=($=U==null?void 0:U.features)!=null?$:!0,lt=(K=L.ownerDocument)!=null?K:ve?window.document:void 0,ct=(Se=(Ne=L.ownerDocument)==null?void 0:Ne.defaultView)!=null?Se:ve?window:void 0,it=new Map,bt=b(v({width:0,height:0,quality:1,type:"image/png",scale:Ie,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:ze,fetch:v({requestInit:gn((le=U==null?void 0:U.fetch)==null?void 0:le.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1},U==null?void 0:U.fetch),fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:Ue,onCloneEachNode:null,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1},U),{__CONTEXT__:!0,log:Jr(ze),node:L,ownerDocument:lt,ownerWindow:ct,dpi:Ie===1?null:96*Ie,svgStyleElement:ua(lt),svgDefsElement:lt==null?void 0:lt.createElementNS($t,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...Array.from({length:ge&&Re&&Ue?Ue:0})].map(()=>{try{const Gt=new Worker(Re);return Gt.onmessage=mt=>m(this,null,function*(){var Xt,Kt,Zt,Lr;const{url:Za,result:Mo}=mt.data;Mo?(Kt=(Xt=it.get(Za))==null?void 0:Xt.resolve)==null||Kt.call(Xt,Mo):(Lr=(Zt=it.get(Za))==null?void 0:Zt.reject)==null||Lr.call(Zt,new Error(`Error receiving message from worker: ${Za}`))}),Gt.onmessageerror=mt=>{var Xt,Kt;const{url:Zt}=mt.data;(Kt=(Xt=it.get(Zt))==null?void 0:Xt.reject)==null||Kt.call(Xt,new Error(`Error receiving message from worker: ${Zt}`))},Gt}catch(Gt){return bt.log.warn("Failed to new Worker",Gt),null}}).filter(Boolean),fontFamilies:new Map,fontCssTexts:new Map,acceptOfImage:`${[Lt(lt)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:it,drawImageCount:0,tasks:[],features:rt,isEnable:Gt=>{var mt,Xt;return Gt==="restoreScrollPosition"?typeof rt=="boolean"?!1:(mt=rt[Gt])!=null?mt:!1:typeof rt=="boolean"?rt:(Xt=rt[Gt])!=null?Xt:!0},shadowRoots:[]});bt.log.time("wait until load"),yield Wt(L,{timeout:bt.timeout,onWarn:bt.log.warn}),bt.log.timeEnd("wait until load");const{width:xt,height:jt}=Tn(L,bt);return bt.width=xt,bt.height=jt,bt})}function ua(L){if(!L)return;const U=L.createElement("style"),$=U.ownerDocument.createTextNode(`
.______background-clip--text {
  background-clip: text;
  -webkit-background-clip: text;
}
`);return U.appendChild($),U}function Tn(L,U){let{width:$,height:K}=U;if(ne(L)&&(!$||!K)){const Ne=L.getBoundingClientRect();$=$||Ne.width||Number(L.getAttribute("width"))||0,K=K||Ne.height||Number(L.getAttribute("height"))||0}return{width:$,height:K}}function Mr(L,U){return m(this,null,function*(){const{log:$,timeout:K,drawImageCount:Ne,drawImageInterval:Se}=U;$.time("image to canvas");const le=yield Gn(L,{timeout:K,onWarn:U.log.warn}),{canvas:Ie,context2d:Re}=Er(L.ownerDocument,U),Ue=()=>{try{Re==null||Re.drawImage(le,0,0,Ie.width,Ie.height)}catch(ze){U.log.warn("Failed to drawImage",ze)}};if(Ue(),U.isEnable("fixSvgXmlDecode"))for(let ze=0;ze<Ne;ze++)yield new Promise(rt=>{setTimeout(()=>{Ue(),rt()},ze+Se)});return U.drawImageCount=0,$.timeEnd("image to canvas"),Ie})}function Er(L,U){const{width:$,height:K,scale:Ne,backgroundColor:Se,maximumCanvasSize:le}=U,Ie=L.createElement("canvas");Ie.width=Math.floor($*Ne),Ie.height=Math.floor(K*Ne),Ie.style.width=`${$}px`,Ie.style.height=`${K}px`,le&&(Ie.width>le||Ie.height>le)&&(Ie.width>le&&Ie.height>le?Ie.width>Ie.height?(Ie.height*=le/Ie.width,Ie.width=le):(Ie.width*=le/Ie.height,Ie.height=le):Ie.width>le?(Ie.height*=le/Ie.width,Ie.width=le):(Ie.width*=le/Ie.height,Ie.height=le));const Re=Ie.getContext("2d");return Re&&Se&&(Re.fillStyle=Se,Re.fillRect(0,0,Ie.width,Ie.height)),{canvas:Ie,context2d:Re}}function vt(L,U){if(L.ownerDocument)try{const Se=L.toDataURL();if(Se!=="data:,")return Jt(Se,L.ownerDocument)}catch(Se){U.log.warn("Failed to clone canvas",Se)}const $=L.cloneNode(!1),K=L.getContext("2d"),Ne=$.getContext("2d");try{return K&&Ne&&Ne.putImageData(K.getImageData(0,0,L.width,L.height),0,0),$}catch(Se){U.log.warn("Failed to clone canvas",Se)}return $}function Sr(L,U){var $;try{if(($=L==null?void 0:L.contentDocument)!=null&&$.body)return Io(L.contentDocument.body,U)}catch(K){U.log.warn("Failed to clone iframe",K)}return L.cloneNode(!1)}function Tr(L){const U=L.cloneNode(!1);return L.currentSrc&&L.currentSrc!==L.src&&(U.src=L.currentSrc,U.srcset=""),U.loading==="lazy"&&(U.loading="eager"),U}function Kn(L,U){return m(this,null,function*(){if(L.ownerDocument&&!L.currentSrc&&L.poster)return Jt(L.poster,L.ownerDocument);const $=L.cloneNode(!1);$.crossOrigin="anonymous",L.currentSrc&&L.currentSrc!==L.src&&($.src=L.currentSrc);const K=$.ownerDocument;if(K){let Ne=!0;if(yield Gn($,{onError:()=>Ne=!1,onWarn:U.log.warn}),!Ne)return L.poster?Jt(L.poster,L.ownerDocument):$;$.currentTime=L.currentTime,yield new Promise(le=>{$.addEventListener("seeked",le,{once:!0})});const Se=K.createElement("canvas");Se.width=L.offsetWidth,Se.height=L.offsetHeight;try{const le=Se.getContext("2d");le&&le.drawImage($,0,0,Se.width,Se.height)}catch(le){return U.log.warn("Failed to clone video",le),L.poster?Jt(L.poster,L.ownerDocument):$}return vt(Se,U)}return $})}function Ln(L,U){return ke(L)?vt(L,U):Ge(L)?Sr(L,U):qe(L)?Tr(L):ht(L)?Kn(L,U):L.cloneNode(!1)}function bn(L){let U=L.sandbox;if(!U){const{ownerDocument:$}=L;try{$&&(U=$.createElement("iframe"),U.id=`__SANDBOX__${la()}`,U.width="0",U.height="0",U.style.visibility="hidden",U.style.position="fixed",$.body.appendChild(U),U.srcdoc='<!DOCTYPE html><meta charset="UTF-8"><title></title><body>',L.sandbox=U)}catch(K){L.log.warn("Failed to getSandBox",K)}}return U}const sr=["width","height","-webkit-text-fill-color"],$a=["stroke","fill"];function Or(L,U,$){const{defaultComputedStyles:K}=$,Ne=L.nodeName.toLowerCase(),Se=fe(L)&&Ne!=="svg",le=Se?$a.map(bt=>[bt,L.getAttribute(bt)]).filter(([,bt])=>bt!==null):[],Ie=[Se&&"svg",Ne,le.map((bt,xt)=>`${bt}=${xt}`).join(","),U].filter(Boolean).join(":");if(K.has(Ie))return K.get(Ie);const Re=bn($),Ue=Re==null?void 0:Re.contentWindow;if(!Ue)return new Map;const ze=Ue==null?void 0:Ue.document;let rt,lt;Se?(rt=ze.createElementNS($t,"svg"),lt=rt.ownerDocument.createElementNS(rt.namespaceURI,Ne),le.forEach(([bt,xt])=>{lt.setAttributeNS(null,bt,xt)}),rt.appendChild(lt)):rt=lt=ze.createElement(Ne),lt.textContent=" ",ze.body.appendChild(rt);const ct=Ue.getComputedStyle(lt,U),it=new Map;for(let bt=ct.length,xt=0;xt<bt;xt++){const jt=ct.item(xt);sr.includes(jt)||it.set(jt,ct.getPropertyValue(jt))}return ze.body.removeChild(rt),K.set(Ie,it),it}function hr(L,U,$){var K;const Ne=new Map,Se=[],le=new Map;if($)for(const Re of $)Ie(Re);else for(let Re=L.length,Ue=0;Ue<Re;Ue++){const ze=L.item(Ue);Ie(ze)}for(let Re=Se.length,Ue=0;Ue<Re;Ue++)(K=le.get(Se[Ue]))==null||K.forEach((ze,rt)=>Ne.set(rt,ze));function Ie(Re){const Ue=L.getPropertyValue(Re),ze=L.getPropertyPriority(Re),rt=Re.lastIndexOf("-"),lt=rt>-1?Re.substring(0,rt):void 0;if(lt){let ct=le.get(lt);ct||(ct=new Map,le.set(lt,ct)),ct.set(Re,[Ue,ze])}U.get(Re)===Ue&&!ze||(lt?Se.push(lt):Ne.set(Re,[Ue,ze]))}return Ne}function xr(L,U,$,K){var Ne,Se,le,Ie;const{ownerWindow:Re,includeStyleProperties:Ue,currentParentNodeStyle:ze}=K,rt=U.style,lt=Re.getComputedStyle(L),ct=Or(L,null,K);ze==null||ze.forEach((bt,xt)=>{ct.delete(xt)});const it=hr(lt,ct,Ue);it.delete("transition-property"),it.delete("all"),it.delete("d"),it.delete("content"),$&&(it.delete("margin-top"),it.delete("margin-right"),it.delete("margin-bottom"),it.delete("margin-left"),it.delete("margin-block-start"),it.delete("margin-block-end"),it.delete("margin-inline-start"),it.delete("margin-inline-end"),it.set("box-sizing",["border-box",""])),((Ne=it.get("background-clip"))==null?void 0:Ne[0])==="text"&&U.classList.add("______background-clip--text"),Le&&(it.has("font-kerning")||it.set("font-kerning",["normal",""]),(((Se=it.get("overflow-x"))==null?void 0:Se[0])==="hidden"||((le=it.get("overflow-y"))==null?void 0:le[0])==="hidden")&&((Ie=it.get("text-overflow"))==null?void 0:Ie[0])==="ellipsis"&&L.scrollWidth===L.clientWidth&&it.set("text-overflow",["clip",""]));for(let bt=rt.length,xt=0;xt<bt;xt++)rt.removeProperty(rt.item(xt));return it.forEach(([bt,xt],jt)=>{rt.setProperty(jt,bt,xt)}),it}function Nr(L,U){(z(L)||kt(L)||$e(L))&&U.setAttribute("value",L.value)}const Rr=[":before",":after"],mr=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function jr(L,U,$,K,Ne){const{ownerWindow:Se,svgStyleElement:le,svgStyles:Ie,currentNodeStyle:Re}=K;if(!le||!Se)return;function Ue(ze){var rt;const lt=Se.getComputedStyle(L,ze);let ct=lt.getPropertyValue("content");if(!ct||ct==="none")return;Ne==null||Ne(ct),ct=ct.replace(/(')|(")|(counter\(.+\))/g,"");const it=[la()],bt=Or(L,ze,K);Re==null||Re.forEach((Xt,Kt)=>{bt.delete(Kt)});const xt=hr(lt,bt,K.includeStyleProperties);xt.delete("content"),xt.delete("-webkit-locale"),((rt=xt.get("background-clip"))==null?void 0:rt[0])==="text"&&U.classList.add("______background-clip--text");const jt=[`content: '${ct}';`];if(xt.forEach(([Xt,Kt],Zt)=>{jt.push(`${Zt}: ${Xt}${Kt?" !important":""};`)}),jt.length===1)return;try{U.className=[U.className,...it].join(" ")}catch(Xt){K.log.warn("Failed to copyPseudoClass",Xt);return}const Gt=jt.join(`
  `);let mt=Ie.get(Gt);mt||(mt=[],Ie.set(Gt,mt)),mt.push(`.${it[0]}:${ze}`)}Rr.forEach(Ue),$&&mr.forEach(Ue)}const ca=new Set(["symbol"]);function ka(L,U,$,K,Ne){return m(this,null,function*(){if(ne($)&&(ot($)||je($))||K.filter&&!K.filter($))return;ca.has(U.nodeName)||ca.has($.nodeName)?K.currentParentNodeStyle=void 0:K.currentParentNodeStyle=K.currentNodeStyle;const Se=yield Io($,K,!1,Ne);K.isEnable("restoreScrollPosition")&&Wa(L,Se),U.appendChild(Se)})}function Ia(L,U,$,K){return m(this,null,function*(){var Ne;let Se=L.firstChild;ne(L)&&L.shadowRoot&&(Se=(Ne=L.shadowRoot)==null?void 0:Ne.firstChild,$.shadowRoots.push(L.shadowRoot));for(let le=Se;le;le=le.nextSibling)if(!Be(le))if(ne(le)&&Ke(le)&&typeof le.assignedNodes=="function"){const Ie=le.assignedNodes();for(let Re=0;Re<Ie.length;Re++)yield ka(L,U,Ie[Re],$,K)}else yield ka(L,U,le,$,K)})}function Wa(L,U){if(!Ve(L)||!Ve(U))return;const{scrollTop:$,scrollLeft:K}=L;if(!$&&!K)return;const{transform:Ne}=U.style,Se=new DOMMatrix(Ne),{a:le,b:Ie,c:Re,d:Ue}=Se;Se.a=1,Se.b=0,Se.c=0,Se.d=1,Se.translateSelf(-K,-$),Se.a=le,Se.b=Ie,Se.c=Re,Se.d=Ue,U.style.transform=Se.toString()}function Ha(L,U){const{backgroundColor:$,width:K,height:Ne,style:Se}=U,le=L.style;if($&&le.setProperty("background-color",$,"important"),K&&le.setProperty("width",`${K}px`,"important"),Ne&&le.setProperty("height",`${Ne}px`,"important"),Se)for(const Ie in Se)le[Ie]=Se[Ie]}const Xo=/^[\w-:]+$/;function Io(L,U,$=!1,K){return m(this,null,function*(){var Ne,Se,le,Ie;const{ownerDocument:Re,ownerWindow:Ue,fontFamilies:ze,onCloneEachNode:rt}=U;if(Re&&Je(L))return K&&/\S/.test(L.data)&&K(L.data),Re.createTextNode(L.data);if(Re&&Ue&&ne(L)&&(Ve(L)||fe(L))){const ct=yield Ln(L,U);if(U.isEnable("removeAbnormalAttributes")){const mt=ct.getAttributeNames();for(let Xt=mt.length,Kt=0;Kt<Xt;Kt++){const Zt=mt[Kt];Xo.test(Zt)||ct.removeAttribute(Zt)}}const it=U.currentNodeStyle=xr(L,ct,$,U);$&&Ha(ct,U);let bt=!1;if(U.isEnable("copyScrollbar")){const mt=[(Ne=it.get("overflow-x"))==null?void 0:Ne[0],(Se=it.get("overflow-y"))==null?void 0:Se[0]];bt=mt.includes("scroll")||(mt.includes("auto")||mt.includes("overlay"))&&(L.scrollHeight>L.clientHeight||L.scrollWidth>L.clientWidth)}const xt=(le=it.get("text-transform"))==null?void 0:le[0],jt=hn((Ie=it.get("font-family"))==null?void 0:Ie[0]),Gt=jt?mt=>{xt==="uppercase"?mt=mt.toUpperCase():xt==="lowercase"?mt=mt.toLowerCase():xt==="capitalize"&&(mt=mt[0].toUpperCase()+mt.substring(1)),jt.forEach(Xt=>{let Kt=ze.get(Xt);Kt||ze.set(Xt,Kt=new Set),mt.split("").forEach(Zt=>Kt.add(Zt))})}:void 0;return jr(L,ct,bt,U,Gt),Nr(L,ct),ht(L)||(yield Ia(L,ct,U,Gt)),yield rt==null?void 0:rt(ct),ct}const lt=L.cloneNode(!1);return yield Ia(L,lt,U),yield rt==null?void 0:rt(lt),lt})}function Ko(L){if(L.ownerDocument=void 0,L.ownerWindow=void 0,L.svgStyleElement=void 0,L.svgDefsElement=void 0,L.svgStyles.clear(),L.defaultComputedStyles.clear(),L.sandbox){try{L.sandbox.remove()}catch(U){L.log.warn("Failed to destroyContext",U)}L.sandbox=void 0}L.workers=[],L.fontFamilies.clear(),L.fontCssTexts.clear(),L.requests.clear(),L.tasks=[],L.shadowRoots=[]}function Ga(L){const U=L,{url:$,timeout:K,responseType:Ne}=U,Se=f(U,["url","timeout","responseType"]),le=new AbortController,Ie=K?setTimeout(()=>le.abort(),K):void 0;return fetch($,v({signal:le.signal},Se)).then(Re=>{if(!Re.ok)throw new Error("Failed fetch, not 2xx response",{cause:Re});switch(Ne){case"arrayBuffer":return Re.arrayBuffer();case"dataUrl":return Re.blob().then(wr);case"text":default:return Re.text()}}).finally(()=>clearTimeout(Ie))}function da(L,U){const{url:$,requestType:K="text",responseType:Ne="text",imageDom:Se}=U;let le=$;const{timeout:Ie,acceptOfImage:Re,requests:Ue,fetchFn:ze,fetch:{requestInit:rt,bypassingCache:lt,placeholderImage:ct},font:it,workers:bt,fontFamilies:xt}=L;K==="image"&&(Ye||P)&&L.drawImageCount++;let jt=Ue.get($);if(!jt){lt&&lt instanceof RegExp&&lt.test(le)&&(le+=(/\?/.test(le)?"&":"?")+new Date().getTime());const Gt=K.startsWith("font")&&it&&it.minify,mt=new Set;Gt&&K.split(";")[1].split(",").forEach(Zt=>{xt.has(Zt)&&xt.get(Zt).forEach(Lr=>mt.add(Lr))});const Xt=Gt&&mt.size,Kt=v({url:le,timeout:Ie,responseType:Xt?"arrayBuffer":Ne,headers:K==="image"?{accept:Re}:void 0},rt);jt={type:K,resolve:void 0,reject:void 0,response:null},jt.response=m(this,null,function*(){if(ze&&K==="image"){const Zt=yield ze($);if(Zt)return Zt}return!Ye&&$.startsWith("http")&&bt.length?new Promise((Zt,Lr)=>{bt[Ue.size&bt.length-1].postMessage(v({rawUrl:$},Kt)),jt.resolve=Zt,jt.reject=Lr}):Ga(Kt)}).catch(Zt=>{if(Ue.delete($),K==="image"&&ct)return L.log.warn("Failed to fetch image base64, trying to use placeholder image",le),typeof ct=="string"?ct:ct(Se);throw Zt}),Ue.set($,jt)}return jt.response}function Zo(L,U,$,K){return m(this,null,function*(){if(!Ya(L))return L;for(const[Ne,Se]of ei(L,U))try{const le=yield da($,{url:Se,requestType:K?"image":"text",responseType:"dataUrl"});L=L.replace(Zi(Ne),`$1${le}$3`)}catch(le){$.log.warn("Failed to fetch css data url",Ne,le)}return L})}function Ya(L){return/url\((['"]?)([^'"]+?)\1\)/.test(L)}const Qo=/url\((['"]?)([^'"]+?)\1\)/g;function ei(L,U){const $=[];return L.replace(Qo,(K,Ne,Se)=>($.push([Se,Tt(Se,U)]),K)),$.filter(([K])=>!It(K))}function Zi(L){const U=L.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${U})(['"]?\\))`,"g")}const Ja=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function Qi(L,U){return Ja.map($=>{const K=L.getPropertyValue($);return!K||K==="none"?null:((Ye||P)&&U.drawImageCount++,Zo(K,null,U,!0).then(Ne=>{!Ne||K===Ne||L.setProperty($,Ne,L.getPropertyPriority($))}))}).filter(Boolean)}function vn(L,U){if(qe(L)){const $=L.currentSrc||L.src;if(!It($))return[da(U,{url:$,imageDom:L,requestType:"image",responseType:"dataUrl"}).then(K=>{K&&(L.srcset="",L.dataset.originalSrc=$,L.src=K||"")})];(Ye||P)&&U.drawImageCount++}else if(fe(L)&&!It(L.href.baseVal)){const $=L.href.baseVal;return[da(U,{url:$,imageDom:L,requestType:"image",responseType:"dataUrl"}).then(K=>{K&&(L.dataset.originalSrc=$,L.href.baseVal=K||"")})]}return[]}function ti(L,U){var $;const{ownerDocument:K,svgDefsElement:Ne}=U,Se=($=L.getAttribute("href"))!=null?$:L.getAttribute("xlink:href");if(!Se)return[];const[le,Ie]=Se.split("#");if(Ie){const Re=`#${Ie}`,Ue=U.shadowRoots.reduce((ze,rt)=>ze??rt.querySelector(`svg ${Re}`),K==null?void 0:K.querySelector(`svg ${Re}`));if(le&&L.setAttribute("href",Re),Ne!=null&&Ne.querySelector(Re))return[];if(Ue)return Ne==null||Ne.appendChild(Ue.cloneNode(!0)),[];if(le)return[da(U,{url:le,responseType:"text"}).then(ze=>{Ne==null||Ne.insertAdjacentHTML("beforeend",ze)})]}return[]}function Po(L,U){const{tasks:$}=U;ne(L)&&((qe(L)||he(L))&&$.push(...vn(L,U)),me(L)&&$.push(...ti(L,U))),Ve(L)&&$.push(...Qi(L.style,U)),L.childNodes.forEach(K=>{Po(K,U)})}function ni(L,U){return m(this,null,function*(){const{ownerDocument:$,svgStyleElement:K,fontFamilies:Ne,fontCssTexts:Se,tasks:le,font:Ie}=U;if(!(!$||!K||!Ne.size))if(Ie&&Ie.cssText){const Re=Ka(Ie.cssText,U);K.appendChild($.createTextNode(`${Re}
`))}else{const Re=Array.from($.styleSheets).filter(Ue=>{try{return"cssRules"in Ue&&!!Ue.cssRules.length}catch(ze){return U.log.warn(`Error while reading CSS rules from ${Ue.href}`,ze),!1}});yield Promise.all(Re.flatMap(Ue=>Array.from(Ue.cssRules).map((ze,rt)=>m(this,null,function*(){if(X(ze)){let lt=rt+1;const ct=ze.href;let it="";try{it=yield da(U,{url:ct,requestType:"text",responseType:"text"})}catch(xt){U.log.warn(`Error fetch remote css import from ${ct}`,xt)}const bt=it.replace(Qo,(xt,jt,Gt)=>xt.replace(Gt,Tt(Gt,ct)));for(const xt of Ar(bt))try{Ue.insertRule(xt,xt.startsWith("@import")?lt+=1:Ue.cssRules.length)}catch(jt){U.log.warn("Error inserting rule from remote css import",{rule:xt,error:jt})}}})))),Re.flatMap(Ue=>Array.from(Ue.cssRules)).filter(Ue=>{var ze;return q(Ue)&&Ya(Ue.style.getPropertyValue("src"))&&((ze=hn(Ue.style.getPropertyValue("font-family")))==null?void 0:ze.some(rt=>Ne.has(rt)))}).forEach(Ue=>{const ze=Ue,rt=Se.get(ze.cssText);rt?K.appendChild($.createTextNode(`${rt}
`)):le.push(Zo(ze.cssText,ze.parentStyleSheet?ze.parentStyleSheet.href:null,U).then(lt=>{lt=Ka(lt,U),Se.set(ze.cssText,lt),K.appendChild($.createTextNode(`${lt}
`))}))})}})}const Co=/(\/\*[\s\S]*?\*\/)/g,ri=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;function Ar(L){if(L==null)return[];const U=[];let $=L.replace(Co,"");for(;;){const Se=ri.exec($);if(!Se)break;U.push(Se[0])}$=$.replace(ri,"");const K=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,Ne=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let Se=K.exec($);if(Se)Ne.lastIndex=K.lastIndex;else if(Se=Ne.exec($),Se)K.lastIndex=Ne.lastIndex;else break;U.push(Se[0])}return U}const Xa=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Zn=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Ka(L,U){const{font:$}=U,K=$?$==null?void 0:$.preferredFormat:void 0;return K?L.replace(Zn,Ne=>{for(;;){const[Se,,le]=Xa.exec(Ne)||[];if(!le)return"";if(le===K)return`src: ${Se};`}}):L}function Fo(L,U){return m(this,null,function*(){const $=yield ft(L,U);if(ne($.node)&&fe($.node))return $.node;const{ownerDocument:K,log:Ne,tasks:Se,svgStyleElement:le,svgDefsElement:Ie,svgStyles:Re,font:Ue,progress:ze,autoDestruct:rt,onCloneNode:lt,onEmbedNode:ct,onCreateForeignObjectSvg:it}=$;Ne.time("clone node");const bt=yield Io($.node,$,!0);if(le&&K){let Xt="";Re.forEach((Kt,Zt)=>{Xt+=`${Kt.join(`,
`)} {
  ${Zt}
}
`}),le.appendChild(K.createTextNode(Xt))}Ne.timeEnd("clone node"),yield lt==null?void 0:lt(bt),Ue!==!1&&ne(bt)&&(Ne.time("embed web font"),yield ni(bt,$),Ne.timeEnd("embed web font")),Ne.time("embed node"),Po(bt,$);const xt=Se.length;let jt=0;const Gt=()=>m(this,null,function*(){for(;;){const Xt=Se.pop();if(!Xt)break;try{yield Xt}catch(Kt){$.log.warn("Failed to run task",Kt)}ze==null||ze(++jt,xt)}});ze==null||ze(jt,xt),yield Promise.all([...Array.from({length:4})].map(Gt)),Ne.timeEnd("embed node"),yield ct==null?void 0:ct(bt);const mt=es(bt,$);return Ie&&mt.insertBefore(Ie,mt.children[0]),le&&mt.insertBefore(le,mt.children[0]),rt&&Ko($),yield it==null?void 0:it(mt),mt})}function es(L,U){const{width:$,height:K}=U,Ne=_t($,K,L.ownerDocument),Se=Ne.ownerDocument.createElementNS(Ne.namespaceURI,"foreignObject");return Se.setAttributeNS(null,"x","0%"),Se.setAttributeNS(null,"y","0%"),Se.setAttributeNS(null,"width","100%"),Se.setAttributeNS(null,"height","100%"),Se.append(L),Ne.appendChild(Se),Ne}function Pa(L,U){return m(this,null,function*(){var $;const K=yield ft(L,U),Ne=yield Fo(K),Se=Ot(Ne,K.isEnable("removeControlCharacter"));K.autoDestruct||(K.svgStyleElement=ua(K.ownerDocument),K.svgDefsElement=($=K.ownerDocument)==null?void 0:$.createElementNS($t,"defs"),K.svgStyles.clear());const le=Jt(Se,Ne.ownerDocument);return yield Mr(le,K)})}function ts(L,U){return m(this,null,function*(){const $=yield ft(L,U),{log:K,type:Ne,quality:Se,dpi:le}=$,Ie=yield Pa($);K.time("canvas to blob");const Re=yield Ze(Ie,Ne,Se);if(["image/png","image/jpeg"].includes(Ne)&&le){const Ue=yield tn(Re.slice(0,33));let ze=new Uint8Array(Ue);return Ne==="image/png"?ze=Z(ze,le):Ne==="image/jpeg"&&(ze=S(ze,le)),K.timeEnd("canvas to blob"),new Blob([ze,Re.slice(33)],{type:Ne})}return K.timeEnd("canvas to blob"),Re})}function Xr(L,U){return m(this,null,function*(){const $=yield ft(L,U),{log:K,quality:Ne,type:Se,dpi:le}=$,Ie=yield Pa($);K.time("canvas to data url");let Re=Ie.toDataURL(Se,Ne);if(["image/png","image/jpeg"].includes(Se)&&le&&xe&&de){const[Ue,ze]=Re.split(",");let rt=0,lt=!1;if(Se==="image/png"){const mt=te(ze);mt>=0?(rt=Math.ceil((mt+28)/3)*4,lt=!0):rt=33/3*4}else Se==="image/jpeg"&&(rt=18/3*4);const ct=ze.substring(0,rt),it=ze.substring(rt),bt=window.atob(ct),xt=new Uint8Array(bt.length);for(let mt=0;mt<xt.length;mt++)xt[mt]=bt.charCodeAt(mt);const jt=Se==="image/png"?Z(xt,le,lt):S(xt,le),Gt=window.btoa(String.fromCharCode(...jt));Re=[Ue,",",Gt,it].join("")}return K.timeEnd("canvas to data url"),Re})}function ai(L,U){return m(this,null,function*(){const $=yield ft(L,U),{width:K,height:Ne,ownerDocument:Se}=$,le=yield Xr($),Ie=_t(K,Ne,Se),Re=Ie.ownerDocument.createElementNS(Ie.namespaceURI,"image");return Re.setAttributeNS(null,"href",le),Re.setAttributeNS(null,"height","100%"),Re.setAttributeNS(null,"width","100%"),Ie.appendChild(Re),Ot(Ie,$.isEnable("removeControlCharacter"))})}function Do(L,U){return m(this,null,function*(){const $=yield ft(L,U),{ownerDocument:K,width:Ne,height:Se,scale:le,type:Ie}=$,Re=Ie==="image/svg+xml"?yield ai($):yield Xr($),Ue=Jt(Re,K);return Ue.width=Math.floor(Ne*le),Ue.height=Math.floor(Se*le),Ue.style.width=`${Ne}px`,Ue.style.height=`${Se}px`,Ue})}function ns(L,U){return m(this,null,function*(){return Xr(yield ft(L,b(v({},U),{type:"image/jpeg"})))})}function rs(L,U){return m(this,null,function*(){const $=yield ft(L,U),K=yield Pa($);return K.getContext("2d").getImageData(0,0,K.width,K.height).data})}function as(L,U){return m(this,null,function*(){return Xr(yield ft(L,b(v({},U),{type:"image/png"})))})}function Kr(L,U){return m(this,null,function*(){return Xr(yield ft(L,b(v({},U),{type:"image/webp"})))})}t.createContext=Ht,t.destroyContext=Ko,t.domToBlob=ts,t.domToCanvas=Pa,t.domToDataUrl=Xr,t.domToForeignObjectSvg=Fo,t.domToImage=Do,t.domToJpeg=ns,t.domToPixel=rs,t.domToPng=as,t.domToSvg=ai,t.domToWebp=Kr,t.loadMedia=Gn,t.waitUntilLoad=Wt,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})})(dm,$i);const Wf=(n,e)=>{const t=document.createElement("a"),r=new MouseEvent("click");t.download=`${e}_流程图`;const o=hh(n);t.href=URL.createObjectURL(o),t.dispatchEvent(r),t.remove()};async function fm(n,e,t){const r=await $i.domToPng(n,{scale:2,backgroundColor:"#fff",...t??{}});Wf(r,e)}async function pm(n,e,t){const r=await $i.domToJpeg(n,{scale:2,backgroundColor:"#fff",...t??{}});Wf(r,e)}async function hm(n,e,t){const r=await $i.domToJpeg(n,{scale:2,backgroundColor:"#fff",...t??{}}),o=new Nt("p","mm","a4"),a=new Image;a.src=r,await new Promise(y=>a.onload=y);const s=o.internal.pageSize.getWidth()-20,l=a.height*s/a.width,u=10,h=(o.internal.pageSize.getHeight()-l)/2;o.addImage(a,"JPEG",u,h,s,l),o.save(`${e}_流程图.pdf`)}const mm=n=>{const e=Mt();e.on(or.exportFile,r=>t(r));const t=async r=>{e.viewConfig.layout.add_show=!1;const o=e.flowDesigner.title;try{switch(r){case"png":await fm(n.value,o),Gr.success("导出成功");break;case"jpeg":await pm(n.value,o),Gr.success("导出成功");break;case"pdf":await hm(n.value,o),Gr.success("导出成功");break;default:}}finally{e.viewConfig.layout.add_show=!0}};return{downloadImg:t}},gm=We({__name:"Main",setup(n){const e=et(),{scaleStyle:t}=Zd(e),r=et();mm(e);const o=Mt(),{isPreview:a,isSelect:s}=Yr(),{visiblePop:l,insertRef:u,parentData:h}=ef(),y=Vl(),v=et();return zl(v),Qu(async()=>{await y.load()}),(b,f)=>(W(),Ce("div",null,[Pe("div",{class:"design",ref_key:"designRef",ref:v},[Sa((W(),Ce("div",{ref_key:"designWrapRef",ref:r,class:"design-wrap__dragScroll wf_draggable"},[Pe("div",{class:"design-wrap__scale wf_draggable",ref_key:"designScaleRef",ref:e,style:Ji(E(t))},[Array.isArray(E(o).nodes)?(W(!0),Ce(St,{key:0},Ut(E(o).nodes,(m,g)=>(W(),Ee(qi(E(Tu)(m.type)),{key:m.nodeId+g,nodeData:m},null,8,["nodeData"]))),128)):dt("",!0)],4)])),[[E(s2)]]),E(a)?(W(),Ee(td,{key:0,list:E(l2)},null,8,["list"])):E(s)?(W(),Ee(td,{key:1,list:E(u2)},null,8,["list"])):(W(),Ce(St,{key:2},[j(x2,{visible:E(l),"onUpdate:visible":f[0]||(f[0]=m=>cn(l)?l.value=m:null),parentData:E(h),insertRef:E(u)},null,8,["visible","parentData","insertRef"]),j(i0),j(u0),j(d0),j(p0),j(w2)],64)),j(b2)],512)]))}});const vm=We({__name:"LayoutWrap",setup(n){const e=Mt(),{isEdit:t}=Yr(),r=_e(()=>({"--wf-view-header":t.value?"48px":"0px"}));return(o,a)=>(W(),Ce("div",{class:"wf"},[E(e).flowLazy?dt("",!0):(W(),Ce(St,{key:0},[E(t)?(W(),Ee(i1,{key:0})):dt("",!0),j(gm,{style:Ji(r.value),class:"wf-body"},null,8,["style"])],64))]))}}),ym=()=>{const n=fr({errorMap:new Map,addError:e=>{n.errorMap.set(e.id,e)},delError:e=>{n.errorMap.has(e)&&n.errorMap.delete(e)},validateProcess:async e=>{switch(e.type){case nt.StartEvent:n.validateNode(e,h1);break;case nt.Approval:n.validateNode(e,m1);break;case nt.Condition:n.validateNode(e,v1);break;case nt.SubProcess:n.validateNode(e,y1);break}},validateNode:(e,t)=>{t.validate(e,r=>{if(Array.isArray(r)&&r.length>=1){const o={};r.forEach(a=>{a.field&&(o[a.field]=a.message??"字段信息异常")}),n.addError({id:e.nodeId,name:e.name,fields:o})}else n.delError(e.nodeId)})},async deepValidator(e){e.forEach(t=>{n.validateProcess(t),t.children.length>=1&&n.deepValidator(t.children)})},async validEntryId(e,t){const r=t.nodes.find(s=>s.type===nt.StartEvent),o=(r==null?void 0:r.nodeId)??"startEvent_Id",a=(r==null?void 0:r.nodeId)??"起始节点";f1.validate(e,s=>{if(Array.isArray(s)&&s.length>=1){const l={};s.forEach(u=>{u.field&&(l[u.field]=u.message??"字段信息异常")}),n.addError({id:o,name:a,fields:l})}else n.delError(o)})}});return n},bm=n=>{const e=fr({appId:(n==null?void 0:n.appId)??"",appEntryId:(n==null?void 0:n.entryId)??"",fields:[],fieldsVisible:[],fieldsEdit:[],fieldsSummary:[],dynamicFields:[],extractDynamicFields(){const t=[zt.department,zt.member,zt.cooperateEnterprise,zt.cooperatePersonnel,zt.input,zt.subform,zt.departmentSingle,zt.memberSingle],r=e.fields??[];e.dynamicFields=va(r,{excludeFilter(o,a){return!t.includes(o.type)}})},extractFieldControls(){const t=e.fields;e.fieldsVisible=Al(va(t));const r=[zt.autoNumber];e.fieldsEdit=Al(va(t,{excludeFilter(a,s){return!(s!=null&&s.isFormItem)||a.source===Nl.system||r.includes(a.type)}}));const o=[zt.autoNumber,zt.subform];e.fieldsSummary=va(t,{excludeFilter(a,s){var u;const l=Ui(a.fieldId,t);return!(s!=null&&s.isFormItem)||a.source===Nl.system||o.includes(a.type)||((u=l==null?void 0:l.parentField)==null?void 0:u.type)===zt.subform}})},getDefaultFields(t){const r=[nt.Approval],o=[];if(t===nt.StartEvent){let a=0;e.fieldsVisible.forEach(s=>{let l=0;e.fieldsSummary.some(h=>h.fieldId===s.fieldId)&&a<9&&(l+=Is.Summary,a+=1),o.push({id:s.fieldId,name:s.options.label,property:l.toString()})})}else if(r.includes(t)){const a=Is.Visible,s=0,l=Is.Required,u=Is.Summary,h=Is.Download;let y=0;e.fieldsVisible.forEach(v=>{let b=a;const f=e.fieldsEdit.find(g=>g.fieldId===v.fieldId);if(f){b+=s;const g=f.options;("required"in g?g.required:!1)&&(b+=l),v.type===zt.uploadFile&&(b+=h)}e.fieldsSummary.some(g=>g.fieldId===v.fieldId)&&y<9&&(b+=u,y+=1),o.push({id:v.fieldId,name:v.options.label,property:b.toString()})})}return o},renderFields(t){e.fields=An(t),e.extractDynamicFields(),e.extractFieldControls()},async renderEntry(t){var a;e.appEntryId=t;const r=await mh(t),o=((a=r==null?void 0:r.formJson)==null?void 0:a.fields)??[];e.renderFields(o)}});return e},_m=()=>{const n={__label__:"流程发起人",__id__:wt.creator},e=fr({dynamicTabs:[n,{__label__:"成员字段",__id__:wt.memberWidget},{__label__:"部门字段",__id__:wt.departmentWidget},{__label__:"部门主管",__id__:wt.orgManager},{__label__:"直属主管",__id__:wt.leader},{__label__:"协作企业",__id__:wt.corpCooperationWidget},{__label__:"协作个人",__id__:wt.userCooperationWidget},{__label__:"自定义",__id__:wt.custom}],ProcessSelectEnumList:[wt.memberWidget,wt.memberSingleWidget,wt.departmentWidget,wt.departmentSingleWidget,wt.corpCooperationWidget,wt.userCooperationWidget],fieldTypeMap:{[wt.departmentWidget]:zt.department,[wt.memberWidget]:zt.member,[wt.departmentSingleWidget]:zt.departmentSingle,[wt.memberSingleWidget]:zt.memberSingle,[wt.corpCooperationWidget]:zt.cooperateEnterprise,[wt.userCooperationWidget]:zt.cooperatePersonnel},getProcessSelectType(t){return gh(e.fieldTypeMap,o=>o===t)},getUserFieldType(t){return e.fieldTypeMap[t]??t},getSelectType(t){switch(t){case wt.departmentWidget:case wt.departmentSingleWidget:return oa.org;case wt.memberWidget:case wt.memberSingleWidget:return oa.member;case wt.corpCooperationWidget:return oa.corpCooperation;case wt.userCooperationWidget:return oa.userCooperation;default:return t}},convertToSelector(t){const r=t.type;return e.ProcessSelectEnumList.includes(r)?{id:`${r}.${t.id}`,type:oa.dynamic}:t},convertToProcessMember(t){if(t.type===oa.dynamic){const r=t.id.split("."),o=r[0];if(e.ProcessSelectEnumList.includes(o))return{type:r[0],id:r[1]}}return t},filterFieldsByType(t,r){const o=e.getUserFieldType(t);return o?va(r,{excludeFilter(s,l){return s.type!==o}}).map(s=>({__label__:s.options.label,__id__:`${t}.${s.fieldId}`})):void 0},getFieldsByType(t,r){return r?e.filterFieldsByType(t,r)??[]:[]},getFieldsByFieldType(t,r){return va(r,{excludeFilter(a,s){return a.type!==t}}).map(a=>{const s=Ui(a.fieldId,r);if(s&&s.parentField&&s.parentField.type==="subform"){const{type:l,options:u,fieldId:h}=s.parentField;return{__label__:`${u.label}.${a.options.label}`,__id__:`${l}@${h}-${a.fieldId}`}}return{__label__:a.options.label,__id__:`${t}@${a.fieldId}`}})},getDynamicTree(t){const r=t??[],o=[];return e.dynamicTabs.forEach(a=>{switch(a.__id__){case wt.creator:o.push({...a,isLeaf:!0,panelType:ga.default,children:[{...a}]});break;case wt.memberWidget:o.push({...a,isLeaf:!0,panelType:ga.default,children:[...e.getFieldsByType(wt.memberWidget,r),...e.getFieldsByType(wt.memberSingleWidget,r)]});break;case wt.departmentWidget:o.push({...a,isLeaf:!0,panelType:ga.default,children:[...e.getFieldsByType(wt.departmentWidget,r),...e.getFieldsByType(wt.departmentSingleWidget,r)]});break;case wt.corpCooperationWidget:o.push({...a,isLeaf:!0,panelType:ga.default,children:[...e.getFieldsByType(wt.corpCooperationWidget,r)]});break;case wt.userCooperationWidget:o.push({...a,isLeaf:!0,panelType:ga.default,children:[...e.getFieldsByType(wt.userCooperationWidget,r)]});break;case wt.leader:o.push({...a,panelType:ga.secondaryMenu,children:[{...n,__id__:`${a.__id__}@${n.__id__}`,isLeaf:!0,children:[...Ou(`${a.__id__}@${n.__id__}`)]}]});break;case wt.orgManager:o.push({...a,panelType:ga.secondaryMenu,children:[{...n,__id__:`${a.__id__}@${n.__id__}`,isLeaf:!0,children:[...Ou(`${a.__id__}@${n.__id__}`,"部门主管")]},...I2(zt.department,wt.orgManager,r)]});break;case wt.custom:o.push({...a,isLeaf:!0,panelType:ga.singleChoiceLeader,children:[...e.getFieldsByFieldType(zt.input,r).map(s=>({...s,__id__:`${wt.custom}@${yo.approver}@${s.__id__}`,__label__:`负责人(${s.__label__})`})),...e.getFieldsByFieldType(zt.input,r).map(s=>({...s,__id__:`${wt.custom}@${yo.support}@${s.__id__}`,__label__:`辅助信息(${s.__label__})`}))]});break}}),o},getDynamicOption(t){const r=e.getDynamicTree(t),o=[];return function a(s){for(let l=0;l<s.length;l++){const u=s[l];if(u.isLeaf)if(u.__id__===wt.creator){const h={id:u.__id__,name:u.__label__+" | "+u.__label__};o.push(h)}else u.children.forEach(h=>{const y={id:h.__id__,name:u.__label__+" | "+h.__label__};o.push(y)});else u.children.length>=1&&a(u.children)}}(r),o}});return e},wm=()=>{const n=fr({config:{},nodes:[],renderOldData({config:e,nodes:t}){n.config=An(e),n.nodes=t},compareVal(e,t){return ku(e.config,t.config)&&ku(e.nodes,t.nodes)}});return n},Sm=n=>{vo.confirm("发布后，新提交的数据将按此版本流程进行流转。确定要发布流程吗？","发布流程确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",distinguishCancelAndClose:!0,closeOnClickModal:!1,closeOnHashChange:!1,beforeClose(e,t,r){e==="confirm"?(t.confirmButtonLoading=!0,n().then(()=>{r()}).finally(()=>{t.confirmButtonLoading=!1})):(e==="cancel"||e==="close")&&r()}})},xm=n=>{vo.confirm("当前流程有更改尚未保存，需先保存再发布投入使用。您是否需要保存？","是否保存此次更改?",{confirmButtonText:"保存并继续",cancelButtonText:"不保存",type:"warning",distinguishCancelAndClose:!0,closeOnClickModal:!1,closeOnHashChange:!1,beforeClose(e,t,r){e==="confirm"?(t.confirmButtonLoading=!0,n().then(()=>{r()}).catch(()=>{Gr.error("验证失败")}).finally(()=>{t.confirmButtonLoading=!1,r()})):(e==="cancel"||e==="close")&&r()}})},Nm=({save:n,release:e})=>{const t=et(!1);return new Promise((r,o)=>{vo({title:"是否保存此次更改？",showCancelButton:!1,showConfirmButton:!1,message:()=>Si("div",null,[Si("p",null,"当前流程有更改尚未保存和发布，需保存并发布后才可投入使用。您在离开当前页面前是否需要保存这些更改？"),Si("div",{style:"text-align:right;margin-top:20px;"},[Si(Hn,{type:"default",loading:t.value,onClick:()=>{vo.close(),r()}},()=>"放弃保存"),Si(Hn,{type:"primary",loading:t.value,onClick:async()=>{t.value=!0,n().then(()=>{setTimeout(()=>{t.value=!1},1e3),r()}).catch(()=>{o(),t.value=!1}),vo.close()}},()=>"仅保存"),Si(Hn,{type:"primary",loading:t.value,onClick:()=>{t.value=!0,n().then(()=>e()).then(()=>{vo.close(),r(),t.value=!1}).catch(()=>{o(),t.value=!1}),vo.close()}},()=>"保存并发布")])])})})},Am=n=>{const e=fr({flowLazy:!0,flowDesigner:n.flowDesigner,mode:n.mode,scene:n.scene,config:n.config,nodes:[],eventMitt:vh(),on:function(r,o){e.eventMitt.on(r,o)},emit:function(r,o){e.eventMitt.emit(r,o)},click(r){e.emit(or.click,r)},select(r){r.type===nt.Condition?e.emit(or.selectCondition,r):e.emit(or.select,r)},errorModel:ym(),formModel:bm({entryId:n.flowDesigner.entryId,appId:n.flowDesigner.appId}),memberModel:_m(),viewConfig:Rh(n.viewConfig),compareHistory:wm(),insertNode(r,o,a){const s={...Ba(r),parentId:o.nodeId,...a??{}};(r===nt.Gateway||r===nt.ParallelGateway)&&(s.children=[{...Ba(nt.Condition),parentId:s.nodeId,name:r===nt.Gateway?"条件1":"分支1"},{...Ba(nt.Condition),parentId:s.nodeId,name:r===nt.Gateway?"条件2":"分支2"}]);const l=Va(o.nodeId,e.nodes);if(l)if(l.node.type===nt.Condition)l.node.children[0]&&(l.node.children[0].parentId=s.nodeId),l.node.children.unshift(s);else{const u=l.nodeIndex+1;l.parentList.splice(u,0,s);const h=u+1;l.parentList[h]&&(l.parentList[h].parentId=s.nodeId,l.parentList[h].gatewayId="")}},beforeInsertNode(r,o){const a=e.formModel.getDefaultFields(r),s=!!e.config.sumSync,l={fields:a};if(s){const h=e.nodes.find(v=>v.type===nt.StartEvent),y=Fu(((h==null?void 0:h.fields)??[]).map(v=>dr(v)),"fieldId");l.fields=a.map(v=>{const b=dr(v),f=y[b.fieldId];return b.summary=f?f.summary:!1,{id:b.fieldId,name:v.name,property:$o(b)}})}e.insertNode(r,o,l)},addBranchNode(r){r.children.length<=8?r.children.push({...Ba(nt.Condition),parentId:r.nodeId,name:(r.type===nt.Gateway?"条件":"分支")+(r.children.length+1)}):Gr.error("最多只能添加 8 项分支")},addApproverBranch(r){const o=Va(r.nodeId,e.nodes),a=o==null?void 0:o.node;if(a){const s=[{...Ba(nt.Condition),approveResult:!0,parentId:a.nodeId,name:"成功"},{...Ba(nt.Condition),parentId:a.nodeId,approveResult:!1,name:"失败"}];a.children=[...s]}else Gr.error("未查询到审批节点")},deleteNode(r){if(r.type===nt.Condition){const o=Va(r.parentId,e.nodes);o?o.node.children.length>2?o.node.children=o.node.children.filter(a=>a.nodeId!==r.nodeId):o.node.type===nt.Gateway||o.node.type===nt.ParallelGateway?(e.deleteNode(o.node),o.node.children.forEach(a=>{e.errorModel.delError(a.nodeId)})):o.node.children=[]:console.error("父节点查询失败",o)}else{const o=Va(r.nodeId,e.nodes);if(o){const a=o.nodeIndex+1;o.parentList[a]&&(o.parentList[a].parentId=r.parentId),o.parentList.splice(o.nodeIndex,1)}}e.errorModel.delError(r.nodeId)},copyNode(r){if(r.type===nt.Approval){const{nodeId:o,parentId:a,gatewayId:s,...l}=r;e.insertNode(r.type,r,{...l})}if(r.type===nt.Condition){const o=r.parentId,a=Va(o,e.nodes),s=a.node.children.findIndex(g=>g.nodeId===r.nodeId),l=(g,S)=>{function w(A,T){const G={...A};return G.nodeId=kl(A.type),G.parentId=T,G.children&&G.children.length>0&&(G.children=G.children.map(ae=>w(ae,G.nodeId))),G}return g.map(A=>w(A,S))},{parentId:u,nodeId:h,children:y,type:v,...b}=r,f=kl(v),m={...b,type:v,nodeId:f,parentId:u,children:l(y,f)};a.node.children.splice(s,0,m)}},resetNodeByEntry(r){e.nodes=An(r)},resetProcessConfigByEntry(){e.config.fileMode=void 0;const r=ya.procResultNotifier,o=ya.procResultMessages;e.config.procResultMessages=o,e.config.procResultNotifier=r,e.config.procResultSendMessage=!0,e.config.sumSync=!0},getDynamicOptions(){return e.memberModel.getDynamicOption(e.formModel.dynamicFields)},addApprovalBranch(r){e.emit(or.addApprovalBranch,r)},async validate(){await e.errorModel.deepValidator(e.nodes),await e.errorModel.validEntryId({entryId:e.formModel.appEntryId},{nodes:e.nodes})},async save(){if(await e.validate(),e.errorModel.errorMap.size!==0)return Promise.reject();const o=Ds(e.nodes),a=e.config,s={...e.flowDesigner,nodes:o,config:a,entryId:e.formModel.appEntryId,appId:e.formModel.appId,modify:!0},l=await d5(s);return Gr.success("保存成功"),e.emit(or.callbackSave,{}),await e.renderData(l),l},async release(){const r=await f5({id:e.flowDesigner.id});return Gr.success("发布成功"),e.emit(or.callbackRelease,{}),await e.renderData(r),r},async beforeRelease(){var o;e.compareHistory.compareVal({config:e.config,nodes:e.nodes},{config:e.compareHistory.config,nodes:e.compareHistory.nodes})?((o=e==null?void 0:e.flowDesigner)==null?void 0:o.state)!==2&&Sm(e.release):xm(e.save)},async beforeLeave(){if(!e.compareHistory.compareVal({config:e.config,nodes:e.nodes},{config:e.compareHistory.config,nodes:e.compareHistory.nodes}))return Nm({save:e.save,release:e.release})},formatNode(r){return Ms(wh(r,e.formModel.fieldsVisible))},async renderData(r){if(e.flowDesigner=An(r),e.flowDesigner.id)if(e.flowDesigner.nodes.length>=1)e.nodes=e.formatNode(e.flowDesigner.nodes);else{const o=sf().map(a=>({...a,fields:e.formModel.getDefaultFields(a.type)}));e.nodes=o}else e.nodes=e.flowDesigner.nodes.map(o=>({...o,fields:e.formModel.getDefaultFields(o.type)}));e.flowDesigner.config,e.config=e.flowDesigner.config??Du(),e.compareHistory.renderOldData({nodes:An(e.nodes),config:An(e.config)})},async renderPreviewData(r){e.flowDesigner=An(r),e.nodes=Ms(e.flowDesigner.nodes),e.config=e.flowDesigner.config??Du()}});return(async()=>{e.formModel.renderFields(n.fields),e.mode===Ti.Preview||e.mode===Ti.Select?e.renderPreviewData(n.flowDesigner):e.renderData(n.flowDesigner),Ua(()=>{e.flowLazy=!1})})(),Ed(()=>{e.eventMitt.all.clear()}),e},eg=We({__name:"app",props:{flowDesigner:{},fields:{},mode:{default:Ti.Design},scene:{default:Pu.Default},viewConfig:{}},emits:["callbackRelease","callbackSave"],setup(n,{expose:e,emit:t}){const r=n,o=t,a=Am({...r,nodes:An(r.flowDesigner.nodes),config:An(r.flowDesigner.config),fields:An(r.fields)});return Lo(Kd,a),a.on(or.callbackRelease,()=>{o("callbackRelease")}),a.on(or.callbackSave,()=>{o("callbackSave")}),e({beforeLeave:async()=>a.beforeLeave()}),(s,l)=>{const u=yh;return Sa((W(),Ee(vm,null,null,512)),[[u,E(a).flowLazy]])}}});export{H5 as _,t1 as a,eg as b,Zm as c,Km as d,Dh as e,Qm as g,Qd as u};
