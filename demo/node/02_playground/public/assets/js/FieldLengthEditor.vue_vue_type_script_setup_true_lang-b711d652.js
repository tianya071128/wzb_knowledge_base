import{A as b}from"./AzInputNumber-d6212644.js";import{E as F}from"./routePage-70460a50.js";import{d as L,gY as C,nh as D,c as t,x as M,a as k,r as x,o as u,b as p,w as g,B as S,L as _,k as w,t as B,a$ as E}from"./index-b80d5ef5.js";const z=L({__name:"FieldLengthEditor",props:{field:{}},setup(h){const l=h,d=C(),s=D(l.field.type),v=t(()=>`默认${s==null?void 0:s.databaseLength}`),n=t(()=>d.matchField(l.field.fieldId)),y=M(),c=t(()=>{var e,a;return d.form.formConfig.isModelForm==1||((a=(e=n.value)==null?void 0:e.parentField)==null?void 0:a.type)===k.subform&&n.value.parentField.subformMode==="2"}),f=t(()=>{var e,a;return d.form.formConfig.isModelForm==1?l.field.modelId:(a=(e=n.value)==null?void 0:e.parentField)==null?void 0:a.modelId}),r=t(()=>l.field.modelColId),i=x(""),I=async()=>{var a,o;if(i.value="",!r.value||!f.value)return Promise.reject({loadState:E.danger,msg:"请先选择数据模型的字段名称"});const e=await y.getDataModelInfos(f.value);e&&(i.value=((o=(a=e.cusomizeCols)==null?void 0:a.find(m=>m.id===r.value))==null?void 0:o.length)??"-")};return(e,a)=>(u(),p(F,{label:"字段长度",tip:c.value?"":"设置控件存储的内容长度，未设置则使用默认值"},{default:g(()=>{var o;return[c.value?(u(),p(_,{load:I,key:r.value,class:"w100"},{default:g(()=>[w("div",{style:{color:"var(--el-color-primary)"}},B(i.value),1)]),_:1})):(u(),p(b,{key:0,modelValue:e.field.options.databaseLength,"onUpdate:modelValue":a[0]||(a[0]=m=>e.field.options.databaseLength=m),"controls-position":"right",placeholder:v.value,precision:0,min:1,max:(o=S(s))==null?void 0:o.databaseMaxLength},null,8,["modelValue","placeholder","max"]))]}),_:1},8,["tip"]))}});export{z as _};
