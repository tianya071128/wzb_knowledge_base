import{d as F,v as G,c as z,r as b,y as ae,o as s,b as k,w as a,i as t,bu as Ve,f as T,F as L,l as R,B as c,C as ge,bv as we,v7 as Re,v8 as xe,aN as J,Q as K,ac as W,bm as X,rC as te,v9 as ee,va as ce,vb as pe,vc as $e,vd as Ne,ve,ad as he,k as o,m as V,vf as j,vg as Q,t as M,H as Ee,r$ as Se,g as Ie,bs as le,vh as Pe,ft as ke,vi as Fe,U as H,bT as Ue,ao as Ce,bU as Te,_ as B,ci as Ae,vj as Le,q as Be,nH as Me,vk as De,vl as Oe,vm as ze,vn as He,vo as qe,vp as je,ap as Qe,kV as Ge,z as Je,vq as Ke,vr as We,cj as Xe,av as Ye,bn as Ze,e as fe,rz as el,rB as _e,rA as Y,eu as Z,vs as ll,vt as al,up as tl,vu as ol,vv as sl,by as ul,ca as nl}from"./index-b80d5ef5.js";import{_ as il}from"./AccountFormItem.vue_vue_type_script_setup_true_lang-c783353b.js";import{_ as ye,a as rl}from"./PasswordFormItem.vue_vue_type_script_setup_true_lang-6a395c05.js";import{R as be}from"./encryption-40d88f62.js";import{_ as dl}from"./MobileFormItem.vue_vue_type_script_setup_true_lang-b23f5d06.js";import{R as ml}from"./ReadAgreement-266930fb.js";import{T as cl}from"./ThirdBind-9c25aa21.js";import"./WeComCode.vue_vue_type_script_setup_true_lang-dc462ebc.js";const pl=F({__name:"EditLoginInfo",props:{modelValue:{type:Boolean},type:{},userInfo:{}},emits:["update:modelValue","finish"],setup(A,{emit:C}){const e=A,_=C,v=G(e,"modelValue",_),i=z(()=>e.type==="account"?"修改账号":e.type==="password"?"修改密码":e.type),d=b(),l=b();ae(v,()=>{v.value&&e.userInfo&&(l.value={userId:e.userInfo.id,newPassword:"",password:"",confirmPassword:"",username:e.userInfo.username,newUsername:""},setTimeout(()=>{var r;(r=d.value)==null||r.clearValidate()},100))});const U=async()=>{var r;l.value&&(await((r=d.value)==null?void 0:r.validate()),e.type==="account"?(await Re({userId:l.value.userId,username:l.value.username,newUsername:l.value.newUsername}),_("finish",l.value.newUsername)):e.type==="password"&&await xe({userId:l.value.userId,newPassword:be(l.value.newPassword),password:be(l.value.password)}),J.success(`${i.value}成功`))},n=(r,u,g)=>{var y,p;((y=l.value)==null?void 0:y.password)===((p=l.value)==null?void 0:p.newPassword)?g(new Error("新密码与原密码不能一致")):g()};return(r,u)=>{const g=K,y=W,p=X;return s(),k(we,{modelValue:c(v),"onUpdate:modelValue":u[6]||(u[6]=w=>ge(v)?v.value=w:null),title:i.value},{footer:a(()=>[t(Ve,{editMode:"",onClose:u[5]||(u[5]=w=>v.value=!1),"on-submit":U})]),default:a(()=>[l.value?(s(),k(p,{key:0,ref_key:"ruleFormRef",ref:d,model:l.value,"label-width":"100px","label-position":"left"},{default:a(()=>[r.type==="account"?(s(),T(L,{key:0},[t(y,{label:"原账号"},{default:a(()=>[t(g,{modelValue:l.value.username,"onUpdate:modelValue":u[0]||(u[0]=w=>l.value.username=w),disabled:""},null,8,["modelValue"])]),_:1}),t(il,{modelValue:l.value.newUsername,"onUpdate:modelValue":u[1]||(u[1]=w=>l.value.newUsername=w),label:"新账号",prop:"newUsername"},null,8,["modelValue"])],64)):r.type==="password"?(s(),T(L,{key:1},[t(ye,{modelValue:l.value.password,"onUpdate:modelValue":u[2]||(u[2]=w=>l.value.password=w),label:"原密码",prop:"password"},null,8,["modelValue"]),t(ye,{modelValue:l.value.newPassword,"onUpdate:modelValue":u[3]||(u[3]=w=>l.value.newPassword=w),label:"新密码",prop:"newPassword","confirm-password":l.value.confirmPassword,extraRules:[{validator:n,trigger:"blur"}]},null,8,["modelValue","confirm-password","extraRules"]),t(rl,{modelValue:l.value.confirmPassword,"onUpdate:modelValue":u[4]||(u[4]=w=>l.value.confirmPassword=w),label:"新密码",prop:"confirmPassword",password:l.value.newPassword},null,8,["modelValue","password"])],64)):R("",!0)]),_:1},8,["model"])):R("",!0)]),_:1},8,["modelValue","title"])}}}),vl=F({__name:"EditMobile",props:{modelValue:{type:Boolean},userInfo:{}},emits:["update:modelValue","finish"],setup(A,{emit:C}){const e=A,_=C,v=G(e,"modelValue",_),i=z(()=>!e.userInfo.mobile),d=z(()=>i.value?"绑定手机号":"修改手机号"),l=b(1),U=b(),n=b();ae(v,()=>{v.value&&e.userInfo&&(e.userInfo.mobile?l.value=1:l.value=2,n.value={userId:e.userInfo.id,oldVerifyCode:"",oldMobile:e.userInfo.mobile,newMobile:"",verifyCode:"",randomCode:""},setTimeout(()=>{var y;(y=U.value)==null||y.clearValidate()},100))});const r=async()=>{var y;if(n.value)if(await((y=U.value)==null?void 0:y.validate()),l.value===1){const p=await $e({mobile:n.value.oldMobile,verifyCode:n.value.oldVerifyCode,codeType:ce});return n.value.randomCode=p,l.value=2,!1}else await Ne({mobile:n.value.newMobile,verifyCode:n.value.verifyCode,randomCode:n.value.randomCode,codeType:pe}),_("finish",n.value.newMobile),J.success(`${d.value}成功`)},g=[{validator:(y,p,w)=>{n.value.newMobile===n.value.oldMobile?w("您输入的手机号与原手机号一致!"):w()},trigger:"blur"}];return(y,p)=>{const w=K,N=W,x=X;return s(),k(we,{modelValue:c(v),"onUpdate:modelValue":p[4]||(p[4]=h=>ge(v)?v.value=h:null),title:d.value},{footer:a(()=>[t(Ve,{editMode:"",onClose:p[3]||(p[3]=h=>v.value=!1),"on-submit":r,submitText:l.value===1?"下一步":"确定"},null,8,["submitText"])]),default:a(()=>[n.value?(s(),k(x,{key:0,ref_key:"ruleFormRef",ref:U,model:n.value,"label-width":"100px","label-position":"left"},{default:a(()=>[l.value===1?(s(),T("div",{key:"one"},[t(N,{label:"原手机号码"},{default:a(()=>[t(w,{"model-value":c(te)(n.value.oldMobile),disabled:""},null,8,["model-value"])]),_:1}),t(ee,{modelValue:n.value.oldVerifyCode,"onUpdate:modelValue":p[0]||(p[0]=h=>n.value.oldVerifyCode=h),prop:"oldVerifyCode",mobile:n.value.oldMobile,type:c(ce)},null,8,["modelValue","mobile","type"])])):R("",!0),l.value===2?(s(),T("div",{key:"two"},[t(dl,{modelValue:n.value.newMobile,"onUpdate:modelValue":p[1]||(p[1]=h=>n.value.newMobile=h),label:"新手机号码",prop:"newMobile",extraRules:g},null,8,["modelValue"]),t(ee,{modelValue:n.value.verifyCode,"onUpdate:modelValue":p[2]||(p[2]=h=>n.value.verifyCode=h),prop:"verifyCode",mobile:n.value.newMobile,type:c(pe),isDisabled:n.value.newMobile===n.value.oldMobile},null,8,["modelValue","mobile","type","isDisabled"])])):R("",!0)]),_:1},8,["model"])):R("",!0)]),_:1},8,["modelValue","title"])}}}),fl=F({__name:"BasicInfo",props:{modelValue:{}},emits:["update:modelValue"],setup(A,{emit:C}){const e=A,_=C,v=z(()=>e.modelValue?e.modelValue.isManage==0:!1),i=b({certId:"",realname:"",certificateType:ve,certificateNumber:"",address:""}),d=b(!1),l=()=>{d.value=!0,e.modelValue&&(i.value={certId:e.modelValue.certId,realname:e.modelValue.realname||"",certificateType:e.modelValue.certificateType||ve,certificateNumber:e.modelValue.certificateNumber||"",address:e.modelValue.address||""})},U=b(),n=b(!1),r=async()=>{var u;n.value=!0;try{await((u=U.value)==null?void 0:u.validate()),await Fe(i.value),J.success("编辑成功"),d.value=!1,e.modelValue&&_("update:modelValue",{...e.modelValue||{},...i.value})}finally{n.value=!1}};return(u,g)=>{const y=H,p=K,w=W,N=Ue,x=Ce,h=Te,q=X;return s(),k(q,{model:i.value,ref_key:"ruleFormRef",ref:U},{default:a(()=>[t(h,{border:"",column:2},he({title:a(()=>[o("span",null,"个人基础信息"),!d.value&&v.value?(s(),k(y,{key:0,class:"ml-5",type:"primary",text:"",onClick:l},{default:a(()=>[V(" 修改 ")]),_:1})):R("",!0)]),default:a(()=>[t(N,{label:"用户名称"},{default:a(()=>{var $,I,m;return[d.value&&((($=u.modelValue)==null?void 0:$.certificateAuthStatus)===c(j)||((I=u.modelValue)==null?void 0:I.certificateAuthStatus)===c(Q))?(s(),k(w,{key:0,prop:"realname"},{default:a(()=>[t(p,{modelValue:i.value.realname,"onUpdate:modelValue":g[1]||(g[1]=S=>i.value.realname=S),placeholder:"请输入您的名称",maxlength:35},null,8,["modelValue"])]),_:1})):(s(),T("span",{key:1},M(((m=u.modelValue)==null?void 0:m.realname)||"-"),1))]}),_:1}),t(N,{label:"证件类型"},{default:a(()=>{var $,I,m;return[d.value&&((($=u.modelValue)==null?void 0:$.certificateAuthStatus)===c(j)||((I=u.modelValue)==null?void 0:I.certificateAuthStatus)===c(Q))?(s(),k(Ee,{key:0,prop:"certificateType"},{default:a(()=>[t(Se,{modelValue:i.value.certificateType,"onUpdate:modelValue":g[2]||(g[2]=S=>i.value.certificateType=S),load:"user_certificate_type",placeholder:"请选择证件类型"},{default:a(({options:S})=>[(s(!0),T(L,null,Ie(S,P=>(s(),k(x,{key:P.value,label:P.label,value:P.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):(s(),T("span",{key:1},M(c(le)((m=u.modelValue)==null?void 0:m.certificateType,"user_certificate_type")||"-"),1))]}),_:1}),t(N,{label:"证件号码"},{default:a(()=>{var $,I,m;return[d.value&&((($=u.modelValue)==null?void 0:$.certificateAuthStatus)===c(j)||((I=u.modelValue)==null?void 0:I.certificateAuthStatus)===c(Q))?(s(),k(Pe,{key:0,modelValue:i.value.certificateNumber,"onUpdate:modelValue":g[3]||(g[3]=S=>i.value.certificateNumber=S),"hide-label":"",label:"证件号码",prop:"certificateNumber",required:!1,type:i.value.certificateType},null,8,["modelValue","type"])):(s(),T("span",{key:1},M(c(ke)(((m=u.modelValue)==null?void 0:m.certificateNumber)??"")||"-"),1))]}),_:1}),t(N,{label:"联系地址"},{default:a(()=>{var $;return[d.value?(s(),k(w,{key:0,prop:"address"},{default:a(()=>[t(p,{modelValue:i.value.address,"onUpdate:modelValue":g[4]||(g[4]=I=>i.value.address=I),type:"textarea",maxlength:200,"show-word-limit":"",placeholder:"请输入联系地址"},null,8,["modelValue"])]),_:1})):(s(),T("span",{key:1},M((($=u.modelValue)==null?void 0:$.address)||"-"),1))]}),_:1}),t(N,{label:"创建时间"},{default:a(()=>{var $;return[V(M((($=u.modelValue)==null?void 0:$.createTime)||"-"),1)]}),_:1})]),_:2},[d.value?{name:"extra",fn:a(()=>[t(y,{type:"primary",text:"",onClick:r,loading:n.value},{default:a(()=>[V(" 保存 ")]),_:1},8,["loading"]),t(y,{text:"",style:{"margin-left":"0"},onClick:g[0]||(g[0]=$=>d.value=!1)},{default:a(()=>[V(" 取消 ")]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["model"])}}});const _l=B(fl,[["__scopeId","data-v-4c700510"]]),yl=""+new URL("../png/main_tip-e5292588.png",import.meta.url).href;var E=(A=>(A.MAIN_TIP="main_tip",A.AUDIT_TIP="audit_tip",A.AUTHENTICATION="authentication",A.RESULT="result",A))(E||{});const bl={title:"《悦文云账号注销协议》 ",content:["更新日期： 2022 年 11 月 28 日","生效日期： 2022 年 12 月 01 日",{content:"【特别说明】亲爱的用户，在您正式开始下一步悦文云账号注销流程前，我们先为您做出如下特别说明：注销悦文云账号后，您将无法再以此账号登录和使用北京安证通信息科技股份有限公司（以下简称“本公司”或者“悦文云”）的相关产品与服务，悦文云也将同时终止为该账号提供电子签名产品服务、存证服务、法律服务等，这同时也不可避免地会给您的售后带来不便。且悦文云账号一旦注销完成，将无法恢复。请您在注销前慎重考虑。",classList:["indent-24"]},{content:"若您经过慎重考虑后仍执意决定注销悦文云账号的，请您务必先行仔细阅读和充分理解本《悦文云账号注销协议》，在同意全部内容后，按照我们的注销操作指引点击进行下一步操作，您勾选本注销协议并点击下一步注销操作的行为即视为您已经同意签署和遵守本协议全部内容。如您在注销后需要再次使用我们的服务的，欢迎您登录悦文云官网或悦文云允许的其他方式重新注册。",classList:["indent-24","bold","underline"]},"在您注销您的悦文云账号之前，请您充分阅读、理解并同意下列事项：","1. 您所申请注销的悦文云账号应当是您本人依照《悦文云用户协议》的约定注册的账号。您应当依照本公司规定的程序或网站上的提示进行悦文云账号注销。","2. 注销账号是不可恢复的操作，您将无法再使用该账号或找回您添加或绑定在该账号上的任何内容，包括数字证书、电子签名、电子印章、合同文件和您创建的合同模板等相关信息（即使您使用相同的手机号码再次注册并使用悦文云），若您是企业的经办人，您与企业的组织关系将同时失效。您应自行备份该账号相关的信息和数据。操作之前，请确认与该账号相关的所有文件均已妥善处理。如因您注销账号所产生的数据损毁、灭失的风险，由您自行承担。","3. 悦文云账号注销将导致本公司与您约定的双方的权利义务终止，同时还可能对该账号产生如下结果，由您自行承担：","A. 该账号的全部个人资料和单方签署的文件都将无法找回。","B. 该账号的签约方都将无法通过该账号联系您。","C. 该账号所购买的套餐费用余额将不予退回（如有）。","4. 您申请注销的悦文云账号应当不存在任何由于该账号被注销而导致的未了结的合同关系与其他基于该账号的存在而产生或维持的权利义务，以及本公司认为注销该账号会由此产生未了结的权利义务而产生纠纷的情况。","5. 在悦文云账号注销期间，如果您的账号被他人投诉、被国家机关调查或者正处于诉讼、仲裁程序中，或被发现有任何情况，我公司有权自行终止您悦文云账号的注销而无需另行得到您的同意。","6. 您同意，如您申请注销悦文云账号时，本公司尚在或需要对您的有关合同签署进行核查的，本公司有权继续冻结您的悦文云账号以便继续核查，并在必要时有权向监管或司法部门举报欺诈或非法行为。注销您的悦文云账号不代表该账号注销前的账号行为和相关责任得到豁免或减轻。","7. 本协议未尽事宜，参照悦文云网站（https://yuewen.easysign.cn）上的《悦文云用户协议》、《隐私政策》及注销过程中的平台相关规则、说明等相关规则执行。","8. 其他","A. 您知悉并同意：即使您该产品或服务的帐号被注销，也并不减轻或免除您应根据相关法律法规、相关协议、规则等（可能）需要承担的相关责任。","B. 如因本协议或悦文云服务所引起或与其有关的任何争议应向北京安证通信息科技股份有限公司所在地人民法院起诉。","C. 本协议的成立、生效、履行、解释及纠纷解决，适用于中华人民共和国大陆地区法律（不包括冲突法）。","D. 您和悦文云之间因本协议发生的（和 / 或与本协议有关的）任何纠纷或争议，首先友好协商解决；协商不成的，您同意将纠纷或争议提交至本协议签订地有管辖权的人民法院管辖。","E. 如在帐号注销过程中有任何问题您无法处理的或在处理过程中有任何疑惑的，可联系悦文云客服协助处理。"]},Vl=F({__name:"MainTip",props:{modelValue:{}},emits:["update:modelValue","cancel"],setup(A,{emit:C}){const e=A,_=C,v=G(e,"modelValue",_),i=b(!1),d=b(!1),l=Ae(),U=async()=>{if(!d.value){J.error("请先勾选同意并阅读相关协议");return}try{i.value=!0,+await Le()>0?v.value=E.AUDIT_TIP:v.value=E.AUTHENTICATION}finally{i.value=!1}},n=b(!1);return(r,u)=>{const g=H,y=Be;return s(),T("div",{class:"main-tip"},[o("div",{class:"tip-wrap"},[o("img",{src:yl,alt:"main_tip"}),o("span",null,"重要提醒")]),o("h4",null,"注销前请认真阅读以下重要提醒。"),o("h4",null,"账号注销后，您将无法再使用该账号，包括但不限于："),o("ul",null,[o("li",null," 1.注销后该账号无法登录平台、使用"+M(c(l).pageName)+"功能 ",1),o("li",null,"2.注销后该账号下的个人资料和历史信息都将无法找回"),o("li",null,"3.注销后您与企业的组织关系将失效"),o("li",null,"4.注销后账号下待处理的流程任务将无法继续处理"),o("li",null,"5.注销后账号下已处理的流程任务将无法查看"),o("li",null,"6.注销后账号下的应用数据将不能查看")]),o("div",{class:"opt-wrap"},[t(y,{modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=p=>d.value=p)},{default:a(()=>[V(" 我已阅读并同意《 "),t(g,{type:"primary",link:"",onClick:u[0]||(u[0]=p=>n.value=!0)},{default:a(()=>[V(" 悦文云注销协议 ")]),_:1}),V(" 》 ")]),_:1},8,["modelValue"]),o("div",{class:"btn-wrap"},[t(g,{onClick:u[2]||(u[2]=p=>_("cancel")),type:"primary"},{default:a(()=>[V("取消")]),_:1}),t(g,{onClick:U,loading:i.value},{default:a(()=>[V("确认注销")]),_:1},8,["loading"])])]),t(ml,{modelValue:n.value,"onUpdate:modelValue":u[3]||(u[3]=p=>n.value=p),data:c(bl)},null,8,["modelValue","data"])])}}});const gl=B(Vl,[["__scopeId","data-v-4770209b"]]),wl=""+new URL("../png/audit_check-c0813e13.png",import.meta.url).href,Il=F({__name:"AuditTip",props:{modelValue:{}},emits:["update:modelValue","cancel"],setup(A,{emit:C}){const e=A,_=C,v=G(e,"modelValue",_),i=()=>{v.value=E.AUTHENTICATION};return(d,l)=>{const U=H;return s(),T("div",{class:"audit-tip"},[o("div",{class:"tip-wrap"},[o("img",{src:wl,alt:"audit_check"}),o("span",null,"检测到您有尚未处理的审批流程。")]),o("p",{class:"tip"},[V(" 若注销账号，进行中的流程， "),o("br"),V(" 将永远停滞在当前节点，影响业务的正常流转。 ")]),o("p",{class:"confirm"},"确定要继续注销？"),o("div",{class:"btn-wrap"},[t(U,{onClick:l[0]||(l[0]=n=>_("cancel")),type:"primary"},{default:a(()=>[V("取消")]),_:1}),t(U,{onClick:i},{default:a(()=>[V("确定")]),_:1})])])}}});const kl=B(Il,[["__scopeId","data-v-8449e9e6"]]),Ul=F({__name:"Authentication",props:{done:{type:Function}},emits:["cancel"],setup(A,{emit:C}){const e=A,_=C,v=Me(),i=b({smsCode:"",type:1,password:""}),d=b(),l=b(!1),U=async()=>{var n;await((n=d.value)==null?void 0:n.validate());try{l.value=!0;const r=await je(i.value);e.done(r)}catch(r){e.done({logOffResult:!1,message:r.msg})}finally{l.value=!1}};return(n,r)=>{const u=Ce,g=Qe,y=W,p=K,w=X,N=H;return s(),T("div",{class:"authentication"},[o("div",{class:"authentication-header"},[o("div",{class:"text-tip"}," 为了您的账户安全，您需要验证身份后才可以进行操作 "),o("div",{class:"text-title"},"请按指定方式完成核验")]),t(w,{"label-suffix":":","label-width":"90px",ref_key:"formRef",ref:d,model:i.value},{default:a(()=>[t(y,{label:"验证方式"},{default:a(()=>[t(g,{style:{width:"100%"},modelValue:i.value.type,"onUpdate:modelValue":r[0]||(r[0]=x=>i.value.type=x)},{default:a(()=>[(s(!0),T(L,null,Ie(c(De)[c(Oe)],x=>(s(),k(u,{key:x.value,label:x.label,value:x.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i.value.type===c(ze)?(s(),T(L,{key:0},[t(y,{label:"手机号码"},{default:a(()=>[t(p,{"model-value":c(te)(c(v).mobile),disabled:""},null,8,["model-value"])]),_:1}),t(ee,{modelValue:i.value.smsCode,"onUpdate:modelValue":r[1]||(r[1]=x=>i.value.smsCode=x),prop:"smsCode",mobile:c(v).mobile,type:c(He)},null,8,["modelValue","mobile","type"])],64)):R("",!0),i.value.type===c(qe)?(s(),k(y,{key:1,label:"登录密码",rules:[{required:!0,message:"登录密码不能为空",trigger:"blur"}],prop:"password"},{default:a(()=>[t(p,{modelValue:i.value.password,"onUpdate:modelValue":r[2]||(r[2]=x=>i.value.password=x),type:"password",placeholder:"请输入登录密码"},null,8,["modelValue"])]),_:1})):R("",!0)]),_:1},8,["model"]),o("div",{class:"btn-wrap"},[t(N,{onClick:r[3]||(r[3]=x=>_("cancel")),type:"primary"},{default:a(()=>[V("取消")]),_:1}),t(N,{onClick:U,loading:l.value},{default:a(()=>[V("确定")]),_:1},8,["loading"])])])}}});const Cl=B(Ul,[["__scopeId","data-v-2952d3ad"]]),Tl=""+new URL("../png/logout_success-547a6316.png",import.meta.url).href,Al=""+new URL("../png/logout_failure-6ce5790a.png",import.meta.url).href,Ml=F({__name:"Result",props:{result:{}},emits:["cancel"],setup(A,{emit:C}){const e=A,_=C,{counter:v,pause:i}=Ge(1e3,{controls:!0}),d=b(!1);Je(()=>{v.value===3&&(i(),l())});const l=async()=>{try{d.value=!0,e.result.logOffResult?Ke(We):_("cancel")}finally{d.value=!1}};return(U,n)=>{const r=H;return s(),T("div",{class:"tip-wrap"},[U.result.logOffResult?(s(),T(L,{key:0},[o("img",{src:Tl,alt:"logout_success"}),o("span",{class:"result-txt"},"注销成功"),t(r,{type:"primary",onClick:l},{default:a(()=>[V(M(d.value?"正在跳转":`${3-c(v)}s 跳转登录页`),1)]),_:1})],64)):(s(),T(L,{key:1},[o("img",{src:Al,alt:"logout_failure"}),o("span",{class:"result-txt"},"注销失败"),o("span",{class:"fail-reason"},M(U.result.message),1),t(r,{type:"primary",onClick:l},{default:a(()=>[V(M(d.value?"正在关闭":`${3-c(v)}s 关闭该页面`),1)]),_:1})],64))])}}});const Rl=B(Ml,[["__scopeId","data-v-edd61441"]]),xl=F({__name:"AccountLogout",setup(A){const C=b(E.MAIN_TIP),e={[E.MAIN_TIP]:gl,[E.AUDIT_TIP]:kl,[E.AUTHENTICATION]:Cl,[E.RESULT]:Rl},_=b(!1),v=b(),i=d=>{v.value=d,C.value=E.RESULT};return ae(_,d=>{d||setTimeout(()=>{C.value=E.MAIN_TIP})}),(d,l)=>{const U=Ye,n=Ze;return s(),T("div",{class:"account-logout"},[t(U,{type:"info",underline:!1,class:"font-12",onClick:l[0]||(l[0]=r=>_.value=!0)},{default:a(()=>[V(" 账号注销 ")]),_:1}),_.value?(s(),k(n,{key:0,title:"注销申请",modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=r=>_.value=r),width:"420px"},{default:a(()=>[(s(),k(Xe(e[C.value]),{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=r=>C.value=r),onCancel:l[2]||(l[2]=r=>_.value=!1),done:i,result:v.value},null,40,["modelValue","result"]))]),_:1},8,["modelValue"])):R("",!0)])}}});const $l=B(xl,[["__scopeId","data-v-db5cc781"]]),Nl={name:"UserCenter"},hl=F({...Nl,setup(A){const C=Me(),e=b(),_=b(!1),v=z(()=>e.value?e.value.isManage==0&&(e.value.certificateAuthStatus==j||e.value.certificateAuthStatus==Q):!1);async function i(){_.value=!0;try{e.value=await ol()}finally{_.value=!1,N.value=!1}}i();const d=b("account"),l=b(!1),U=I=>{l.value=!0,d.value=I},n=I=>{var m;d.value==="account"&&(C.updateUsername(I),(m=e.value)!=null&&m.username&&(e.value.username=I))},r=b(!1),u=()=>{r.value=!0},g=I=>{var m;C.updateMobile(I),(m=e.value)!=null&&m.mobile&&(e.value.mobile=I)},y=b(!1),p=b(!1),w=b(),N=b(!1),x=async()=>{var I;if((I=e.value)!=null&&I.id){p.value=!0;try{const m=await sl();switch(m.certificateAuthStatus){case j:case 3:y.value=!0;break;case 2:h({bizId:m.bizId,authUrl:m.authUrl});break;case Y:i();break;default:y.value=!0;break}}catch{p.value=!1}finally{p.value=!1}}},h=I=>{w.value={...I},N.value=!0,y.value=!1},{systemParams:q}=Ae(),$=z(()=>!!(q!=null&&q.thirdAuthConfigs));return(I,m)=>{var ue,ne,ie,re,de;const S=ul,P=H,D=Ue,oe=Te,se=nl;return fe((s(),T("div",{class:"user_center"},[o("div",{class:"layout_box user-basic-info"},[o("img",{class:"user-logo",src:el,alt:"用户图片"}),o("div",null,[o("div",{class:"info-item"},[o("span",{class:"info-label"},"姓名："),o("span",{class:"info-value"},[o("span",null,M(((ue=e.value)==null?void 0:ue.realname)??((ne=e.value)==null?void 0:ne.nickname)??"-"),1),(ie=e.value)!=null&&ie.idCard?(s(),T("span",{key:0}," （"+M(c(ke)(e.value.idCard))+"） ",1)):R("",!0),e.value?(s(),k(S,{key:1,class:"info-auth",type:e.value.certificateAuthStatus==c(Y)?"success":"info"},{default:a(()=>[V(M(c(le)(e.value.certificateAuthStatus,c(_e))||"-"),1)]),_:1},8,["type"])):R("",!0),t($l,{class:"ml-10"})])]),o("div",{class:"info-item"},[o("span",{class:"info-label"},"ID："),o("span",{class:"info-value"},M(((re=e.value)==null?void 0:re.id)||"-"),1)]),o("div",{class:"info-item"},[o("span",{class:"info-label"},"注册时间："),o("span",{class:"info-value"},M(((de=e.value)==null?void 0:de.createTime)||"-"),1)])]),v.value?fe((s(),k(P,{key:0,class:"user-auth",type:"primary",onClick:x},{default:a(()=>[V(" 实名认证 ")]),_:1})),[[se,p.value]]):R("",!0)]),o("div",{class:"layout_box",style:{"margin-top":"20px"}},[t(oe,{class:"user_login-setting",title:"登录设置",border:"",column:1},{default:a(()=>[t(D,{label:"账号"},{default:a(()=>{var f;return[o("div",{class:"user-login-item"},[o("span",null,M(((f=e.value)==null?void 0:f.username)||"-"),1),t(P,{type:"primary",icon:c(Z),text:"",onClick:m[0]||(m[0]=O=>U("account"))},{default:a(()=>[V(" 修改 ")]),_:1},8,["icon"])])]}),_:1}),t(D,null,{label:a(()=>[o("span",null,"密码"),o("span",{class:"user-login-regular"},"已设置，可通过账号密码登录")]),default:a(()=>[o("div",{class:"user-login-item"},[o("span",null,M("*********")),t(P,{type:"primary",icon:c(Z),text:"",onClick:m[1]||(m[1]=f=>U("password"))},{default:a(()=>[V(" 修改 ")]),_:1},8,["icon"])])]),_:1}),t(D,null,{label:a(()=>{var f;return[o("span",null,"绑定手机"),(f=e.value)!=null&&f.mobile?(s(),T("span",{key:0,class:"user-login-regular"}," 已设置，可通过手机号登录 ")):R("",!0)]}),default:a(()=>{var f,O,me;return[o("div",{class:"user-login-item"},[(f=e.value)!=null&&f.mobile?(s(),T("span",{key:0},M(c(te)(((O=e.value)==null?void 0:O.mobile)??"")||"-"),1)):R("",!0),(me=e.value)!=null&&me.mobile?(s(),k(P,{key:1,type:"primary",icon:c(Z),text:"",onClick:u},{default:a(()=>[V(" 修改 ")]),_:1},8,["icon"])):(s(),k(P,{key:2,type:"primary",icon:c(ll),text:"",onClick:u},{default:a(()=>[V(" 绑定 ")]),_:1},8,["icon"]))])]}),_:1})]),_:1}),$.value?(s(),k(cl,{key:0,modelValue:e.value,"onUpdate:modelValue":m[2]||(m[2]=f=>e.value=f)},null,8,["modelValue"])):R("",!0),t(_l,{class:"user_center-desciptions mt-20",modelValue:e.value,"onUpdate:modelValue":m[3]||(m[3]=f=>e.value=f)},null,8,["modelValue"]),t(oe,{border:"",column:2,class:"user_center-desciptions mt-20",title:"个人认证信息"},{default:a(()=>[t(D,{label:"实名状态"},{default:a(()=>{var f;return[t(S,{type:((f=e.value)==null?void 0:f.certificateAuthStatus)==c(Y)?"success":"info"},{default:a(()=>{var O;return[V(M(c(le)((O=e.value)==null?void 0:O.certificateAuthStatus,c(_e))||"-"),1)]}),_:1},8,["type"])]}),_:1}),t(D,{label:"实名方式"},{default:a(()=>{var f;return[V(M(((f=e.value)==null?void 0:f.certMode_dictText)||"-"),1)]}),_:1}),t(D,{label:"认证时间"},{default:a(()=>{var f;return[V(M(((f=e.value)==null?void 0:f.certificateAuthTime)||"-"),1)]}),_:1})]),_:1})]),e.value?(s(),k(pl,{key:0,modelValue:l.value,"onUpdate:modelValue":m[4]||(m[4]=f=>l.value=f),type:d.value,userInfo:e.value,onFinish:n},null,8,["modelValue","type","userInfo"])):R("",!0),e.value?(s(),k(vl,{key:1,modelValue:r.value,"onUpdate:modelValue":m[5]||(m[5]=f=>r.value=f),userInfo:e.value,onFinish:g},null,8,["modelValue","userInfo"])):R("",!0),e.value?(s(),k(al,{key:2,modelValue:y.value,"onUpdate:modelValue":m[6]||(m[6]=f=>y.value=f),userInfo:e.value,onFinish:h},null,8,["modelValue","userInfo"])):R("",!0),v.value?(s(),k(tl,{key:3,"dialog-model":N.value,"onUpdate:dialogModel":m[7]||(m[7]=f=>N.value=f),onEditRealName:x,onRefreshRealName:m[8]||(m[8]=()=>i()),initAuth:w.value},null,8,["dialog-model","initAuth"])):R("",!0)])),[[se,_.value]])}}});const zl=B(hl,[["__scopeId","data-v-5a1a553d"]]);export{zl as default};
