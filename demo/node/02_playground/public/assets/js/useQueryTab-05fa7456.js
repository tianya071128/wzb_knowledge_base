import{r as h,aV as Q,aW as k,c as n,B as N,ik as x,il as M,y as A,cC as O,aT as C,kU as R,fx as S}from"./index-b80d5ef5.js";import{u as U}from"./useExtractQuery-f96f705c.js";function D(K,e){const l=h(!0),g=h(""),y=(e==null?void 0:e.queryKey)??"tab",u=Q(),T=k(),b=h(""),v=U(y),w=u.name,q=new Map,t=async(r,c)=>{if(e!=null&&e.disabled||(await C(),!l.value))return;if(e!=null&&e.noQuery){C(()=>{b.value=r});return}const a=()=>{if(v.value==r||w!==u.name)return;R().resetCancelNprogree();let m=u.query;if(e!=null&&e.removeKeys&&(m=S(u.query,(e==null?void 0:e.removeKeys)??[])),e!=null&&e.cacheKeys)for(const f of e.cacheKeys){const d=q.get(f)??new Map;d.set(u.query[y],u.query[f]),m[f]=d.get(r),q.set(f,d)}T.replace({...u,query:{...m,[y]:r}})};c!=null&&c.immediately?a():setTimeout(()=>{a()},40)},s=n({get(){if(!l.value)return g.value;let r="";const c=N(e==null?void 0:e.isNoCorrect),a=N(K);return e!=null&&e.noQuery?r=b.value:v.value&&(r=v.value),!r&&a.length&&!c||!a.includes(r)&&a.length&&!c?(t(a[0]),""):r},set(r){t(r||void 0)}});return x(()=>l.value=!0),M(()=>l.value=!1),A(s,()=>{g.value=s.value},{immediate:!0}),O(()=>{e!=null&&e.unNoCorrect||t()}),{activeTab:s,switchTab:t}}export{D as u};
