import{d_ as Ol,dS as Tl,r as U,c as V,a9 as Be,aT as ke,n as El,hP as dt,jC as _e,g2 as jl,jD as Z,jE as it,jF as Te,jG as gl,jH as ut,jI as pt,jJ as ct,y as pe,jK as mt,z as ft,x as Ml,jL as ul,jM as _t,dW as nl,jN as vt,e1 as ue,V as yt,d$ as gt,jO as bt,jP as ht,d as O,h6 as St,bX as pl,o as i,f as C,k as z,h as It,l as B,p as ye,a2 as Se,_ as oe,a as cl,b as _,w as v,F as N,g as X,B as e,i as b,ex as Vt,ew as wt,ad as Rl,m as Q,bc as ve,bt as Ee,av as bl,j as je,jQ as xe,t as ce,by as hl,ao as Le,v as se,iN as kt,gK as ge,C as E,gS as ml,Y as Ul,jR as Ct,e0 as q,jS as Al,jT as x,ac as H,aq as Ne,aS as fe,e as We,S as Sl,ap as Ft,ba as Dt,Q as Ae,eG as Il,jU as He,eq as rl,jV as $t,jW as Ot,jX as Tt,R as Et,I as ql,U as Me,fV as jt,gh as At,H as Mt,jY as zl,jZ as Pl,cR as Ke,cS as Ye,h8 as Rt,gf as Ut,j_ as qt,j$ as zt,bK as Ie,eK as Ve,dl as be,is as he,dk as te,k0 as Bl,e9 as Pt,hM as Bt,cj as xt,iu as Lt,J as Nt,bm as Wt,bz as Ht,ie as Kt,P as Yt,aU as xl,k1 as Gt,eu as Jt,q as Vl,bC as Ll,k2 as sl,dy as Qt,dJ as Xt,b1 as Zt,dC as eo,bn as lo,a5 as to,ca as oo,E as ao,aa as fl,e4 as no,aN as ro,dU as so,k3 as io,dY as uo}from"./index-b80d5ef5.js";import{u as Nl}from"./useFieldMaxWidth-d82f063e.js";import{_ as po}from"./AddressBase.vue_vue_type_script_setup_true_lang-d809ffc6.js";import{_ as _l}from"./AzDatePicker.vue_vue_type_style_index_0_lang-c5632a92.js";import{D as le,g as co,o as mo,a as fo,d as _o,v as vl}from"./index-318b68f4.js";import{A as dl}from"./AzInputNumber-d6212644.js";import{_ as yl}from"./AzTimePicker.vue_vue_type_style_index_0_lang-3726374e.js";import{u as Ce}from"./useMultipleVal-904406c1.js";import{_ as Wl}from"./CascaderBase.vue_vue_type_style_index_0_lang-83862970.js";import{a as vo,b as yo,E as go}from"./el-dropdown-item-455a6589.js";import{u as bo,C as ho,F as So}from"./CardShowFieldItem-fd24f218.js";function Io({data:l,getFieldInfo:d}){return l.map(o=>{const s=d(o.fieldId);return s?{id:o.fieldId,alias:o.alias,fieldInfo:s,operate:o.type}:null}).filter(o=>!!o)}function Vo({data:l}){const d=[...l].filter(([,s])=>!!s.fieldType);return d.length?[{cn:Ol.or,conditionSets:d.map(([s,t])=>({cn:Ol.and,leftTableName:Tl(s).entryId,leftFieldName:Tl(s).fieldId,leftFieldType:t.fieldType,type:t.operate,value:t.value??void 0}))}]:[]}function wo(l,d){const o=gl(),s=Ml();return{handleLinkDataFill:(r=[])=>{var n;(n=l.options.fillFields)!=null&&n.length&&ke(async()=>{if(l.options.showNum===_e.single){const p=r[0];if(!p)return;const u=await s.getFormItemData(Te(p,l),p,l.options.sourceId??"");if(!u)return;const a=await ul(l.options.fillFields,{dataSystem:s,formData:u});o.fillVal(a,{fieldId:l.fieldId,index:d.index})}else{const p=await Promise.all(r.map(a=>s.getFormItemData(Te(a,l),a,l.options.sourceId??""))),u=await ul(l.options.fillFields,{dataSystem:s,formDatas:p.filter(a=>!!a),isMultiple:!0});o.fillVal(u,{fieldId:l.fieldId,index:d.index,sonUseDefault:!0,sonNoExisting:!0})}})}}}function ko(l,d){const o=U([]),s=V({get(){return l.modelValue},set(f){Be(f,l.modelValue)||ke(()=>{we()}),d("update:modelValue",f),d("change",f)}}),t=V({get(){return El(s.value)},set(f){y.value?s.value=f:s.value=(f==null?void 0:f[0])??""}}),r=V(()=>{var f;return((f=l.field)==null?void 0:f.options.linkFieldId)??""}),n=V(()=>l.field.options.sourceId??""),{getSoureceInfo:p,checkCurrentAppForm:u}=dt(),a=V(()=>p(n.value)),m=V(()=>{var f,g,A;return((A=(g=(f=a.value)==null?void 0:f.entryIds)==null?void 0:g[0])==null?void 0:A.entryId)??""}),c=V(()=>u(l.field.options.sourceId)),y=V(()=>l.onlySelect?l.multiple:l.field.options.showNum===_e.multiple),k=V(()=>l.field.options.showField.map(f=>{var A,ie;const g=(ie=jl(f.fieldId,((A=a.value)==null?void 0:A.fields)??[]))==null?void 0:ie.field;if(g)return{field:g,fieldId:f.fieldId}}).filter(f=>f)),S=V(()=>l.onlySelect?Z.drop:(l.isMobile,l.isSon,l.isSon?l.field.options.selectMode!==Z.tile&&!l.isMobile?l.field.options.selectMode:Z.drop:l.field.options.selectMode)),D=V(()=>!!l.isView),$=it(),h=U(1),w=V(()=>h.value==null?[]:El(s.value).map(g=>{const A=$(Te(g,l.field),g,n.value);return A?{...A,__id_linkData__:g}:null}).filter(g=>!!g)),I=gl(),L=U(""),F=()=>{ke(()=>{S.value===Z.drop&&(l.isMobile?!Y.value:!Re.value)||S.value===Z.dialog&&!Y.value||(M.value.disableRequest&&(o.value=[]),l.loadCallback())})},P=U(!!I),T=V(()=>{var f;return l.field.options.selectMode===Z.drop&&((f=l.field)==null?void 0:f.options.searchType)===ut.precise}),K=V(()=>T.value&&!L.value),W=V(()=>{var f;return pt(l.field.options.formShowField??[],l.field.options.selectMode===Z.dialog&&Array.isArray(l.field.options.showField)?l.field.options.showField:[],Array.isArray(l.field.options.fillFields)?l.field.options.fillFields.map(g=>{var A;return{fieldId:g.currentFieldId??"",child:(A=g.child)==null?void 0:A.map(ie=>({fieldId:ie.currentFieldId??"",subformId:g.currentFieldId??""}))}}):[],l.field.options.linkFieldId?[{fieldId:l.field.options.linkFieldId}]:[],((f=l.field.options.dataCalcs)==null?void 0:f.reduce((g,A)=>[...g,...ct(A.formula).map(ie=>({fieldId:`${ie.groupId}.${ie.contentId}`}))],[]))??[])}),M=U({sourceId:n.value,conditions:[],limit:20,sortField:l.field.options.sortFields});pe(W,()=>{M.value.showField=W.value},{immediate:!0}),!l.onlySelect&&I&&mt(l.field.options.condition??[],I,f=>{const{normlConditionResult:g,controlFieldValueMap:A}=f;P.value=!g.length&&!!A.length,M.value.conditions=g,F()},{index:l.index}),ft(()=>{M.value.disableRequest=!l.onlySelect&&(P.value||K.value)});const Y=U(!1),de=U(""),ne=()=>{de.value=s.value,Y.value=!0,l.loadCallback()},Fe=()=>{s.value=de.value,Y.value=!1},Ge=V(()=>Io({data:l.field.options.filterField,getFieldInfo(f){var g;return jl(f,((g=a.value)==null?void 0:g.fields)??[])}})),Je=(f,g)=>{M.value.filterConditions=Vo({data:g}),F()},Qe=V(()=>{const f=[...l.field.options.formShowField??[]];return f.some(g=>g.fieldId===r.value)||f.unshift({fieldId:r.value}),f}),De=V(()=>{const f=[...l.field.options.showField];return l.field.options.linkFieldId&&!f.some(g=>g.fieldId===l.field.options.linkFieldId)&&f.push({fieldId:l.field.options.linkFieldId}),f}),Re=U(!1),Xe=f=>{L.value=f,M.value.filterConditions=vt({field:l.field,query:f}),F()},Ze=f=>{const g=re(f);return t.value.includes(g)},el=f=>{if(D.value){Ue.value&&Fl(f);return}const g=re(f);if(!g)return;const A=new Set(t.value);A.has(g)?A.delete(g):(y.value||A.clear(),A.add(g)),t.value=[...A]},R=Ml(),j=f=>{R.formItemData[Te(ue({fieldId:"id",entryId:m.value,rowData:f}),l.field)]=f};pe([()=>o.value,m],()=>{m.value&&(h.value++,o.value.forEach(f=>j(f)))});const{handleLinkDataFill:J}=wo(l.field,l),we=()=>{var f;!l.onlySelect&&I&&((f=l.field.options.fillFields)==null?void 0:f.length)>0&&ke(()=>{J([...t.value])})},me=V(()=>{if(!l.onlySelect&&I&&l.field.options.addValTransfer)return ul(l.field.options.addValTransfer??[],{formData:(I==null?void 0:I.packageNormlData({index:l.index,fieldId:l.field.fieldId}))??{},isFieldIdKey:!0,dataSystem:R})}),ll=V(()=>!!(!D.value&&!l.onlySelect&&c.value&&l.field.options.add&&m.value)),G=V(()=>!!(!D.value&&!l.onlySelect&&c.value&&l.field.options.isRemove&&m.value)),tl=V(()=>!!(!D.value&&!l.onlySelect&&c.value&&l.field.options.isEdit&&m.value)),Ue=V(()=>!a.value||a.value.source===_t.entry?!1:l.field.options.isView!==!1),ol=V(()=>!(I&&I.mode!==nl.preview)),qe=U(!1),kl=U(""),Cl=U(),Fl=(f,g)=>{if(!Ue.value)return;g==null||g.stopPropagation();const A=re(f);A&&(kl.value=A,Cl.value=void 0,qe.value=!0)},re=f=>f?f.__id_linkData__??ue({entryId:m.value,fieldId:"id",rowData:f}):"",ze=U(!1),$e=U(),Xl=f=>{ol.value||($e.value=re(f),ze.value=!0)},Zl=V(()=>({dataId:$e.value,renderOptions:{appId:"",entryId:m.value,mode:$e.value?nl.edit:nl.enter,formData:$e.value?void 0:me.value,useDefault:$e.value?void 0:!0}})),et=(f,g)=>{if(yt(g==null?void 0:g.requestRes)){j(g.requestRes);const A=ue({fieldId:gt,rowData:g.requestRes});S.value===Z.dialog||l.isMobile&&S.value===Z.drop?de.value=y.value?[...de.value,A]:A:t.value=y.value?[...t.value,A]:[A]}F()},al=U(!1),lt=async f=>{al.value=!0;try{if(S.value!==Z.tile){const g=await bt({dataId:f,daSourceId:n.value});R.formItemData[Te(f,l.field)]=g,h.value++}else F();I.$bus.emit(ht,{fieldId:l.field.fieldId,rowId:I.getRowIdByIndex(l.field.fieldId,{index:l.index})})}finally{al.value=!1}},Dl=async(f,g=!1)=>{!l.onlySelect&&!g&&await l.handleCancelLink();const A=re(f),ie=new Set(t.value);ie.delete(A),t.value=[...ie]},tt=async f=>{if(ol.value)return;const g=re(f);await l.handleDelete(g),Dl(f,!0),F()},Pe=U(new Set),ot=pe([qe,ze],()=>{qe.value&&Pe.value.add(0),ze.value&&Pe.value.add(1),Pe.value.size===2&&ot()},{immediate:!0}),ee=U(new Set),$l=V({get(){return ee.value.size===w.value.length},set(f){f?ee.value=new Set(w.value.map(g=>re(g))):ee.value.clear()}}),at=V(()=>!!(w.value.length&&!$l.value&&ee.value.size)),nt=f=>{const g=re(f);return ee.value.has(g)},rt=f=>{const g=re(f);ee.value.has(g)?ee.value.delete(g):ee.value.add(g)},st=async()=>{var g;await!l.onlySelect&&await((g=l.handleBtachCancelLink)==null?void 0:g.call(l));const f=new Set(t.value);ee.value.forEach(A=>f.delete(A)),t.value=[...f]};return pe(()=>w.value.length,()=>{const f=w.value.map(g=>re(g));ee.value.forEach(g=>{f.includes(g)||ee.value.delete(g)})}),{selectItems:w,mainEntryId:m,sourceInfo:a,filterMethod:Xe,tableDataParams:M,val:s,visible:Y,selected:de,handleStartSelect:ne,handleConfirm:Fe,handleFill:we,isView:D,isAddAuth:ll,isRemoveAuth:G,isEditAuth:tl,isViewAuth:Ue,render:I,formData:me,normlMultiple:y,selectMode:S,isStopRequest:K,otherFieldInfos:k,viewVisible:qe,dataId:kl,dataIds:Cl,handleView:Fl,dataSystem:R,filterList:Ge,handleSearch:Je,authDisabled:ol,formEnterProps:Zl,handleAddOrEdit:Xl,addOrEditVisible:ze,formShowField:Qe,normlShowField:De,request:F,dropVisible:Re,valArray:t,handleCancelLink:Dl,handleRemove:tt,tableData:o,handleEditSuccess:lt,reloadLoading:al,extractId:re,getSelected:Ze,switchSelected:el,lazyMark:Pe,hadnleAddSuccess:et,checkAll:$l,isIndeterminate:at,hasSelected:nt,setSelected:rt,handleBatchCancelLink:st,dialogTableSelected:ee}}const Co=O({__name:"AzBubbleContent",setup(l){const d=U(!1),o=St(),s=U(),{width:t}=pl(o),{width:r}=pl(s);return pe([t,r],()=>{d.value=r.value>t.value}),(n,p)=>(i(),C("div",{class:ye(["az_bubble",{"az_bubble-overfow":d.value}]),style:Se({"padding-right":d.value?"10px":0})},[z("div",{class:"az_bubble-body"},[z("div",{class:"az_bubble-wrapper",ref_key:"wrapperRef",ref:s},[It(n.$slots,"default",{},void 0,!0)],512)]),d.value?(i(),C("span",{key:0,class:"az_bubble-omit"},"...")):B("",!0)],6))}});const Fo=oe(Co,[["__scopeId","data-v-0a244de6"]]),Do=O({__name:"OtherFieldInfo",props:{fieldInfos:{},data:{}},setup(l){const d=l,o=V(()=>d.fieldInfos.filter(s=>s.field.type!==cl.subform&&ue({rowData:d.data,fieldId:s.fieldId})));return(s,t)=>{var r;return(r=s.fieldInfos)!=null&&r.length?(i(),_(Fo,{key:0,class:"other_field_info"},{default:v(()=>[(i(!0),C(N,null,X(o.value,(n,p)=>(i(),C(N,{key:n.fieldId},[p!==0?(i(),C("span",{key:0},"、")):B("",!0),e(ue)({rowData:s.data,fieldId:n.fieldId})?(i(),C("span",{key:1},[b(Vt,{content:e(ue)({rowData:s.data,fieldId:n.fieldId}),mode:e(wt).list,field:n.field},null,8,["content","mode","field"])])):B("",!0)],64))),128))]),_:1})):B("",!0)}}});const Hl=oe(Do,[["__scopeId","data-v-dade0b27"]]),$o=O({__name:"DropSelect",props:{context:{},loading:{type:Boolean},field:{}},setup(l){const d=l,{selectItems:o,mainEntryId:s,sourceInfo:t,filterMethod:r,isAddAuth:n,isStopRequest:p,otherFieldInfos:u,handleView:a,authDisabled:m,handleAddOrEdit:c,request:y,dropVisible:k,valArray:S,handleCancelLink:D,tableData:$,normlMultiple:h}=d.context,w=F=>{k.value=F,F&&y()},I=V({get(){return S.value},set(F){const P=new Set(F);h.value||S.value.forEach(T=>P.delete(T)),S.value=[...P]}}),{maxWidthStyle:L}=Nl(d.field);return(F,P)=>{const T=hl,K=bl,W=Le;return i(),_(Ee,{modelValue:I.value,"onUpdate:modelValue":P[1]||(P[1]=M=>I.value=M),class:"w100",style:Se(e(L)),loading:F.loading,placeholder:F.field.options.placeholder,filterable:"","filter-method":e(r),"loading-text":"加载中",multiple:"","popper-class":"linkdata_field-select","no-data-text":e(p)?"请输入关键字进行搜索":"无数据",onVisibleChange:w},Rl({tag:v(()=>[(i(!0),C(N,null,X(e(o),M=>(i(),_(T,{closable:"",onClose:Y=>e(D)(M),onClick:Y=>e(a)(M,Y),key:e(ue)({entryId:e(s),fieldId:"id",rowData:M}),style:{"max-width":"100%"}},{default:v(()=>{var Y;return[b(je,{style:{"max-width":"100%","line-height":"1.5"},content:e(xe)({rowData:M,field:F.field,fields:(Y=e(t))==null?void 0:Y.fields})},null,8,["content"])]}),_:2},1032,["onClose","onClick"]))),128))]),default:v(()=>[(i(!0),C(N,null,X(e($),M=>(i(),_(W,{key:e(ue)({entryId:e(s),fieldId:"id",rowData:M}),value:e(ue)({entryId:e(s),fieldId:"id",rowData:M})},{default:v(()=>{var Y;return[z("div",null,[z("div",{style:{height:"32px","line-height":"32px"}},ce(e(xe)({rowData:M,field:F.field,fields:(Y=e(t))==null?void 0:Y.fields})),1),b(Hl,{style:{"padding-left":"10px"},fieldInfos:e(u),data:M},null,8,["fieldInfos","data"])])]}),_:2},1032,["value"]))),128))]),_:2},[e(n)?{name:"footer",fn:v(()=>[z("div",{class:ye(["select-add",{"is-disabled":e(m)}]),onClick:P[0]||(P[0]=ve(M=>e(c)(),["stop"]))},[b(K,{type:"primary",underline:!1,disabled:e(m)},{default:v(()=>[Q(" 新增 ")]),_:1},8,["disabled"])],2)]),key:"0"}:void 0]),1032,["modelValue","style","loading","placeholder","filter-method","no-data-text"])}}});function Oo(l,d){const o=se(l,"modelValue",d),s=V(()=>kt(l.mode??ge.condition,l.fieldInfo,l.otherOptions));return pe([()=>l.isDefaultFirst,o,()=>[...s.value]],()=>{var t;l.isDefaultFirst&&!o.value&&(o.value=(t=s.value)==null?void 0:t[0].value)},{immediate:!0}),{operate:o,options:s}}const To=O({__name:"SelectOperate",props:{modelValue:{},mode:{default:ge.condition},fieldInfo:{},otherOptions:{},isDefaultFirst:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:d}){const o=l,s=d,{operate:t,options:r}=Oo(o,s);return(n,p)=>{const u=Le;return i(),_(Ee,{modelValue:e(t),"onUpdate:modelValue":p[0]||(p[0]=a=>E(t)?t.value=a:null),placeholder:"判断符"},{default:v(()=>[(i(!0),C(N,null,X(e(r),(a,m)=>(i(),_(u,{key:m,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}});function ae(l,d,o){return V({get(){const t=ml(l.modelValue);return o===!0||o!=null&&o.includes(l.operate)?t:t==null?void 0:t[0]},set(t){d("update:modelValue",ml(t))}})}const Eo=O({__name:"Compare",props:{modelValue:{},operate:{},fieldInfo:{},prop:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const o=l,s=d,t=ae(o,s),r=V(()=>{var p;const n=Ul(((p=o.fieldInfo)==null?void 0:p.field)??Ct);return[q.contain,q.noContain].includes(o.operate)&&n.options.type===Al.provinceCityAreaDetailed&&(n.options.type=Al.provinceCityArea),n});return(n,p)=>{const u=H;return i(),_(u,{prop:n.prop,required:!!n.prop},{default:v(()=>[b(po,{modelValue:e(t),"onUpdate:modelValue":p[0]||(p[0]=a=>E(t)?t.value=a:null),field:r.value,checkStrictly:"",onChange:p[1]||(p[1]=a=>s("onSearch",e(x).change))},null,8,["modelValue","field"])]),_:1},8,["prop","required"])}}}),jo=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Ao=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const o=l,s=d,t=ae(o,s);return(r,n)=>{const p=H;return i(),_(p,{prop:r.prop,required:!!r.prop},{default:v(()=>[b(Ne,{modelValue:e(t),"onUpdate:modelValue":n[0]||(n[0]=u=>E(t)?t.value=u:null),placeholder:"请输入",clearable:"",onClear:n[1]||(n[1]=u=>s("onSearch",e(x).clear)),onKeyup:n[2]||(n[2]=fe(u=>s("onSearch",e(x).keyup),["enter"]))},null,8,["modelValue"])]),_:1},8,["prop","required"])}}}),Mo=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),Ro=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const o=l,s=d,t=ae(o,s);return(r,n)=>{const p=H;return i(),_(p,{prop:r.prop,required:!!r.prop},{default:v(()=>[b(Ne,{modelValue:e(t),"onUpdate:modelValue":n[0]||(n[0]=u=>E(t)?t.value=u:null),placeholder:"请输入",clearable:"",onClear:n[1]||(n[1]=u=>s("onSearch",e(x).clear)),onKeyup:n[2]||(n[2]=fe(u=>s("onSearch",e(x).keyup),["enter"]))},null,8,["modelValue"])]),_:1},8,["prop","required"])}}}),Uo=Object.freeze(Object.defineProperty({__proto__:null,default:Ro},Symbol.toStringTag,{value:"Module"}));function qo(l,d){const o=U(),s=V({get(){return o.value??l.modelValue},set(c){(c==null?void 0:c.mode)===le.custom&&!c.end&&!c.start?(o.value=c,c=null):o.value=void 0,d("update:modelValue",c??null)}});pe(()=>l.modelValue,()=>{d("change",l.modelValue)});const t=V({get(){if(s.value)return s.value.mode===le.custom?le.custom:s.value.start||void 0},set(c){c!==t.value&&(c?c===le.custom?s.value={mode:le.custom,start:null,end:null}:s.value={mode:le.other,start:c,end:null}:s.value=null)}}),r=V(()=>co(t.value)),n=()=>{const c=[];return mo.forEach(y=>{const k={...y,children:[]};c.push(k),Array(y.value==="this"?1:99).fill(0).map((S,D)=>({label:String(D+1),value:String(D+1)})).forEach(S=>{var $;const D={...S,children:[]};($=k.children)==null||$.push(D),fo.forEach(h=>{var I;const w={...h,children:[]};(I=D.children)==null||I.push(w)})})}),c},p=V({get(){var c,y;return((y=(c=s.value)==null?void 0:c.start)==null?void 0:y.split("_"))??void 0},set(c){s.value={...s.value??{mode:le.custom},start:c?c.join("_"):null}}}),u=V(()=>n()),a=V({get(){var c,y;return((y=(c=s.value)==null?void 0:c.end)==null?void 0:y.split("_"))??void 0},set(c){s.value={...s.value??{mode:le.custom},end:c?c.join("_"):null}}}),m=V(()=>n());return{val:s,mode:t,modeText:r,start:p,startOptions:u,end:a,endOptions:m}}const zo=O({__name:"DynamicCompare",props:{modelValue:{},prop:{}},emits:["update:modelValue","change"],setup(l,{emit:d}){const o=l,s=d,{val:t,mode:r,modeText:n,start:p,startOptions:u,end:a,endOptions:m}=qo(o,s),c=U(),y=$=>{var h;r.value=$,(h=c.value)==null||h.hide()},k=U(),S=U(),D=($,h=!1)=>{ke(()=>{var w,I,L,F;return!((w=t.value)!=null&&w.start)&&!((I=t.value)!=null&&I.end)?(ke(()=>{var P,T,K,W;h?((P=k.value)==null?void 0:P.validateState)!=="error"&&((T=k.value)==null||T.validate("change")):((K=S.value)==null?void 0:K.validateState)!=="error"&&((W=S.value)==null||W.validate("change"))}),$(new Error("至少需要选择一个时间"))):(h?((L=k.value)==null?void 0:L.validateState)==="error"&&k.value.validate("change"):((F=S.value)==null?void 0:F.validateState)==="error"&&S.value.validate("change"),$())})};return($,h)=>{const w=Ft,I=Dt,L=Ae,F=H,P=Il;return i(),C("div",{class:ye(["dynamic_compare",{"is-custom":e(le).custom===e(r)}])},[b(F,{prop:$.prop?`${$.prop}.0.mode`:void 0,required:e(le).custom!==e(r),class:"dynamic_compare-formitem"},{default:v(()=>[b(I,{ref_key:"popoverRef",ref:c,placement:"bottom-start",width:350,"hide-after":0,trigger:"click",transition:"el-zoom-in-top"},{reference:v(()=>[b(w,{class:"dynamic_compare-type w100","popper-class":"select-dropdown-hide","model-value":e(n),placeholder:"请选择",readonly:"","validate-event":!1,clearable:"",onClear:h[0]||(h[0]=T=>y())},null,8,["model-value"])]),default:v(()=>[z("div",{class:"dynamic_compare-pop"},[(i(!0),C(N,null,X(e(_o),T=>(i(),C("div",{key:T.value,class:ye(["dynamic_compare-item",{"is-custom":T.value===e(le).custom,"is-selected":T.value===e(r)}]),onClick:K=>y(T.value)},ce(T.label),11,["onClick"]))),128))])]),_:1},512),We(b(L,{"model-value":e(r),disabled:""},null,8,["model-value"]),[[Sl,!1]])]),_:1},8,["prop","required"]),e(le).custom===e(r)?(i(),C(N,{key:0},[b(F,{prop:$.prop?`${$.prop}.0.start`:void 0,ref_key:"elFormItemStartRef",ref:k,class:"dynamic_compare-formitem",rules:[{validator:(T,K,W)=>D(W),trigger:"change"}]},{default:v(()=>[b(P,{modelValue:e(p),"onUpdate:modelValue":h[1]||(h[1]=T=>E(p)?p.value=T:null),placeholder:"开始时间",options:e(u),separator:"",clearable:""},null,8,["modelValue","options"])]),_:1},8,["prop","rules"]),b(F,{prop:$.prop?`${$.prop}.0.end`:void 0,ref_key:"elFormItemEndRef",ref:S,class:"dynamic_compare-formitem",rules:[{validator:(T,K,W)=>D(W,!0),trigger:"change"}]},{default:v(()=>[b(P,{modelValue:e(a),"onUpdate:modelValue":h[2]||(h[2]=T=>E(a)?a.value=T:null),placeholder:"结束时间",options:e(m),separator:"",clearable:""},null,8,["modelValue","options"])]),_:1},8,["prop","rules"])],64)):B("",!0)],2)}}});const Po=oe(zo,[["__scopeId","data-v-bb63c180"]]),Bo=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const o=l,s=d,t=ae(o,s,[q.between]),r=V(()=>o.fieldInfo?He([rl.week,rl.quarter].includes(o.fieldInfo.field.options.type)?rl.date:o.fieldInfo.field.options.type,o.fieldInfo.field.options.format):"YYYY-MM-DD HH:mm:ss");return(n,p)=>{const u=H;return i(),C("div",null,[n.operate!==e(q).dateDynamic?(i(),_(u,{key:0,prop:n.prop,required:""},{default:v(()=>{var a,m,c;return[n.operate===e(q).between?(i(),_(_l,{key:0,modelValue:e(t),"onUpdate:modelValue":p[0]||(p[0]=y=>E(t)?t.value=y:null),class:"w100",type:(a=n.fieldInfo)!=null&&a.field?e($t)((m=n.fieldInfo)==null?void 0:m.field.options.type):e(Ot).daterange,format:r.value,"value-format":e(vl),"start-placeholder":"开始日期","end-placeholder":"结束日期",placement:"bottom-start",onChange:p[1]||(p[1]=y=>s("onSearch",e(x).change))},null,8,["modelValue","type","format","value-format"])):(i(),_(_l,{key:1,modelValue:e(t),"onUpdate:modelValue":p[2]||(p[2]=y=>E(t)?t.value=y:null),class:"w100",type:e(Tt)((c=n.fieldInfo)==null?void 0:c.field.options.type),format:r.value,"value-format":e(vl),placeholder:"请选择",placement:"bottom-start",onChange:p[3]||(p[3]=y=>s("onSearch",e(x).change))},null,8,["modelValue","type","format","value-format"]))]}),_:1},8,["prop"])):(i(),C("div",{key:1,class:"w100"},[b(Po,{modelValue:e(t),"onUpdate:modelValue":p[4]||(p[4]=a=>E(t)?t.value=a:null),prop:n.prop,onChange:p[5]||(p[5]=a=>s("onSearch",e(x).change))},null,8,["modelValue","prop"])]))])}}}),xo=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"})),Lo=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{}},emits:["update:modelValue"],setup(l,{emit:d}){const o=l,s=d,t=V({get(){return o.modelValue},set(n){s("update:modelValue",n)}}),r=V(()=>o.fieldInfo?He(o.fieldInfo.field.options.type,o.fieldInfo.field.options.format):"YYYY-MM-DD HH:mm:ss");return(n,p)=>{const u=H;return i(),_(u,{prop:n.prop,required:""},{default:v(()=>{var a;return[b(_l,{modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=m=>t.value=m),class:"w100",type:(a=n.fieldInfo)==null?void 0:a.field.options.type,format:r.value,"value-format":e(vl),"start-placeholder":"开始日期","end-placeholder":"结束日期",placement:"bottom-start"},null,8,["modelValue","type","format","value-format"])]}),_:1},8,["prop"])}}}),No=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),Wo=O({inheritAttrs:!1,__name:"AzInputMult",props:{modelValue:{},addTagTitle:{default:"添加"}},emits:["update:modelValue","change"],setup(l,{emit:d}){const o=l,s=d,t=Et(o,"modelValue",s),r=c=>{var y;(y=t.value)==null||y.splice(c,1),s("change")},n=U(!1),p=U(""),u=U(),a=()=>{n.value=!0,setTimeout(()=>{var c,y;(y=(c=u.value)==null?void 0:c.input)==null||y.focus()},100)},m=()=>{p.value&&(Array.isArray(t.value)?t.value.push(p.value):t.value=[p.value],s("change")),n.value=!1,p.value=""};return(c,y)=>{var $;const k=hl,S=Ae,D=Me;return i(),C(N,null,[b(Ne,ql({class:"input_mult","validate-event":!1,readonly:""},c.$attrs),{prefix:v(()=>[z("div",{class:"input_mult-prefix"},[(i(!0),C(N,null,X(e(t),(h,w)=>(i(),_(k,{key:w,class:"input_mult-tag",type:"info",closable:"","disable-transitions":!1,onClose:I=>r(w)},{default:v(()=>[z("span",{class:"tag-text az-ellipsis",title:h},ce(h),9,["title"])]),_:2},1032,["onClose"]))),128)),n.value?(i(),_(S,{key:0,ref_key:"InputRef",ref:u,modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=h=>p.value=h),"validate-event":!1,style:{width:"100px"},size:"small",onKeyup:fe(m,["enter"]),onBlur:m},null,8,["modelValue","onKeyup"])):(i(),_(D,{key:1,size:"small",onClick:a},{default:v(()=>[Q(ce(c.addTagTitle),1)]),_:1}))])]),_:1},16),We(z("div",null,[b(S,{"model-value":(($=e(t))==null?void 0:$.join(","))??""},null,8,["model-value"])],512),[[Sl,!1]])],64)}}});const Ho=oe(Wo,[["__scopeId","data-v-ce25f3ec"]]),Kl=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},mode:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const o=l,s=d,t=ae(o,s,[q.eqAny,q.noEqAny]);let r="";const n=()=>{r=t.value},p=()=>{t.value!==r&&s("onSearch",x.change)};return(u,a)=>(i(),_(Mt,{prop:u.prop,required:!!u.prop,"hide-label":""},{default:v(()=>[[e(q).eqAny,e(q).noEqAny].includes(u.operate)?(i(),_(Ho,{key:0,modelValue:e(t),"onUpdate:modelValue":a[0]||(a[0]=m=>E(t)?t.value=m:null),addTagTitle:"添加筛选值",onChange:a[1]||(a[1]=m=>s("onSearch",e(x).change))},null,8,["modelValue"])):(i(),C(N,{key:1},[u.mode===e(ge).condition?(i(),_(jt,{key:0,modelValue:e(t),"onUpdate:modelValue":a[2]||(a[2]=m=>E(t)?t.value=m:null),placeholder:"请输入",group:[e(At)()],onBlur:p,onFocus:n},null,8,["modelValue","group"])):(i(),_(Ne,{key:1,modelValue:e(t),"onUpdate:modelValue":a[3]||(a[3]=m=>E(t)?t.value=m:null),placeholder:"请输入",clearable:"",onClear:a[4]||(a[4]=m=>s("onSearch",e(x).clear)),onKeyup:a[5]||(a[5]=fe(m=>s("onSearch",e(x).keyup),["enter"]))},null,8,["modelValue"]))],64))]),_:1},8,["prop","required"]))}}),Ko=Object.freeze(Object.defineProperty({__proto__:null,default:Kl},Symbol.toStringTag,{value:"Module"})),Yo=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const o=l,s=d,t=se(o,"modelValue",s);return(r,n)=>{const p=Le,u=H;return i(),_(u,{prop:r.prop,required:!!r.prop},{default:v(()=>{var a,m;return[b(Ee,{modelValue:e(t),"onUpdate:modelValue":n[0]||(n[0]=c=>E(t)?t.value=c:null),class:"w100",placeholder:"请选择",load:(a=r.fieldInfo)!=null&&a.field.options.dataOptions?e(zl)((m=r.fieldInfo)==null?void 0:m.field.options.dataOptions):[],multiple:"",onChange:n[1]||(n[1]=c=>s("onSearch",e(x).change)),clearable:""},{default:v(({options:c})=>[(i(!0),C(N,null,X(c,y=>(i(),_(p,{key:y.value,label:y.label,value:y.value},{default:v(()=>[b(Pl,{item:y},null,8,["item"])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","load"])]}),_:1},8,["prop","required"])}}}),Go=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),Jo=O({__name:"Compare",props:{modelValue:{default:null},operate:{},prop:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const o=l,s=d,t=ae(o,s,[q.between]),r=V({get(){return Array.isArray(t.value)?null:t.value},set(u){t.value=u}}),n=V({get(){return Array.isArray(t.value)?t.value[0]:null},set(u){t.value=[u??null,p.value]}}),p=V({get(){return Array.isArray(t.value)?t.value[1]:null},set(u){t.value=[n.value,u??null]}});return(u,a)=>{const m=H;return u.operate!==e(q).between?(i(),_(m,{key:0,prop:u.prop,required:!!u.prop},{default:v(()=>[b(dl,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=c=>r.value=c),placeholder:"请输入",controls:!1,onKeyup:a[1]||(a[1]=fe(c=>s("onSearch",e(x).keyup),["enter"]))},null,8,["modelValue"])]),_:1},8,["prop","required"])):(i(),C("div",{key:1,class:"number_compare-range"},[b(m,{class:"range-form-item",prop:u.prop,required:!!u.prop},{default:v(()=>[b(dl,{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=c=>n.value=c),class:"number_compare",placeholder:"最小值",controls:!1,max:p.value,onKeyup:a[3]||(a[3]=fe(c=>s("onSearch",e(x).keyup),["enter"]))},null,8,["modelValue","max"])]),_:1},8,["prop","required"]),z("span",{class:"range-separate"},"~"),b(m,{class:"range-form-item",prop:u.prop,required:!!u.prop},{default:v(()=>[b(dl,{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=c=>p.value=c),class:"number_compare",placeholder:"最大值",controls:!1,min:n.value,onKeyup:a[5]||(a[5]=fe(c=>s("onSearch",e(x).keyup),["enter"]))},null,8,["modelValue","min"])]),_:1},8,["prop","required"])]))}}});const Yl=oe(Jo,[["__scopeId","data-v-ee04f453"]]),Qo=Object.freeze(Object.defineProperty({__proto__:null,default:Yl},Symbol.toStringTag,{value:"Module"})),Xo=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const o=l,s=d,t=ae(o,s,[q.eqAny,q.noEqAny]);return(r,n)=>{const p=Le,u=H;return i(),_(u,{prop:r.prop,required:!!r.prop},{default:v(()=>{var a,m;return[b(Ee,{modelValue:e(t),"onUpdate:modelValue":n[0]||(n[0]=c=>E(t)?t.value=c:null),class:"w100",placeholder:"请选择",load:(a=r.fieldInfo)!=null&&a.field.options.dataOptions?e(zl)((m=r.fieldInfo)==null?void 0:m.field.options.dataOptions):[],multiple:r.operate===e(q).eqAny||r.operate===e(q).noEqAny,onChange:n[1]||(n[1]=c=>s("onSearch",e(x).change)),clearable:""},{default:v(({options:c})=>[(i(!0),C(N,null,X(c,y=>(i(),_(p,{key:y.value,label:y.label,value:y.value},{default:v(()=>[b(Pl,{item:y},null,8,["item"])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","load","multiple"])]}),_:1},8,["prop","required"])}}}),Zo=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),ea=O({__name:"Compare",setup(l){return(d,o)=>(i(),_(Yl,Ke(Ye(d.$attrs)),null,16))}}),la=Object.freeze(Object.defineProperty({__proto__:null,default:ea},Symbol.toStringTag,{value:"Module"})),ta=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const t=ae(l,d);return(r,n)=>{const p=H;return i(),_(p,{prop:r.prop,required:""},{default:v(()=>{var u;return[b(Rt,{modelValue:e(t),"onUpdate:modelValue":n[0]||(n[0]=a=>E(t)?t.value=a:null),field:(u=r.fieldInfo)==null?void 0:u.field,onChange:n[1]||(n[1]=a=>r.$emit("onSearch",e(x).change))},null,8,["modelValue","field"])]}),_:1},8,["prop"])}}}),oa=Object.freeze(Object.defineProperty({__proto__:null,default:ta},Symbol.toStringTag,{value:"Module"})),aa=O({__name:"Compare",setup(l){const d=Ut();return(o,s)=>(i(),_(Kl,Ke(Ye(e(d))),null,16))}}),na=Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"})),ra=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const o=l,s=d,t=ae(o,s,[q.between]),r=V(()=>o.fieldInfo?He(o.fieldInfo.field.options.type,o.fieldInfo.field.options.format):"HH:mm:ss"),n=U(!1);let p=t.value;const u=a=>{n.value=a,n.value?p=t.value:p!==t.value&&s("onSearch",x.change)};return(a,m)=>{const c=H;return i(),_(c,{prop:a.prop,required:""},{default:v(()=>{var y,k;return[a.operate===e(q).between?(i(),_(yl,{key:0,modelValue:e(t),"onUpdate:modelValue":m[0]||(m[0]=S=>E(t)?t.value=S:null),class:"w100",type:(y=a.fieldInfo)!=null&&y.field?e(qt)(a.fieldInfo.field.options.type):e(zt).timerange,format:r.value,"value-format":"HH:mm:ss","start-placeholder":"开始时间","end-placeholder":"结束时间",placement:"bottom-start",onVisibleChange:u},null,8,["modelValue","type","format"])):(i(),_(yl,{key:1,modelValue:e(t),"onUpdate:modelValue":m[1]||(m[1]=S=>E(t)?t.value=S:null),class:"w100",type:(k=a.fieldInfo)==null?void 0:k.field.options.type,format:r.value,"value-format":"HH:mm:ss",placeholder:"请选择",placement:"bottom-start",onVisibleChange:u},null,8,["modelValue","type","format"]))]}),_:1},8,["prop"])}}}),sa=Object.freeze(Object.defineProperty({__proto__:null,default:ra},Symbol.toStringTag,{value:"Module"})),da=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{}},emits:["update:modelValue"],setup(l,{emit:d}){const o=l,s=d,t=V({get(){return o.modelValue},set(n){s("update:modelValue",n)}}),r=V(()=>o.fieldInfo?He(o.fieldInfo.field.options.type,o.fieldInfo.field.options.format):"HH:mm:ss");return(n,p)=>{const u=H;return i(),_(u,{prop:n.prop,required:""},{default:v(()=>{var a;return[b(yl,{modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=m=>t.value=m),class:"w100",type:(a=n.fieldInfo)==null?void 0:a.field.options.type,format:r.value,"value-format":"HH:mm:ss","start-placeholder":"开始时间","end-placeholder":"结束时间",placement:"bottom-start"},null,8,["modelValue","type","format"])]}),_:1},8,["prop"])}}}),ia=Object.freeze(Object.defineProperty({__proto__:null,default:da},Symbol.toStringTag,{value:"Module"})),ua=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){var p;const o=l,t=se(o,"modelValue",d),{value:r,multiple:n}=Ce(t,(p=o.fieldInfo)==null?void 0:p.field,Ie({operate:Ve(o).operate}));return(u,a)=>{const m=H;return i(),_(m,{prop:u.prop,required:""},{default:v(()=>[b(be,{modelValue:e(r),"onUpdate:modelValue":a[0]||(a[0]=c=>E(r)?r.value=c:null),multiple:e(n),class:"w100",tabs:[e(he).corpCooperation],onChange:a[1]||(a[1]=c=>u.$emit("onSearch",e(x).change))},null,8,["modelValue","multiple","tabs"])]),_:1},8,["prop"])}}}),pa=Object.freeze(Object.defineProperty({__proto__:null,default:ua},Symbol.toStringTag,{value:"Module"})),ca=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){var p;const o=l,t=se(o,"modelValue",d),{value:r,multiple:n}=Ce(t,(p=o.fieldInfo)==null?void 0:p.field,Ie({operate:Ve(o).operate}));return(u,a)=>{const m=H;return i(),_(m,{prop:u.prop,required:""},{default:v(()=>[b(be,{modelValue:e(r),"onUpdate:modelValue":a[0]||(a[0]=c=>E(r)?r.value=c:null),multiple:e(n),class:"w100",tabs:[e(he).userCooperation],onChange:a[1]||(a[1]=c=>u.$emit("onSearch",e(x).change))},null,8,["modelValue","multiple","tabs"])]),_:1},8,["prop"])}}}),ma=Object.freeze(Object.defineProperty({__proto__:null,default:ca},Symbol.toStringTag,{value:"Module"})),Gl=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{},mode:{},selectRange:{},onlyInstitution:{type:Boolean}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){var u;const o=l,t=se(o,"modelValue",d),{value:r,multiple:n}=Ce(t,(u=o.fieldInfo)==null?void 0:u.field,Ie({operate:Ve(o).operate})),p=V(()=>{if(o.mode!==ge.userUse)return o.mode===ge.rule?[te.org]:[te.org,te.orgAndChild,te.currentUserOrg,te.currentUserOrgToChild,te.currentUserOrgToChildIdDepts]});return(a,m)=>{const c=H;return i(),_(c,{prop:a.prop,required:""},{default:v(()=>[b(be,{modelValue:e(r),"onUpdate:modelValue":m[0]||(m[0]=y=>E(r)?r.value=y:null),multiple:e(n),class:"w100",tabs:[e(he).org],dynamic:p.value,onChange:m[1]||(m[1]=y=>a.$emit("onSearch",e(x).change)),isDynamicData:"",selectRange:a.selectRange,onlyInstitution:a.onlyInstitution},null,8,["modelValue","multiple","tabs","dynamic","selectRange","onlyInstitution"])]),_:1},8,["prop"])}}}),fa=Object.freeze(Object.defineProperty({__proto__:null,default:Gl},Symbol.toStringTag,{value:"Module"})),_a=O({__name:"Compare",setup(l){return(d,o)=>(i(),_(Gl,Ke(Ye(d.$attrs)),null,16))}}),va=Object.freeze(Object.defineProperty({__proto__:null,default:_a},Symbol.toStringTag,{value:"Module"})),ya=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{},selectRange:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){var p;const o=l,t=se(o,"modelValue",d),{value:r,multiple:n}=Ce(t,(p=o.fieldInfo)==null?void 0:p.field,Ie({operate:Ve(o).operate}));return(u,a)=>{const m=H;return i(),_(m,{prop:u.prop,required:""},{default:v(()=>[b(be,{modelValue:e(r),"onUpdate:modelValue":a[0]||(a[0]=c=>E(r)?r.value=c:null),multiple:e(n),class:"w100",tabs:[e(he).jobByOrg],"dialog-title":"岗位列表",selectRange:u.selectRange,onChange:a[1]||(a[1]=c=>u.$emit("onSearch",e(x).change))},null,8,["modelValue","multiple","tabs","selectRange"])]),_:1},8,["prop"])}}}),ga=Object.freeze(Object.defineProperty({__proto__:null,default:ya},Symbol.toStringTag,{value:"Module"})),Jl=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{},mode:{},selectRange:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){var p;const o=l,t=se(o,"modelValue",d),{value:r,multiple:n}=Ce(t,(p=o.fieldInfo)==null?void 0:p.field,Ie({operate:Ve(o).operate}));return(u,a)=>{const m=H;return i(),_(m,{prop:u.prop,required:""},{default:v(()=>[u.operate===e(q).dependOrg?(i(),_(be,{key:0,modelValue:e(r),"onUpdate:modelValue":a[0]||(a[0]=c=>E(r)?r.value=c:null),multiple:e(n),class:"w100",tabs:[e(he).org],dynamic:[e(te).org,e(te).currentUserOrg,e(te).orgAndChild,e(te).currentUserOrgToChild,e(te).currentUserOrgToChildIdDepts],onChange:a[1]||(a[1]=c=>u.$emit("onSearch",e(x).change)),selectRange:u.selectRange},null,8,["modelValue","multiple","tabs","dynamic","selectRange"])):(i(),_(be,{key:1,modelValue:e(r),"onUpdate:modelValue":a[2]||(a[2]=c=>E(r)?r.value=c:null),multiple:e(n),class:"w100",tabs:[e(he).memberByOrg],dynamic:u.mode&&[e(ge).userUse].includes(u.mode)?void 0:[e(te).user],onChange:a[3]||(a[3]=c=>u.$emit("onSearch",e(x).change)),isDynamicData:"",selectRange:u.selectRange},null,8,["modelValue","multiple","tabs","dynamic","selectRange"]))]),_:1},8,["prop"])}}}),ba=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),ha=O({__name:"Compare",setup(l){return(d,o)=>(i(),_(Jl,Ke(Ye(d.$attrs)),null,16))}}),Sa=Object.freeze(Object.defineProperty({__proto__:null,default:ha},Symbol.toStringTag,{value:"Module"})),Ia=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{},selectRange:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){var p;const o=l,t=se(o,"modelValue",d),{value:r,multiple:n}=Ce(t,(p=o.fieldInfo)==null?void 0:p.field,Ie({operate:Ve(o).operate}));return(u,a)=>{const m=H;return i(),_(m,{prop:u.prop,required:""},{default:v(()=>[b(be,{modelValue:e(r),"onUpdate:modelValue":a[0]||(a[0]=c=>E(r)?r.value=c:null),multiple:e(n),class:"w100","dialog-title":"角色列表",tabs:[e(he).role],selectRange:u.selectRange,onChange:a[1]||(a[1]=c=>u.$emit("onSearch",e(x).change))},null,8,["modelValue","multiple","tabs","selectRange"])]),_:1},8,["prop"])}}}),Va=Object.freeze(Object.defineProperty({__proto__:null,default:Ia},Symbol.toStringTag,{value:"Module"})),wa=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{},mode:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const t=ae(l,d,!0);return(r,n)=>{const p=Il,u=H;return i(),_(u,{prop:r.prop,required:!!r.prop},{default:v(()=>{var a,m;return[(a=r.fieldInfo)!=null&&a.field?(i(),_(Wl,{key:1,modelValue:e(t),"onUpdate:modelValue":n[0]||(n[0]=c=>E(t)?t.value=c:null),field:(m=r.fieldInfo)==null?void 0:m.field,multiple:"",checkStrictly:"",onChange:n[1]||(n[1]=c=>r.$emit("onSearch",e(Bl).change))},null,8,["modelValue","field"])):(i(),_(p,{key:0,class:"w100",placeholder:"请选择"}))]}),_:1},8,["prop","required"])}}}),ka=Object.freeze(Object.defineProperty({__proto__:null,default:wa},Symbol.toStringTag,{value:"Module"})),Ca=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{},mode:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const o=l,s=d,t=ae(o,s,Object.values(q).filter(r=>![q.likeLinkName,q.eqLinkName].includes(r)));return(r,n)=>{const p=Ae,u=H;return i(),_(u,{prop:r.prop,required:!!r.prop},{default:v(()=>{var a,m;return[[e(q).likeLinkName,e(q).eqLinkName].includes(o.operate)?(i(),_(p,{key:0,modelValue:e(t),"onUpdate:modelValue":n[0]||(n[0]=c=>E(t)?t.value=c:null),placeholder:"请输入",onKeyup:n[1]||(n[1]=fe(c=>s("onSearch",e(x).keyup),["enter"]))},null,8,["modelValue"])):(a=r.fieldInfo)!=null&&a.field?(i(),_(Qa,{key:1,modelValue:e(t),"onUpdate:modelValue":n[2]||(n[2]=c=>E(t)?t.value=c:null),onlySelect:"",multiple:"",field:(m=r.fieldInfo)==null?void 0:m.field,onChange:n[3]||(n[3]=c=>r.$emit("onSearch",e(x).change))},null,8,["modelValue","field"])):B("",!0)]}),_:1},8,["prop","required"])}}}),Fa=Object.freeze(Object.defineProperty({__proto__:null,default:Ca},Symbol.toStringTag,{value:"Module"})),Da=O({__name:"Compare",props:{modelValue:{},operate:{},prop:{},fieldInfo:{},mode:{}},emits:["update:modelValue","onSearch"],setup(l,{emit:d}){const t=ae(l,d);return(r,n)=>{const p=Il,u=H;return i(),_(u,{prop:r.prop,required:!!r.prop},{default:v(()=>{var a,m,c;return[(a=r.fieldInfo)!=null&&a.field?(i(),_(Wl,{key:1,modelValue:e(t),"onUpdate:modelValue":n[0]||(n[0]=y=>E(t)?t.value=y:null),field:(c=r.fieldInfo)==null?void 0:c.field,onChange:n[1]||(n[1]=y=>r.$emit("onSearch",e(Bl).change))},null,8,["modelValue","field"])):(i(),_(p,{key:0,class:"w100",placeholder:(m=r.fieldInfo)==null?void 0:m.field.options.placeholder},null,8,["placeholder"]))]}),_:1},8,["prop","required"])}}}),$a=Object.freeze(Object.defineProperty({__proto__:null,default:Da},Symbol.toStringTag,{value:"Module"})),Ql={},Oa=Object.assign({"../../field/advancedField/address/pc/Compare.vue":jo,"../../field/advancedField/autoNumber/pc/Compare.vue":Mo,"../../field/advancedField/plugin/pc/Compare.vue":Uo,"../../field/basicField/date/pc/Compare.vue":xo,"../../field/basicField/daterange/pc/Compare.vue":No,"../../field/basicField/input/pc/Compare.vue":Ko,"../../field/basicField/multiple/pc/Compare.vue":Go,"../../field/basicField/number/pc/Compare.vue":Qo,"../../field/basicField/radio/pc/Compare.vue":Zo,"../../field/basicField/slider/pc/Compare.vue":la,"../../field/basicField/switch/pc/Compare.vue":oa,"../../field/basicField/textarea/pc/Compare.vue":na,"../../field/basicField/time/pc/Compare.vue":sa,"../../field/basicField/timerange/pc/Compare.vue":ia,"../../field/orgField/cooperateEnterprise/pc/Compare.vue":pa,"../../field/orgField/cooperatePersonnel/pc/Compare.vue":ma,"../../field/orgField/department/pc/Compare.vue":fa,"../../field/orgField/departmentSingle/pc/Compare.vue":va,"../../field/orgField/job/pc/Compare.vue":ga,"../../field/orgField/member/pc/Compare.vue":ba,"../../field/orgField/memberSingle/pc/Compare.vue":Sa,"../../field/orgField/role/pc/Compare.vue":Va,"../../field/relationField/cascader/pc/Compare.vue":ka,"../../field/relationField/linkData/pc/Compare.vue":Fa,"../../field/relationField/parent/pc/Compare.vue":$a});Object.entries(Oa).forEach(([l,d])=>{const o=l.split(Pt.sep),s=o[o.length-3];let t=d;t=t.default||t,Ql[s]=t});function Ta(l){let d=Ql[l]??null;return Bt(d)==="module"&&(d=d.default),d||console.error(`你需要查找控件类型为${l}的筛选比较组件, 但是并没有找到, 请检查一下是否存在该类型, 或者组件路径存在问题`),d}const Ea=O({__name:"SetFilterDefault",props:{modelValue:{},mode:{default:ge.condition},fieldInfo:{},fieldType:{},operate:{}},emits:["update:modelValue"],setup(l,{emit:d}){const o=l,t=se(o,"modelValue",d),r=V(()=>{var a;return o.fieldType||((a=o.fieldInfo)==null?void 0:a.field.type)}),n=V(()=>o.operate&&r.value&&Ta(r.value)),p=a=>{a=ml(a),t.value=a.length?[...a]:null},u=V(()=>o.operate&&[q.noEmpty,q.empty].includes(o.operate));return(a,m)=>{const c=Ae;return u.value?(i(),C("div",{key:0,class:"w100"})):n.value?(i(),_(xt(n.value),{key:1,class:"w100",operate:a.operate,"model-value":e(t),"onUpdate:modelValue":p,fieldInfo:a.fieldInfo??void 0,mode:a.mode},null,8,["operate","model-value","fieldInfo","mode"])):(i(),_(c,{key:2,placeholder:a.operate?r.value?"请输入":"找不到对应的筛选字段类型":"请先选择筛选类型",disabled:""},null,8,["placeholder"]))}}});var Oe=(l=>(l.init="init",l.operateChange="operateChange",l.query="query",l.reset="reset",l))(Oe||{});function ja(l,d){var o;return d?((o=l.valueMap)==null?void 0:o[d])??null:null}function Aa(l=[],d){return new Map(l.map(o=>{var s;return[o.id,{operate:o.operate,value:d!=null&&d.init&&o.initVal?Ul(o.initVal):ja(o,o.operate),fieldType:o.fieldType??((s=o.fieldInfo)==null?void 0:s.field.type)}]}))}function il(l){return new Map([...l??[]].filter(([,d])=>{var o;return!((d.value===null||((o=d.value)==null?void 0:o.length)===0)&&!(d.operate&&[q.noEmpty,q.empty].includes(d.operate)))}))}function Ma(l,d){const o=(h,w)=>{var I;return w?((I=h.valueMap)==null?void 0:I[w])??null:null},s=h=>Aa(l.list,{init:h}),t=U(!0),r=U(new Map),n=h=>{d("search",h,il(r.value))};pe(()=>s(),(h,w)=>{Be(h,w)||(r.value=s(t.value),Be(il(h),il(w))||n(Oe.init)),t.value=!1},{immediate:!0});const p=h=>{var w;return(w=r.value.get(h.id))==null?void 0:w.operate},u=(h,w)=>{const I=r.value.get(w.id);if(I&&I.operate!==h){const L=I.value,F=o(w,h);I.operate=h,I.value=F,(h&&[q.noEmpty,q.empty].includes(h)||!Be(L,F))&&n(Oe.operateChange)}},a=h=>{var w;return((w=r.value.get(h.id))==null?void 0:w.value)??void 0},m=(h,w)=>{const I=r.value.get(w.id);I&&(I.value=h)},c=()=>{n(Oe.query)},y=()=>{r.value=s(),n(Oe.reset)},k=function(h){var w;return h.alias||((w=h.fieldInfo)==null?void 0:w.field.options.label)||""},S=V(()=>{const h=Math.max(...(l.list||[]).map(w=>Lt(k(w)??"",14)));return h<180?h+30:180}),D={[`${cl.date}.${q.between}`]:2,[`${cl.date}.${q.dateDynamic}`]:2};return{labelWidth:S,getWidth:h=>{const w=S.value+(l.isSelectOperate?150:0)+200,I=h.fieldInfo,L=D[`${I==null?void 0:I.field.type}.${p(h)}`]??1;return w*L+"px"},getLabel:k,getOperate:p,setOperate:u,getFilterValue:a,setFilterValue:m,handleSearch:n,onQuery:c,onReset:y}}const Ra=O({__name:"ScreenGroup",props:{list:{},isSelectOperate:{type:Boolean},isBtn:{type:Boolean,default:!0}},emits:["search"],setup(l,{emit:d}){const o=l,s=d,{labelWidth:t,getWidth:r,getLabel:n,getOperate:p,setOperate:u,getFilterValue:a,setFilterValue:m,handleSearch:c,onQuery:y,onReset:k}=Ma(o,s);return(S,D)=>{const $=H,h=Me,w=Wt;return i(),_(w,{"label-width":e(t),class:"screen_group",onSubmit:D[0]||(D[0]=ve(()=>{},["prevent"]))},{default:v(()=>[z("div",{class:"screen_group-container"},[(i(!0),C(N,null,X(S.list,I=>(i(),_($,{class:"screen_group-item",style:Se({"flex-basis":e(r)(I)}),key:I.id},{label:v(()=>[b(je,{content:e(n)(I),style:{"max-width":"100%"}},null,8,["content"])]),default:v(()=>[z("div",{class:"screen_group-body"},[S.isSelectOperate&&I.isUserSelectable!==!1?(i(),_(To,{key:0,class:"screen_group-operate","model-value":e(p)(I),"onUpdate:modelValue":L=>e(u)(L,I),placeholder:"请选择筛选方式",fieldInfo:I.fieldInfo,otherOptions:{noCheckSystem:!0},isDefaultFirst:""},null,8,["model-value","onUpdate:modelValue","fieldInfo"])):B("",!0),b(Ea,{"model-value":e(a)(I),"onUpdate:modelValue":L=>e(m)(L,I),fieldInfo:I.fieldInfo,operate:e(p)(I),fieldType:I.fieldType,onOnSearch:e(c)},null,8,["model-value","onUpdate:modelValue","fieldInfo","operate","fieldType","onOnSearch"])])]),_:2},1032,["style"]))),128)),S.isBtn?(i(),C("div",{key:0,class:"screen_group-btn"},[b(h,{type:"primary",icon:e(Nt),onClick:e(y)},{default:v(()=>[Q(" 查询 ")]),_:1},8,["icon","onClick"]),b(h,{onClick:e(k)},{default:v(()=>[Q("重置")]),_:1},8,["onClick"])])):B("",!0)])]),_:1},8,["label-width"])}}});const Ua=oe(Ra,[["__scopeId","data-v-0d9a03b6"]]),qa=O({__name:"SvgIcon",props:{iconClass:{}},setup(l){return(d,o)=>(i(),C("i",null,[b(Ht,ql(d.$attrs,{"icon-class":d.iconClass}),null,16,["icon-class"])]))}}),za=O({inheritAttrs:!1,__name:"Operate",props:{context:{},row:{},external:{},isViewOperate:{type:Boolean}},setup(l){const d=l,{handleAddOrEdit:o,isViewAuth:s,handleView:t,handleCancelLink:r,isRemoveAuth:n,handleRemove:p,isEditAuth:u,getSelected:a,authDisabled:m}=d.context,c=V(()=>{const k=new Set;return s.value&&d.isViewOperate&&k.add("view"),u.value&&k.add("edit"),a(d.row)&&k.add("cancelLink"),n.value&&k.add("remove"),k}),y=V(()=>new Set([...c.value].filter(k=>{var S;return!((S=d.external)!=null&&S.has(k))})));return(k,S)=>{var P;const D=Me,$=xl,h=Yt,w=go,I=bl,L=vo,F=yo;return i(),C("div",{class:ye(["linkdata_operate",{"is-external":(P=k.external)==null?void 0:P.size}])},[(i(!0),C(N,null,X([...k.external??[]],T=>(i(),_($,{key:T,class:"box-item",effect:"dark",content:"取消关联",placement:"top","hide-after":0,"show-after":300},{default:v(()=>[b(D,{type:"primary",link:"",onClick:S[0]||(S[0]=K=>e(r)(k.row)),style:{"margin-right":"7px"}},{default:v(()=>[b(qa,{"icon-class":"disconnect"})]),_:1})]),_:1}))),128)),y.value.size?(i(),_(F,{key:0,class:"operate_select"},{dropdown:v(()=>[b(L,null,{default:v(()=>[(i(!0),C(N,null,X(y.value,T=>(i(),C(N,{key:T},[T==="view"?(i(),_(w,{key:0,onClick:S[1]||(S[1]=K=>e(t)(k.row))},{default:v(()=>[Q(" 查看 ")]),_:1})):B("",!0),T==="edit"?(i(),_(w,{key:1,onClick:S[2]||(S[2]=K=>e(o)(k.row)),disabled:e(m)},{default:v(()=>[Q(" 编辑 ")]),_:1},8,["disabled"])):B("",!0),T==="cancelLink"?(i(),_(w,{key:2,onClick:S[3]||(S[3]=K=>e(r)(k.row))},{default:v(()=>[Q(" 取消关联 ")]),_:1})):B("",!0),T==="remove"?(i(),_(w,{key:3,onClick:S[4]||(S[4]=K=>e(p)(k.row)),disabled:e(m)},{default:v(()=>[b(I,{underline:!1,type:"danger",disabled:e(m)},{default:v(()=>[Q(" 删除 ")]),_:1},8,["disabled"])]),_:1},8,["disabled"])):B("",!0)],64))),128))]),_:1})]),default:v(()=>[z("div",{class:"operate_select-icon"},[b(h,null,{default:v(()=>[b(e(Kt))]),_:1})])]),_:1})):B("",!0)],2)}}});const wl=oe(za,[["__scopeId","data-v-5e039852"]]),Pa=O({__name:"TableSummaRow",props:{field:{},contentW:{},index:{}},setup(l){const d=gl();return(o,s)=>(i(),C("div",{class:"table_summa",style:Se({width:`${o.contentW}px`})},[b(je,{style:{width:"100%"}},{default:v(()=>{var t;return[z("span",{style:{width:"60px",display:"inline-block"}},"统计："),(i(!0),C(N,null,X((t=o.field.options.dataCalcs)==null?void 0:t.filter(r=>r.isShow),r=>{var n;return i(),C("span",{key:r.clientId,class:"table_summa-item"},[z("span",null,ce(r.label)+"：",1),z("span",null,ce(e(d)?((n=e(d).linkDataDadaCalcMap.get(e(Gt)({dataCalc:r,field:o.field,rowId:e(d).getRowIdByIndex(o.field.fieldId,{index:o.index})})))==null?void 0:n.val)??"-":"-"),1)])}),128))]}),_:1})],4))}});const Ba=oe(Pa,[["__scopeId","data-v-82cac10c"]]),xa=O({__name:"DropPresentation",props:{context:{},field:{}},setup(l){const d=l,{selectItems:o,mainEntryId:s,sourceInfo:t,handleView:r,valArray:n,handleCancelLink:p,handleStartSelect:u}=d.context,{maxWidthStyle:a}=Nl(d.field);return(m,c)=>{const y=hl,k=Me,S=xl;return i(),_(Ee,{"model-value":e(n),class:"w100 drop_presentation-select",style:Se(e(a)),multiple:"","popper-class":"drop_presentation-popper"},{tag:v(()=>[z("div",{class:"drop_presentation-display"},[z("div",{class:"tag-wrapper"},[(i(!0),C(N,null,X(e(o),D=>(i(),_(y,{closable:"",onClose:$=>e(p)(D),onClick:$=>e(r)(D,$),key:e(ue)({entryId:e(s),fieldId:"id",rowData:D}),style:{"max-width":"100%"}},{default:v(()=>{var $;return[b(je,{style:{"max-width":"100%"},content:e(xe)({rowData:D,field:m.field,fields:($=e(t))==null?void 0:$.fields})},null,8,["content"])]}),_:2},1032,["onClose","onClick"]))),128))]),b(S,{class:"box-item",effect:"dark",content:"重新选择",placement:"top"},{default:v(()=>[z("div",{class:"drop_presentation-edit",onClick:c[0]||(c[0]=(...D)=>e(u)&&e(u)(...D))},[b(k,{link:"",icon:e(Jt)},null,8,["icon"])])]),_:1})])]),_:1},8,["model-value","style"])}}});const La=oe(xa,[["__scopeId","data-v-b30ae385"]]),Na=O({__name:"CardPresentation",props:{context:{},field:{}},setup(l){const d=l,{selectItems:o,sourceInfo:s,extractId:t,isView:r,hasSelected:n,setSelected:p}=d.context,u=U(),{itemWidth:a}=bo({target:u,numList:[[400,1],[800,2],[1200,3],[1/0,4]]});return(m,c)=>{const y=Vl,k=Ll;return i(),C("div",{class:"card_presentation",ref_key:"carPresentationRef",ref:u},[(i(!0),C(N,null,X(e(o),S=>(i(),C("div",{class:"card_presentation-content",key:e(t)(S),style:Se({width:e(a)})},[z("div",{class:"card_presentation-header"},[b(wl,{class:"dialog_select",external:new Set(["cancelLink"]),context:m.context,row:S,trigger:"click",isViewOperate:""},null,8,["external","context","row"])]),b(k,{class:"tile_select-card",shadow:"hover"},{default:v(()=>{var D,$;return[z("div",{class:"card_presentation-card"},[z("div",{class:"card-checkbox"},[m.field.options.showNum===e(_e).multiple&&!e(r)?(i(),_(y,{key:0,class:"dialog_select-checkbox",label:"","model-value":e(n)(S),"onUpdate:modelValue":h=>e(p)(S)},null,8,["model-value","onUpdate:modelValue"])):B("",!0)]),z("div",{class:"card-content"},[b(ho,{rowData:S,headerFieldId:((D=m.field)==null?void 0:D.options.linkFieldId)??"",fields:(($=e(s))==null?void 0:$.fields)??[],"show-fields":m.field.options.formShowField,num:m.field.options.cardShowColumns??2},null,8,["rowData","headerFieldId","fields","show-fields","num"])])])]}),_:2},1024)],4))),128))],512)}}});const Wa=oe(Na,[["__scopeId","data-v-6fa792e3"]]),Ha=O({__name:"DialogSelect",props:{context:{},loading:{type:Boolean},field:{},index:{},current:{},limit:{},total:{},labelSuffixEl:{}},emits:["update:current","update:limit"],setup(l,{emit:d}){const o=l,s=d,t=se(o,"current",s),r=se(o,"limit",s),{selectItems:n,mainEntryId:p,visible:u,handleStartSelect:a,selected:m,handleConfirm:c,isAddAuth:y,normlMultiple:k,filterList:S,handleSearch:D,authDisabled:$,handleAddOrEdit:h,formShowField:w,tableData:I,reloadLoading:L,isViewAuth:F,normlShowField:P,isView:T,checkAll:K,isIndeterminate:W,hasSelected:M,setSelected:Y,handleBatchCancelLink:de,dialogTableSelected:ne}=o.context,Fe=U(),{width:Ge}=pl(Fe),Je=V(()=>{var R;return(R=o.field.options.dataCalcs)==null?void 0:R.some(j=>j.isShow)}),Qe=R=>{const{columns:j}=R,J=[];return j.forEach((we,me)=>{me===0&&(J[me]=b(Ba,{field:o.field,contentW:Ge.value,index:o.index},null))}),J},De=U(),Re=V(()=>!T.value&&!(n.value.length&&o.field.options.presentationType===sl.drop)),Xe=V(()=>{var R,j,J;return!!((J=(j=(R=De.value)==null?void 0:R.tableShowFieldRef)==null?void 0:j.azTableRef)!=null&&J.isFullscreen)}),Ze=V(()=>!n.value.length||!o.labelSuffixEl||!!Xe.value),el=()=>{var R,j,J;(J=(j=(R=De.value)==null?void 0:R.tableShowFieldRef)==null?void 0:j.azTableRef)==null||J.toggle()};return(R,j)=>{const J=Me,we=Vl,me=eo,ll=lo;return i(),C(N,null,[z("div",{ref_key:"fullEl",ref:Fe},[Re.value?(i(),_(Qt,{key:0,to:R.labelSuffixEl,disabled:Ze.value},[b(J,{type:"primary",onClick:e(a)},{default:v(()=>[Q("选择")]),_:1},8,["onClick"]),e(n).length&&R.field.options.showNum===e(_e).multiple?(i(),_(J,{key:0,type:"success",onClick:e(de),disabled:!e(ne).size},{default:v(()=>[Q(" 批量取关 ")]),_:1},8,["onClick","disabled"])):B("",!0)],8,["to","disabled"])):B("",!0),e(n).length?(i(),C(N,{key:1},[R.field.options.presentationType===e(sl).drop?(i(),_(La,{key:0,context:R.context,field:R.field},null,8,["context","field"])):R.field.options.presentationType===e(sl).card?(i(),_(Wa,{key:1,context:R.context,field:R.field},null,8,["context","field"])):(i(),_(So,{key:2,ref_key:"formShowFieldRef",ref:De,class:"mt-10 dialog_select-table",hidePagination:"",loading:e(L),"source-id":R.field.options.sourceId,"show-field":e(w),showNum:e(_e).multiple,"table-data":e(n)??[],clickToDetails:e(F),fullEl:Fe.value,"show-summary":Je.value,"summary-method":Qe,lastColunmGrow:!1,disabledRowClickColumns:["linkdata_checkbox"]},Rl({"before-column":v(()=>[b(me,{fixed:"left",width:"60",prop:"linkdata_checkbox"},{header:v(()=>[z("div",{class:"dialog_select-header",onClick:j[1]||(j[1]=ve(()=>{},["stop"]))},[R.field.options.showNum===e(_e).multiple&&!e(T)?(i(),_(we,{key:0,modelValue:e(K),"onUpdate:modelValue":j[0]||(j[0]=G=>E(K)?K.value=G:null),class:"dialog_select-checkbox",label:"",style:{"margin-right":"7px"},indeterminate:e(W)},null,8,["modelValue","indeterminate"])):B("",!0),b(J,{icon:e(Xt),link:"",onClick:el,title:"全屏"},null,8,["icon"])])]),default:v(({row:G,$index:tl})=>[z("div",{onClick:j[2]||(j[2]=ve(()=>{},["stop"]))},[R.field.options.showNum===e(_e).multiple&&!e(T)?(i(),_(we,{key:0,class:"dialog_select-checkbox",style:{height:"auto"},"model-value":e(M)(G),"onUpdate:modelValue":Ue=>e(Y)(G),label:""},null,8,["model-value","onUpdate:modelValue"])):(i(),C("span",{key:1},ce(tl+1),1))])]),_:1})]),_:2},[e(T)?void 0:{name:"column",fn:v(()=>[b(me,{fixed:"right",label:"操作"},{default:v(({row:G})=>[z("div",{onClick:j[3]||(j[3]=ve(()=>{},["stop"])),class:"dialog_select-content"},[b(wl,{class:"dialog_select",external:new Set(["cancelLink"]),context:R.context,row:G,trigger:"click"},null,8,["external","context","row"])])]),_:1})]),key:"0"}]),1032,["loading","source-id","show-field","showNum","table-data","clickToDetails","fullEl","show-summary"]))],64)):B("",!0)],512),b(ll,{modelValue:e(u),"onUpdate:modelValue":j[9]||(j[9]=G=>E(u)?u.value=G:null),title:"选择数据",width:"60%","append-to-body":""},{footer:v(()=>[z("span",{class:"dialog-footer"},[b(J,{onClick:j[8]||(j[8]=G=>u.value=!1)},{default:v(()=>[Q("取消")]),_:1}),b(J,{type:"primary",onClick:e(c)},{default:v(()=>[Q("确定")]),_:1},8,["onClick"])])]),default:v(()=>[e(S).length?(i(),_(Ua,{key:0,list:e(S),onSearch:e(D)},null,8,["list","onSearch"])):B("",!0),e(y)?(i(),C("div",{key:1,class:"mb-10"},[b(J,{onClick:j[4]||(j[4]=G=>e(h)()),disabled:e($),type:"primary"},{default:v(()=>[Q(" 新增 ")]),_:1},8,["disabled"])])):B("",!0),b(Zt,{selected:e(m),"onUpdate:selected":j[5]||(j[5]=G=>E(m)?m.value=G:null),current:e(t),"onUpdate:current":j[6]||(j[6]=G=>E(t)?t.value=G:null),limit:e(r),"onUpdate:limit":j[7]||(j[7]=G=>E(r)?r.value=G:null),isString:"",mainEntryId:e(p),total:R.total,showFields:e(P),data:e(I),"source-id":R.field.options.sourceId,"max-height":"500",loading:R.loading,"is-select":"",multiple:e(k)},null,8,["selected","current","limit","mainEntryId","total","showFields","data","source-id","loading","multiple"])]),_:1},8,["modelValue"])],64)}}});const Ka=oe(Ha,[["__scopeId","data-v-b98c6e75"]]),Ya=O({__name:"TileSelect",props:{context:{},loading:{type:Boolean},field:{}},setup(l){const d=l,{sourceInfo:o,otherFieldInfos:s,authDisabled:t,handleAddOrEdit:r,normlMultiple:n,tableData:p,extractId:u,getSelected:a,switchSelected:m,isAddAuth:c,isView:y,isViewAuth:k}=d.context;return(S,D)=>{const $=Vl,h=ao,w=Ll,I=bl,L=oo;return We((i(),C("div",{class:"tile_select"},[(i(!0),C(N,null,X(e(p),F=>(i(),C(N,{key:e(u)(F)},[!e(y)||e(a)(F)?(i(),_(w,{key:0,class:ye(["tile_select-card",{"no-pointer":e(y)&&!e(k)}]),shadow:"hover",onClick:P=>e(m)(F)},{default:v(()=>{var P;return[z("div",{class:"card-body",style:Se({"padding-left":e(y)?"0px":"26px"})},[e(y)?B("",!0):(i(),C(N,{key:0},[e(n)?(i(),_($,{key:0,class:"card-option","model-value":e(a)(F),label:!0},{default:v(()=>[Q(ce(),1)]),_:2},1032,["model-value"])):(i(),_(h,{key:1,class:"card-option","model-value":e(a)(F),label:!0},{default:v(()=>[Q(ce(),1)]),_:2},1032,["model-value"]))],64)),z("div",{class:"card-title"},[b(je,{style:{"max-width":"100%"},content:e(xe)({rowData:F,field:S.field,fields:(P=e(o))==null?void 0:P.fields})},null,8,["content"])]),b(Hl,{style:{"line-height":"1.2","margin-top":"7px"},fieldInfos:e(s),data:F},null,8,["fieldInfos","data"])],4),e(y)?B("",!0):(i(),C("div",{key:0,onClick:D[0]||(D[0]=ve(()=>{},["stop"]))},[b(wl,{class:"card-operate",context:S.context,row:F,isViewOperate:""},null,8,["context","row"])]))]}),_:2},1032,["class","onClick"])):B("",!0)],64))),128)),!S.loading&&!e(p).length?(i(),C("div",{key:0,class:"tile_select-empty"}," 没有可选择的选项 ")):B("",!0),e(c)?(i(),_(w,{key:1,class:ye(["tile_select-card tile_select-add",{"is-disabled":e(t)}]),shadow:"hover",onClick:D[1]||(D[1]=ve(F=>e(r)(),["stop"]))},{default:v(()=>[b(I,{type:"primary",underline:!1,disabled:e(t),icon:e(to)},{default:v(()=>[Q(" 新增 ")]),_:1},8,["disabled","icon"])]),_:1},8,["class"])):B("",!0)])),[[L,S.loading]])}}});const Ga=oe(Ya,[["__scopeId","data-v-59ee583a"]]);function Ja({message:l="确定删除该条数据",...d}){return fl.confirm(l,"操作确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",beforeClose:async(o,s,t)=>{if(o==="confirm"){s.confirmButtonLoading=!0;try{await no(d),t(),ro.success("删除成功!")}finally{s.confirmButtonLoading=!1}}else t()}})}const Qa=O({inheritAttrs:!1,__name:"Base",props:{field:{},modelValue:{},index:{},onlySelect:{type:Boolean},multiple:{type:Boolean},isSon:{type:Boolean},isView:{type:Boolean},labelSuffixEl:{}},emits:["update:modelValue","change"],setup(l,{expose:d,emit:o}){const s=l,t=o,r=()=>{I()},n=ko(Ie({...Ve(s),loadCallback:r,handleDelete(W){return Ja({id:W,entryId:p.value??""})},async handleCancelLink(){return await fl.confirm("您确定要取消关联吗?","操作确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},async handleBtachCancelLink(){return await fl.confirm("您确定要批量取消关联吗?","操作确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})}}),t),{mainEntryId:p,tableDataParams:u,selectMode:a,viewVisible:m,dataId:c,formEnterProps:y,addOrEditVisible:k,tableData:S,handleEditSuccess:D,hadnleAddSuccess:$,handleFill:h,lazyMark:w}=n,{getData:I,tableData:L,loading:F,current:P,limit:T,total:K}=so(u);return pe(L,()=>S.value=L.value),d({handleFill:h}),(W,M)=>{var de;const Y=Ae;return i(),C(N,null,[e(a)===e(Z).drop?(i(),_($o,{key:0,context:e(n),field:W.field,loading:e(F)},null,8,["context","field","loading"])):e(a)===e(Z).dialog?(i(),_(Ka,{key:1,current:e(P),"onUpdate:current":M[0]||(M[0]=ne=>E(P)?P.value=ne:null),limit:e(T),"onUpdate:limit":M[1]||(M[1]=ne=>E(T)?T.value=ne:null),total:e(K),context:e(n),field:W.field,loading:e(F),index:W.index,labelSuffixEl:W.labelSuffixEl},null,8,["current","limit","total","context","field","loading","index","labelSuffixEl"])):e(a)===e(Z).tile?(i(),_(Ga,{key:2,context:e(n),field:W.field,loading:e(F)},null,8,["context","field","loading"])):B("",!0),e(w).has(0)?(i(),_(io,{key:3,modelValue:e(m),"onUpdate:modelValue":M[2]||(M[2]=ne=>E(m)?m.value=ne:null),sourceId:W.field.options.sourceId,dataId:e(c)},null,8,["modelValue","sourceId","dataId"])):B("",!0),e(w).has(1)?(i(),_(uo,{key:4,modelValue:e(k),"onUpdate:modelValue":M[3]||(M[3]=ne=>E(k)?k.value=ne:null),title:e(y).dataId?"编辑":"新增",prop:e(y),isSaveReturnDetails:!e(u).disableRequest,saveConditions:(de=e(u).conditions)!=null&&de.length?[e(u).conditions]:[],onSuccess:e($),onEditSuccess:e(D)},null,8,["modelValue","title","prop","isSaveReturnDetails","saveConditions","onSuccess","onEditSuccess"])):B("",!0),e(a)!==e(Z).drop?We((i(),_(Y,{key:5,"model-value":JSON.stringify(W.modelValue)},null,8,["model-value"])),[[Sl,!1]]):B("",!0)],64)}}});export{Ua as S,Qa as _,To as a,Ea as b,Ta as m,wo as u};
