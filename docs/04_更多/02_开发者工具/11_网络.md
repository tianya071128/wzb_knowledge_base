# 网络(Network)

## 录制网络请求

默认情况下，只要开发者工具处于打开状态，开发者工具就会记录在 Network 面板中的所有网络请求。

### 停止录制网络请求

有两种方式停止录制：

- 点击 Network 面板上的图标停止录制网络。此图标会变为灰色，表示开发者工具不再记录请求。

- 按 Command> + E (Mac) 或 Ctrl + E（Windows、Linux），且 Network 面板处于聚焦状态。

![img](/img/197.jpg)

### 在网页加载过程中保存请求

若要在网页加载过程中保存请求，请选中网络面板上的保留日志复选框。 在您停用保留日志之前，开发者工具会保存所有请求。

![img](/img/198.jpg)

### 在网页加载期间截取屏幕截图

截取屏幕截图以分析用户在等待页面加载时看到的内容。捕获后，您可以通过以下方式与屏幕截图互动：

- 将鼠标悬停在屏幕截图上，即可查看该屏幕截图的截取点。“概览”窗格中会显示一条黄线。

- 点击屏幕截图的缩略图以滤除截取屏幕截图后发生的所有请求。

- 双击缩略图可放大。

![img](/img/199.jpg)

### 重放 XHR 请求

要重放 XHR 请求，可执行以下操作：

- 选择请求，然后按 R。

- 右键点击相应请求，然后选择 重放 XHR 请求

::: tip

只有请求类型是 XHR 的请求才能重放

:::

![img](/img/200.jpg)

## 搜索网络标头和响应

### 搜索所有请求

搜索所有资源的 HTTP 标头和响应，以查找特定字符串或正则表达式，请使用**搜索**窗格。

![img](/img/200.jpg)

### 单个请求中搜索响应

在请求表格中单击某一个请求, 在 `预览` 和 `响应` 标签页中获取焦点, 按下 `Ctrl + F` 启用通用搜索

## 更改网络加载行为

### 屏蔽请求

可设置屏蔽指定的请求

- 使用 `屏蔽网络请求` 面板

- 在请求列表中, 右键单击的选项

![img](/img/213.jpg)

### 停用缓存

![img](/img/201.jpg)

### 清除缓存

右键点击请求表格中的任意位置，然后选择清除浏览器缓存

![img](/img/202.jpg)

### 清除 cookie

右键点击请求表格中的任意位置，然后选择清除浏览器 Cookie。

![img](/img/204.jpg)

### 模拟网络状态

可通过网络限制菜单模拟如下几种状态：

- 离线模拟：可模拟网络离线状态, 可用于测试 [渐进式 Web 应用](https://web.dev/explore/progressive-web-apps?hl=zh-cn)

- 模拟慢速网络连接

- 创建自定义节流配置文件

![img](/img/203.jpg)

### 替换用户代理

即 **navigator.userAgent** 的值，一般用于推断当前设备

![img](/img/205.jpg)

## 过滤请求

### 按资源过滤请求

使用过滤框可按资源（例如请求的网域或大小）过滤请求：

- 反转过滤器：过滤器框旁边的反转复选框。**用于过滤出不符合过滤条件的请求**

- 使用多个属性，只需用空格分隔各个属性即可：例如，mime-type:image/gif larger-than:1K 会显示大于 1 KB 的所有 GIF。 这些多属性过滤器等同于 AND 操作。不支持 OR 运算。

![img](/img/206.jpg)

### 按类型过滤请求

可按照请求类型进行过滤，若要**同时启用多个类型的过滤条件**，请按住 Command (Mac) 或 Ctrl（Windows、Linux），然后点击。

![img](/img/207.jpg)

### 按时间过滤请求

在概览窗格上向左或向右拖动，以仅显示在该时间范围内处于活跃状态的请求。过滤条件是包含边界值。系统会显示在突出显示的时间段内处于活动状态的所有请求。

![img](/img/208.jpg)

### 隐藏数据网址

在请求表格中看到的任何以 `data:` 开头的请求都是数据网址

![img](/img/209.jpg)

### 隐藏扩展程序网址

可以滤除由 Chrome 中已安装的扩展程序发送的不相关请求。扩展程序请求中包含以 `chrome-extension://` 开头的网址。

![img](/img/210.jpg)

### 仅显示带有被屏蔽的响应 Cookie 的请求

只显示被屏蔽的响应 Cookie 的请求，用于快速定位 Cookie 的问题

![img](/img/211.jpg)

### 仅显示已屏蔽的请求

只显示[被屏蔽的请求](#屏蔽请求)

### 仅显示第三方请求

只显示与网页来源不同的请求

![img](/img/212.jpg)

## 分析请求

### 查看请求日志

可通过请求表格查看请求信息：

- 默认情况下，请求表格会显示以下列：名称、状态、HTTP 状态代码 等

- 添加或移除列：自定义表格相关列

- 添加自定义列：右键点击标题行 -> 响应标头 -> 管理标头列 -> 设置

![img](/img/214.jpg)

### 按内嵌框架对请求进行分组

可对**网页上的内嵌框架发起的请求**进行分组

![img](/img/215.jpg)

### 分析 WebSocket 连接

![img](/img/216.jpg)

### 查看发起方和依赖项

查看请求的发起者和依赖项，按住 Shift 键，并将鼠标指针悬停在“请求”表格中的请求上：

- 发起者的颜色为绿色

- 依赖项的颜色为红色

![img](/img/220.jpg)

### 其他信息

- 加载事件：DOMContentLoaded 事件的颜色为蓝色，load 事件为红色。

- 请求总数：此数字仅跟踪自开发者工具打开后记录的请求。如果在开发者工具打开之前发生了其他请求，这些请求不计入在内。

- 查看已传输和已加载资源的总大小：已传输和已加载（未压缩）资源的总大小。

![img](/img/221.jpg)

### 查看报文

点击请求表格中的请求，可查看报文的相关信息

#### 查看 HTTP 标头

使用 `标头` 标签页查看

::: tip 预配标头警告

有时，会显示 `显示的是预配标头...` 警告消息。原因可能如下：

- 该请求不是通过网络发送的，而是从本地缓存提供的，本地缓存不会存储原始请求标头。在这种情况下，可以停用缓存以查看完整的请求标头。

- 网络资源无效。

![img](/img/217.jpg)

:::

#### 请求载荷

使用 `载荷` 标签页查看

#### 预览响应

使用 `预览` 标签页查看

#### 查看响应

使用 `响应` 标签页查看

#### 发起请求的堆栈轨迹

当 JavaScript 语句导致请求资源时，可使用 `启动器` 标签页查看，以查看发起该请求的堆栈轨迹。

![img](/img/218.jpg)

#### 查看请求的时间线

查看请求的时间细分数据，使用 `时间` 标签页查看

![img](/img/219.jpg)

#### 查看 Cookie

查看在请求的 HTTP 标头中发送的 Cookie，使用 `Cookie` 标签页查看。如果没有携带 CooKie, 就不存在 `Cookie` 标签页
