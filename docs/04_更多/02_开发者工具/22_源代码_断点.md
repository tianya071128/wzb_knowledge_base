# 断点

开发者工具提供了各类断点，以满足不同时机时暂停执行代码

::: tip

如果设置了断点, 但是没有触发，可以检查下触发断点位置的文件是否在忽略列表中。

:::

## 断点类型概览

| 断点类型                      | 时机                                                                 |
| ----------------------------- | -------------------------------------------------------------------- |
| [代码行](#代码行断点)         | 暂停在确切的代码区域上。                                             |
| [条件代码行](#条件断点)       | 在确切的代码区域暂停，但仅当条件成立时。                             |
| [日志点](#记录代码行断点)     | 在不暂停执行的情况下将消息记录到**控制台**。                         |
| [DOM](#dom-更改断点)          | 暂停更改或移除特定 DOM 节点或其子节点的代码。                        |
| [XHR](#xhr-提取断点)          | 当 XHR 网址包含字符串模式时暂停。                                    |
| [事件监听器](#事件监听器断点) | 暂停在事件（例如 `click`）触发后运行的代码。                         |
| [异常](#异常断点)             | 暂停抛出已捕获或未捕获异常的代码行。                                 |
| [函数](#函数断点)             | 每当调用特定函数时暂停。                                             |
| [可信类型](#可信类型断点)     | 出现[可信类型](https://www.w3.org/TR/trusted-types/)违规行为时暂停。 |

## 代码行断点

开发者工具总是会在执行这行代码之前暂停，有两种方式设置代码行断点：

- 在 `编辑器` 窗格中点击对应的行号

- 在代码中设置：从代码中调用 `debugger` 可在该行暂停。

![image](/img/254.jpg)

## 条件断点

仅当满足设置的条件时, 才会暂停代码执行，设置条件断点：

1. 在 `编辑器` 窗格中，代码行左侧是行号列。右键点击该行。

2. 选择添加条件断点。代码行下方会显示一个对话框。

3. 在对话框中输入条件。

4. 按 `Enter` 键激活断点。行号列顶部会显示一个带问号的橙色图标。

![image](/img/255.jpg)

## 记录代码行断点

使用日志代码行断点 (logpoint) 将消息记录到 `控制台` 中，**此操作不会暂停执行**，也不会因 `console.log()` 调用而使代码杂乱无章。

设置过程与 [条件断点](#条件断点) 类似：

1. 在 `编辑器` 窗格中，代码行左侧是行号列。右键点击该行。

2. 选择添加日志点。代码行下方会显示一个对话框。

3. 在对话框中输入您的日志消息。

4. 按 `Enter` 键激活断点。行号列顶部会显示一个包含两个点的粉色图标。

![image](/img/256.jpg)

## DOM 更改断点

在更改 DOM 节点或其子级的代码上暂停，可以使用 DOM 更改断点

设置如下：

![image](/img/257.jpg)

可以在以下位置找到 DOM 更改断点的列表：

- 元素 > DOM 断点窗格。

- 源代码 > DOM 断点侧窗格。

### DOM 更改断点的类型

- 子树修改。当移除或添加当前所选节点的子项，或更改子项的内容时触发。在子节点属性发生更改或对当前所选节点进行任何更改时不触发。

- 属性修改：在当前所选节点上添加或移除属性，或属性值发生更改时触发。

- 节点移除：在移除当前选定的节点时触发。

### 断点触发

当 JS 操作更改了节点后，触发对应的断点

![image](/img/258.jpg)

## XHR/提取断点

在 `XHR` 的**请求网址**包含指定字符串时中断，可以使用 `XHR/提取断点`。开发者工具会在 XHR 调用 `send()` 的代码行暂停。

![image](/img/259.jpg)

## 事件监听器断点

暂停在事件触发后运行的事件监听器代码上

![image](/img/260.jpg)

## 异常断点

在**抛出已捕获**或**未捕获异常**的代码行暂停，可以使用异常断点。

![image](/img/261.jpg)

## 函数断点

在每次调用特定函数时暂停，请调用 `debug(functionName)`，其中 `functionName` 是您要调试的函数

```js
function sum(a, b) {
  let result = a + b; // DevTools 在这一行暂停。
  return result;
}
debug(sum); // 传递函数对象，而不是字符串。
sum();
```

## 可信类型断点

[参考](https://developer.chrome.com/docs/devtools/javascript/breakpoints?hl=zh-cn#trusted-type)
