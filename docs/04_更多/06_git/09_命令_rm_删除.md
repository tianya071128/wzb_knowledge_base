# git rm

## 作用

从工作树和索引中删除文件

## 概述

```text
git rm [-f | --force] [-n] [-r] [--cached] [--ignore-unmatch]
       [--quiet] [--pathspec-from-file=<file> [--pathspec-file-nul]]
       [--] [<pathspec>…​]
```

## 描述

* 用于从 Git 仓库中移除文件，同时可以选择是否删除工作区的文件。它不仅会删除文件，还会将删除操作暂存，以便后续通过 `git commit` 提交到仓库，彻底从版本控制中移除该文件
* 从索引中，或从工作树和索引中删除与 `pathspec` 匹配的文件。

## 与直接删除文件的区别

* **手动删除文件**: 仅删除工作区文件，Git 会检测到 “已删除但未暂存”，需手动执行 `git add ` 将删除操作添加到暂存区。
* **`git rm`**: 一步完成 “删除工作区文件 + 暂存删除操作”，无需额外 `git add`。

## 仅从暂存区移除，保留工作区文件（`--cached`）

常见场景是在希望停止跟踪但保留本地文件情况下使用:

```bash
git rm --cached <文件路径>
```

## 选项

### `<路径规范>…`: 要删除的文件路径

- **作用**：直接删除符合路径规范的文件。**注意必须是已跟踪文件**

### `--cached`: 仅从暂存区移除，保留工作区文件

* **作用**：仅将文件从 Git 跟踪列表中移除（暂存区），但**保留工作区的文件**（不再被 Git 跟踪）。

### `-f, --force`: 强制删除

* **作用**：强制删除已修改但未暂存的文件（避免因文件有未提交的修改而删除失败）。

### `-r`: 递归删除目录

* **作用**：递归删除指定目录及其所有子文件和子目录。

