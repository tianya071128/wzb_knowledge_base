# 模块系统

## 模块化历史

- 早期 JavaScript 并没有模块的概念, 为了解决隔离作用域，防止污染全局命名空间的问题, 大部分都是基于 [IIFE(立即执行函数)](https://developer.mozilla.org/zh-CN/docs/Glossary/IIFE)

  - AMD
  - CMD
  - UMD

- [`CommonJS`](https://nodejs.cn/api/modules.html) 模块系统: Node.js 的 CommonJS 模块系统

  - 对于 Node.js 环境：是直接支持的，本质上类似于使用了函数封装了模块代码

    ```js
    (function(exports, require, module, filename, dirname) {
    // 模块代码实际上就在这里
    });
    ```
    
  - 对于浏览器环境：不支持，`webpack` 等构建工具实现了类似的模块系统
  
- [ES 模块](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules)：`ECMAScript` 原生支持的模块系统，标准的模块规范
  
  - 对于 Node.js 环境：需要一些配置 [启用](https://nodejs.cn/api/esm.html#%E5%90%AF%E7%94%A8)
  - 对于浏览器环境：现代浏览器是支持的，并且新一代构建工具 [vite](https://cn.vitejs.dev/) 默认构建后直接使用 ES 模块, 只是做了一些兼容处理。而对于 `webpackv5` 而言，虽然可以使用 ES 模块, 但本质上最终构建出自行实现的 `CommonJS` 模块系统
  
  ::: tip 总结
  
  随着 JS 的不断发展, 在模块化下形成了规范, 但因为历史原因, 所以很多库都会生成支持多种模块系统的文件。
  
  但是对于使用者，应该专注于 ES模块 的使用，没有必要浪费过多精力学习过时的模块系统
  
  :::
  
  