---
title: HTTP 请求方法
date: 2021-10-21 15:00:00
permalink: /http/method
categories: 
  - 其他
  - HTTP
tags: 
  - null
---

# 请求方法

请求方法就是**客户端发出一个"动作指令", 要求服务器对 URI 定位的资源执行这个动作**

::: warning 注意

资源是存储在服务器上的, 服务器拥有绝对的决策权, 即使客户端发出了"动作指令", 执不执行也是服务器决定的

:::

HTTP/1.1 规定了八种方法, **单词必须是大写形式**

1. GET：获取资源，可以理解为读取或者下载数据；
2. HEAD：获取资源的元信息；
3. POST：向资源提交数据，相当于写入或上传数据；
4. PUT：类似 POST；
5. DELETE：删除资源；
6. CONNECT：建立特殊的连接隧道；
7. OPTIONS：列出可对资源实行的方法；
8. TRACE：追踪请求 - 响应的传输路径。

常用的是 `GET`、`POST`、`PUT`、`DELETE` 四种, 也就是 restful api 接口规范中定义的四种

## 安全与幂等

安全: 请求方法不会破坏服务器上的资源

幂等: 多次执行相同的操作，结果也都是相同的，即多次“幂”后结果“相等”。

从请求方法的语义来看:

安全: 只有 `GET` 和 `HEAD` 是安全的

幂等: 

* `GET` 和 `HEAD` 是幂等的, 多次请求资源也是相同的
* `DELETE` 也是幂等的, 多次删除资源结果也是一样, 同一资源只会删除一次
* `POST` 不是幂等的, POST 是“新增或提交数据”，多次提交数据会创建多个资源，所以不是幂等的
* `PUT` 是“替换或更新数据”，多次更新一个资源，资源还是会第一次更新的状态，所以是幂等的。

## GET: 获取资源

从服务器上获取指定资源, 这个资源既可以是静态的文本、页面、图片、视频，也可以是由 PHP、Java 动态生成的页面或者其他格式的数据。

* 一般使用 GET 请求缓存资源, **在 HTTP 规范, 并没有规定一定只有 get 请求才能缓存**

  ::: tip 测试

  <http-test type="cache"/>

  打开控制台, 查看请求可知, 在浏览器中, 对 post 请求是不会缓存的，**响应报文中是存在 `Cache-Control: max-age=60`，但是客户端不会进行缓存**

  :::

* GET 请求一般通过 url 传参, 但是也可以实现 body 请求体传参

  通过 postman 等工具是可以 body 传参的, 在 `ajax` 暂时没有发现方法

## POST: 新建资源

向资源提交数据，相当于写入或上传数据, 与 `PUT` 的语义很接近

* 有一种说法是 `POST` 会至少分两个包发送, 可能是以前的实现, 目前是没有的

  通过抓包测试, 并不会发送两个包, 只有 body 请求体过大, TCP 才会正常拆包

## PUT: 替换或更新资源

PUT 是修改, update 的含义, 而 POST 是新建, create 的含义

## DELETE: 删除资源

一般而言, 服务器上的资源并不会真正意义上的删除, 而是增加一个删除的标记而已

## OPTIONS: 可对资源实行的方法, 跨域预检机制

这个请求通常在出现跨域的时候, 当请求为跨域请求并且是 非简单类型请求([具体可见](http://www.ruanyifeng.com/blog/2016/04/cors.html)) 时浏览器会自动发送

## 其他方法

* HEAD: 获取资源的元信息；

  跟 `GET` 类似, 但是服务器不会返回请求的实体数据, 只会传回响应头, 用于给客户端这个资源的信息

  ::: tip 测试

  <http-test type="head"/>

  打开控制台, 查看请求可知, 请求并没有传回响应体。**这里 `Node` 服务端也做了处理，`HEAD` 请求会自动不传输数据**

  :::

* CONNECT: 是一个比较特殊的方法，要求服务器为客户端和另一台远程服务器建立一条特殊的连接隧道，这时 Web 服务器在中间充当了代理的角色。

* TRACE: 方法多用于对 HTTP 链路的测试或诊断，可以显示出请求 - 响应的传输路径。它的本意是好的，但存在漏洞，会泄漏网站的信息，所以 Web 服务器通常也是禁止使用。

* 扩展方法: 可自行扩展方法, HTTP 有很强的扩展性, 只要请求-应答双方自行约定

## 资料

* [GET 和 POST 的区别](https://www.zhihu.com/question/28586791/answer/767316172?utm_source=wechat_session&utm_medium=social&utm_oi=1039662417399181312&utm_content=group3_Answer&utm_campaign=shareopn): 分析的很到位

